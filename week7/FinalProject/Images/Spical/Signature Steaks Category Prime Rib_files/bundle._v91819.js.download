!function(window,undefined){var readyList,rootjQuery,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim="1.10.2".trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(event){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())},detach=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))};function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return!jQuery.isWindow(obj)&&(!(1!==obj.nodeType||!length)||("array"===type||"function"!==type&&(0===length||"number"==typeof length&&0<length&&length-1 in obj)))}jQuery.fn=jQuery.prototype={jquery:"1.10.2",constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"!=typeof selector)return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this));if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&3<=selector.length?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(0<=j&&j<len?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(clone=copyIsArray?(copyIsArray=!1,src&&jQuery.isArray(src)?src:[]):src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(!0===wait?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);(jQuery.isReady=!0)!==wait&&0<--jQuery.readyWait||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(jQuery.support.ownLast)for(key in obj)return core_hasOwn.call(obj,key);for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:function(data){return window.JSON&&window.JSON.parse?window.JSON.parse(data):null===data?data:"string"==typeof data&&(data=jQuery.trim(data))&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml;if(!data||"string"!=typeof data)return null;try{window.DOMParser?xml=(new DOMParser).parseFromString(data,"text/xml"):((xml=new ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:core_trim&&!core_trim.call("\ufeffÂ ")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;j<l;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var ret=[],i=0,length=elems.length;for(inv=!!inv;i<length;i++)inv!==!!callback(elems[i],i)&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,ret=[];if(isArraylike(elems))for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&(ret[ret.length]=value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),(proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))}).guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw);else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(fn=raw?(fn.call(elems,value),null):(bulk=fn,function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document),function(window,undefined){var i,support,cachedruns,Expr,getText,isXML,compile,outermostContext,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=!1,sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rsibling=new RegExp(whitespace+"*[+~]"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=(context=context||document).nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return function(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)),results}(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}for(i in isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},support=Sizzle.support={},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(docElem=(document=doc).documentElement,documentIsHTML=!isXML(doc),parent&&parent.attachEvent&&parent!==parent.top&&parent.attachEvent("onbeforeunload",function(){setDocument()}),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(void 0!==context.getElementsByTagName)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("t",""),div.querySelectorAll("[t^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),contains=rnative.test(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return compare?1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0===val?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]&&void 0!==match[4]?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result+" ").indexOf(check):"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf.call(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if("@"<elem.nodeName||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if((cache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&cache[0]===dirkey){if(!0===(data=cache[1])||data===cachedruns)return!0===data}else if((cache=outerCache[dir]=[dirkey])[1]=matcher(elem,context,xml)||cachedruns,!0===cache[1])return!0}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf.call(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf.call(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)(cached=matcherFromTokens(group[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,function(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=0<setMatchers.length,byElement=0<elementMatchers.length,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers))}return cached},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return(val=elem.getAttributeNode(name))&&val.specified?val.value:!0===elem[name]?name.toLowerCase():null}),jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||function(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;-1<(index=jQuery.inArray(arg,list,index));)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function(fn){return fn?-1<jQuery.inArray(fn,list):!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=[context,(args=args||[]).slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=1<arguments.length?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(1<length)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(support){var all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");if(div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*")||[],!(a=div.getElementsByTagName("a")[0])||!a.style||!all.length)return support;opt=(select=document.createElement("select")).appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",support.getSetAttribute="t"!==div.className,support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.opacity=/^0.5/.test(a.style.opacity),support.cssFloat=!!a.style.cssFloat,support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,support.inlineBlockNeedsLayout=!1,support.shrinkWrapBlocks=!1,support.pixelPosition=!1,support.deleteExpando=!0,support.noCloneEvent=!0,support.reliableMarginRight=!0,support.boxSizingReliable=!0,input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}for(i in(input=document.createElement("input")).setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),(fragment=document.createDocumentFragment()).appendChild(input),support.appendChecked=input.checked,support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})div.setAttribute(eventName="on"+i,"t"),support[i+"Bubbles"]=eventName in window||!1===div.attributes[eventName].expando;for(i in div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,jQuery(support))break;return support.ownLast="0"!==i,jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];body&&((container=document.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(tds=div.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",jQuery.swap(body,null!=body.style.zoom?{zoom:1}:{},function(){support.boxSizing=4===div.offsetWidth}),window.getComputedStyle&&(support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,(marginDiv=div.appendChild(document.createElement("div"))).style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),typeof div.style.zoom!==core_strundefined&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=3!==div.offsetWidth,support.inlineBlockNeedsLayout&&(body.style.zoom=1)),body.removeChild(container),container=div=tds=marginDiv=null)}),all=select=fragment=opt=a=input=null,support}({});var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||data!==undefined||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=core_deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){i=(name=jQuery.isArray(name)?name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?[name]:(name=jQuery.camelCase(name))in thisCache?[name]:name.split(" ")).length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}jQuery.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){if(elem.nodeType&&1!==elem.nodeType&&9!==elem.nodeType)return!1;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||!0!==noData&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({data:function(key,value){var attrs,name,data=null,i=0,elem=this[0];if(key!==undefined)return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):1<arguments.length?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):null;if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)0===(name=attrs[i].name).indexOf("data-")&&dataAttr(elem,name=jQuery.camelCase(name.slice(5)),data[name]);jQuery._data(elem,"parsedAttrs",!0)}return data},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n\f]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,1<arguments.length)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,1<arguments.length)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;0<=cur.indexOf(" "+clazz+" ");)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else type!==core_strundefined&&"boolean"!==type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||!1===value?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(rclass," ").indexOf(className))return!0;return!1},val:function(value){var ret,hooks,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(null==(val=isFunction?value.call(this,i,jQuery(this).val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))})):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)((option=options[i]).selected=0<=jQuery.inArray(jQuery(option).val(),values))&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===core_strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),value===undefined?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:null==(ret=jQuery.find.attr(elem,name))?undefined:ret:null!==value?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return(1!==nType||!jQuery.isXMLDoc(elem))&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=jQuery.expr.attrHandle[name]||jQuery.find.attr;jQuery.expr.attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var fn=jQuery.expr.attrHandle[name],ret=isXML?undefined:(jQuery.expr.attrHandle[name]=undefined)!=getter(elem,name,isXML)?name.toLowerCase():null;return jQuery.expr.attrHandle[name]=fn,ret}:function(elem,name,isXML){return isXML?undefined:elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:undefined}},jQuery.expr.attrHandle.id=jQuery.expr.attrHandle.name=jQuery.expr.attrHandle.coords=function(elem,name,isXML){var ret;return isXML?undefined:(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&ret.specified?ret.value:undefined},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}}})),jQuery.support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}),jQuery.support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=0<=jQuery.inArray(jQuery(elem).val(),value)}},jQuery.support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||((eventHandle=elemData.handle=function(e){return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)}).elem=elem),t=(types=(types||"").match(core_rnotwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(core_rnotwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(0<=type.indexOf(".")&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=1<i?bubbleType:special.bindType||type,(handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&jQuery.acceptData(cur)&&handle.apply&&!1===handle.apply(cur,data)&&event.preventDefault();if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(eventPath.pop(),data))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){(tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue,args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if((args[0]=event).delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))!==undefined&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)matches[sel=(handleObj=handlers[i]).selector+" "]===undefined&&(matches[sel]=handleObj.needsContext?0<=jQuery(sel,this).index(cur):jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)event[prop=copy[i]]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(doc=(eventDoc=event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===core_strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||!1===src.returnValue||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1;jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0==attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0==--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=undefined),types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,(fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)}).guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"!=typeof types)return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=undefined),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)});for(type in types)this.off(type,selector,types[type]);return this},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var isSimple=/^.[^:#\[\.,]*$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(isSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return 0<=jQuery.inArray(elem,qualifier)!==not})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return(ret=this.pushStack(1<len?jQuery.unique(ret):ret)).selector=this.selector?this.selector+" "+selector:selector,ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?-1<pos.index(cur):1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){cur=ret.push(cur);break}return this.pushStack(1<ret.length?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),1<this.length&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}}),jQuery.extend({filter:function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},fragmentDiv=createSafeFragment(document).appendChild(document.createElement("div"));function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(1===content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events)for(type in delete curData.handle,curData.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!jQuery.support.noCloneEvent&&dest[jQuery.expando]){for(e in(data=jQuery._data(dest)).events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&manipulation_rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var args=jQuery.map(this,function(elem){return[elem.nextSibling,elem.parentNode]}),i=0;return this.domManip(arguments,function(elem){var next=args[i++],parent=args[i++];parent&&(next&&next.parentNode!==parent&&(next=this.nextSibling),jQuery(this).remove(),parent.insertBefore(elem,next))},!0),i?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback,allowIntersection){args=core_concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(l<=1||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback,allowIntersection)});if(l&&(first=(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,!allowIntersection&&this)).firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return 0<(destElements=getAll(clone,"script")).length&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!jQuery.support.tbody)for(j=(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild)&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(data=(id=elem[internalKey])&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==core_strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,core_deletedIds.push(id))}},_evalUrl:function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index]).style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||("none"!==(display=actualDisplay(nodeName,doc))&&display||((doc=((iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement))[0].contentWindow||iframe[0].contentDocument).document).write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.remove(),display}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,1<arguments.length)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(!("string"===(type=typeof value)&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),window.getComputedStyle?(getStyles=function(elem){return window.getComputedStyle(elem,null)},curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,(rsLeft=(rs=elem.runtimeStyle)&&rs.left)&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),""===ret?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return 0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(0,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";((style.zoom=1)<=value||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return 0<arguments.length?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){(ajaxLocation=document.createElement("a")).href="",ajaxLocation=ajaxLocation.href}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return 0<=off&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),0<self.length&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=undefined),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;for(i in(fireGlobals=s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&0<s.timeout&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=0<status?4:0,isSuccess=200<=status&&status<300||304===status,responses&&(response=function(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses)),response=function(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];current=dataTypes.shift();for(;current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,isSuccess=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){(script=document.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,!0)};function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:createStandardXHR,xhrSupported=jQuery.ajaxSettings.xhr(),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,(xhrSupported=jQuery.support.ajax=!!xhrSupported)&&jQuery.ajaxTransport(function(s){var callback;if(!s.crossDomain||jQuery.support.cors)return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?4===xhr.readyState?setTimeout(callback):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(undefined,!0)}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[function(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})}));1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block"));opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if(!jQuery.isEmptyObject(orig))for(prop in dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;for(prop in jQuery._removeData(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])}),orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit)for(unit=unit||start[3],parts=parts||[],start=+target||1;start/=scale=scale||".5",jQuery.style(tween.elem,prop,start+unit),scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations;);return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(!function(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){for(var prop,index=0,length=(props=jQuery.isFunction(props)?(callback=props,["*"]):props.split(" ")).length;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),((jQuery.Tween=Tween).prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}}).init.prototype=Tween.prototype,(Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0:tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}}).scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;return doc?(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box):void 0},jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),props={},curPosition={};curLeft=("absolute"===position||"fixed"===position)&&-1<jQuery.inArray("auto",[curCSSTop,curCSSLeft])?(curTop=(curPosition=curElem.position()).top,curPosition.left):(curTop=parseFloat(curCSSTop)||0,parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jQuery:(window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery}))}(window),function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(n=(a=t.parentNode).name,!(!t.href||!n||"map"!==a.nodeName.toLowerCase())&&(!!(r=e("img[usemap=#"+n+"]")[0])&&s(r))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(("absolute"===(s=n.css("position"))||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||0<=s)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return 0<t[s]||(t[s]=1,a=0<t[s],t[s]=0,a)}})}(jQuery),function(e,t){var i=0,s=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(n){}a(t)},e.widget=function(i,s,a){var n,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],n=u+"-"+i,a||(a=s,s=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),(h=new s).options=e.widget.extend({},h.options),e.each(a,function(i,a){return e.isFunction(a)?l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,n=this._superApply;return this._super=e,this._superApply=t,i=a.apply(this,arguments),this._super=s,this._superApply=n,i}}():l[i]=a,t}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r&&h.widgetEventPrefix||i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:n}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var a,n,r=s.call(arguments,1),o=0,h=r.length;o<h;o++)for(a in r[o])n=r[o][a],r[o].hasOwnProperty(a)&&n!==t&&(i[a]=e.isPlainObject(n)?e.isPlainObject(i[a])?e.widget.extend({},i[a],n):e.widget.extend({},n):n);return i},e.widget.bridge=function(i,a){var n=a.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,a=e.data(this,n);return a?e.isFunction(a[r])&&"_"!==r.charAt(0)?(s=a[r].apply(a,h))!==a&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t:e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new a(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var a,n,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},i=(a=i.split(".")).shift(),a.length){for(n=o[i]=e.widget.extend({},this.options[i]),r=0;a.length-1>r;r++)n[a[r]]=n[a[r]]||{},n=n[a[r]];if(i=a.pop(),1===arguments.length)return n[i]===t?null:n[i];n[i]=s}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,a){var n,r=this;"boolean"!=typeof i&&(a=s,s=i,i=!1),a?(s=n=e(s),this.bindings=this.bindings.add(s)):(a=s,s=this.element,n=this.widget()),e.each(a,function(a,o){function h(){return i||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=a.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,d=l[2];d?n.delegate(d,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var s=this;return setTimeout(function(){return("string"==typeof e?s[e]:e).apply(s,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,r=this.options[t];if(s=s||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var r,o=a?!0===a||"number"==typeof a?i:a.effect||i:t;"number"==typeof(a=a||{})&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),r&&e.effects&&e.effects.effect[o]?s[t](a):o!==t&&s[o]?s[o](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function s(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var n,r=Math.max,o=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,m=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var i,s,a=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=a.children()[0];return e("body").append(a),i=r.offsetWidth,a.css("overflow","scroll"),i===(s=r.offsetWidth)&&(s=a[0].clientWidth),a.remove(),n=i-s},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]);return{element:i,isWindow:s,isDocument:!!i[0]&&9===i[0].nodeType,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return m.apply(this,arguments);t=e.extend({},t);var n,p,f,g,v,y,b=e(t.of),_=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(_),k=(t.collision||"flip").split(" "),T={};return y=function(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(b),b[0].preventDefault&&(t.at="left top"),p=y.width,f=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,s=(t[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):u.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=u.test(s[1])?s[1]:"center",e=d.exec(s[0]),i=d.exec(s[1]),T[this]=[e?e[0]:0,i?i[0]:0],t[this]=[c.exec(s[0])[0],c.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=f:"center"===t.at[1]&&(v.top+=f/2),n=i(T.at,p,f),v.left+=n[0],v.top+=n[1],this.each(function(){var a,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),m=s(this,"marginLeft"),y=s(this,"marginTop"),w=d+m+s(this,"marginRight")+x.width,S=c+y+s(this,"marginBottom")+x.height,N=e.extend({},v),M=i(T.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?N.left-=d:"center"===t.my[0]&&(N.left-=d/2),"bottom"===t.my[1]?N.top-=c:"center"===t.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],e.support.offsetFractions||(N.left=h(N.left),N.top=h(N.top)),a={marginLeft:m,marginTop:y},e.each(["left","top"],function(i,s){e.ui.position[k[i]]&&e.ui.position[k[i]][s](N,{targetWidth:p,targetHeight:f,elemWidth:d,elemHeight:c,collisionPosition:a,collisionWidth:w,collisionHeight:S,offset:[n[0]+M[0],n[1]+M[1]],my:t.my,at:t.at,within:_,elem:u})}),t.using&&(l=function(e){var i=g.left-N.left,s=i+p-d,a=g.top-N.top,n=a+f-c,h={target:{element:b,left:g.left,top:g.top,width:p,height:f},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:s<0?"left":0<i?"right":"center",vertical:n<0?"top":0<a?"bottom":"middle"};p<d&&p>o(i+s)&&(h.horizontal="center"),f<c&&f>o(a+n)&&(h.vertical="middle"),h.important=r(o(i),o(s))>r(o(a),o(n))?"horizontal":"vertical",t.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,o=e.left-t.collisionPosition.marginLeft,h=a-o,l=o+t.collisionWidth-n-a;t.collisionWidth>n?0<h&&l<=0?(i=e.left+h+t.collisionWidth-n-a,e.left+=h-i):e.left=0<l&&h<=0?a:l<h?a+n-t.collisionWidth:a:0<h?e.left+=h:0<l?e.left-=l:e.left=r(e.left-o,e.left)},top:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,o=e.top-t.collisionPosition.marginTop,h=a-o,l=o+t.collisionHeight-n-a;t.collisionHeight>n?0<h&&l<=0?(i=e.top+h+t.collisionHeight-n-a,e.top+=h-i):e.top=0<l&&h<=0?a:l<h?a+n-t.collisionHeight:a:0<h?e.top+=h:0<l?e.top-=l:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var i,s,a=t.within,n=a.offset.left+a.scrollLeft,r=a.width,h=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-r-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];u<0?((i=e.left+c+p+m+t.collisionWidth-r-n)<0||o(u)>i)&&(e.left+=c+p+m):0<d&&((0<(s=e.left-t.collisionPosition.marginLeft+c+p+m-h)||d>o(s))&&(e.left+=c+p+m))},top:function(e,t){var i,s,a=t.within,n=a.offset.top+a.scrollTop,r=a.height,h=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-r-h,p="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,m="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];u<0?(s=e.top+p+m+f+t.collisionHeight-r-n,e.top+p+m+f>u&&(s<0||o(u)>s)&&(e.top+=p+m+f)):0<d&&(i=e.top-t.collisionPosition.marginTop+p+m+f-h,e.top+p+m+f>d&&(0<i||d>o(i))&&(e.top+=p+m+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,a,n,r=document.getElementsByTagName("body")[0],o=document.createElement("div");for(n in t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"}),s)t.style[n]=s[n];t.appendChild(o),(i=r||document.documentElement).insertBefore(t,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",a=e(o).offset().left,e.support.offsetFractions=10<a&&a<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,a=this.element[0].nodeName.toLowerCase(),n="textarea"===a,r="input"===a;this.isMultiLine=!!n||!r&&this.element.prop("isContentEditable"),this.valueMethod=this.element[n||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))i=s=t=!0;else{i=s=t=!1;var n=e.ui.keyCode;switch(a.keyCode){case n.PAGE_UP:t=!0,this._move("previousPage",a);break;case n.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case n.UP:t=!0,this._keyEvent("previous",a);break;case n.DOWN:t=!0,this._keyEvent("next",a);break;case n.ENTER:case n.NUMPAD_ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case n.TAB:this.menu.active&&this.menu.select(a);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}}},keypress:function(s){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault());if(!i){var a=e.ui.keyCode;switch(s.keyCode){case a.PAGE_UP:this._move("previousPage",s);break;case a.PAGE_DOWN:this._move("nextPage",s);break;case a.UP:this._keyEvent("previous",s);break;case a.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(n.inline?t.parent()[0]:n.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){for(var a in e.extend(t,i),i)null==i[a]&&(t[a]=i[a]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var n,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var a,s,n;s="div"===(a=t.nodeName.toLowerCase())||"span"===a,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(n=this._newInst(e(t),s)).settings=e.extend({},i||{}),"input"===a?this._connectDatepicker(t,n):s&&this._inlineDatepicker(t,n)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var a=e(t);i.append=e([]),i.trigger=e([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var a,s,n,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),("focus"===(a=this._get(i,"showOn"))||"both"===a)&&t.focus(this._showDatepicker),("button"===a||"both"===a)&&(s=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:s,title:s}):s)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]&&e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,a,s,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(s=a=i=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,a=s);return a},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var a=e(t);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,a,n,o){var h,l,u,d,c,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],r,p)),s(p.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+d,u/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,a=e(t),s=e.data(t,r);a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(s.append.remove(),s.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&((a=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&((a=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,a,n){var r,o,h,l,u=this._getInst(i);return 2===arguments.length&&"string"==typeof a?"defaults"===a?e.extend({},e.datepicker._defaults):u?"all"===a?e.extend({},u.settings):this._get(u,a):null:(r=a||{},"string"==typeof a&&((r={})[a]=n),u&&(this._curInst===u&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),s(u.settings,r),null!==h&&r.dateFormat!==t&&r.minDate===t&&(u.settings.minDate=this._formatDate(u,h)),null!==l&&r.dateFormat!==t&&r.maxDate===t&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),u),this._autoSize(u),this._setDate(u,o),this._updateAlternate(u),this._updateDatepicker(u)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,a,s,n=e.datepicker._getInst(t.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return(s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv))[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,s[0]),(i=e.datepicker._get(n,"onSelect"))?(a=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[a,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var a,s,n=e.datepicker._getInst(i.target);return e.datepicker._get(n,"constrainInput")?(a=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||s<" "||!a||-1<a.indexOf(s)):t},_doKeyUp:function(t){var a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a))&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(s){}return!0},_showDatepicker:function(t){var i,a,n,r,o,h,l;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(n=(a=e.datepicker._get(i,"beforeShow"))?a.apply(t,[t,i]):{})&&(s(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return!(r|="fixed"===e(this).css("position"))}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),o=e.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(h=e.datepicker._get(i,"showAnim"),l=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[h]?i.dpDiv.show(h,e.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i)))},_updateDatepicker:function(t){this.maxRows=4,(n=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(t),s=a[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<s&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,a){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(a?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(a?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=a&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=a&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>h&&s<h?Math.abs(i.left+s-h):0),i.top-=Math.min(i.top,i.top+n>l&&n<l?Math.abs(n+o):0),i},_findPos:function(t){for(var i,a=this._getInst(t),s=this._get(a,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,a,s,n,o=this._curInst;!o||t&&o!==e.data(t,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),a,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1,(n=this._get(o,"onClose"))&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),a=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==a)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,a){var s=e(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,i+("M"===a?this._get(n,"showCurrentAtPos"):0),a),this._updateDatepicker(n))},_gotoToday:function(t){var i,a=e(t),s=this._getInst(a[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(a)},_selectMonthYear:function(t,i,a){var s=e(t),n=this._getInst(s[0]);n["selected"+("M"===a?"Month":"Year")]=n["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,i,a,s){var n,r=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((n=this._getInst(r[0])).selectedDay=n.currentDay=e("a",s).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=a,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var a,s=e(t),n=this._getInst(s[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),(a=this._get(n,"onSelect"))?a.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,a,s,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),a=this._getDate(t),s=this.formatDate(i,a,this._getFormatConfig(t)),e(n).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,a,s){if(null==i||null==a)throw"Invalid arguments";if(""===(a="object"==typeof a?""+a:a+""))return null;var n,r,o,h,l=0,u=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),c=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,p=(s?s.dayNames:null)||this._defaults.dayNames,m=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,y=-1,b=-1,_=!1,x=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t},k=function(e){var t=x(e),s=RegExp("^\\d{1,"+("@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2)+"}"),n=a.substring(l).match(s);if(!n)throw"Missing number at position "+l;return l+=n[0].length,parseInt(n[0],10)},T=function(i,s,n){var r=-1,o=e.map(x(i)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,i){var s=i[1];return a.substr(l,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],l+=s.length,!1):t}),-1!==r)return r+1;throw"Unknown name at position "+l},w=function(){if(a.charAt(l)!==i.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;i.length>n;n++)if(_)"'"!==i.charAt(n)||x("'")?w():_=!1;else switch(i.charAt(n)){case"d":y=k("d");break;case"D":T("D",c,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=T("M",m,f);break;case"y":g=k("y");break;case"@":g=(h=new Date(k("@"))).getFullYear(),v=h.getMonth()+1,y=h.getDate();break;case"!":g=(h=new Date((k("!")-this._ticksTo1970)/1e4)).getFullYear(),v=h.getMonth()+1,y=h.getDate();break;case"'":x("'")?w():_=!0;break;default:w()}if(a.length>l&&(o=a.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=d?0:-100)),-1<b)for(v=1,y=b;!(y<=(r=this._getDaysInMonth(g,v-1)));)v++,y-=r;if((h=this._daylightSavingAdjust(new Date(g,v-1,y))).getFullYear()!==g||h.getMonth()+1!==v||h.getDate()!==y)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var a,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>a+1&&e.charAt(a+1)===t;return i&&a++,i},l=function(e,t,i){var a=""+t;if(h(e))for(;i>a.length;)a="0"+a;return a},u=function(e,t,i,a){return h(e)?a[t]:i[t]},d="",c=!1;if(t)for(a=0;e.length>a;a++)if(c)"'"!==e.charAt(a)||h("'")?d+=e.charAt(a):c=!1;else switch(e.charAt(a)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),s,n);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),r,o);break;case"y":d+=h("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(a)}return d},_possibleChars:function(e){var t,i="",a=!1,s=function(i){var a=e.length>t+1&&e.charAt(t+1)===i;return a&&t++,a};for(t=0;e.length>t;t++)if(a)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):a=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":a=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),n=s,r=this._getFormatConfig(e);try{n=this.parseDate(i,a,r)||s}catch(o){a=t?"":a}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=a?n.getDate():0,e.currentMonth=a?n.getMonth():0,e.currentYear=a?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,a){var r=null==i||""===i?a:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(a){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),r=s.getMonth(),o=s.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r))}l=h.exec(i)}return new Date(n,r,o)}(i):"number"==typeof i?isNaN(i)?a:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return(r=r&&"Invalid Date"==""+r?a:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,s=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),a="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(a,-i,"M")},next:function(){e.datepicker._adjustDate(a,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(a)},selectDay:function(){return e.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(a,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,a,s,n,r,o,h,l,u,d,c,p,m,f,g,v,y,b,_,x,k,T,w,S,D,M,N,C,A,P,I,F,H,j,z,E,L,O,R=new Date,W=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),J=this._get(e,"isRTL"),Y=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Q=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),G=1!==V[0]||1!==V[1],q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),$=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Q,et=e.drawYear;if(Z<0&&(Z+=12,et--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-V[0]*V[1]+1,X.getDate())),t=$&&t<$?$:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)--Z<0&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(J?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(J?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=K?this.formatDate(s,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):s,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(J?"w":"e")+"'>"+s+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(J?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?q:W,r=K?this.formatDate(r,o,this._getFormatConfig(e)):r,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=Y?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(J?h:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(J?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",k=0;V[0]>k;k++){for(T="",this.maxRows=4,w=0;V[1]>w;w++){if(S=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),D=" ui-corner-all",M="",G){if(M+="<div class='ui-datepicker-group",1<V[1])switch(w){case 0:M+=" ui-datepicker-group-first",D=" ui-corner-"+(J?"right":"left");break;case V[1]-1:M+=" ui-datepicker-group-last",D=" ui-corner-"+(J?"left":"right");break;default:M+=" ui-datepicker-group-middle",D=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===k?J?n:a:"")+(/all|right/.test(D)&&0===k?J?a:n:"")+this._generateMonthYearHeader(e,Z,et,$,X,0<k||0<w,m,f)+"</div><table class='ui-datepicker-calendar'><thead><tr>",N=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;x<7;x++)N+="<th"+(5<=(x+u+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+c[C=(x+u)%7]+"'>"+p[C]+"</span></th>";for(M+=N+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),F=G&&this.maxRows>I?this.maxRows:I,this.maxRows=F,H=this._daylightSavingAdjust(new Date(et,Z,1-P)),j=0;j<F;j++){for(M+="<tr>",z=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;x<7;x++)E=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],O=(L=H.getMonth()!==Z)&&!y||!E[0]||$&&H<$||X&&X<H,z+="<td class='"+(5<=(x+u+6)%7?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(H.getTime()===S.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+E[1]+(H.getTime()===q.getTime()?" "+this._currentClass:"")+(H.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!E[2]?"":" title='"+E[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":O?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===W.getTime()?" ui-state-highlight":"")+(H.getTime()===q.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);M+=z+"</tr>"}11<++Z&&(Z=0,et++),T+=M+="</tbody></table>"+(G?"</div>"+(0<V[0]&&w===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}_+=T}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,a,s,n,r,o){var h,l,u,d,c,p,m,f,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(n||!g)_+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(h=a&&a.getFullYear()===i,l=s&&s.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!h||u>=a.getMonth())&&(!l||s.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+o[u]+"</option>");_+="</select>"}if(y||(b+=_+(!n&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),m=(p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t})(d[0]),f=Math.max(m,p(d[1]||"")),m=a?Math.max(m,a.getFullYear()):m,f=s?Math.min(f,s.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m<=f;m++)e.yearshtml+="<option value='"+m+"'"+(m===i?" selected='selected'":"")+">"+m+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!n&&g&&v?"":"&#xa0;")+_),b+"</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(a,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,s,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=i&&t<i?i:t;return a&&a<s?a:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var s=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,a+(t<0?t:s[0]*s[1]),1));return t<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,a,s=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),a=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=a),i[1].match(/[+\-].*/)&&(o+=a)),(!s||t.getTime()>=s.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,a,n,r,o,h=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:h=!1,a=this.previousFilter||"",n=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),n===a?r=!0:n=a+n,o=RegExp("^"+i(n),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),(s=r&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s).length||(n=String.fromCharCode(t.keyCode),o=RegExp("^"+i(n),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),s.length?(this.focus(t,s),1<s.length?(this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),s=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",s.attr("id"))}),(t=s.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,a,n,r,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-s,n=this.activeMenu.scrollTop(),r=this.activeMenu.height(),o=t.height(),a<0?this.activeMenu.scrollTop(n+a):r<a+o&&this.activeMenu.scrollTop(n+a-r+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,s)},nextPage:function(t){var i,s,a;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-s-a<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,s,a;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(i=e(this)).offset().top-s+a}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["../datepicker"],factory):factory(jQuery.datepicker)}(function(datepicker){return datepicker.regional.en={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},datepicker.setDefaults(datepicker.regional.en),datepicker.regional.en}),function(factory){"function"==typeof define&&define.amd?define(["../datepicker"],factory):factory(jQuery.datepicker)}(function(datepicker){return datepicker.regional["fr-ca"]={closeText:"Fermer",prevText:"PrÃ©cÃ©dent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],monthNamesShort:["janv.","fÃ©vr.","mars","avril","mai","juin","juil.","aoÃ»t","sept.","oct.","nov.","dÃ©c."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},datepicker.setDefaults(datepicker.regional["fr-ca"]),datepicker.regional["fr-ca"]}),function(window,document,undefined){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,templateArgs=arguments,code=templateArgs[0],message="["+(module?module+":":"")+code+"] ";for(message+=templateArgs[1].replace(/\{\d+\}/g,function(match){var shiftedIndex=+match.slice(1,-1)+2;return shiftedIndex<templateArgs.length?toDebugString(templateArgs[shiftedIndex]):match}),message+="\nhttp://errors.angularjs.org/1.4.9/"+(module?module+"/":"")+code,i=2,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+(i-2)+"="+encodeURIComponent(toDebugString(templateArgs[i]));return new ErrorConstructor(message)}}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string};"i"!=="I".toLowerCase()&&(lowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},uppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s});var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(0<=length&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return void 0===value}function isDefined(value){return void 0!==value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}msie=document.documentMode,noop.$inject=[],identity.$inject=[];var isArray=Array.isArray;function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}var TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}var trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return 0<=index&&array.splice(index,1),index}function copy(source,destination){var stackSource=[],stackDest=[];if(destination){if(isTypedArray(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,function(value,key){"$$hashKey"!==key&&delete destination[key]}),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination)}return copyElement(source);function copyRecurse(source,destination){var key,h=destination.$$hashKey;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i]));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key]);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key]));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key]));return setHashKey(destination,h),destination}function copyElement(source){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var destination,needsRecurse=!1;return isArray(source)?(destination=[],needsRecurse=!0):isTypedArray(source)?destination=new source.constructor(source):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?(destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0])).lastIndex=source.lastIndex:isFunction(source.cloneNode)?destination=source.cloneNode(!0):(destination=Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination):destination}}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src))for(var key in dst=dst||{},src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!=o1&&o2!=o2)return!0;var length,key,keySet,t1=typeof o1;if(t1==typeof o2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&equals(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;for(key in keySet=createMap(),o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}var csp=function(){if(!isDefined(csp.rules)){var ngCspElement=document.querySelector("[ng-csp]")||document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-unsafe-eval"),noInlineStyle:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-inline-style")}}else csp.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return csp.rules},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name};function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=2<arguments.length?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return void 0===obj?undefined:(isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function fromJson(json){return isString(json)?JSON.parse(json):json}function timezoneToOffset(timezone,fallback){var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var timezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset());return function(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}(date,reverse*(timezoneOffset-date.getTimezoneOffset()))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),-1!==(splitPoint=keyValue.indexOf("="))&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),isDefined(key=tryDecodeURIComponent(key))&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(!0===arrayValue?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(!0===value?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}var ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"];function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(module=(appElement=element).getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(module=(appElement=candidate).getAttribute(name))}),appElement&&(config.strictDi=null!==function(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});config=extend({strictDi:!1},config);var doBootstrap=function(){if((element=jqLite(element)).injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}(modules=modules||[]).unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var skipDestroyOnNextJQueryCleanData,bindJQueryFired=!1;function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){for(var blockNodes,node=nodes[0],endNode=nodes[nodes.length-1],i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}var NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11;function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?function(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(isObject(val=toJsonReplacer(key,val))){if(0<=seen.indexOf(val))return"...";seen.push(val)}return val})}(obj):obj}var version={full:"1.4.9",major:1,minor:4,dot:9,codeName:"implicit-superannuation"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite");function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}var SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};function JQLite(element){if(element instanceof JQLite)return element;var argIsString,html,context,parsed;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}jqLiteAddNodes(this,argIsString?(html=element,context=context||document,(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]):element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;i<l;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&0<listenerFns.length||(removeEventListenerFn(element,type,handle),delete events[type])};forEach(type.split(" "),function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])})}else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=++jqId,expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&-1<(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}var JQLitePrototype=JQLite.prototype={ready:function(fn){var fired=!1;function trigger(){fired||(fired=!0,fn())}"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(0<=index?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:function(node){for(var key in jqCache[node.ng339])return!0;return!1}},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value))return element.style[name];element.style[name]=value},attr:function(element,name,value){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&2!==nodeType&&nodeType!==NODE_TYPE_COMMENT){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){return getText.$dv="",getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;jqLiteDealoc(element,!0),element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=function(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return!0===event.immediatePropagationStopped};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;1<eventFnsLength&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}(element,events));for(var types=0<=type.indexOf(" ")?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||((eventFns=events[type]=[]).specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||addEventListenerFn(element,type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,undefined,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){(element=jqLite(element)).on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT)for(var i=0,ii=(node=new JQLite(node)).length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){for(var index=element,parent=element.parentNode,i=0,ii=(newElement=new JQLite(newElement)).length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?isDefined(value=fn(this[i],arg1,arg2,arg3))&&(value=jqLite(value)):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var $$HashMapProvider=[function(){this.$get=[function(){return HashMap}]}],FN_ARGS=/^[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");function createInjector(modulesToLoad,strictDi){strictDi=!0===strictDi;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(function(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}),value:supportObject(function(name,val){return factory(name,valueFn(val),!1)}),constant:supportObject(function(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}),decorator:function(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)});return forEach(function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var moduleFn,runBlocks=[];forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}});return runBlocks}(modulesToLoad),function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector;function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn,enforce){return provider(name,{$get:!1!==enforce?function(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}(name,factoryFn):factoryFn})}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var length,i,key,args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(i=0,length=$inject.length;i<length;i++){if("string"!=typeof(key=$inject[i]))throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}return{invoke:invoke,instantiate:function(Type,locals,serviceName){var instance=Object.create((isArray(Type)?Type[Type.length-1]:Type).prototype||null),returnedValue=invoke(Type,instance,locals,serviceName);return isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance},get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){var document=$window.document;function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=function(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0];offset="fixed"!==$window.getComputedStyle(elem).position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){var elm,list,result;(hash=isString(hash)?hash:$location.hash())?(elm=document.getElementById(hash))?scrollTo(elm):(list=document.getElementsByName(hash),result=null,Array.prototype.some.call(list,function(element){if("a"===nodeName_(element))return result=element,!0}),(elm=result)?scrollTo(elm):"top"===hash&&scrollTo(null)):scrollTo(null)}return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){var action,win;newVal===oldVal&&""===newVal||(action=function(){$rootScope.$evalAsync(scroll)},"complete"===(win=win||window).document.readyState?win.setTimeout(action):jqLite(win).on("load",action))}),scroll}]}createInjector.$$annotate=function(fn,strictDi,name){var $inject,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||function(fn){var args=fn.toString().replace(STRIP_COMMENTS,"").match(FN_ARGS);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);forEach(fn.toString().replace(STRIP_COMMENTS,"").match(FN_ARGS)[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(assertArgFn(fn[last=fn.length-1],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject};var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1;function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function prepareAnimateOptions(options){return isObject(options)?options:{}}var $$CoreAnimateJsProvider=function(){this.$get=function(){}},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new HashMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),(options=options||{}).from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&function(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.put(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}};function updateData(data,classes,value){var changed=!1;return classes&&forEach(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],function(className){className&&(changed=!0,data[className]=value)}),changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=function(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){status!==!!existing[className]&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.remove(element)}}),postDigestElements.length=0}}]},$AnimateProvider=["$provide",function($provide){var provider=this;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=function(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return(options=prepareAnimateOptions(options)).removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return(options=prepareAnimateOptions(options)).from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){var waitQueue=[];function waitForTick(fn){waitQueue.push(fn),1<waitQueue.length||$$rAF(function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]})}return function(){var passed=!1;return waitForTick(function(){passed=!0}),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function($q,$sniffer,$$animateAsyncRun,$document,$timeout){function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun();this._doneCallbacks=[],this._tick=function(fn){var doc=$document[0];doc&&doc.hidden?function(fn){$timeout(fn,0,!1)}(fn):rafTick(fn)},this._state=0}return AnimateRunner.chain=function(chain,callback){var index=0;!function next(){if(index===chain.length)return void callback(!0);chain[index](function(response){!1!==response?(index++,next()):callback(!1)})}()},AnimateRunner.all=function(runners,callback){var count=0,status=!0;function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){2===this._state?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){!1===status?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;0===self._state&&(self._state=1,self._tick(function(){self._resolve(response)}))},_resolve:function(response){2!==this._state&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run};function run(){return $$rAF(function(){!function(){options.addClass&&(element.addClass(options.addClass),options.addClass=null);options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null);options.to&&(element.css(options.to),options.to=null)}(),closed||runner.complete(),closed=!0}),runner}}}]};function Browser(window,document,$log,$sniffer){var self=this,location=(document[0],window.location),history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(0===--outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase&&!pendingLocation||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=function(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),self}return pendingLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1;function cacheStateAndFireUrlChange(){pendingLocation=null,cacheState(),fireUrlChange()}var lastCachedState=null;function cacheState(){equals(cachedState=isUndefined(cachedState=function(){try{return history.state}catch(e){}}())?null:cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){lastBrowserUrl===self.url()&&lastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return!!pendingDeferIds[deferId]&&(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE)refresh(lruHash[key]||(lruHash[key]={key:key}));return key in data||size++,data[key]=value,capacity<size&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){lruHash=stats=data=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}};function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),(freshEnd=entry).n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}}return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}var $compileMinErr=minErr("$compile");function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=function(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName}}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(!0===directive.bindToController?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),isObject(bindings.bindToController)){var controller=directive.controller,controllerAs=directive.controllerAs;if(!controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);if(!function(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}(controller,controllerAs))throw $compileMinErr("noident","Cannot bind to controller without identifier for directive '{0}'.",directiveName)}return bindings}this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(!function(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+"Directive",["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA";var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope),directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){var Attributes=function(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;i<l;i++)this[key=keys[i]]=attributesToCopy[key]}else this.$attr={};this.$$element=element};function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&0<classVal.length&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&0<classVal.length&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key),aliasedKey=ALIASED_ATTR[key],observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key])||(this.$attr[key]=attrName=snake_case(key,"-")),"a"===(nodeName=nodeName_(this.$$element))&&"href"===key||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key){for(var result="",trimmedSrcset=trim(value),pattern=/\s/.test(trimmedSrcset)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}!1!==writeAttr&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){node.nodeType==NODE_TYPE_TEXT&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new());var parentElement,node,$linkNode,parentBoundTranscludeFn=(options=options||{}).parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(node=(parentElement=futureParentElement)&&parentElement[0],namespace=node&&"foreignobject"!==nodeName_(node)&&node.toString().match(/SVG/)?"svg":"html"),$linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,(nodeLinkFn=(directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective)).length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null)&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?function(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){return function(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||((transcludedScope=scope.$new(!1,containingScope)).$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1,attrEndName=!1;name=(attr=nAttrs[j]).name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])&&(attrEndName=(attrStartName=name).substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),attrsMap[nName=directiveNormalize(name.toLowerCase())]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(isObject(className=node.className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)addDirective(directives,nName=directiveNormalize(match[2]),"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:if(11===msie)for(;node.parentNode&&node.nextSibling&&node.nextSibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);!function(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{(match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue))&&addDirective(directives,nName=directiveNormalize(match[1]),"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart))do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(0<depth);else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;i<ii;i++){var attrStart=(directive=directives[i]).$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),childTranscludeFn="element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),compile($template,transcludeFn,undefined,undefined,{needsNewScope:directive.$$isolateScope||directive.$$newScope}))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),directiveValue=isFunction((templateDirective=directive).template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),(templateDirective=directive).replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{isFunction(linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn))?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&!0===newScopeDirective.scope,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():value=(value=elementControllers&&elementControllers[name])&&value.instance,!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}return value||null}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,removeScopeBindingWatches,removeControllerBindingWatches;for(var name in compileNode===linkNode?$element=(attrs=templateAttrs).$$element:($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&((transcludeFn=function(scope,cloneAttachFn,futureParentElement){var transcludeControllers;isScope(scope)||(futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined);hasElementTranscludeDirective&&(transcludeControllers=elementControllers);futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element);return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}).$$boundTransclude=boundTranscludeFn),controllerDirectives&&(elementControllers=function($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"==controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,(removeScopeBindingWatches=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective))&&isolateScope.$on("$destroy",removeScopeBindingWatches)),elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;controller.identifier&&bindings&&(removeControllerBindingWatches=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective));var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+controllerDirective.name+"Controller",controllerResult),removeControllerBindingWatches&&removeControllerBindingWatches(),removeControllerBindingWatches=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective))}for(i=0,ii=preLinkFns.length;i<ii;i++)invokeLinkFn(linkFn=preLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;0<=i;i--)invokeLinkFn(linkFn=postLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+"Directive"),i=0,ii=directives.length;i<ii;i++)try{directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directives=$injector.get(name+"Directive"),i=0,ii=directives.length;i<ii;i++)if(directives[i].multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst.class=(dst.class?dst.class+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=function(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap());if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jQuery?(skipDestroyOnNextJQueryCleanData=!0,jQuery.cleanData([firstElementToRemove])):delete jqLite.cache[firstElementToRemove[jqLite.expando]]);for(var k=1,kk=elementsToRemove.length;k<kk;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){var removeWatchCollection=[];return forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,attrName=definition.attrName,optional=definition.optional;switch(definition.mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(destination[scopeName]=attrs[attrName]=void 0),attrs.$observe(attrName,function(value){isString(value)&&(destination[scopeName]=value)}),attrs.$$observers[attrName].$$scope=scope,isString(attrs[attrName])&&(destination[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!=a&&b!=b},parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],directive.name)},lastValue=destination[scopeName]=parentGet(scope);var removeWatch,parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"&":if((parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop)===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}}),removeWatchCollection.length&&function(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}}]}$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i;function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(0<values.length?" ":"")+token}return values}function removeComments(jqNodes){var i=(jqNodes=jqLite(jqNodes)).length;if(i<=1)return jqNodes;for(;i--;){jqNodes[i].nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}var $controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/;function $ControllerProvider(){var controllers={},globals=!1;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=!0===later,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(!(match=expression.match(CNTRL_REG)))throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],assertArgFn(expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance};function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}var $$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$httpMinErr=minErr("$http"),$httpMinErrLegacyFn=function(method){return function(){throw $httpMinErr("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",method)}};function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v,k){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return function serialize(toSerialize,prefix,topLevel){if(null===toSerialize||isUndefined(toSerialize))return;isArray(toSerialize)?forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize)))}(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||(jsonStart=(str=tempData).match(JSON_START))&&JSON_ENDS[jsonStart[0]].test(str))&&(data=fromJson(tempData))}}var str,jsonStart;return data}function parseHeaders(headers){var i,parsed=createMap();function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||(obj=d,"[object File]"===toString.call(obj))||function(obj){return"[object Blob]"===toString.call(obj)}(d)||function(obj){return"[object FormData]"===toString.call(obj)}(d)?d:toJson(d);var obj}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var useLegacyPromise=!0;this.useLegacyPromiseExtensions=function(value){return isDefined(value)?(useLegacyPromise=!!value,this):useLegacyPromise};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector){var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];function $http(requestConfig){if(!angular.isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString(requestConfig.url))throw minErr("$http")("badreq","Http request configuration url must be a string.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer},requestConfig);config.headers=function(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){for(reqHeaderName in lowercaseDefHeaderName=lowercase(defHeaderName),reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return function(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?null!=(headerContent=headerFn(config))&&(processedHeaders[header]=headerContent):processedHeaders[header]=headerFn}),processedHeaders}(reqHeaders,shallowCopy(config))}(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;var chain=[function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),function(config,reqData){var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=function(url,serializedParams){return 0<serializedParams.length&&(url+=(-1==url.indexOf("?")?"?":"&")+serializedParams),url}(config.url,config.paramSerializer(config.params));if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(isDefined(cachedResp=cache.get(url))?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,function(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())},reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise;function resolvePromise(response,status,headers,statusText){(isSuccess(status=-1<=status?status:0)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}}(config,reqData).then(transformResponse,transformResponse)},undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return useLegacyPromise?(promise.success=function(fn){return assertArgFn(fn,"fn"),promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return assertArgFn(fn,"fn"),promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise}):(promise.success=$httpMinErrLegacyFn("success"),promise.error=$httpMinErrLegacyFn("error")),promise;function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}}return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],function(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}("get","delete","head","jsonp"),function(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}("post","put","patch"),$http.defaults=defaults,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$window","$document","$xhrFactory",function($browser,$window,$document,$xhrFactory){return function($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType){if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=function(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr(method,url);xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(0<timeout)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest);function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}}}($browser,$xhrFactory,$browser.defer,$window.angular.callbacks,$document[0])}]}var $interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];index<textLength;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&1<concat.length&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:function(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value}(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}}return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q",function($rootScope,$window,$q,$$q){var intervals={};function interval(fn,delay,count,invokeApply){var hasParams=4<arguments.length,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.then(null,null,hasParams?function(){fn.apply(null,args)}:fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),0<count&&count<=iteration&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}return interval.cancel=function(promise){return!!(promise&&promise.$$intervalId in intervals)&&(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0)},interval}]}$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){if(0===whole.indexOf(begin))return whole.substr(begin.length)}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(isDefined(appUrl=beginsWith(appBase,url))?rewrittenUrl=isDefined(appUrl=beginsWith(basePrefix,prevAppUrl=appUrl))?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl:isDefined(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var appUrl,prevAppUrl,rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var withoutHashUrl,withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):isUndefined(withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl))&&(withoutHashUrl=withoutBaseUrl),parseAppUrl(withoutHashUrl,this),this.$$path=function(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;0===url.indexOf(base)&&(url=url.replace(base,""));if(windowsFilePathExp.exec(url))return path;return(firstPathSegmentMatch=windowsFilePathExp.exec(path))?firstPathSegmentMatch[1]:path}(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var rewrittenUrl,appUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}var locationPrototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==(path=null!==path?path.toString():"").charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search=copy(search,{}),function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,appBase,url,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=(url=initialUrl).substring(0,url.indexOf("/",url.indexOf("//")+2))+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=function(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}(appBase);($location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix)).$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){isUndefined(beginsWith(appBaseNoFile,newUrl))?$window.location.href=newUrl:($rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;newUrl=trimEmptyHash(newUrl),$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),setBrowserUrlWithFallback(oldUrl,!1,$location.$$state=oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest())}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:(fn=consoleLog("debug"),function(){debug&&fn.apply(self,arguments)})};var fn;function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(function(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}}]}forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse");function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function getStringValue(name,fullExpression){if(!isString(name+=""))throw $parseMinErr("iseccst","Cannot convert object to primitive value! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}var CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind;function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function ensureSafeAssignContext(obj,fullExpression){if(obj&&(obj===(0).constructor||obj===(!1).constructor||obj==="".constructor||obj==={}.constructor||obj===[].constructor||obj===Function.constructor))throw $parseMinErr("isecaf","Assigning to a constructor is disallowed! Expression: {0}",fullExpression)}var OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(ch))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||"Â "===ch},isIdent:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){for(var start=this.index;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(!this.isIdent(ch)&&!this.isNumber(ch))break;this.index++}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{string+=ESCAPE[ch]||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};function ifDefined(v,d){return void 0!==v?v:d}function plusFn(l,r){return void 0===l?r:void 0===r?l:l+r}function isStateless($filter,filterName){return!$filter(filterName).$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:allConstants=!!ast.filter&&isStateless($filter,ast.callee.name),argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=ast.filter&&isStateless($filter,ast.callee.name)?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1==body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:undefined}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function ASTInterpreter(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var left=this.expression();this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();return this.expect("=")&&(result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}),result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary,next;for(this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.constants.hasOwnProperty(this.peek().text)?primary=copy(this.constants[this.consume().text]):this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)for(;args.push(this.expression()),this.expect(","););return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?property.key=this.constant():this.peek().identifier?property.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),property.value=this.expression(),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},constants:{true:{type:AST.Literal,value:!0},false:{type:AST.Literal,value:!1},null:{type:AST.Literal,value:null},undefined:{type:AST.Literal,value:undefined},this:{type:AST.ThisExpression}}},ASTCompiler.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.state={nextId:0,filters:{},expensiveChecks:expensiveChecks,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",fnString)(this.$filter,ensureSafeMemberName,ensureSafeObject,ensureSafeFunction,getStringValue,ensureSafeAssignContext,ifDefined,plusFn,expression);return this.state=this.stage=undefined,fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,undefined,undefined,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(expression);break;case AST.UnaryExpression:this.recurse(ast.argument,undefined,undefined,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,undefined,undefined,function(expr){left=expr}),this.recurse(ast.right,undefined,undefined,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),ensureSafeMemberName(ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.not(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.name))&&self.addEnsureSafeObject(intoId),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,undefined,function(){self.if_(self.notNull(left),function(){ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),self.addEnsureSafeMemberName(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.ensureSafeObject(self.computedMember(left,right)),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(ensureSafeMemberName(ast.property.name),create&&1!==create&&self.if_(self.not(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.property.name))&&(expression=self.ensureSafeObject(expression)),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){self.addEnsureSafeFunction(right),forEach(ast.arguments,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(self.ensureSafeObject(argument))})}),expression=left.name?(self.state.expensiveChecks||self.addEnsureSafeObject(left.context),self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"):right+"("+args.join(",")+")",expression=self.ensureSafeObject(expression),self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:if(right=this.nextId(),left={},!isAssignable(ast.left))throw $parseMinErr("lval","Trying to assign a value to a non l-value");this.recurse(ast.left,undefined,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),self.addEnsureSafeObject(self.member(left.context,left.name,left.computed)),self.addEnsureSafeAssignContext(left.context),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(expression);break;case AST.ObjectExpression:args=[],forEach(ast.properties,function(property){self.recurse(property.value,self.nextId(),undefined,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression),recursionFn(expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn("s");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn("v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(!0===test)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){return left+"."+right},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},addEnsureSafeObject:function(item){this.current().body.push(this.ensureSafeObject(item),";")},addEnsureSafeMemberName:function(item){this.current().body.push(this.ensureSafeMemberName(item),";")},addEnsureSafeFunction:function(item){this.current().body.push(this.ensureSafeFunction(item),";")},addEnsureSafeAssignContext:function(item){this.current().body.push(this.ensureSafeAssignContext(item),";")},ensureSafeObject:function(item){return"ensureSafeObject("+item+",text)"},ensureSafeMemberName:function(item){return"ensureSafeMemberName("+item+",text)"},ensureSafeFunction:function(item){return"ensureSafeFunction("+item+",text)"},getStringValue:function(item){this.assign(item,"getStringValue("+item+",text)")},ensureSafeAssignContext:function(item){return"ensureSafeAssignContext("+item+",text)"},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(!0===value)return"true";if(!1===value)return"false";if(null===value)return"null";if(void 0===value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(expression,expensiveChecks){var assignable,assign,self=this,ast=this.astBuilder.ast(expression);this.expression=expression,this.expensiveChecks=expensiveChecks,findConstantAndWatchExpressions(ast,self.$filter),(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?function(){}:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return ensureSafeMemberName(ast.name,self.expression),self.identifier(ast.name,self.expensiveChecks||isPossiblyDangerousMemberName(ast.name),context,create,self.expression);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(ensureSafeMemberName(ast.property.name,self.expression),right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create,self.expression):this.nonComputedMember(left,right,self.expensiveChecks,context,create,self.expression);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(undefined,values,inputs);return context?{context:undefined,name:undefined,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){ensureSafeObject(rhs.context,self.expression),ensureSafeFunction(rhs.value,self.expression);for(var values=[],i=0;i<args.length;++i)values.push(ensureSafeObject(args[i](scope,locals,assign,inputs),self.expression));value=ensureSafeObject(rhs.value.apply(rhs.context,values),self.expression)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return ensureSafeObject(lhs.value,self.expression),ensureSafeAssignContext(lhs.context),lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.NGValueParameter:return function(scope,locals,assign,inputs){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var arg=plusFn(left(scope,locals,assign,inputs),right(scope,locals,assign,inputs));return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:undefined,name:undefined,value:value}:value}},identifier:function(name,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&!base[name]&&(base[name]={});var value=base?base[name]:undefined;return expensiveChecks&&ensureSafeObject(value,expression),context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create,expression){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(ensureSafeMemberName(rhs=getStringValue(rhs=right(scope,locals,assign,inputs)),expression),create&&1!==create&&lhs&&!lhs[rhs]&&(lhs[rhs]={}),ensureSafeObject(value=lhs[rhs],expression)),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&lhs&&!lhs[right]&&(lhs[right]={});var value=null!=lhs?lhs[right]:undefined;return(expensiveChecks||isPossiblyDangerousMemberName(right))&&ensureSafeObject(value,expression),context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options,this.ast=new AST(this.lexer),this.astCompiler=options.csp?new ASTInterpreter(this.ast,$filter):new ASTCompiler(this.ast,$filter)};function isPossiblyDangerousMemberName(name){return"constructor"==name}Parser.prototype={constructor:Parser,parse:function(text){return this.astCompiler.compile(text,this.options.expensiveChecks)}};var objectValueOf=Object.prototype.valueOf;function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cacheDefault=createMap(),cacheExpensive=createMap();this.$get=["$filter",function($filter){var noUnsafeEval=csp().noUnsafeEval,$parseOptions={csp:noUnsafeEval,expensiveChecks:!1},$parseOptionsExpensive={csp:noUnsafeEval,expensiveChecks:!0};return function(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":exp=exp.trim();var cache=expensiveChecks?cacheExpensive:cacheDefault;if(!(parsedExpression=cache[cacheKey=exp])){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions);(parsedExpression=new Parser(lexer,$filter,parseOptions).parse(exp)).constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}};function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:("object"!=typeof newValue||"object"!=typeof(newValue=getValueOf(newValue)))&&(newValue===oldValueOfValue||newValue!=newValue&&oldValueOfValue!=oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf)||(lastResult=parsedExpression(scope,undefined,undefined,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,undefined,undefined,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality);function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){isFunction(listener)&&listener.apply(this,arguments),unwatch()},objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,useInputs=!1,fn=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate?function(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,useInputs=!parsedExpression.inputs,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){var $qMinErr=minErr("$q",TypeError);function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){!function(state){var fn,deferred,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;i<ii;++i){deferred=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?deferred.resolve(fn(state.value)):1===state.status?deferred.resolve(state.value):deferred.reject(state.value)}catch(e){deferred.reject(e),exceptionHandler(e)}}}(state)}))}function Deferred(){this.promise=new Promise,this.resolve=simpleBind(this,this.resolve),this.reject=simpleBind(this,this.reject),this.notify=simpleBind(this,this.notify)}extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),0<this.$$state.status&&scheduleProcessQueue(this.$$state),result.promise},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}}),extend(Deferred.prototype,{resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){var then,fns;fns=function(self,resolveFn,rejectFn){var called=!1;function wrap(fn){return function(value){called||(called=!0,fn.call(self,value))}}return[wrap(resolveFn),wrap(rejectFn)]}(this,this.$$resolve,this.$$reject);try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,fns[0],fns[1],this.notify)):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){fns[1](e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}});var makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},resolve=when;var $Q=function Q(resolver){if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);if(!(this instanceof Q))return new Q(resolver);var deferred=new Deferred;return resolver(function(value){deferred.resolve(value)},function(reason){deferred.reject(reason)}),deferred.promise};return $Q.defer=function(){return new Deferred},$Q.reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},$Q.when=when,$Q.resolve=resolve,$Q.all=function(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise},$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),incrementWatchersCount(this,1),function(){0<=arrayRemove(array,watcher)&&incrementWatchersCount(scope,-1),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}if(1===watchExpressions.length)return this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)});function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}return forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()}},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=1<listener.length,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;function $watchCollectionInterceptor(_value){var newLength,key,newItem,oldItem;if(!isUndefined(newValue=_value)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldLength=(oldValue=internalArray).length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],oldItem!=oldItem&&newItem!=newItem||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{for(key in oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0,newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?oldItem!=oldItem&&newItem!=newItem||oldItem===newItem||(changeDetected++,oldValue[key]=newItem):(oldLength++,oldValue[key]=newItem,changeDetected++));if(newLength<oldLength)for(key in changeDetected++,oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}return this.$watch(changeDetector,function(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else for(var key in veryOldValue={},newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key]);else veryOldValue=newValue})},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=this;asyncQueue.length;){try{(asyncTask=asyncQueue.shift()).scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,(lastDirtyWatch=watch).last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),ttl<5&&(watchLog[logIdx=4-ttl]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==this&&current.$$nextSibling))for(;current!==this&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;for(var eventName in this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount),this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:expr,locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){var scope=this;expr&&applyAsyncQueue.push(function(){scope.$eval(expr)}),null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);for(var current=this;current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++,current=current.$parent;);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var current=this,next=this,event={name:name,targetScope:this,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(i=0,length=(listeners=(event.currentScope=current).$$listeners[name]||[]).length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==this&&current.$$nextSibling))for(;current!==this&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope;function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){for(;current.$$watchersCount+=count,current=current.$parent;);}function decrementListenerCount(current,count,name){for(;current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name],current=current.$parent;);}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return""===(normalizedVal=urlResolve(uri).href)||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}var $sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(function(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(-1<matcher.indexOf("***"))throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:function(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)},getTrusted:function(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(function(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=(vendorPrefix=match[0]).substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(bodyStyle.webkitTransition),animations=isString(bodyStyle.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie<=11)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}$compileMinErr=minErr("$compile");function $TemplateRequestProvider(){this.$get=["$templateCache","$http","$q","$sce",function($templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++,isString(tpl)&&$templateCache.get(tpl)||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null);var httpOptions={cache:$templateCache,transformResponse:transformResponse};return $http.get(tpl,httpOptions).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},function(resp){if(ignoreRequestError)return $q.reject(resp);throw $compileMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText)})}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={findBindings:function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){opt_exactMatch?new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)").test(bindingName)&&matches.push(binding):-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},findModels:function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var selector="["+prefixes[p]+"model"+(opt_exactMatch?"=":"*=")+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},getLocation:function(){return $location.url()},setLocation:function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},whenStable:function(callback){$browser.notifyWhenNoOutstandingRequests(callback)}};return testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}return timeout.cancel=function(promise){return!!(promise&&promise.$$timeoutId in deferreds)&&(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId))},timeout}]}var urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href);function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}return function(){var cookieArray,cookie,i,index,name,currentCookieString=rawDocument.cookie||"";if(currentCookieString!==lastCookieString)for(cookieArray=(lastCookieString=currentCookieString).split("; "),lastCookies={},i=0;i<cookieArray.length;i++)0<(index=(cookie=cookieArray[i]).indexOf("="))&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){var suffix="Filter";function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp;switch(getTypeForFilter(expression)){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=function(expression,comparator,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&"$"in expression;!0===comparator?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected)))});return function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}(expression,comparator,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,!1)}if("object"!==expectedType)return comparator(actual,expected);for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty="$"===key;if(!deepCompare(matchAnyProperty?actual:actual[key],expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0;case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var parsedNumber,isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="";if(isInfinity)formattedText="â";else{(function(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i,roundAt=(fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize)+parsedNumber.i,digit=digits[roundAt];if(0<roundAt)digits.splice(roundAt);else{parsedNumber.i=1,digits.length=roundAt=fractionSize+1;for(var i=0;i<roundAt;i++)digits[i]=0}for(5<=digit&&digits[roundAt-1]++;fractionLen<fractionSize;fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)},0);carry&&(digits.unshift(carry),parsedNumber.i++)})(parsedNumber=function(numStr){var digits,numberOfIntegerDigits,i,j,zeros,exponent=0;for(-1<(numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))&&(numStr=numStr.replace(DECIMAL_SEP,"")),0<(i=numStr.search(/e/i))?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;numStr.charAt(i)==ZERO_CHAR;i++);if(i==(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;numStr.charAt(zeros)==ZERO_CHAR;)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return MAX_DIGITS<numberOfIntegerDigits&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}(numStr),fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);integerLen<0;)digits.unshift(0),integerLen++;0<integerLen?decimals=digits.splice(integerLen):(decimals=digits,digits=[0]);var groups=[];for(digits.length>pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim){var neg="";for(num<0&&(neg="-",num=-num),num=""+num;num.length<digits;)num=ZERO_CHAR+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(0<offset||-offset<value)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name]();return formats[uppercase(shortForm?"SHORT"+name:name)][value]}}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function weekGetter(size){return function(date){var datetime,firstThurs=getFirstThursdayOfYear(date.getFullYear()),diff=+(datetime=date,new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay())))-+firstThurs;return padNumber(1+Math.round(diff/6048e5),size)}}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:function(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]},Z:function(date,formats,offset){var zone=-1*offset,paddedZone=0<=zone?"+":"";return paddedZone+=padNumber(Math[0<zone?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)},ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:function(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):function(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)format=(match=DATE_FORMATS_SPLIT.exec(format))?(parts=concat(parts,match,1)).pop():(parts.push(format),null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset()),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArray(input)||isString(input)?(begin=(begin=!begin||isNaN(begin)?0:toInt(begin))<0?Math.max(0,input.length+begin):begin,0<=limit?input.slice(begin,begin+limit):0===begin?input.slice(limit,input.length):input.slice(Math.max(0,begin+limit),begin)):input)}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){if(!isArrayLike(array))return array;isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=function(sortPredicate,reverseOrder){return reverseOrder=reverseOrder?-1:1,sortPredicate.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!=predicate.charAt(0)&&"-"!=predicate.charAt(0)||(descending="-"==predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate)).constant)){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending*reverseOrder}})}(sortPredicate,reverseOrder);predicates.push({get:function(){return{}},descending:reverseOrder?-1:1});var compareValues=Array.prototype.map.call(array,function(value,index){return{value:value,predicateValues:predicates.map(function(predicate){return function(value,index){var type=typeof value;null===value?(type="string",value="null"):"string"===type?value=value.toLowerCase():"object"===type&&(value=function(value,index){if("function"==typeof value.valueOf&&isPrimitive(value=value.valueOf()))return value;if(hasCustomToString(value)&&isPrimitive(value=value.toString()))return value;return index}(value,index));return{value:value,type:type}}(predicate.get(value),index)})}});return compareValues.sort(function(v1,v2){for(var result=0,index=0,length=predicates.length;index<length&&!(result=compare(v1.predicateValues[index],v2.predicateValues[index])*predicates[index].descending);++index);return result}),array=compareValues.map(function(item){return item.value})};function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function compare(v1,v2){var result=0;return v1.type===v2.type?v1.value!==v2.value&&(result=v1.value<v2.value?-1:1):result=v1.type<v2.type?-1:1,result}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,0,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){value?(attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name])):"href"===attrName&&attr.$set(name,null)})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:function(control,name){control.$name=name},$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop};function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[];form.$error={},form.$$success={},form.$pending=undefined,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,form.$$parentForm=nullFormCtrl,form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control),control.$$parentForm=form},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],(form[newName]=control).$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control),control.$$parentForm=nullFormCtrl},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];list?-1===list.indexOf(controller)&&list.push(controller):object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,form.$$parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" ng-submitted"),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,"ng-submitted"),form.$submitted=!0,form.$$parentForm.$setSubmitted()}}FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){return{name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}(ctrls[1]||controller.$$parentForm).$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,undefined),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))})),formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller),setter(scope,undefined),extend(controller,nullFormCtrl)})}}}};function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,inputType={text:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)},date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,function(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN},"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:function(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||minVal<=value},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}},url:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}},email:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}},radio:function(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());element.on("click",function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)},checkbox:function(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1);element.on("click",function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return!1===value},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})},hidden:noop,button:noop,submit:noop,reset:noop,file:noop};function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(data){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){badInputChecker(scope,element,attr,ctrl),baseInputType(0,element,attr,ctrl,$sniffer,$browser);var previousDate,minVal,maxVal,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}return undefined}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?((previousDate=value)&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin)&&(ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()}));(isDefined(attr.max)||attr.ngMax)&&(ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()}));function isValidDate(value){return value&&!(value.getTime&&value.getTime()!=value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||undefined:val}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0];(ctrl.$$hasNativeValidators=isObject(node.validity))&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value})}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(!(parseFn=$parse(expression)).constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}var inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}});function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){return{restrict:"AC",link:function(scope,element,attr){var oldVal;function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||createMap(),classesToUpdate=[];return forEach(classes,function(className){(0<count||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(0<count)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function ngClassWatchAction(newVal){if(!0===selector||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){!function(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}(arrayClasses(oldVal),newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):function(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}(classes)}})}};function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){var classes=[];return isArray(classVal)?(forEach(classVal,function(v){classes=classes.concat(arrayClasses(v))}),classes):isString(classVal)?classVal.split(" "):isObject(classVal)?(forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes):classVal}}]}var ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentElement=clone,(currentScope=newScope).$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(/SVG/.test($element[0].toString()))return $element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element});$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList;ctrl.$parsers.push(function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}}),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",PENDING_CLASS="ng-pending",ngModelMinErr=minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=undefined,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl;var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if((ctrl.$options=options)&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:ctrl.$modelValue}):parsedNgModelAssign($scope,ctrl.$modelValue)}}else if(!parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!=value};var currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),ctrl.$$parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,"ng-untouched","ng-touched")},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:undefined,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){var syncValidatorsValid,validatorPromises,allValid,localValidationRunId=++currentValidationRunId;(function(){var errorKey=ctrl.$$parserName||"parse";{if(!isUndefined(parserValid))return parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid;setValidity(errorKey,null)}return!0})()?(syncValidatorsValid=!0,forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),syncValidatorsValid||(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),0)?(validatorPromises=[],allValid=!0,forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(error){setValidity(name,allValid=!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)):validationDone(!1)):validationDone(!1);function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var modelValue=ctrl.$$lastCommittedViewValue;if(parserValid=!isUndefined(modelValue)||undefined)for(var i=0;i<ctrl.$parsers.length;i++)if(isUndefined(modelValue=ctrl.$parsers[i](modelValue))){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,ctrl.$options&&!ctrl.$options.updateOnDefault||ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(isNumber(debounce=options.debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce.default)&&(debounceDelay=debounce.default)),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue==ctrl.$modelValue||modelValue==modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=undefined;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass("ng-untouched").addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(ev){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=copy($scope.$eval($attrs.ngModelOptions)),isDefined(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function addSetValidityMethod(context){var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,$animate=context.$animate;function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(INVALID_CLASS+validationErrorKey,!1===isValid)}classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=function(validationErrorKey,state,controller){isUndefined(state)?function(name,value,controller){ctrl[name]||(ctrl[name]={});set(ctrl[name],value,controller)}("$pending",validationErrorKey,controller):function(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller);isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}("$pending",validationErrorKey,controller);isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller));ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:!ctrl.$error[validationErrorKey]&&(!!ctrl.$$success[validationErrorKey]||null);toggleValidationCss(validationErrorKey,combinedState),ctrl.$$parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$parse",function($compile,$parse){var optionTemplate=document.createElement("option"),optGroupTemplate=document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:{pre:function(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:function(scope,selectElement,attr,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){for(var emptyOption,selectCtrl=ctrls[0],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){emptyOption=children.eq(i);break}var options,providedEmptyOption=!!emptyOption,unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val("?");var ngOptions=function(optionsExp,selectElement,scope){var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),viewValueFn=selectAs&&$parse(selectAs)||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else for(var itemKey in optionValuesKeys=[],optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey);return optionValuesKeys}return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){for(var watchedArray=[],optionValuesKeys=getOptionValuesKeys(optionValues=optionValues||[]),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],locals=(optionValues[key],getLocals(optionValues[key],key)),selectValue=getTrackByValueFn(optionValues[key],locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),optionItem=new Option(selectValue,viewValue,displayFn(scope,locals),groupByFn(scope,locals),disableWhenFn(scope,locals));optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?angular.copy(option.viewValue):option.viewValue}}}}}(attr.ngOptions,selectElement,scope),removeEmptyOption=function(){providedEmptyOption||emptyOption.remove()},removeUnknownOption=function(){unknownOption.remove()};multiple?(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length},selectCtrl.writeValue=function(value){options.items.forEach(function(option){option.element.selected=!1}),value&&value.forEach(function(item){var option=options.getOptionFromViewValue(item);option&&!option.disabled&&(option.element.selected=!0)})},selectCtrl.readValue=function(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var option=options.getOptionFromViewValue(value);option&&!option.disabled?selectElement[0].value!==option.selectValue&&(removeUnknownOption(),removeEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0,option.element.setAttribute("selected","selected")):null===value||providedEmptyOption?(removeUnknownOption(),providedEmptyOption||selectElement.prepend(emptyOption),selectElement.val(""),emptyOption.prop("selected",!0),emptyOption.attr("selected",!0)):(removeEmptyOption(),selectElement.prepend(unknownOption),selectElement.val("?"),unknownOption.prop("selected",!0),unknownOption.attr("selected",!0))},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(removeEmptyOption(),removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption?(emptyOption.remove(),$compile(emptyOption)(scope),emptyOption.removeClass("ng-scope")):emptyOption=jqLite(optionTemplate.cloneNode(!1)),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}function updateOptionElement(option,element){(option.element=element).disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),option.value!==element.value&&(element.value=option.selectValue)}function addOrReuseElement(parent,current,type,templateElement){var element;return current&&lowercase(current.nodeName)===type?element=current:(element=templateElement.cloneNode(!1),current?parent.insertBefore(element,current):parent.appendChild(element)),element}function removeExcessElements(current){for(var next;current;)next=current.nextSibling,jqLiteRemove(current),current=next}function updateOptions(){var previousValue=options&&selectCtrl.readValue();options=ngOptions.getOptions();var groupMap={},currentElement=selectElement[0].firstChild;if(providedEmptyOption&&selectElement.prepend(emptyOption),currentElement=function(current){var emptyOption_=emptyOption&&emptyOption[0],unknownOption_=unknownOption&&unknownOption[0];if(emptyOption_||unknownOption_)for(;current&&(current===emptyOption_||current===unknownOption_||current.nodeType===NODE_TYPE_COMMENT||"option"===nodeName_(current)&&""===current.value);)current=current.nextSibling;return current}(currentElement),options.items.forEach(function(option){var group,groupElement,optionElement;option.group?((group=groupMap[option.group])||(groupElement=addOrReuseElement(selectElement[0],currentElement,"optgroup",optGroupTemplate),currentElement=groupElement.nextSibling,groupElement.label=option.group,group=groupMap[option.group]={groupElement:groupElement,currentOptionElement:groupElement.firstChild}),updateOptionElement(option,optionElement=addOrReuseElement(group.groupElement,group.currentOptionElement,"option",optionTemplate)),group.currentOptionElement=optionElement.nextSibling):(updateOptionElement(option,optionElement=addOrReuseElement(selectElement[0],currentElement,"option",optionTemplate)),currentElement=optionElement.nextSibling)}),Object.keys(groupMap).forEach(function(key){removeExcessElements(groupMap[key].currentOptionElement)}),removeExcessElements(currentElement),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();(ngOptions.trackBy||multiple?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}}}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;function updateElementText(newText){element.text(newText||"")}forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count!==lastCount&&!(countIsNaN&&isNumber(lastCount)&&isNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=document.createComment(" end ngRepeat: "+expression+" "),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(!(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else for(var itemKey in trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[],collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey);for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(elementsToRemove=getBlockNodes((block=lastBlockMap[blockKey]).clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index].$$NG_REMOVED=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],(block=nextBlockOrder[index]).scope){for(nextNode=previousNode;(nextNode=nextNode.nextSibling)&&nextNode.$$NG_REMOVED;);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,jqLite(previousNode)),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;i<ii;++i)$animate.cancel(previousLeaveAnimations[i]);for(i=previousLeaveAnimations.length=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy(),(previousLeaveAnimations[i]=$animate.leave(selected)).then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(" end ngSwitchWhen: ");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop};var SelectController=["$element","$scope","$attrs",function($element,$scope,$attrs){var self=this,optionsMap=new HashMap;self.ngModelCtrl=noopNgModelController,self.unknownOption=jqLite(document.createElement("option")),self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),$element.val(unknownVal)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.readValue=function(){return self.removeUnknownOption(),$element.val()},self.writeValue=function(value){self.hasOption(value)?(self.removeUnknownOption(),$element.val(value),""===value&&self.emptyOption.prop("selected",!0)):null==value&&self.emptyOption?(self.removeUnknownOption(),$element.val("")):self.renderUnknownOption(value)},self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.emptyOption=element);var optionElement,count=optionsMap.get(value)||0;optionsMap.put(value,count+1),self.ngModelCtrl.$render(),(optionElement=element)[0].hasAttribute("selected")&&(optionElement[0].selected=!0)},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.remove(value),""===value&&(self.emptyOption=undefined)):optionsMap.put(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)},self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){var oldVal;interpolateValueFn?optionAttrs.$observe("value",function(newVal){isDefined(oldVal)&&self.removeOption(oldVal),oldVal=newVal,self.addOption(newVal,optionElement)}):interpolateTextFn?optionScope.$watch(interpolateTextFn,function(newVal,oldVal){optionAttrs.$set("value",newVal),oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement)}):self.addOption(optionAttrs.value,optionElement);optionElement.on("$destroy",function(){self.removeOption(optionAttrs.value),self.ngModelCtrl.$render()})}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:function(scope,element,attr,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",function(){scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){option.selected&&array.push(option.value)}),array},selectCtrl.writeValue=function(value){var items=new HashMap(value);forEach(element.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}},post:function(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){if(isDefined(attr.value))var interpolateValueFn=$interpolate(attr.value,!0);else{var interpolateTextFn=$interpolate(element.text(),!0);interpolateTextFn||attr.$set("value",element.text())}return function(scope,element,attr){var parent=element.parent(),selectCtrl=parent.data("$selectController")||parent.parent().data("$selectController");selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&0<regex.length&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};window.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(!function(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();(jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:undefined)&&jQuery.fn.on?(extend((jqLite=jQuery).fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){var events;if(skipDestroyOnNextJQueryCleanData)skipDestroyOnNextJQueryCleanData=!1;else for(var elem,i=0;null!=(elem=elems[i]);i++)(events=jQuery._data(elem,"events"))&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}(),function(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),(angularModule=function(window){var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng");function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){return function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator"),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance;function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method){return function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),invokeQueue.push([provider,method,arguments]),moduleInstance}}})}})}(window))("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$HashMap:$$HashMapProvider,$$cookieReader:$$CookieReaderProvider})}])}(angular),angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY_ONE="one",PLURAL_CATEGORY_OTHER="other";$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",pluralCat:function(n,opt_precision){var i=0|n,vf=function(n,opt_precision){var v=opt_precision;undefined===v&&(v=Math.min(function(n){var i=(n+="").indexOf(".");return-1==i?0:n.length-i-1}(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY_ONE:PLURAL_CATEGORY_OTHER}})}]),jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(){var root=this,previousUnderscore=root._,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create,Ctor=function(){},_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}},cb=function(value,context,argCount){return null==value?_.identity:_.isFunction(value)?optimizeCb(value,context,argCount):_.isObject(value)?_.matcher(value):_.property(value)};_.iteratee=function(value,context){return cb(value,context,1/0)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||null==obj)return obj;for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){var key=keys[i];undefinedOnly&&void 0!==obj[key]||(obj[key]=source[key])}return obj}},baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result},property=function(key){return function(obj){return null==obj?void 0:obj[key]}},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(collection){var length=getLength(collection);return"number"==typeof length&&0<=length&&length<=MAX_ARRAY_INDEX};function createReduce(dir){return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0<dir?0:length-1;return arguments.length<3&&(memo=obj[keys?keys[index]:index],index+=dir),function(obj,iteratee,memo,keys,index,length){for(;0<=index&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}(obj,iteratee,memo,keys,index,length)}}_.each=_.forEach=function(obj,iteratee,context){var i,length;if(iteratee=optimizeCb(iteratee,context),isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length),index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results},_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(obj,predicate,context){var key;if(void 0!==(key=isArrayLike(obj)?_.findIndex(obj,predicate,context):_.findKey(obj,predicate,context))&&-1!==key)return obj[key]},_.filter=_.select=function(obj,predicate,context){var results=[];return predicate=cb(predicate,context),_.each(obj,function(value,index,list){predicate(value,index,list)&&results.push(value)}),results},_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)},_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0},_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1},_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){return isArrayLike(obj)||(obj=_.values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),0<=_.indexOf(obj,item,fromIndex)},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return null==func?func:func.apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))},_.max=function(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)value=obj[i],result<value&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(lastComputed<computed||computed===-1/0&&result===-1/0)&&(result=value,lastComputed=computed)});return result},_.min=function(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)(value=obj[i])<result&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){((computed=iteratee(value,index,list))<lastComputed||computed===1/0&&result===1/0)&&(result=value,lastComputed=computed)});return result},_.shuffle=function(obj){for(var rand,set=isArrayLike(obj)?obj:_.values(obj),length=set.length,shuffled=Array(length),index=0;index<length;index++)(rand=_.random(0,index))!==index&&(shuffled[index]=shuffled[rand]),shuffled[rand]=set[index];return shuffled},_.sample=function(obj,n,guard){return null==n||guard?(isArrayLike(obj)||(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))},_.sortBy=function(obj,iteratee,context){return iteratee=cb(iteratee,context),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(b<a||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};return iteratee=cb(iteratee,context),_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)}),result}};_.groupBy=group(function(result,value,key){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,value,key){result[key]=value}),_.countBy=group(function(result,value,key){_.has(result,key)?result[key]++:result[key]=1}),_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):isArrayLike(obj)?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:isArrayLike(obj)?obj.length:_.keys(obj).length},_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];return _.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)}),[pass,fail]},_.first=_.head=_.take=function(array,n,guard){if(null!=array)return null==n||guard?array[0]:_.initial(array,array.length-n)},_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))},_.last=function(array,n,guard){if(null!=array)return null==n||guard?array[array.length-1]:_.rest(array,Math.max(0,array.length-n))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){for(var output=[],idx=0,i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){shallow||(value=flatten(value,shallow,strict));var j=0,len=value.length;for(output.length+=len;j<len;)output[idx++]=value[j++]}else strict||(output[idx++]=value)}return output};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=getLength(array),index=0<dir?0:length-1;0<=index&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return-1}}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if("number"==typeof idx)0<dir?i=0<=idx?idx:Math.max(idx+length,i):length=0<=idx?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length)return array[idx=sortedIndex(array,item)]===item?idx:-1;if(item!=item)return 0<=(idx=predicateFind(slice.call(array,i,length),_.isNaN))?idx+i:-1;for(idx=0<dir?i:length-1;0<=idx&&idx<length;idx+=dir)if(array[idx]===item)return idx;return-1}}_.flatten=function(array,shallow){return flatten(array,shallow,!1)},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iteratee,context){_.isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted?(i&&seen===computed||result.push(value),seen=computed):iteratee?_.contains(seen,computed)||(seen.push(computed),result.push(value)):_.contains(result,value)||result.push(value)}return result},_.union=function(){return _.uniq(flatten(arguments,!0,!0))},_.intersection=function(array){for(var result=[],argsLength=arguments.length,i=0,length=getLength(array);i<length;i++){var item=array[i];if(!_.contains(result,item)){for(var j=1;j<argsLength&&_.contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result},_.difference=function(array){var rest=flatten(arguments,!0,!0,1);return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(array){for(var length=array&&_.max(array,getLength).length||0,result=Array(length),index=0;index<length;index++)result[index]=_.pluck(array,index);return result},_.object=function(list,values){for(var result={},i=0,length=getLength(list);i<length;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(array,obj,iteratee,context){for(var value=(iteratee=cb(iteratee,context,1))(obj),low=0,high=getLength(array);low<high;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low},_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(start,stop,step){null==stop&&(stop=start||0,start=0),step=step||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return _.isObject(result)?result:self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2),bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound},_.partial=function(func){var boundArgs=slice.call(arguments,1),bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound},_.bindAll=function(obj){var i,key,length=arguments.length;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++)obj[key=arguments[i]]=_.bind(obj[key],obj);return obj},_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return _.has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=_.partial(_.delay,_,1),_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:_.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)};return function(){var now=_.now();previous||!1!==options.leading||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0||wait<remaining?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;last<wait&&0<=last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}},_.compose=function(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}},_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},_.before=function(times,func){var memo;return function(){return 0<--times&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}},_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=_.isFunction(constructor)&&constructor.prototype||ObjProto,prop="constructor";for(_.has(obj,prop)&&!_.contains(keys,prop)&&keys.push(prop);nonEnumIdx--;)(prop=nonEnumerableProps[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)&&keys.push(prop)}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=Array(length),i=0;i<length;i++)values[i]=obj[keys[i]];return values},_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var currentKey,keys=_.keys(obj),length=keys.length,results={},index=0;index<length;index++)results[currentKey=keys[index]]=iteratee(obj[currentKey],currentKey,obj);return results},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=Array(length),i=0;i<length;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);for(var key,keys=_.keys(obj),i=0,length=keys.length;i<length;i++)if(predicate(obj[key=keys[i]],key,obj))return key},_.pick=function(object,oiteratee,context){var iteratee,keys,result={},obj=object;if(null==obj)return result;_.isFunction(oiteratee)?(keys=_.allKeys(obj),iteratee=optimizeCb(oiteratee,context)):(keys=flatten(arguments,!1,!1,1),iteratee=function(value,key,obj){return key in obj},obj=Object(obj));for(var i=0,length=keys.length;i<length;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result},_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee))iteratee=_.negate(iteratee);else{var keys=_.map(flatten(arguments,!1,!1,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)},_.defaults=createAssigner(_.allKeys,!0),_.create=function(prototype,props){var result=baseCreate(prototype);return props&&_.extendOwn(result,props),result},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}var areArrays="[object Array]"===className;if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}bStack=bStack||[];for(var length=(aStack=aStack||[]).length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,keys=_.keys(a);if(length=keys.length,_.keys(b).length!==length)return!1;for(;length--;)if(key=keys[length],!_.has(b,key)||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0};_.isEqual=function(a,b){return eq(a,b)},_.isEmpty=function(obj){return null==obj||(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))?0===obj.length:0===_.keys(obj).length)},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return _.has(obj,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(obj){return"function"==typeof obj||!1}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj},_.isBoolean=function(obj){return!0===obj||!1===obj||"[object Boolean]"===toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return null!=obj&&hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.noop=function(){},_.property=property,_.propertyOf=function(obj){return null==obj?function(){}:function(key){return obj[key]}},_.matcher=_.matches=function(attrs){return attrs=_.extendOwn({},attrs),function(obj){return _.isMatch(obj,attrs)}},_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+_.keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap),_.unescape=createEscaper(unescapeMap),_.result=function(object,property,fallback){var value=null==object?void 0:object[property];return void 0===value&&(value=fallback),_.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)},argument=settings.variable||"obj";return template.source="function("+argument+"){\n"+source+"}",template},_.chain=function(obj){var instance=_(obj);return instance._chain=!0,instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result(this,func.apply(_,args))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0],result(this,obj)}}),_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(window,angular,undefined){"use strict";var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement,ELEMENT_NODE=1,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-";TRANSITIONEND_EVENT=isUndefined(window.ontransitionend)&&isDefined(window.onwebkittransitionend)?("-webkit-",TRANSITION_PROP="WebkitTransition","webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition","transitionend"),ANIMATIONEND_EVENT=isUndefined(window.onanimationend)&&isDefined(window.onwebkitanimationend)?("-webkit-",ANIMATION_PROP="WebkitAnimation","webkitAnimationEnd animationend"):(ANIMATION_PROP="animation","animationend");var ANIMATION_PLAYSTATE_KEY="PlayState",ANIMATION_DELAY_PROP=ANIMATION_PROP+"Delay",ANIMATION_DURATION_PROP=ANIMATION_PROP+"Duration",TRANSITION_DELAY_PROP=TRANSITION_PROP+"Delay",TRANSITION_DURATION_PROP=TRANSITION_PROP+"Duration",ngMinErr=angular.$$minErr("ng");function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&0<klass.length&&(className+=0<i?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&(!function($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&(!function($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(!(options=options||{}).$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationOptions(element,target,newOptions){var toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=function(existing,toAdd,toRemove){var flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=1}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=1===flags[key]?null:-1});var classes={addClass:"",removeClass:""};function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}return forEach(flags,function(val,klass){var prop,allow;1===val?(prop="addClass",allow=!existing[klass]):-1===val&&(prop="removeClass",allow=existing[klass]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,target}function getDomNode(element){return element instanceof angular.element?element[0]:element}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){return a?b?a+" "+b:a:b}var $$AnimateChildrenDirective=[function(){return function(scope,element,attrs){var val=attrs.ngAnimateChildren;angular.isString(val)&&0===val.length?element.data("$$ngAnimateChildren",!0):attrs.$observe("ngAnimateChildren",function(value){value="on"===value||"true"===value,element.data("$$ngAnimateChildren",value)})}}],DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+"Property",animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+"IterationCount"},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP};function getCssDelayStyle(delay,isKeyframeAnimation){return[isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var maxValue,values,val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||0<=c)&&(maxValue=0,values=val.split(/\s*,\s*/),forEach(values,function(value){"s"==value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),val=maxValue),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+="Duration":value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)})}var $AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0;function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode;return(parentNode[KEY]||(parentNode[KEY]=++parentCounter))+"-"+node.getAttribute("class")+"-"+extraClasses}var rafWaitQueue=[];function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=function(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||"infinite"===(timings=computeCssStyles($window,node,properties)).animationIterationCount&&(timings.animationIterationCount=1),gcsLookup.put(cacheKey,timings),timings}(node,0,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}return function(element,initialOptions){var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,temporaryStyles=[],classes=element.attr("class"),styles=function(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}(options),events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,structuralClassName="",addRemoveClassName="";method&&options.structural?structuralClassName=pendClasses(method,EVENT_CLASS_PREFIX,!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,ADD_CLASS_SUFFIX)),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX)),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var cacheKey,stagger,applyOnlyDuration,preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,"-active"),hasToStyles=styles.to&&0<Object.keys(styles.to).length;if(!(0<(options.keyframeStyle||"").length)&&!hasToStyles&&!preparationClasses)return closeAndReturnNoopAnimator();if(0<options.stagger){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=function(node,className,cacheKey,properties){var stagger;if(0<gcsLookup.count(cacheKey)&&!(stagger=gcsStaggerLookup.get(cacheKey))){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),(stagger=computeCssStyles($window,node,properties)).animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);if(options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses),options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(0<=options.duration){applyOnlyDuration=0<node.style[TRANSITION_PROP].length;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?0<=options.staggerIndex?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,9999);var timings=computeTimings(node,0,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var delayStyle,flags={};if(flags.hasTransitions=0<timings.transitionDuration,flags.hasAnimations=0<timings.animationDuration,flags.hasTransitionAll=flags.hasTransitions&&"all"==timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=0<addRemoveClassName.length,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=0<node.style[TRANSITION_PROP+"Property"].length,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push([ANIMATION_DURATION_PROP,maxDuration+"s"]))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();null!=options.delay&&("boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0)));return null==options.duration&&0<timings.transitionDuration&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=1e3*maxDelay,maxDurationTime=1e3*maxDuration,options.skipBlocking||(flags.blockTransition=0<timings.transitionDuration,flags.blockKeyframeAnimation=0<timings.animationDuration&&0<stagger.animationDelay&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){if(!animationClosed)return runner=new $$AnimateRunner(runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null}),waitUntilQuiet(start),runner}};function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){animationClosed||animationCompleted&&animationPaused||(animationPaused=!(animationClosed=!0),options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)}),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress),runner&&runner.complete(!rejected))}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(3));Math.max(timeStamp-startTime,0)>=maxDelayTime&&maxDuration<=elapsedTime&&(animationCompleted=!0,close())}function start(){if(!animationClosed)if(node.parentNode){var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):(val=value,index=(arr=temporaryStyles).indexOf(val),0<=val&&arr.splice(index,1))}var arr,val,index},maxStagger=0<itemIndex&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*1e3),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}else close();function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.className+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,0,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),0===(maxDuration=timings.maxDuration))return void close();flags.hasTransitions=0<timings.transitionDuration,flags.hasAnimations=0<timings.animationDuration}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=1e3*maxDelay,maxDurationTime=1e3*maxDuration,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+"TimingFunction",temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+"TimingFunction",temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+1.5*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data("$$animateCss")||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];(setupFallbackTimer=endTime>currentTimerData.expectedEndTime)?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data("$$animateCss",animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data("$$animateCss");if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData("$$animateCss")}}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){if(!$sniffer.animations&&!$sniffer.transitions)return noop;var node,bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite((node=rootNode).parentNode&&11===node.parentNode.nodeType||bodyNode.contains(rootNode)?rootNode:bodyNode);applyAnimationClassesFactory($$jqLite);return function(animationDetails){return animationDetails.from&&animationDetails.to?function(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from),toAnimation=prepareRegularAnimation(to),anchorAnimations=[];if(forEach(anchors,function(anchor){var animator=function(classes,outAnchor,inAnchor){var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass("ng-animate-shim"),inAnchor.addClass("ng-animate-shim"),clone.addClass("ng-anchor"),rootBodyElement.append(clone);var animatorIn,animator,animatorOut=(animator=$animateCss(clone,{addClass:"ng-anchor-out",delay:!0,from:calculateAnchorStyles(outAnchor)})).$$willAnimate?animator:null;if(!animatorOut&&!(animatorIn=prepareInAnimation()))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){if(currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation()))return(currentAnimation=animatorIn.start()).done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation;end(),runner.complete()}),runner=new $$AnimateRunner({end:endFn,cancel:endFn});function endFn(){currentAnimation&&currentAnimation.end()}}};function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:"ng-anchor-in "+toAdd,removeClass:"ng-anchor-out "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass("ng-animate-shim"),inAnchor.removeClass("ng-animate-shim")}}(0,anchor.out,anchor.in);animator&&anchorAnimations.push(animator)}),!fromAnimation&&!toAnimation&&0===anchorAnimations.length)return;return{start:function(){var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner;function endFn(){forEach(animationRunners,function(runner){runner.end()})}}}}(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)};function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return-1===b.indexOf(val)}).join(" ")}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,afterFn,beforeFn,runner,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=function(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}(classes);animations.length&&(afterFn="leave"==event?(beforeFn="leave","afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn));if(before||after)return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),(runner=new $$AnimateRunner).complete(!0)),runner},start:function(){if(runner)return runner;var closeActiveAnimations;runner=new $$AnimateRunner;var chain=[];return before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)}),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner;function onComplete(success){close(),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}}};function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=function(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}(animation,element,event,options,function(result){onAnimationComplete(!1===result)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var a,b,operations=groupEventedAnimations(element,event,options,animations,fnName);0===operations.length&&("beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b)));if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,function(status){runner.complete(status)});var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner;function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}}}}return prepareAnimation(animationDetails)};function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}}]}],$$AnimateQueueProvider=["$animateProvider",function($animateProvider){var ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=function(classString){if(!classString)return null;var keys=classString.split(ONE_SPACE),map=Object.create(null);return forEach(keys,function(key){map[key]=!0}),map}(currentClassString);return newClassString.split(ONE_SPACE).some(function(className){return currentClassMap[className]})}}function isAllowed(ruleType,element,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(element,currentAnimation,previousAnimation)})}function hasAnimationClasses(options,and){var a=0<((options=options||{}).addClass||"").length,b=0<(options.removeClass||"").length;return and?a&&b:a||b}rules.join.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation.options)}),rules.skip.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation.options)}),rules.skip.push(function(element,newAnimation,currentAnimation){return"leave"==currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&2===currentAnimation.state&&!newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return 2===currentAnimation.state&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){var nA=newAnimation.options.addClass,nR=newAnimation.options.removeClass,cA=currentAnimation.options.addClass,cR=currentAnimation.options.removeClass;return!(isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR))&&(hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function($$rAF,$rootScope,$rootElement,$document,$$HashMap,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow){var activeAnimationsLookup=new $$HashMap,disabledElementsLookup=new $$HashMap,animationsEnabled=null;var deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),callbackRegistry={},classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite);function normalizeAnimationOptions(element,options){return mergeAnimationOptions(element,options,{})}var contains=Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))};return{on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback})},off:function(event,container,callback){var list,matchCallback,containerNode,entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:(list=entries,matchCallback=callback,containerNode=extractElementNode(container),list.filter(function(entry){var isMatch=entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback);return!isMatch})))},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data("$ngAnimatePin",parentElement)},push:function(element,event,options,domOperation){return(options=options||{}).domOperation=domOperation,function(element,event,initialOptions){var node,parent,options=copy(initialOptions);(element=function(element){if(element instanceof jqLite)switch(element.length){case 0:return[];case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}if(element.nodeType===ELEMENT_NODE)return jqLite(element)}(element))&&(node=getDomNode(element),parent=element.parent());options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=(postDigestCalled=!1,function(fn){postDigestCalled?fn():$rootScope.$$postDigest(function(){postDigestCalled=!0,fn()})});var postDigestCalled;isArray(options.addClass)&&(options.addClass=options.addClass.join(" "));options.addClass&&!isString(options.addClass)&&(options.addClass=null);isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" "));options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null);options.from&&!isObject(options.from)&&(options.from=null);options.to&&!isObject(options.to)&&(options.to=null);if(!node)return close(),runner;var className=[node.className,options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner;var isStructural=0<=["enter","move","leave"].indexOf(event),skipAnimations=!animationsEnabled||$document[0].hidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;skipAnimations||hasExistingAnimation&&1==existingAnimation.state||(skipAnimations=!function(element,parentElement,event){var animateChildren,bodyElement=jqLite($document[0].body),bodyElementDetected=isMatchingElement(element,bodyElement)||"HTML"===element[0].nodeName,rootElementDetected=isMatchingElement(element,$rootElement),parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(getDomNode(element)),parentHost=element.data("$ngAnimatePin");parentHost&&(parentElement=parentHost);for(;parentElement&&parentElement.length;){rootElementDetected||(rootElementDetected=isMatchingElement(parentElement,$rootElement));var parentNode=parentElement[0];if(parentNode.nodeType!==ELEMENT_NODE)break;var details=activeAnimationsLookup.get(parentNode)||{};if(!parentAnimationDetected){var parentElementDisabled=disabledElementsLookup.get(parentNode);if(!0===parentElementDisabled&&!1!==elementDisabled){elementDisabled=!0;break}!1===parentElementDisabled&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||!0===animateChildren){var value=parentElement.data("$$ngAnimateChildren");isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&!1===animateChildren)break;if(bodyElementDetected||(bodyElementDetected=isMatchingElement(parentElement,bodyElement)),bodyElementDetected&&rootElementDetected)break;rootElementDetected||!(parentHost=parentElement.data("$ngAnimatePin"))?parentElement=parentElement.parent():parentElement=parentHost}return(!parentAnimationDetected||animateChildren)&&!0!==elementDisabled&&rootElementDetected&&bodyElementDetected}(element,parent));if(skipAnimations)return close(),runner;isStructural&&function(element){var children=getDomNode(element).querySelectorAll("[data-ng-animate]");forEach(children,function(child){var state=parseInt(child.getAttribute("data-ng-animate")),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case 2:animationDetails.runner.end();case 1:activeAnimationsLookup.remove(child)}})}(element);var newAnimation={structural:isStructural,element:element,event:event,close:close,options:options,runner:runner};if(hasExistingAnimation){var skipAnimationFlag=isAllowed("skip",element,newAnimation,existingAnimation);if(skipAnimationFlag)return 2===existingAnimation.state?(close(),runner):(mergeAnimationOptions(element,existingAnimation.options,options),existingAnimation.runner);var cancelAnimationFlag=isAllowed("cancel",element,newAnimation,existingAnimation);if(cancelAnimationFlag)if(2===existingAnimation.state)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationOptions(element,existingAnimation.options,newAnimation.options),existingAnimation.runner;existingAnimation.close()}else{var joinAnimationFlag=isAllowed("join",element,newAnimation,existingAnimation);if(joinAnimationFlag){if(2!==existingAnimation.state)return function(element,event,options){var classes="";event&&(classes=pendClasses(event,EVENT_CLASS_PREFIX,!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,ADD_CLASS_SUFFIX))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationOptions(element,existingAnimation.options,newAnimation.options),existingAnimation.runner;normalizeAnimationOptions(element,options)}}}else normalizeAnimationOptions(element,options);var isValidAnimation=newAnimation.structural;isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&0<Object.keys(newAnimation.options.to||{}).length||hasAnimationClasses(newAnimation.options));if(!isValidAnimation)return close(),clearElementAnimationState(element),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(element,1,newAnimation),$rootScope.$$postDigest(function(){var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var isValidAnimation=0<(element.parent()||[]).length&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails.options));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(element));event=!animationDetails.structural&&hasAnimationClasses(animationDetails.options,!0)?"setClass":animationDetails.event,markElementAnimationState(element,2);var realRunner=$$animation(element,event,animationDetails.options);realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(getDomNode(element)),notifyProgress(runner,event,"close",{})}),runner.setHost(realRunner),notifyProgress(runner,event,"start",{})}),runner;function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow(function(){var callbacks=function(parent,element,event){var targetNode=getDomNode(element),targetParentNode=getDomNode(parent),matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)}),matches}(parent,element,event);callbacks.length&&$$rAF(function(){forEach(callbacks,function(callback){callback(element,phase,data)})})}),runner.progress(event,phase,data)}function close(reject){!function(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}}(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else if(isElement(element)){var node=getDomNode(element),recordExists=disabledElementsLookup.get(node);1===argCount?bool=!recordExists:disabledElementsLookup.put(node,!bool)}else bool=animationsEnabled=!!element;return bool}};function clearElementAnimationState(element){var node=getDomNode(element);node.removeAttribute("data-ng-animate"),activeAnimationsLookup.remove(node)}function isMatchingElement(nodeOrElmA,nodeOrElmB){return getDomNode(nodeOrElmA)===getDomNode(nodeOrElmB)}function markElementAnimationState(element,state,details){(details=details||{}).state=state;var node=getDomNode(element);node.setAttribute("data-ng-animate",state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.put(node,newValue)}}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){var drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$HashMap,$$rAFScheduler){var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,options){options=prepareAnimationOptions(options);var isStructural=0<=["enter","move","leave"].indexOf(event),runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;!function(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;return tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:function(){element.addClass("ng-animate"),tempClasses&&$$jqLite.addClass(element,tempClasses)},close:close}),element.on("$destroy",handleDestroyedElement),1<animationQueue.length||$rootScope.$$postDigest(function(){var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)?animations.push(entry):entry.close()}),animationQueue.length=0;var groupedAnimations=function(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var element=animation.element,node=getDomNode(element),event=animation.event,enterOrMove=0<=["enter","move"].indexOf(event),anchorNodes=animation.structural?function(node){var items=node.hasAttribute("ng-animate-ref")?[node]:node.querySelectorAll("[ng-animate-ref]"),anchors=[];return forEach(items,function(node){var attr=node.getAttribute("ng-animate-ref");attr&&attr.length&&anchors.push(node)}),anchors}(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute("ng-animate-ref");refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(from&&to){var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:function(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,in:to.element})}else{var index=from?from.animationID:to.animationID,indexKey=index.toString();usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index]))}}),preparedAnimations}(animations),toBeSortedAnimations=[];forEach(groupedAnimations,function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close;if(getRunner(animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element)){var operation=function(animationDetails){for(var i=drivers.length-1;0<=i;i--){var driverName=drivers[i];if($injector.has(driverName)){var factory=$injector.get(driverName),driver=factory(animationDetails);if(driver)return driver}}}(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),function(animation,newRunner){animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element);function update(element){getRunner(element).setHost(newRunner)}}(animationEntry,animationRunner)}else closeFn()}})}),$$rAFScheduler(function(animations){var i,tree={children:[]},lookup=new $$HashMap;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.put(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return function(tree){var i,result=[],queue=[];for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];remainingLevelEntries<=0&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach(function(childEntry){nextLevelEntries++,queue.push(childEntry)}),remainingLevelEntries--}return row.length&&result.push(row),result}(tree);function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var parentEntry,elementNode=entry.domNode,parentNode=elementNode.parentNode;for(lookup.put(elementNode,entry);parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}}(toBeSortedAnimations))}),runner;function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),function(element){element.removeData(RUNNER_STORAGE_KEY)}(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass("ng-animate"),runner.complete(!rejected)}}}]}];angular.module("ngAnimate",[]).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",["$$rAF",function($$rAF){var queue,cancelFn;function scheduler(tasks){queue=queue.concat(tasks),nextTick()}return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler;function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF(function(){cancelFn||nextTick()})}}}]).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular),function(window,angular,undefined){"use strict";function $$CookieWriter($document,$log,$browser){var cookiePath=$browser.baseHref(),rawDocument=$document[0];return function(name,value,options){rawDocument.cookie=function(name,value,options){var path,expires;expires=(options=options||{}).expires,path=angular.isDefined(options.path)?options.path:cookiePath,angular.isUndefined(value)&&(expires="Thu, 01 Jan 1970 00:00:00 GMT",value=""),angular.isString(expires)&&(expires=new Date(expires));var str=encodeURIComponent(name)+"="+encodeURIComponent(value);str+=path?";path="+path:"",str+=options.domain?";domain="+options.domain:"",str+=expires?";expires="+expires.toUTCString():"";var cookieLength=(str+=options.secure?";secure":"").length+1;return 4096<cookieLength&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"),str}(name,value,options)}}angular.module("ngCookies",["ng"]).provider("$cookies",[function(){var defaults=this.defaults={};function calcOptions(options){return options?angular.extend({},defaults,options):defaults}this.$get=["$$cookieReader","$$cookieWriter",function($$cookieReader,$$cookieWriter){return{get:function(key){return $$cookieReader()[key]},getObject:function(key){var value=this.get(key);return value?angular.fromJson(value):value},getAll:function(){return $$cookieReader()},put:function(key,value,options){$$cookieWriter(key,value,calcOptions(options))},putObject:function(key,value,options){this.put(key,angular.toJson(value),options)},remove:function(key,options){$$cookieWriter(key,void 0,calcOptions(options))}}}]}]),angular.module("ngCookies").factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){return $cookies.getObject(key)},put:function(key,value){$cookies.putObject(key,value)},remove:function(key){$cookies.remove(key)}}}]),$$CookieWriter.$inject=["$document","$log","$browser"],angular.module("ngCookies").provider("$$cookieWriter",function(){this.$get=$$CookieWriter})}(window,window.angular),function(window,angular,undefined){"use strict";var $sanitizeMinErr=angular.$$minErr("$sanitize");var START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs);function makeMap(str,lowercaseKeys){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[lowercaseKeys?angular.lowercase(items[i]):items[i]]=!0;return obj}var hiddenPre=document.createElement("pre");function decodeEntities(value){return value?(hiddenPre.innerHTML=value.replace(/</g,"&lt;"),hiddenPre.textContent):""}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||!0!==validElements[tag]||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;!0!==validAttrs[lkey]||!0===uriAttrs[lkey]&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||!0!==validElements[tag]||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}angular.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return function(html,handler){"string"!=typeof html&&(html=null==html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(chars=!(text=""),stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("\x3c!--")?0<=(index=html.indexOf("--",4))&&html.lastIndexOf("--\x3e",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP))&&(html=html.replace(match[0],""),chars=!1):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP))&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1):BEGIN_TAG_REGEXP.test(html)&&((match=html.match(START_TAG_REGEXP))?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=index<0?html:html.substring(0,index),html=index<0?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),(unary=voidElements[tagName]||!!unary)||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;0<=pos&&stack[pos]!=tagName;pos--);if(0<=pos){for(i=stack.length-1;pos<=i;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}parseEndTag()}(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,MAILTO_REGEXP=/^mailto:/i;return function(text,target){if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""));function addText(text){var chars,buf;text&&html.push((chars=text,htmlSanitizeWriter(buf=[],angular.noop).chars(chars),buf.join("")))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";var $$UMFP,isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,toJson=angular.toJson;function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=function(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=objectKeys(parents[i].params)).length)for(var j in parentParams)0<=indexOf(inheritList,parentParams[j])||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function pick(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return forEach(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function silenceUncaughtInPromise(promise){return promise.then(undefined,function(){})&&promise}function $Resolve($q,$injector){var NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};function isResolve(value){return isObject(value)&&value.then&&value.$$promises}return forEach(invocables,function visit(value,key){if(2!==visited[key]){if(cycle.push(key),1===visited[key])throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=1,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=2}}),invocables=cycle=visited=null,function(locals,parent,self){if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=silenceUncaughtInPromise(resolution.promise),promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}if(silenceUncaughtInPromise(result),isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;i<ii;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);function invoke(key,invocable,params){var invocation=$q.defer(),waitParams=0;function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=silenceUncaughtInPromise(invocation.promise)}return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function TemplateFactory($http,$templateCache,$injector,shouldUnsafelyUseHttp){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:shouldUnsafelyUseHttp?$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data}):$injector.get("$templateRequest")(url)},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){config=extend({params:{}},isObject(config)?config:{});var m,p,param,segment,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash,optional){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"+(optional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),(regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null))&&(type=$$UMFP.type(regexp)||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp,config.caseInsensitive?"i":undefined)})),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}for(this.source=pattern;(m=placeholder.exec(pattern))&&!(0<=(p=matchDetails(m,!1)).segment.indexOf("?"));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash,param.isOptional),segments.push(p.segment),last=placeholder.lastIndex;var i=(segment=pattern.substring(last)).indexOf("?");if(0<=i){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),0<search.length)for(last=0;m=searchPlaceholder.exec(search);)param=addParameter((p=matchDetails(m,!0)).id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(!1===config.strict?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){var listener,rules=[],otherwise=null,interceptDeferred=!1;function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return!isDefined(result)||result}function $get($location,$rootScope,$injector,$browser,$sniffer){var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();function update(evt){if(!evt||!evt.defaultPrevented){lastPushedUrl&&$location.url();lastPushedUrl=undefined;var i,n=rules.length;for(i=0;i<n;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}function check(rule){var handled=rule($injector,$location);return!!handled&&(isString(handled)&&$location.replace().url(handled),!0)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){read?location=$location.url():$location.url()!==location&&($location.url(location),$location.replace())},push:function(urlMatcher,params,options){var url=urlMatcher.format(params||{});null!==url&&params&&params["#"]&&(url+="#"+params["#"]),$location.url(url),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled),isHtml5=isHtml5&&$sniffer.history;var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),null!==url&&params&&params["#"]&&(url+="#"+params["#"]),url=function(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return match=$match,redirect.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]});var match}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:(re=what,prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source),null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):"")});var re,prefix}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},(this.$get=$get).$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=inherit(state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){var ownParams=pick(state.ownParams,state.ownParams.$$keys());return state.parent&&state.parent.params?extend(state.parent.params.$$new(),ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),view.resolveAs=view.resolveAs||state.resolveAs||"$resolve",views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};function findState(stateOrName,base){if(!stateOrName)return undefined;var stateName,isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name;if(0===(stateName=name).indexOf(".")||0===stateName.indexOf("^")){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;i<pathLength;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function registerState(state){var name=(state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}})).name;if(!isString(name)||0<=name.indexOf("@"))throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return function(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return!(states[name]=state)[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&function(a,b,keys){if(!keys)for(var n in keys=[],a)keys.push(n);for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),function(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}(name),state}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){var TransitionSupersededError=new Error("transition superseded"),TransitionSuperseded=silenceUncaughtInPromise($q.reject(TransitionSupersededError)),TransitionPrevented=silenceUncaughtInPromise($q.reject(new Error("transition prevented"))),TransitionAborted=silenceUncaughtInPromise($q.reject(new Error("transition aborted"))),TransitionFailed=silenceUncaughtInPromise($q.reject(new Error("transition failed")));function resolveState(state,params,paramsAreFiltered,inherited,dst,options){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),$q.all(promises).then(function(){var viewsPromises=[];return forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:dst.globals,params:$stateParams,notify:options.notify})||""}],viewsPromises.push($resolve.resolve(injectables,dst.globals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,dst.globals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,result.$$resolveAs=view.resolveAs,dst[name]=result}))}),$q.all(viewsPromises).then(function(){return dst.globals})}).then(function(values){return dst})}return root.locals={resolve:null,globals:{$stateParams:{}}},($state={params:{},current:root.self,$current:root,transition:null,reload:function(state){return $state.transitionTo($state.current,$stateParams,{reload:state||!0,inherit:!1,notify:!0})},go:function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))}}).transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative),hash=toParams["#"];if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=function(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?($rootScope.$broadcast("$stateChangeCancel",redirect.to,redirect.toParams,state,params),TransitionSuperseded):(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(toParams=redirect.toParams,toState=findState(to=redirect.to,(options=redirect.options).relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams);var toPath=(to=toState).path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(options.reload){if(isString(options.reload)||isObject(options.reload)){if(isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reloadState=!0===options.reload?fromPath[0]:findState(options.reload);if(options.reload&&!reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");for(;state&&state===fromPath[keep]&&state!==reloadState;)locals=toLocals[keep]=state.locals,state=toPath[++keep]}}else for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,state=toPath[++keep];if(function(to,toParams,from,fromParams,locals,options){if(!options.reload&&to===from&&(locals===from.locals||!1===to.self.reloadOnSearch&&function(fromAndToState,fromParams,toParams){function notSearchParam(key){return"search"!=fromAndToState.params[key].location}var nonQueryParamKeys=fromAndToState.params.$$keys().filter(notSearchParam),nonQueryParams=pick.apply({},[fromAndToState.params].concat(nonQueryParamKeys));return new $$UMFP.ParamSet(nonQueryParams).$$equals(fromParams,toParams)}(from,fromParams,toParams)))return!0}(to,toParams,from,fromParams,locals,options))return hash&&(toParams["#"]=hash),$state.params=toParams,copy($state.params,$stateParams),copy(filterByKeys(to.params.$$keys(),$stateParams),to.locals.globals.$stateParams),options.location&&to.navigable&&to.navigable.url&&($urlRouter.push(to.navigable.url,toParams,{$$avoidResync:!0,replace:"replace"===options.location}),$urlRouter.update(!0)),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),hash&&(toParams["#"]=hash),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams,options).defaultPrevented)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),null==$state.transition&&$urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;state=toPath[++l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded;for(l=fromPath.length-1;keep<=l;l--)(exiting=fromPath[l]).self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)(entering=toPath[l]).locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?($rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded):($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)}).then(null,function(error){return error===TransitionSupersededError?TransitionSuperseded:$state.transition!==transition?($rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded):($state.transition=null,$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error).defaultPrevented||$urlRouter.update(),$q.reject(error))});return silenceUncaughtInPromise(transition),transition},$state.is=function(stateOrName,params,options){var state=findState(stateOrName,(options=extend({relative:$state.$current},options||{})).relative);return isDefined(state)?$state.$current===state&&(!params||objectKeys(params).reduce(function(acc,key){var paramDef=state.params[key];return acc&&(!paramDef||paramDef.type.equals($stateParams[key],params[key]))},!0)):undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&-1<stateOrName.indexOf("*")){if(!function(glob){for(var globSegments=glob.split("."),segments=$state.$current.name.split("."),i=0,l=globSegments.length;i<l;i++)"*"===globSegments[i]&&(segments[i]="*");return"**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1]))).unshift("**"),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length==segments.length&&segments.join("")===globSegments.join("")}(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);if(!isDefined(state))return undefined;if(!isDefined($state.$current.includes[state.name]))return!1;if(!params)return!0;for(var keys=objectKeys(params),i=0;i<keys.length;i++){var key=keys[i],paramDef=state.params[key];if(paramDef&&!paramDef.type.equals($stateParams[key],params[key]))return!1}return objectKeys(params).reduce(function(acc,key){var paramDef=state.params[key];return acc&&!paramDef||paramDef.type.equals($stateParams[key],params[key])},!0)},$state.href=function(stateOrName,params,options){var state=findState(stateOrName,(options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{})).relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys().concat("#"),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}(root=registerState({name:"",url:"^",views:null,abstract:!0})).navigable=null,this.decorator=function(name,func){if(isString(name)&&!isDefined(func))return stateBuilder[name];if(!isFunction(func)||!isString(name))return this;stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]);return stateBuilder[name]=func,this},this.state=function(name,definition){isObject(name)?definition=name:definition.name=name;return registerState(definition),this},(this.$get=$get).$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result;return(options=extend({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},options)).view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result}}}(this.$get=$get).$inject=["$rootScope","$templateFactory"]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate,$q){var service=$injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}},$animator=service("$animator"),$animate=service("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=function(attrs,scope){if($animate)return{enter:function(element,target,cb){2<angular.version.minor?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){2<angular.version.minor?$animate.leave(element).then(cb):$animate.leave(element,cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}}(attrs,scope);$element.inheritedData("$uiView");function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];(firstTime||previousLocals!==latestLocals)&&(newScope=scope.$new(),latestLocals=$state.$current.locals[name],newScope.$emit("$viewContentLoading",name),currentEl=$transclude(newScope,function(clone){var animEnter=$q.defer(),animLeave=$q.defer(),viewAnimData={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};clone.data("$uiViewAnim",viewAnimData),renderer.enter(clone,$element,function(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),function(){if(previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl){var $uiViewData=currentEl.data("$uiViewAnim");renderer.leave(currentEl,function(){$uiViewData.$$animLeave.resolve(),previousEl=null}),previousEl=currentEl,currentEl=null}}()}),(currentScope=newScope).$emit("$viewContentLoaded",name),currentScope.$eval(onloadExp))}scope.$on("$stateChangeSuccess",function(){updateView(!1)}),updateView(!0)}}}}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return tElement.empty?tElement.empty():tElement[0].innerHTML=null,function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(!locals)return $element.html(initial),void $compile($element.contents())(scope);$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var resolveData=angular.extend({},locals);scope[locals.$$resolveAs]=resolveData;var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope,locals.$element=$element;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller,scope[locals.$$controllerAs][locals.$$resolveAs]=resolveData),isFunction(controller.$onInit)&&controller.$onInit(),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),uiViewCreatedBy=element.inheritedData("$uiView");return 0<=name.indexOf("@")?name:name+"@"+(uiViewCreatedBy?uiViewCreatedBy.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),!(parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name)return stateData.state}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,current){return function(e){var button=e.which||e.button,target=current();if(!(1<button||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout(function(){$state.go(target.state,target.params,target.options)});e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}}}function $StateRefDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var hookFn,ref=parseStateRef(attrs.uiSref,$state.current.name),def={state:ref.state,href:null,params:null},type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null;def.options=extend(function(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0}}(element,$state),attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{});var update=function(val){val&&(def.params=angular.copy(val)),def.href=$state.href(ref.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(ref.state,def.params)),null!==def.href&&attrs.$set(type.attr,def.href)};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(val){val!==def.params&&update(val)},!0),def.params=angular.copy(scope.$eval(ref.paramExpr))),update(),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,function(){return def}),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",function(){element[element.off?"off":"unbind"]("click",hookFn)}))}}}function $StateRefDynamicDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],watch="["+[attrs.uiState,attrs.uiStateParams||null,attrs.uiStateOpts||null].map(function(val){return val||"null"}).join(", ")+"]",def={state:null,params:null,options:null,href:null},unlinkInfoFn=null;function runStateRefLink(group){def.state=group[0],def.params=group[1],def.options=group[2],def.href=$state.href(def.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.state,def.params)),def.href&&attrs.$set(type.attr,def.href)}scope.$watch(watch,runStateRefLink,!0),runStateRefLink(scope.$eval(watch)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,function(){return def}),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",function(){element[element.off?"off":"unbind"]("click",hookFn)}))}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function($scope,$element,$attrs,$timeout){var activeEqClass,uiSrefActive,states=[],activeClasses={};activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element)),stateHash=function(state,params){if(!isString(state))throw new Error("state should be a string");if(isObject(params))return state+toJson(params);if(params=$scope.$eval(params),isObject(params))return state+toJson(params);return state}(stateName,stateParams),stateInfo={state:state||{name:stateName},params:stateParams,hash:stateHash};return states.push(stateInfo),activeClasses[stateHash]=activeClass,function(){var idx=states.indexOf(stateInfo);-1!==idx&&states.splice(idx,1)}}function update(){for(var i=0;i<states.length;i++)state=states[i].state,params=states[i].params,$state.includes(state.name,params)?addClass($element,activeClasses[states[i].hash]):removeClass($element,activeClasses[states[i].hash]),exactMatch(states[i].state,states[i].params)?addClass($element,activeEqClass):removeClass($element,activeEqClass);var state,params}function addClass(el,className){$timeout(function(){el.addClass(className)})}function removeClass(el,className){el.removeClass(className)}function exactMatch(state,params){return $state.is(state.name,params)}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope),isObject(uiSrefActive)&&forEach(uiSrefActive,function(stateOrName,activeClass){if(isString(stateOrName)){var ref=parseStateRef(stateOrName,$state.current.name);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}}),this.$$addStateInfo=function(newState,newParams){if(!(isObject(uiSrefActive)&&0<states.length)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$stateChangeSuccess",update),update()}]}}function $IsStateFilter($state){var isFilter=function(state,params){return $state.is(state,params)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),angular.module("ui.router.util").provider("$templateFactory",function(){var shouldUnsafelyUseHttp=angular.version.minor<3;this.shouldUnsafelyUseHttp=function(value){shouldUnsafelyUseHttp=!!value},this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector){return new TemplateFactory($http,$templateCache,$injector,shouldUnsafelyUseHttp)}]}),UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,param,paramVal,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}return map(map(reverseString(string).split(/-(?!\\)/),reverseString),function(str){return str.replace(/\\-/g,"-")}).reverse()}for(i=0;i<nPath;i++){for(paramName=paramNames[i],param=this.params[paramName],paramVal=m[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&!0===param.array&&(paramVal=decodePathArray(paramVal)),isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}for(;i<nTotal;i++){for(values[paramName=paramNames[i]]=this.params[paramName].value(searchParams[paramName]),param=this.params[paramName],paramVal=searchParams[paramName],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}for(i=0;i<nTotal;i++){var isPathParam=i<nPath,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1],isFinalPathParam=i+1===nPath;if(!1===squash)null!=encoded&&(isArray(encoded)?result+=map(encoded,encodeDashes).join("-"):result+=encodeURIComponent(encoded)),result+=nextSegment;else if(!0===squash){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment);isFinalPathParam&&!0===param.squash&&"/"===result.slice(-1)&&(result=result.slice(0,-1))}else{if(null==encoded||isDefaultValue&&!1!==squash)continue;if(isArray(encoded)||(encoded=[encoded]),0===encoded.length)continue;result+=(search?"&":"?")+name+"="+(encoded=map(encoded,encodeURIComponent).join("&"+name+"=")),search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},Type.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new function(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){if(isArray(val)&&0===val.length)return val;var result=map(val=arrayWrap(val),callback);return!0===allTruthyMode?0===filter(result,falsey).length:function(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}(result)}}var callback;this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=(callback=bindTo(type,"equals"),function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}),this.pattern=type.pattern,this.$normalize=arrayHandler(bindTo(type,"$normalize")),this.name=type.name,this.$arrayMode=mode}(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",function $UrlMatcherFactory(){$$UMFP=this;var isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1;function valToString(val){return null!=val?val.toString().replace(/(~|\/)/g,function(m){return{"~":"~~","/":"~2F"}[m]}):val}var injector,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:function(val){return null!=val?val.toString().replace(/(~~|~2F)/g,function(m){return{"~~":"~","~2F":"/"}[m]}):val},is:function(val){return null==val||!isDefined(val)||"string"==typeof val},pattern:/[^/]*/},int:{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return val!==undefined&&null!==val&&this.decode(val.toString())===val},pattern:/-?\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return!0===val||!1===val},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^/]*/},any:{encode:angular.identity,decode:angular.identity,equals:angular.equals,pattern:/.*/}};function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(!0!==value&&!1!==value&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend({strict:isStrictMode,caseInsensitive:isCaseInsensitive},config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){var self=this;config=function(config){var keys=isObject(config)?objectKeys(config):[];return-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array")&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}(config),type=function(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType||(config.type?angular.isString(config.type)?$types[config.type]:config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string)}(config,type,location);var arrayDefaults,arrayParamNomenclature,arrayMode=(arrayDefaults={array:"search"===location&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{},extend(arrayDefaults,arrayParamNomenclature,config).array);"string"!==(type=arrayMode?type.$asArray(arrayMode,"search"===location):type).name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=function(config,isOptional){var squash=config.squash;if(!isOptional||!1===squash)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(!0===squash||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}(config,isOptional),replace=function(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:function(value){return value=function(value){var val,replacement=map(filter(self.replace,(val=value,function(obj){return obj.from===val})),function(obj){return obj.to});return replacement.length?replacement[0]:value}(value),isDefined(value)?self.type.$normalize(value):function(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=injector.invoke(config.$$fn);if(null!==defaultValue&&defaultValue!==undefined&&!self.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+self.id+"' is not an instance of Type ("+self.type.name+")");return defaultValue}()},dynamic:undefined,config:config,toString:function(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var i,param,rawVal,normalized,encoded,keys=this.$$keys();for(i=0;i<keys.length&&(param=this[keys[i]],(rawVal=paramValues[keys[i]])!==undefined&&null!==rawVal||!param.isOptional);i++){if(normalized=param.type.$normalize(rawVal),!param.type.is(normalized))return!1;if(encoded=param.type.encode(normalized),angular.isString(encoded)&&!param.type.pattern.exec(encoded))return!1}return!0},$$parent:undefined},this.ParamSet=ParamSet}),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",$StateProvider).run(["$injector",function($injector){$injector.get("$state.runtime").autoinject&&$injector.get("$state")}]),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",function(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefDynamicDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective).directive("uiState",$StateRefDynamicDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),function(){"use strict";angular.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(prefix){this.prefix=prefix},this.setStorageCookie=function(exp,path){this.cookie={expiry:exp,path:path}},this.setNotify=function(itemSet,itemRemove){this.notify={setItem:itemSet,removeItem:itemRemove}},this.$get=["$rootScope",function($rootScope){var prefix=this.prefix,cookie=this.cookie,notify=this.notify;"."!==prefix.substr(-1)&&(prefix=prefix?prefix+".":"");var browserSupportsLocalStorage=function(){try{var supported="localStorage"in window&&null!==window.localStorage,key=prefix+"__"+Math.round(1e7*Math.random());return supported&&(localStorage.setItem(key,""),localStorage.removeItem(key)),!0}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),addToLocalStorage=function(key,value){if(!browserSupportsLocalStorage)return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),notify.setItem&&$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"cookie"}),addToCookies(key,value);void 0===value&&(value=null);try{(angular.isObject(value)||angular.isArray(value))&&(value=angular.toJson(value)),localStorage.setItem(prefix+key,value),notify.setItem&&$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"localStorage"})}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),addToCookies(key,value)}return!0},removeFromLocalStorage=function(key){if(!browserSupportsLocalStorage)return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),notify.removeItem&&$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"cookie"}),removeFromCookies(key);try{localStorage.removeItem(prefix+key),notify.removeItem&&$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"localStorage"})}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),removeFromCookies(key)}return!0},browserSupportsCookies=function(){try{return navigator.cookieEnabled||"cookie"in document&&(0<document.cookie.length||-1<(document.cookie="test").indexOf.call(document.cookie,"test"))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}},addToCookies=function(key,value){if(void 0===value)return!1;if(!browserSupportsCookies())return $rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var expiry="",expiryDate=new Date;null===value?(expiryDate.setTime(expiryDate.getTime()+-864e5),expiry="; expires="+expiryDate.toGMTString(),value=""):0!==cookie.expiry&&(expiryDate.setTime(expiryDate.getTime()+24*cookie.expiry*60*60*1e3),expiry="; expires="+expiryDate.toGMTString()),key&&(document.cookie=prefix+key+"="+encodeURIComponent(value)+expiry+"; path="+cookie.path)}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}return!0},getFromCookies=function(key){if(!browserSupportsCookies())return $rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){for(var thisCookie=cookies[i];" "===thisCookie.charAt(0);)thisCookie=thisCookie.substring(1,thisCookie.length);if(0===thisCookie.indexOf(prefix+key+"="))return decodeURIComponent(thisCookie.substring(prefix.length+key.length+1,thisCookie.length))}return null},removeFromCookies=function(key){addToCookies(key,null)},clearAllFromCookies=function(){for(var thisCookie=null,prefixLength=prefix.length,cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){for(thisCookie=cookies[i];" "===thisCookie.charAt(0);)thisCookie=thisCookie.substring(1,thisCookie.length);var key=thisCookie.substring(prefixLength,thisCookie.indexOf("="));removeFromCookies(key)}};return{isSupported:browserSupportsLocalStorage,set:addToLocalStorage,add:addToLocalStorage,get:function(key){if(!browserSupportsLocalStorage)return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),getFromCookies(key);var item=localStorage.getItem(prefix+key);return item&&"null"!==item?"{"===item.charAt(0)||"["===item.charAt(0)?angular.fromJson(item):item:null},keys:function(){if(!browserSupportsLocalStorage)return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var prefixLength=prefix.length,keys=[];for(var key in localStorage)if(key.substr(0,prefixLength)===prefix)try{keys.push(key.substr(prefixLength))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return keys},remove:removeFromLocalStorage,clearAll:function(regularExpression){regularExpression=regularExpression||"";var tempPrefix=prefix.slice(0,-1)+".",testRegex=RegExp(tempPrefix+regularExpression);if(!browserSupportsLocalStorage)return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),clearAllFromCookies();var prefixLength=prefix.length;for(var key in localStorage)if(testRegex.test(key))try{removeFromLocalStorage(key.substr(prefixLength))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),clearAllFromCookies()}return!0},cookie:{set:addToCookies,add:addToCookies,get:getFromCookies,remove:removeFromCookies,clearAll:clearAllFromCookies}}}]})}.call(this),function(angular,analytics){"use strict";var angulartics=window.angulartics||(window.angulartics={});angulartics.waitForVendorCount=0,angulartics.waitForVendorApi=function(objectName,delay,containsField,registerFn,onTimeout){onTimeout||angulartics.waitForVendorCount++,registerFn||(registerFn=containsField,containsField=void 0),!Object.prototype.hasOwnProperty.call(window,objectName)||void 0!==containsField&&void 0===window[objectName][containsField]?setTimeout(function(){angulartics.waitForVendorApi(objectName,delay,containsField,registerFn,!0)},delay):(angulartics.waitForVendorCount--,registerFn(window[objectName]))},angular.module("angulartics",[]).provider("$analytics",function(){var settings={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},cache={},handlers={},updateHandlers=function(handlerName,fn){return handlers[handlerName]||(handlers[handlerName]=[]),handlers[handlerName].push(fn),function(){var handlerArgs=arguments;angular.forEach(handlers[handlerName],function(handler){handler.apply(this,handlerArgs)},this)}},api={settings:settings},provider={$get:function(){return api},api:api,settings:settings,virtualPageviews:function(value){this.settings.pageTracking.autoTrackVirtualPages=value},firstPageview:function(value){this.settings.pageTracking.autoTrackFirstPage=value},withBase:function(value){this.settings.pageTracking.basePath=value?angular.element("base").attr("href").slice(0,-1):""},withAutoBase:function(value){this.settings.pageTracking.autoBasePath=value},developerMode:function(value){this.settings.developerMode=value}},register=function(handlerName,fn){api[handlerName]=updateHandlers(handlerName,fn);var handlerSettings=settings[handlerName],handlerDelay=handlerSettings?handlerSettings.bufferFlushDelay:null,delay=null!==handlerDelay?handlerDelay:settings.bufferFlushDelay;angular.forEach(cache[handlerName],function(args,index){!function(fn,delay){delay?setTimeout(fn,delay):fn()}(function(){fn.apply(this,args)},index*delay)})};return angular.forEach(["pageTrack","eventTrack","setAlias","setUsername","setAlias","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],function(handlerName){var registerName="register"+handlerName.replace(/^./,function(match){return match.toUpperCase()});provider[registerName]=function(fn){register(handlerName,fn)},api[handlerName]=updateHandlers(handlerName,function(handlerName){return function(){angulartics.waitForVendorCount&&(cache[handlerName]||(cache[handlerName]=[]),cache[handlerName].push(arguments))}}(handlerName))}),provider}).run(["$rootScope","$window","$analytics","$injector",function($rootScope,$window,$analytics,$injector){$analytics.settings.pageTracking.autoTrackFirstPage&&$injector.invoke(["$location",function($location){var noRoutesOrStates=!0;if($injector.has("$route")){var $route=$injector.get("$route");for(var route in $route.routes){noRoutesOrStates=!1;break}}else if($injector.has("$state")){var $state=$injector.get("$state");for(var state in $state.get()){noRoutesOrStates=!1;break}}if(noRoutesOrStates)if($analytics.settings.pageTracking.autoBasePath&&($analytics.settings.pageTracking.basePath=$window.location.pathname),$analytics.settings.trackRelativePath){var url=$analytics.settings.pageTracking.basePath+$location.url();$analytics.pageTrack(url,$location)}else $analytics.pageTrack($location.absUrl(),$location)}]),$analytics.settings.pageTracking.autoTrackVirtualPages&&$injector.invoke(["$location",function($location){$analytics.settings.pageTracking.autoBasePath&&($analytics.settings.pageTracking.basePath=$window.location.pathname+"#"),$injector.has("$route")&&$rootScope.$on("$routeChangeSuccess",function(event,current){if(!current||!(current.$$route||current).redirectTo){var url=$analytics.settings.pageTracking.basePath+$location.url();$analytics.pageTrack(url,$location)}}),$injector.has("$state")&&$rootScope.$on("$stateChangeSuccess",function(event,current){var url=$analytics.settings.pageTracking.basePath+$location.url();$analytics.pageTrack(url,$location)})}]),$analytics.settings.developerMode&&angular.forEach($analytics,function(attr,name){"function"==typeof attr&&($analytics[name]=function(){})})}]).directive("analyticsOn",["$analytics",function($analytics){function isCommand(element){return 0<=["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(element.tagName.toLowerCase()+":"+(element.type||""))}function propertyName(name){var s=name.slice(9);return null!=s&&0<s.length?s.substring(0,1).toLowerCase()+s.substring(1):s}return{restrict:"A",link:function($scope,$element,$attrs){var eventType=$attrs.analyticsOn||(isCommand($element[0]),"click"),trackingData={};angular.forEach($attrs.$attr,function(attr,name){(function(name){return"analytics"===name.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(name.substr(9))})(name)&&(trackingData[propertyName(name)]=$attrs[name],$attrs.$observe(name,function(value){trackingData[propertyName(name)]=value}))}),angular.element($element[0]).bind(eventType,function($event){var element,eventName=$attrs.analyticsEvent||(isCommand(element=$element[0])?element.innerText||element.value:element.id||element.name||element.tagName);trackingData.eventType=$event.type,$attrs.analyticsIf&&!$scope.$eval($attrs.analyticsIf)||($attrs.analyticsProperties&&angular.extend(trackingData,$scope.$eval($attrs.analyticsProperties)),$analytics.eventTrack(eventName,trackingData))})}}}])}(angular),function(angular){"use strict";angular.module("angulartics.google.analytics",["angulartics"]).config(["$analyticsProvider",function($analyticsProvider){$analyticsProvider.settings.trackRelativePath=!0,$analyticsProvider.settings.ga={additionalAccountNames:void 0},$analyticsProvider.registerPageTrack(function(path){window._gaq&&_gaq.push(["_trackPageview",path]),window.ga&&(ga("send","pageview",path),angular.forEach($analyticsProvider.settings.ga.additionalAccountNames,function(accountName){ga(accountName+".send","pageview",path)}))}),$analyticsProvider.registerEventTrack(function(action,properties){if(properties&&properties.category){if(properties.value){var parsed=parseInt(properties.value,10);properties.value=isNaN(parsed)?0:parsed}if(window._gaq)_gaq.push(["_trackEvent",properties.category,action,properties.label,properties.value,properties.noninteraction]);else if(window.ga){for(var eventOptions={eventCategory:properties.category||null,eventAction:action||null,eventLabel:properties.label||null,eventValue:properties.value||null,nonInteraction:properties.noninteraction||null},idx=1;idx<=20;idx++)properties["dimension"+idx.toString()]&&(eventOptions["dimension"+idx.toString()]=properties["dimension"+idx.toString()]),properties["metric"+idx.toString()]&&(eventOptions["metric"+idx.toString()]=properties["metric"+idx.toString()]);ga("send","event",eventOptions),angular.forEach($analyticsProvider.settings.ga.additionalAccountNames,function(accountName){ga(accountName+".send","event",eventOptions)})}}})}])}(angular),Enumerable=function(){var Enumerable=function(getEnumerator){this.GetEnumerator=getEnumerator};Enumerable.Choice=function(){var args=arguments[0]instanceof Array?arguments[0]:arguments;return new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return this.Yield(args[Math.floor(Math.random()*args.length)])},Functions.Blank)})},Enumerable.Cycle=function(){var args=arguments[0]instanceof Array?arguments[0]:arguments;return new Enumerable(function(){var index=0;return new IEnumerator(Functions.Blank,function(){return index>=args.length&&(index=0),this.Yield(args[index++])},Functions.Blank)})},Enumerable.Empty=function(){return new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return!1},Functions.Blank)})},Enumerable.From=function(obj){if(null==obj)return Enumerable.Empty();if(obj instanceof Enumerable)return obj;if(typeof obj==Types.Number||typeof obj==Types.Boolean)return Enumerable.Repeat(obj,1);if(typeof obj==Types.String)return new Enumerable(function(){var index=0;return new IEnumerator(Functions.Blank,function(){return index<obj.length&&this.Yield(obj.charAt(index++))},Functions.Blank)});if(typeof obj!=Types.Function){if(typeof obj.length==Types.Number)return new ArrayEnumerable(obj);if(!(obj instanceof Object)&&Utils.IsIEnumerable(obj))return new Enumerable(function(){var enumerator,isFirst=!0;return new IEnumerator(function(){enumerator=new Enumerator(obj)},function(){return isFirst?isFirst=!1:enumerator.moveNext(),!enumerator.atEnd()&&this.Yield(enumerator.item())},Functions.Blank)})}return new Enumerable(function(){var array=[],index=0;return new IEnumerator(function(){for(var key in obj)obj[key]instanceof Function||array.push({Key:key,Value:obj[key]})},function(){return index<array.length&&this.Yield(array[index++])},Functions.Blank)})},Enumerable.Return=function(element){return Enumerable.Repeat(element,1)},Enumerable.Matches=function(input,pattern,flags){return null==flags&&(flags=""),pattern instanceof RegExp&&(flags+=pattern.ignoreCase?"i":"",flags+=pattern.multiline?"m":"",pattern=pattern.source),-1===flags.indexOf("g")&&(flags+="g"),new Enumerable(function(){var regex;return new IEnumerator(function(){regex=new RegExp(pattern,flags)},function(){var match=regex.exec(input);return!!match&&this.Yield(match)},Functions.Blank)})},Enumerable.Range=function(start,count,step){return null==step&&(step=1),Enumerable.ToInfinity(start,step).Take(count)},Enumerable.RangeDown=function(start,count,step){return null==step&&(step=1),Enumerable.ToNegativeInfinity(start,step).Take(count)},Enumerable.RangeTo=function(start,to,step){return null==step&&(step=1),start<to?Enumerable.ToInfinity(start,step).TakeWhile(function(i){return i<=to}):Enumerable.ToNegativeInfinity(start,step).TakeWhile(function(i){return to<=i})},Enumerable.Repeat=function(obj,num){return null!=num?Enumerable.Repeat(obj).Take(num):new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return this.Yield(obj)},Functions.Blank)})},Enumerable.RepeatWithFinalize=function(initializer,finalizer){return initializer=Utils.CreateLambda(initializer),finalizer=Utils.CreateLambda(finalizer),new Enumerable(function(){var element;return new IEnumerator(function(){element=initializer()},function(){return this.Yield(element)},function(){null!=element&&(finalizer(element),element=null)})})},Enumerable.Generate=function(func,count){return null!=count?Enumerable.Generate(func).Take(count):(func=Utils.CreateLambda(func),new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return this.Yield(func())},Functions.Blank)}))},Enumerable.ToInfinity=function(start,step){return null==start&&(start=0),null==step&&(step=1),new Enumerable(function(){var value;return new IEnumerator(function(){value=start-step},function(){return this.Yield(value+=step)},Functions.Blank)})},Enumerable.ToNegativeInfinity=function(start,step){return null==start&&(start=0),null==step&&(step=1),new Enumerable(function(){var value;return new IEnumerator(function(){value=start+step},function(){return this.Yield(value-=step)},Functions.Blank)})},Enumerable.Unfold=function(seed,func){return func=Utils.CreateLambda(func),new Enumerable(function(){var value,isFirst=!0;return new IEnumerator(Functions.Blank,function(){return value=isFirst?(isFirst=!1,seed):func(value),this.Yield(value)},Functions.Blank)})},Enumerable.prototype={CascadeBreadthFirst:function(func,resultSelector){var source=this;return func=Utils.CreateLambda(func),resultSelector=Utils.CreateLambda(resultSelector),new Enumerable(function(){var enumerator,nestLevel=0,buffer=[];return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(;;){if(enumerator.MoveNext())return buffer.push(enumerator.Current()),this.Yield(resultSelector(enumerator.Current(),nestLevel));var next=Enumerable.From(buffer).SelectMany(function(x){return func(x)});if(!next.Any())return!1;nestLevel++,buffer=[],Utils.Dispose(enumerator),enumerator=next.GetEnumerator()}},function(){Utils.Dispose(enumerator)})})},CascadeDepthFirst:function(func,resultSelector){var source=this;return func=Utils.CreateLambda(func),resultSelector=Utils.CreateLambda(resultSelector),new Enumerable(function(){var enumerator,enumeratorStack=[];return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(;;){if(enumerator.MoveNext()){var value=resultSelector(enumerator.Current(),enumeratorStack.length);return enumeratorStack.push(enumerator),enumerator=Enumerable.From(func(enumerator.Current())).GetEnumerator(),this.Yield(value)}if(enumeratorStack.length<=0)return!1;Utils.Dispose(enumerator),enumerator=enumeratorStack.pop()}},function(){try{Utils.Dispose(enumerator)}finally{Enumerable.From(enumeratorStack).ForEach(function(s){s.Dispose()})}})})},Flatten:function(){var source=this;return new Enumerable(function(){var enumerator,middleEnumerator=null;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(;;){if(null!=middleEnumerator){if(middleEnumerator.MoveNext())return this.Yield(middleEnumerator.Current());middleEnumerator=null}if(enumerator.MoveNext()){if(enumerator.Current()instanceof Array){Utils.Dispose(middleEnumerator),middleEnumerator=Enumerable.From(enumerator.Current()).SelectMany(Functions.Identity).Flatten().GetEnumerator();continue}return this.Yield(enumerator.Current())}return!1}},function(){try{Utils.Dispose(enumerator)}finally{Utils.Dispose(middleEnumerator)}})})},Pairwise:function(selector){var source=this;return selector=Utils.CreateLambda(selector),new Enumerable(function(){var enumerator;return new IEnumerator(function(){(enumerator=source.GetEnumerator()).MoveNext()},function(){var prev=enumerator.Current();return!!enumerator.MoveNext()&&this.Yield(selector(prev,enumerator.Current()))},function(){Utils.Dispose(enumerator)})})},Scan:function(seed,func,resultSelector){if(null!=resultSelector)return this.Scan(seed,func).Select(resultSelector);var isUseSeed;isUseSeed=null==func?(func=Utils.CreateLambda(seed),!1):(func=Utils.CreateLambda(func),!0);var source=this;return new Enumerable(function(){var enumerator,value,isFirst=!0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){if(isFirst){if(isFirst=!1,isUseSeed)return this.Yield(value=seed);if(enumerator.MoveNext())return this.Yield(value=enumerator.Current())}return!!enumerator.MoveNext()&&this.Yield(value=func(value,enumerator.Current()))},function(){Utils.Dispose(enumerator)})})},Select:function(selector){var source=this;return selector=Utils.CreateLambda(selector),new Enumerable(function(){var enumerator,index=0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){return!!enumerator.MoveNext()&&this.Yield(selector(enumerator.Current(),index++))},function(){Utils.Dispose(enumerator)})})},SelectMany:function(collectionSelector,resultSelector){var source=this;return collectionSelector=Utils.CreateLambda(collectionSelector),null==resultSelector&&(resultSelector=function(a,b){return b}),resultSelector=Utils.CreateLambda(resultSelector),new Enumerable(function(){var enumerator,middleEnumerator=void 0,index=0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){if(void 0===middleEnumerator&&!enumerator.MoveNext())return!1;do{if(null==middleEnumerator){var middleSeq=collectionSelector(enumerator.Current(),index++);middleEnumerator=Enumerable.From(middleSeq).GetEnumerator()}if(middleEnumerator.MoveNext())return this.Yield(resultSelector(enumerator.Current(),middleEnumerator.Current()));Utils.Dispose(middleEnumerator),middleEnumerator=null}while(enumerator.MoveNext());return!1},function(){try{Utils.Dispose(enumerator)}finally{Utils.Dispose(middleEnumerator)}})})},Where:function(predicate){predicate=Utils.CreateLambda(predicate);var source=this;return new Enumerable(function(){var enumerator,index=0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(;enumerator.MoveNext();)if(predicate(enumerator.Current(),index++))return this.Yield(enumerator.Current());return!1},function(){Utils.Dispose(enumerator)})})},OfType:function(type){var typeName;switch(type){case Number:typeName=Types.Number;break;case String:typeName=Types.String;break;case Boolean:typeName=Types.Boolean;break;case Function:typeName=Types.Function;break;default:typeName=null}return null===typeName?this.Where(function(x){return x instanceof type}):this.Where(function(x){return typeof x===typeName})},Zip:function(second,selector){selector=Utils.CreateLambda(selector);var source=this;return new Enumerable(function(){var firstEnumerator,secondEnumerator,index=0;return new IEnumerator(function(){firstEnumerator=source.GetEnumerator(),secondEnumerator=Enumerable.From(second).GetEnumerator()},function(){return!(!firstEnumerator.MoveNext()||!secondEnumerator.MoveNext())&&this.Yield(selector(firstEnumerator.Current(),secondEnumerator.Current(),index++))},function(){try{Utils.Dispose(firstEnumerator)}finally{Utils.Dispose(secondEnumerator)}})})},Join:function(inner,outerKeySelector,innerKeySelector,resultSelector,compareSelector){outerKeySelector=Utils.CreateLambda(outerKeySelector),innerKeySelector=Utils.CreateLambda(innerKeySelector),resultSelector=Utils.CreateLambda(resultSelector),compareSelector=Utils.CreateLambda(compareSelector);var source=this;return new Enumerable(function(){var outerEnumerator,lookup,innerElements=null,innerCount=0;return new IEnumerator(function(){outerEnumerator=source.GetEnumerator(),lookup=Enumerable.From(inner).ToLookup(innerKeySelector,Functions.Identity,compareSelector)},function(){for(;;){if(null!=innerElements){var innerElement=innerElements[innerCount++];if(void 0!==innerElement)return this.Yield(resultSelector(outerEnumerator.Current(),innerElement));innerElement=null,innerCount=0}if(!outerEnumerator.MoveNext())return!1;var key=outerKeySelector(outerEnumerator.Current());innerElements=lookup.Get(key).ToArray()}},function(){Utils.Dispose(outerEnumerator)})})},GroupJoin:function(inner,outerKeySelector,innerKeySelector,resultSelector,compareSelector){outerKeySelector=Utils.CreateLambda(outerKeySelector),innerKeySelector=Utils.CreateLambda(innerKeySelector),resultSelector=Utils.CreateLambda(resultSelector),compareSelector=Utils.CreateLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator=source.GetEnumerator(),lookup=null;return new IEnumerator(function(){enumerator=source.GetEnumerator(),lookup=Enumerable.From(inner).ToLookup(innerKeySelector,Functions.Identity,compareSelector)},function(){if(enumerator.MoveNext()){var innerElement=lookup.Get(outerKeySelector(enumerator.Current()));return this.Yield(resultSelector(enumerator.Current(),innerElement))}return!1},function(){Utils.Dispose(enumerator)})})},All:function(predicate){predicate=Utils.CreateLambda(predicate);var result=!0;return this.ForEach(function(x){if(!predicate(x))return result=!1}),result},Any:function(predicate){predicate=Utils.CreateLambda(predicate);var enumerator=this.GetEnumerator();try{if(0==arguments.length)return enumerator.MoveNext();for(;enumerator.MoveNext();)if(predicate(enumerator.Current()))return!0;return!1}finally{Utils.Dispose(enumerator)}},Concat:function(second){var source=this;return new Enumerable(function(){var firstEnumerator,secondEnumerator;return new IEnumerator(function(){firstEnumerator=source.GetEnumerator()},function(){if(null==secondEnumerator){if(firstEnumerator.MoveNext())return this.Yield(firstEnumerator.Current());secondEnumerator=Enumerable.From(second).GetEnumerator()}return!!secondEnumerator.MoveNext()&&this.Yield(secondEnumerator.Current())},function(){try{Utils.Dispose(firstEnumerator)}finally{Utils.Dispose(secondEnumerator)}})})},Insert:function(index,second){var source=this;return new Enumerable(function(){var firstEnumerator,secondEnumerator,count=0,isEnumerated=!1;return new IEnumerator(function(){firstEnumerator=source.GetEnumerator(),secondEnumerator=Enumerable.From(second).GetEnumerator()},function(){return count==index&&secondEnumerator.MoveNext()?(isEnumerated=!0,this.Yield(secondEnumerator.Current())):firstEnumerator.MoveNext()?(count++,this.Yield(firstEnumerator.Current())):!(isEnumerated||!secondEnumerator.MoveNext())&&this.Yield(secondEnumerator.Current())},function(){try{Utils.Dispose(firstEnumerator)}finally{Utils.Dispose(secondEnumerator)}})})},Alternate:function(value){return value=Enumerable.Return(value),this.SelectMany(function(elem){return Enumerable.Return(elem).Concat(value)}).TakeExceptLast()},Contains:function(value,compareSelector){compareSelector=Utils.CreateLambda(compareSelector);var enumerator=this.GetEnumerator();try{for(;enumerator.MoveNext();)if(compareSelector(enumerator.Current())===value)return!0;return!1}finally{Utils.Dispose(enumerator)}},DefaultIfEmpty:function(defaultValue){var source=this;return new Enumerable(function(){var enumerator,isFirst=!0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){return enumerator.MoveNext()?(isFirst=!1,this.Yield(enumerator.Current())):!!isFirst&&(isFirst=!1,this.Yield(defaultValue))},function(){Utils.Dispose(enumerator)})})},Distinct:function(compareSelector){return this.Except(Enumerable.Empty(),compareSelector)},Except:function(second,compareSelector){compareSelector=Utils.CreateLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator,keys;return new IEnumerator(function(){enumerator=source.GetEnumerator(),keys=new Dictionary(compareSelector),Enumerable.From(second).ForEach(function(key){keys.Add(key)})},function(){for(;enumerator.MoveNext();){var current=enumerator.Current();if(!keys.Contains(current))return keys.Add(current),this.Yield(current)}return!1},function(){Utils.Dispose(enumerator)})})},Intersect:function(second,compareSelector){compareSelector=Utils.CreateLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator,keys,outs;return new IEnumerator(function(){enumerator=source.GetEnumerator(),keys=new Dictionary(compareSelector),Enumerable.From(second).ForEach(function(key){keys.Add(key)}),outs=new Dictionary(compareSelector)},function(){for(;enumerator.MoveNext();){var current=enumerator.Current();if(!outs.Contains(current)&&keys.Contains(current))return outs.Add(current),this.Yield(current)}return!1},function(){Utils.Dispose(enumerator)})})},SequenceEqual:function(second,compareSelector){compareSelector=Utils.CreateLambda(compareSelector);var firstEnumerator=this.GetEnumerator();try{var secondEnumerator=Enumerable.From(second).GetEnumerator();try{for(;firstEnumerator.MoveNext();)if(!secondEnumerator.MoveNext()||compareSelector(firstEnumerator.Current())!==compareSelector(secondEnumerator.Current()))return!1;return!secondEnumerator.MoveNext()}finally{Utils.Dispose(secondEnumerator)}}finally{Utils.Dispose(firstEnumerator)}},Union:function(second,compareSelector){compareSelector=Utils.CreateLambda(compareSelector);var source=this;return new Enumerable(function(){var firstEnumerator,secondEnumerator,keys;return new IEnumerator(function(){firstEnumerator=source.GetEnumerator(),keys=new Dictionary(compareSelector)},function(){var current;if(void 0===secondEnumerator){for(;firstEnumerator.MoveNext();)if(current=firstEnumerator.Current(),!keys.Contains(current))return keys.Add(current),this.Yield(current);secondEnumerator=Enumerable.From(second).GetEnumerator()}for(;secondEnumerator.MoveNext();)if(current=secondEnumerator.Current(),!keys.Contains(current))return keys.Add(current),this.Yield(current);return!1},function(){try{Utils.Dispose(firstEnumerator)}finally{Utils.Dispose(secondEnumerator)}})})},OrderBy:function(keySelector){return new OrderedEnumerable(this,keySelector,!1)},OrderByDescending:function(keySelector){return new OrderedEnumerable(this,keySelector,!0)},Reverse:function(){var source=this;return new Enumerable(function(){var buffer,index;return new IEnumerator(function(){buffer=source.ToArray(),index=buffer.length},function(){return 0<index&&this.Yield(buffer[--index])},Functions.Blank)})},Shuffle:function(){var source=this;return new Enumerable(function(){var buffer;return new IEnumerator(function(){buffer=source.ToArray()},function(){if(0<buffer.length){var i=Math.floor(Math.random()*buffer.length);return this.Yield(buffer.splice(i,1)[0])}return!1},Functions.Blank)})},GroupBy:function(keySelector,elementSelector,resultSelector,compareSelector){var source=this;return keySelector=Utils.CreateLambda(keySelector),elementSelector=Utils.CreateLambda(elementSelector),null!=resultSelector&&(resultSelector=Utils.CreateLambda(resultSelector)),compareSelector=Utils.CreateLambda(compareSelector),new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.ToLookup(keySelector,elementSelector,compareSelector).ToEnumerable().GetEnumerator()},function(){for(;enumerator.MoveNext();)return null==resultSelector?this.Yield(enumerator.Current()):this.Yield(resultSelector(enumerator.Current().Key(),enumerator.Current()));return!1},function(){Utils.Dispose(enumerator)})})},PartitionBy:function(keySelector,elementSelector,resultSelector,compareSelector){var hasResultSelector,source=this;return keySelector=Utils.CreateLambda(keySelector),elementSelector=Utils.CreateLambda(elementSelector),compareSelector=Utils.CreateLambda(compareSelector),resultSelector=null==resultSelector?(hasResultSelector=!1,function(key,group){return new Grouping(key,group)}):(hasResultSelector=!0,Utils.CreateLambda(resultSelector)),new Enumerable(function(){var enumerator,key,compareKey,group=[];return new IEnumerator(function(){(enumerator=source.GetEnumerator()).MoveNext()&&(key=keySelector(enumerator.Current()),compareKey=compareSelector(key),group.push(elementSelector(enumerator.Current())))},function(){for(var hasNext;1==(hasNext=enumerator.MoveNext())&&compareKey===compareSelector(keySelector(enumerator.Current()));)group.push(elementSelector(enumerator.Current()));if(0<group.length){var result=resultSelector(key,hasResultSelector?Enumerable.From(group):group);return group=hasNext?(key=keySelector(enumerator.Current()),compareKey=compareSelector(key),[elementSelector(enumerator.Current())]):[],this.Yield(result)}return!1},function(){Utils.Dispose(enumerator)})})},BufferWithCount:function(count){var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(var array=[],index=0;enumerator.MoveNext();)if(array.push(enumerator.Current()),++index>=count)return this.Yield(array);return 0<array.length&&this.Yield(array)},function(){Utils.Dispose(enumerator)})})},Aggregate:function(seed,func,resultSelector){return this.Scan(seed,func,resultSelector).Last()},Average:function(selector){selector=Utils.CreateLambda(selector);var sum=0,count=0;return this.ForEach(function(x){sum+=selector(x),++count}),sum/count},Count:function(predicate){predicate=null==predicate?Functions.True:Utils.CreateLambda(predicate);var count=0;return this.ForEach(function(x,i){predicate(x,i)&&++count}),count},Max:function(selector){return null==selector&&(selector=Functions.Identity),this.Select(selector).Aggregate(function(a,b){return b<a?a:b})},Min:function(selector){return null==selector&&(selector=Functions.Identity),this.Select(selector).Aggregate(function(a,b){return a<b?a:b})},MaxBy:function(keySelector){return keySelector=Utils.CreateLambda(keySelector),this.Aggregate(function(a,b){return keySelector(a)>keySelector(b)?a:b})},MinBy:function(keySelector){return keySelector=Utils.CreateLambda(keySelector),this.Aggregate(function(a,b){return keySelector(a)<keySelector(b)?a:b})},Sum:function(selector){return null==selector&&(selector=Functions.Identity),this.Select(selector).Aggregate(0,function(a,b){return a+b})},ElementAt:function(index){var value,found=!1;if(this.ForEach(function(x,i){if(i==index)return value=x,!(found=!0)}),!found)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return value},ElementAtOrDefault:function(index,defaultValue){var value,found=!1;return this.ForEach(function(x,i){if(i==index)return value=x,!(found=!0)}),found?value:defaultValue},First:function(predicate){if(null!=predicate)return this.Where(predicate).First();var value,found=!1;if(this.ForEach(function(x){return value=x,!(found=!0)}),!found)throw new Error("First:No element satisfies the condition.");return value},FirstOrDefault:function(defaultValue,predicate){if(null!=predicate)return this.Where(predicate).FirstOrDefault(defaultValue);var value,found=!1;return this.ForEach(function(x){return value=x,!(found=!0)}),found?value:defaultValue},Last:function(predicate){if(null!=predicate)return this.Where(predicate).Last();var value,found=!1;if(this.ForEach(function(x){found=!0,value=x}),!found)throw new Error("Last:No element satisfies the condition.");return value},LastOrDefault:function(defaultValue,predicate){if(null!=predicate)return this.Where(predicate).LastOrDefault(defaultValue);var value,found=!1;return this.ForEach(function(x){found=!0,value=x}),found?value:defaultValue},Single:function(predicate){if(null!=predicate)return this.Where(predicate).Single();var value,found=!1;if(this.ForEach(function(x){if(found)throw new Error("Single:sequence contains more than one element.");found=!0,value=x}),!found)throw new Error("Single:No element satisfies the condition.");return value},SingleOrDefault:function(defaultValue,predicate){if(null!=predicate)return this.Where(predicate).SingleOrDefault(defaultValue);var value,found=!1;return this.ForEach(function(x){if(found)throw new Error("Single:sequence contains more than one element.");found=!0,value=x}),found?value:defaultValue},Skip:function(count){var source=this;return new Enumerable(function(){var enumerator,index=0;return new IEnumerator(function(){for(enumerator=source.GetEnumerator();index++<count&&enumerator.MoveNext(););},function(){return!!enumerator.MoveNext()&&this.Yield(enumerator.Current())},function(){Utils.Dispose(enumerator)})})},SkipWhile:function(predicate){predicate=Utils.CreateLambda(predicate);var source=this;return new Enumerable(function(){var enumerator,index=0,isSkipEnd=!1;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(;!isSkipEnd;){if(!enumerator.MoveNext())return!1;if(!predicate(enumerator.Current(),index++))return isSkipEnd=!0,this.Yield(enumerator.Current())}return!!enumerator.MoveNext()&&this.Yield(enumerator.Current())},function(){Utils.Dispose(enumerator)})})},Take:function(count){var source=this;return new Enumerable(function(){var enumerator,index=0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){return!!(index++<count&&enumerator.MoveNext())&&this.Yield(enumerator.Current())},function(){Utils.Dispose(enumerator)})})},TakeWhile:function(predicate){predicate=Utils.CreateLambda(predicate);var source=this;return new Enumerable(function(){var enumerator,index=0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){return!(!enumerator.MoveNext()||!predicate(enumerator.Current(),index++))&&this.Yield(enumerator.Current())},function(){Utils.Dispose(enumerator)})})},TakeExceptLast:function(count){null==count&&(count=1);var source=this;return new Enumerable(function(){if(count<=0)return source.GetEnumerator();var enumerator,q=[];return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){for(;enumerator.MoveNext();){if(q.length==count)return q.push(enumerator.Current()),this.Yield(q.shift());q.push(enumerator.Current())}return!1},function(){Utils.Dispose(enumerator)})})},TakeFromLast:function(count){if(count<=0||null==count)return Enumerable.Empty();var source=this;return new Enumerable(function(){var sourceEnumerator,enumerator,q=[];return new IEnumerator(function(){sourceEnumerator=source.GetEnumerator()},function(){for(;sourceEnumerator.MoveNext();)q.length==count&&q.shift(),q.push(sourceEnumerator.Current());return null==enumerator&&(enumerator=Enumerable.From(q).GetEnumerator()),!!enumerator.MoveNext()&&this.Yield(enumerator.Current())},function(){Utils.Dispose(enumerator)})})},IndexOf:function(item){var found=null;return this.ForEach(function(x,i){if(x===item)return found=i,!0}),null!==found?found:-1},LastIndexOf:function(item){var result=-1;return this.ForEach(function(x,i){x===item&&(result=i)}),result},ToArray:function(){var array=[];return this.ForEach(function(x){array.push(x)}),array},ToLookup:function(keySelector,elementSelector,compareSelector){keySelector=Utils.CreateLambda(keySelector),elementSelector=Utils.CreateLambda(elementSelector),compareSelector=Utils.CreateLambda(compareSelector);var dict=new Dictionary(compareSelector);return this.ForEach(function(x){var key=keySelector(x),element=elementSelector(x),array=dict.Get(key);void 0!==array?array.push(element):dict.Add(key,[element])}),new Lookup(dict)},ToObject:function(keySelector,elementSelector){keySelector=Utils.CreateLambda(keySelector),elementSelector=Utils.CreateLambda(elementSelector);var obj={};return this.ForEach(function(x){obj[keySelector(x)]=elementSelector(x)}),obj},ToDictionary:function(keySelector,elementSelector,compareSelector){keySelector=Utils.CreateLambda(keySelector),elementSelector=Utils.CreateLambda(elementSelector),compareSelector=Utils.CreateLambda(compareSelector);var dict=new Dictionary(compareSelector);return this.ForEach(function(x){dict.Add(keySelector(x),elementSelector(x))}),dict},ToJSON:function(replacer,space){return JSON.stringify(this.ToArray(),replacer,space)},ToString:function(separator,selector){return null==separator&&(separator=""),null==selector&&(selector=Functions.Identity),this.Select(selector).ToArray().join(separator)},Do:function(action){var source=this;return action=Utils.CreateLambda(action),new Enumerable(function(){var enumerator,index=0;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){return!!enumerator.MoveNext()&&(action(enumerator.Current(),index++),this.Yield(enumerator.Current()))},function(){Utils.Dispose(enumerator)})})},ForEach:function(action){action=Utils.CreateLambda(action);var index=0,enumerator=this.GetEnumerator();try{for(;enumerator.MoveNext()&&!1!==action(enumerator.Current(),index++););}finally{Utils.Dispose(enumerator)}},Write:function(separator,selector){null==separator&&(separator=""),selector=Utils.CreateLambda(selector);var isFirst=!0;this.ForEach(function(item){isFirst?isFirst=!1:document.write(separator),document.write(selector(item))})},WriteLine:function(selector){selector=Utils.CreateLambda(selector),this.ForEach(function(item){document.write(selector(item)),document.write("<br />")})},Force:function(){var enumerator=this.GetEnumerator();try{for(;enumerator.MoveNext(););}finally{Utils.Dispose(enumerator)}},Let:function(func){func=Utils.CreateLambda(func);var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=Enumerable.From(func(source)).GetEnumerator()},function(){return!!enumerator.MoveNext()&&this.Yield(enumerator.Current())},function(){Utils.Dispose(enumerator)})})},Share:function(){var sharedEnumerator,source=this;return new Enumerable(function(){return new IEnumerator(function(){null==sharedEnumerator&&(sharedEnumerator=source.GetEnumerator())},function(){return!!sharedEnumerator.MoveNext()&&this.Yield(sharedEnumerator.Current())},Functions.Blank)})},MemoizeAll:function(){var cache,enumerator,source=this;return new Enumerable(function(){var index=-1;return new IEnumerator(function(){null==enumerator&&(enumerator=source.GetEnumerator(),cache=[])},function(){return index++,cache.length<=index?!!enumerator.MoveNext()&&this.Yield(cache[index]=enumerator.Current()):this.Yield(cache[index])},Functions.Blank)})},Catch:function(handler){handler=Utils.CreateLambda(handler);var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){try{return!!enumerator.MoveNext()&&this.Yield(enumerator.Current())}catch(e){return handler(e),!1}},function(){Utils.Dispose(enumerator)})})},Finally:function(finallyAction){finallyAction=Utils.CreateLambda(finallyAction);var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.GetEnumerator()},function(){return!!enumerator.MoveNext()&&this.Yield(enumerator.Current())},function(){try{Utils.Dispose(enumerator)}finally{finallyAction()}})})},Trace:function(message,selector){return null==message&&(message="Trace"),selector=Utils.CreateLambda(selector),this.Do(function(item){console.log(message,":",selector(item))})}};var Functions={Identity:function(x){return x},True:function(){return!0},Blank:function(){}},Types={Boolean:typeof!0,Number:"number",String:"string",Object:typeof{},Undefined:"undefined",Function:"function"},Utils={CreateLambda:function(expression){if(null==expression)return Functions.Identity;if(typeof expression!=Types.String)return expression;if(""==expression)return Functions.Identity;if(-1==expression.indexOf("=>"))return new Function("$,$$,$$$,$$$$","return "+expression);var expr=expression.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return new Function(expr[1],"return "+expr[2])},IsIEnumerable:function(obj){if(typeof Enumerator!=Types.Undefined)try{return new Enumerator(obj),!0}catch(e){}return!1},Compare:function(a,b){return a===b?0:b<a?1:-1},Dispose:function(obj){null!=obj&&obj.Dispose()}},State_Before=0,State_Running=1,State_After=2,IEnumerator=function(initialize,tryGetNext,dispose){var yielder=new Yielder,state=State_Before;this.Current=yielder.Current,this.MoveNext=function(){try{switch(state){case State_Before:state=State_Running,initialize();case State_Running:return!!tryGetNext.apply(yielder)||(this.Dispose(),!1);case State_After:return!1}}catch(e){throw this.Dispose(),e}},this.Dispose=function(){if(state==State_Running)try{dispose()}finally{state=State_After}}},Yielder=function(){var current=null;this.Current=function(){return current},this.Yield=function(value){return current=value,!0}},OrderedEnumerable=function(source,keySelector,descending,parent){this.source=source,this.keySelector=Utils.CreateLambda(keySelector),this.descending=descending,this.parent=parent};OrderedEnumerable.prototype=new Enumerable,OrderedEnumerable.prototype.CreateOrderedEnumerable=function(keySelector,descending){return new OrderedEnumerable(this.source,keySelector,descending,this)},OrderedEnumerable.prototype.ThenBy=function(keySelector){return this.CreateOrderedEnumerable(keySelector,!1)},OrderedEnumerable.prototype.ThenByDescending=function(keySelector){return this.CreateOrderedEnumerable(keySelector,!0)},OrderedEnumerable.prototype.GetEnumerator=function(){var buffer,indexes,self=this,index=0;return new IEnumerator(function(){buffer=[],indexes=[],self.source.ForEach(function(item,index){buffer.push(item),indexes.push(index)});var sortContext=SortContext.Create(self,null);sortContext.GenerateKeys(buffer),indexes.sort(function(a,b){return sortContext.Compare(a,b)})},function(){return index<indexes.length&&this.Yield(buffer[indexes[index++]])},Functions.Blank)};var SortContext=function(keySelector,descending,child){this.keySelector=keySelector,this.descending=descending,this.child=child,this.keys=null};SortContext.Create=function(orderedEnumerable,currentContext){var context=new SortContext(orderedEnumerable.keySelector,orderedEnumerable.descending,currentContext);return null!=orderedEnumerable.parent?SortContext.Create(orderedEnumerable.parent,context):context},SortContext.prototype.GenerateKeys=function(source){for(var len=source.length,keySelector=this.keySelector,keys=new Array(len),i=0;i<len;i++)keys[i]=keySelector(source[i]);this.keys=keys,null!=this.child&&this.child.GenerateKeys(source)},SortContext.prototype.Compare=function(index1,index2){var comparison=Utils.Compare(this.keys[index1],this.keys[index2]);if(0==comparison){if(null!=this.child)return this.child.Compare(index1,index2);comparison=Utils.Compare(index1,index2)}return this.descending?-comparison:comparison};var ArrayEnumerable=function(source){this.source=source};ArrayEnumerable.prototype=new Enumerable,ArrayEnumerable.prototype.Any=function(predicate){return null==predicate?0<this.source.length:Enumerable.prototype.Any.apply(this,arguments)},ArrayEnumerable.prototype.Count=function(predicate){return null==predicate?this.source.length:Enumerable.prototype.Count.apply(this,arguments)},ArrayEnumerable.prototype.ElementAt=function(index){return 0<=index&&index<this.source.length?this.source[index]:Enumerable.prototype.ElementAt.apply(this,arguments)},ArrayEnumerable.prototype.ElementAtOrDefault=function(index,defaultValue){return 0<=index&&index<this.source.length?this.source[index]:defaultValue},ArrayEnumerable.prototype.First=function(predicate){return null==predicate&&0<this.source.length?this.source[0]:Enumerable.prototype.First.apply(this,arguments)},ArrayEnumerable.prototype.FirstOrDefault=function(defaultValue,predicate){return null!=predicate?Enumerable.prototype.FirstOrDefault.apply(this,arguments):0<this.source.length?this.source[0]:defaultValue},ArrayEnumerable.prototype.Last=function(predicate){return null==predicate&&0<this.source.length?this.source[this.source.length-1]:Enumerable.prototype.Last.apply(this,arguments)},ArrayEnumerable.prototype.LastOrDefault=function(defaultValue,predicate){return null!=predicate?Enumerable.prototype.LastOrDefault.apply(this,arguments):0<this.source.length?this.source[this.source.length-1]:defaultValue},ArrayEnumerable.prototype.Skip=function(count){var source=this.source;return new Enumerable(function(){var index;return new IEnumerator(function(){index=count<0?0:count},function(){return index<source.length&&this.Yield(source[index++])},Functions.Blank)})},ArrayEnumerable.prototype.TakeExceptLast=function(count){return null==count&&(count=1),this.Take(this.source.length-count)},ArrayEnumerable.prototype.TakeFromLast=function(count){return this.Skip(this.source.length-count)},ArrayEnumerable.prototype.Reverse=function(){var source=this.source;return new Enumerable(function(){var index;return new IEnumerator(function(){index=source.length},function(){return 0<index&&this.Yield(source[--index])},Functions.Blank)})},ArrayEnumerable.prototype.SequenceEqual=function(second,compareSelector){return(!(second instanceof ArrayEnumerable||second instanceof Array)||null!=compareSelector||Enumerable.From(second).Count()==this.Count())&&Enumerable.prototype.SequenceEqual.apply(this,arguments)},ArrayEnumerable.prototype.ToString=function(separator,selector){return null==selector&&this.source instanceof Array?(null==separator&&(separator=""),this.source.join(separator)):Enumerable.prototype.ToString.apply(this,arguments)},ArrayEnumerable.prototype.GetEnumerator=function(){var source=this.source,index=0;return new IEnumerator(Functions.Blank,function(){return index<source.length&&this.Yield(source[index++])},Functions.Blank)};var Dictionary=function(){var HasOwnProperty=function(target,key){return Object.prototype.hasOwnProperty.call(target,key)},ComputeHashCode=function(obj){return null===obj?"null":void 0===obj?"undefined":typeof obj.toString===Types.Function?obj.toString():Object.prototype.toString.call(obj)},HashEntry=function(key,value){this.Key=key,this.Value=value,this.Prev=null,this.Next=null},EntryList=function(){this.First=null,this.Last=null};EntryList.prototype={AddLast:function(entry){null!=this.Last?((this.Last.Next=entry).Prev=this.Last,this.Last=entry):this.First=this.Last=entry},Replace:function(entry,newEntry){null!=entry.Prev?(entry.Prev.Next=newEntry).Prev=entry.Prev:this.First=newEntry,null!=entry.Next?(entry.Next.Prev=newEntry).Next=entry.Next:this.Last=newEntry},Remove:function(entry){null!=entry.Prev?entry.Prev.Next=entry.Next:this.First=entry.Next,null!=entry.Next?entry.Next.Prev=entry.Prev:this.Last=entry.Prev}};var Dictionary=function(compareSelector){this.count=0,this.entryList=new EntryList,this.buckets={},this.compareSelector=null==compareSelector?Functions.Identity:compareSelector};return Dictionary.prototype={Add:function(key,value){var compareKey=this.compareSelector(key),hash=ComputeHashCode(compareKey),entry=new HashEntry(key,value);if(HasOwnProperty(this.buckets,hash)){for(var array=this.buckets[hash],i=0;i<array.length;i++)if(this.compareSelector(array[i].Key)===compareKey)return this.entryList.Replace(array[i],entry),void(array[i]=entry);array.push(entry)}else this.buckets[hash]=[entry];this.count++,this.entryList.AddLast(entry)},Get:function(key){var compareKey=this.compareSelector(key),hash=ComputeHashCode(compareKey);if(HasOwnProperty(this.buckets,hash))for(var array=this.buckets[hash],i=0;i<array.length;i++){var entry=array[i];if(this.compareSelector(entry.Key)===compareKey)return entry.Value}},Set:function(key,value){var compareKey=this.compareSelector(key),hash=ComputeHashCode(compareKey);if(HasOwnProperty(this.buckets,hash))for(var array=this.buckets[hash],i=0;i<array.length;i++)if(this.compareSelector(array[i].Key)===compareKey){var newEntry=new HashEntry(key,value);return this.entryList.Replace(array[i],newEntry),array[i]=newEntry,!0}return!1},Contains:function(key){var compareKey=this.compareSelector(key),hash=ComputeHashCode(compareKey);if(!HasOwnProperty(this.buckets,hash))return!1;for(var array=this.buckets[hash],i=0;i<array.length;i++)if(this.compareSelector(array[i].Key)===compareKey)return!0;return!1},Clear:function(){this.count=0,this.buckets={},this.entryList=new EntryList},Remove:function(key){var compareKey=this.compareSelector(key),hash=ComputeHashCode(compareKey);if(HasOwnProperty(this.buckets,hash))for(var array=this.buckets[hash],i=0;i<array.length;i++)if(this.compareSelector(array[i].Key)===compareKey)return this.entryList.Remove(array[i]),array.splice(i,1),0==array.length&&delete this.buckets[hash],void this.count--},Count:function(){return this.count},ToEnumerable:function(){var self=this;return new Enumerable(function(){var currentEntry;return new IEnumerator(function(){currentEntry=self.entryList.First},function(){if(null==currentEntry)return!1;var result={Key:currentEntry.Key,Value:currentEntry.Value};return currentEntry=currentEntry.Next,this.Yield(result)},Functions.Blank)})}},Dictionary}(),Lookup=function(dictionary){this.Count=function(){return dictionary.Count()},this.Get=function(key){return Enumerable.From(dictionary.Get(key))},this.Contains=function(key){return dictionary.Contains(key)},this.ToEnumerable=function(){return dictionary.ToEnumerable().Select(function(kvp){return new Grouping(kvp.Key,kvp.Value)})}},Grouping=function(key,elements){this.Key=function(){return key},ArrayEnumerable.call(this,elements)};return Grouping.prototype=new ArrayEnumerable,Enumerable}(),function(global){"use strict";Big.DP=20,Big.RM=1;var TO_EXP_NEG=-7,TO_EXP_POS=21,P=Big.prototype,isValid=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE=new Big(1);function Big(n){var i,j,nL,x=this;if(!(x instanceof Big))return new Big(n);if(n instanceof Big)return x.s=n.s,x.e=n.e,void(x.c=n.c.slice());for(0===n&&1/n<0?n="-0":isValid.test(n+="")||throwErr(NaN),x.s="-"==n.charAt(0)?(n=n.slice(1),-1):1,-1<(i=n.indexOf("."))&&(n=n.replace(".","")),0<(j=n.search(/e/i))?(i<0&&(i=j),i+=+n.slice(j+1),n=n.substring(0,j)):i<0&&(i=n.length),j=0;"0"==n.charAt(j);j++);if(j==(nL=n.length))x.c=[x.e=0];else{for(;"0"==n.charAt(--nL););for(x.e=i-j-1,x.c=[],i=0;j<=nL;x.c[i++]=+n.charAt(j++));}}function rnd(x,dp,rm,more){var xc=x.c,i=x.e+dp+1;if(1===rm?more=5<=xc[i]:2===rm?more=5<xc[i]||5==xc[i]&&(more||i<0||null!=xc[i+1]||1&xc[i-1]):3===rm?more=more||null!=xc[i]||i<0:(more=!1,0!==rm&&throwErr("!Big.RM!")),i<1||!xc[0])x.c=more?(x.e=-dp,[1]):[x.e=0];else{if(xc.length=i--,more)for(;9<++xc[i];)xc[i]=0,i--||(++x.e,xc.unshift(1));for(i=xc.length;!xc[--i];xc.pop());}return x}function throwErr(message){var err=new Error(message);throw err.name="BigError",err}function format(x,dp,toE){var i=dp-(x=new Big(x)).e,c=x.c;for(c.length>++dp&&rnd(x,i,Big.RM),i=c[0]?toE?dp:(c=x.c,x.e+i+1):i+1;c.length<i;c.push(0));return i=x.e,1==toE||2==toE&&(dp<=i||i<=TO_EXP_NEG)?(x.s<0&&c[0]?"-":"")+(1<c.length?(c.splice(1,0,"."),c.join("")):c[0])+(i<0?"e":"e+")+i:x.toString()}P.abs=function(){var x=new Big(this);return x.s=1,x},P.cmp=function(y){var xNeg,x=this,xc=x.c,yc=(y=new Big(y)).c,i=x.s,j=y.s,k=x.e,l=y.e;if(!xc[0]||!yc[0])return xc[0]?i:yc[0]?-j:0;if(i!=j)return i;if(xNeg=i<0,k!=l)return l<k^xNeg?1:-1;for(i=-1,j=(k=xc.length)<(l=yc.length)?k:l;++i<j;)if(xc[i]!=yc[i])return xc[i]>yc[i]^xNeg?1:-1;return k==l?0:l<k^xNeg?1:-1},P.div=function(y){var x=this,dvd=x.c,dvs=(y=new Big(y)).c,s=x.s==y.s?1:-1,dp=Big.DP;if((dp!==~~dp||dp<0||1e6<dp)&&throwErr("!Big.DP!"),!dvd[0]||!dvs[0])return dvd[0]==dvs[0]&&throwErr(NaN),dvs[0]||throwErr(s/0),new Big(0*s);var dvsL,dvsT,next,cmp,remI,dvsZ=dvs.slice(),dvdI=dvsL=dvs.length,dvdL=dvd.length,rem=dvd.slice(0,dvsL),remL=rem.length,quo=new Big(ONE),qc=quo.c=[],qi=0,digits=dp+(quo.e=x.e-y.e)+1;for(quo.s=s,s=digits<0?0:digits,dvsZ.unshift(0);remL++<dvsL;rem.push(0));do{for(next=0;next<10;next++){if(dvsL!=(remL=rem.length))cmp=remL<dvsL?1:-1;else for(remI=-1,cmp=0;++remI<dvsL;)if(dvs[remI]!=rem[remI]){cmp=dvs[remI]>rem[remI]?1:-1;break}if(!(cmp<0))break;for(dvsT=remL==dvsL?dvs:dvsZ;remL;){if(rem[--remL]<dvsT[remL]){for(remI=remL;remI&&!rem[--remI];rem[remI]=9);--rem[remI],rem[remL]+=10}rem[remL]-=dvsT[remL]}for(;!rem[0];rem.shift());}qc[qi++]=cmp?next:++next,rem[0]&&cmp?rem[remL]=dvd[dvdI]||0:rem=[dvd[dvdI]]}while((dvdI++<dvdL||null!=rem[0])&&s--);return qc[0]||1==qi||(qc.shift(),quo.e--),digits<qi&&rnd(quo,dp,Big.RM,null!=rem[0]),quo},P.eq=function(y){return!this.cmp(y)},P.gt=function(y){return 0<this.cmp(y)},P.gte=function(y){return-1<this.cmp(y)},P.lt=function(y){return this.cmp(y)<0},P.lte=function(y){return this.cmp(y)<1},P.minus=function(y){var d,i,j,xLTy,x=this,a=x.s,b=(y=new Big(y)).s;if(a!=b)return y.s=-b,x.plus(y);var xc=x.c.slice(),xe=x.e,yc=y.c,ye=y.e;if(!xc[0]||!yc[0])return yc[0]?(y.s=-b,y):new Big(xc[0]?x:0);if(a=xe-ye){for((d=(xLTy=a<0)?(a=-a,xc):(ye=xe,yc)).reverse(),b=a;b--;d.push(0));d.reverse()}else for(j=((xLTy=xc.length<yc.length)?xc:yc).length,a=b=0;b<j;b++)if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}if(xLTy&&(d=xc,xc=yc,yc=d,y.s=-y.s),0<(b=-((j=xc.length)-yc.length)))for(;b--;xc[j++]=0);for(b=yc.length;a<b;){if(xc[--b]<yc[b]){for(i=b;i&&!xc[--i];xc[i]=9);--xc[i],xc[b]+=10}xc[b]-=yc[b]}for(;0==xc[--j];xc.pop());for(;0==xc[0];xc.shift(),--ye);return xc[0]||(y.s=1,xc=[ye=0]),y.c=xc,y.e=ye,y},P.mod=function(y){y=new Big(y);var c,x=this,i=x.s,j=y.s;return y.c[0]||throwErr(NaN),x.s=y.s=1,c=1==y.cmp(x),x.s=i,y.s=j,c?new Big(x):(i=Big.DP,j=Big.RM,Big.DP=Big.RM=0,x=x.div(y),Big.DP=i,Big.RM=j,this.minus(x.times(y)))},P.plus=function(y){var d,x=this,a=x.s,b=(y=new Big(y)).s;if(a!=b)return y.s=-b,x.minus(y);var xe=x.e,xc=x.c,ye=y.e,yc=y.c;if(!xc[0]||!yc[0])return yc[0]?y:new Big(xc[0]?x:0*a);if(xc=xc.slice(),a=xe-ye){for((d=0<a?(ye=xe,yc):(a=-a,xc)).reverse();a--;d.push(0));d.reverse()}for(xc.length-yc.length<0&&(d=yc,yc=xc,xc=d),a=yc.length,b=0;a;b=(xc[--a]=xc[a]+yc[a]+b)/10^0,xc[a]%=10);for(b&&(xc.unshift(b),++ye),a=xc.length;0==xc[--a];xc.pop());return y.c=xc,y.e=ye,y},P.pow=function(e){var isNeg=e<0,x=new Big(this),y=ONE;for((e!==~~e||e<-1e6||1e6<e)&&throwErr("!pow!"),e=isNeg?-e:e;1&e&&(y=y.times(x)),e>>=1;)x=x.times(x);return isNeg?ONE.div(y):y},P.round=function(dp,rm){var x=new Big(this);return null==dp?dp=0:(dp!==~~dp||dp<0||1e6<dp)&&throwErr("!round!"),rnd(x,dp,null==rm?Big.RM:rm),x},P.sqrt=function(){var estimate,r,approx,x=this,xc=x.c,i=x.s,e=x.e,half=new Big("0.5");if(!xc[0])return new Big(x);for(i<0&&throwErr(NaN),0==(i=Math.sqrt(x.toString()))||i==1/0?((estimate=xc.join("")).length+e&1||(estimate+="0"),(r=new Big(Math.sqrt(estimate).toString())).e=((e+1)/2|0)-(e<0||1&e)):r=new Big(i.toString()),i=r.e+(Big.DP+=4);approx=r,r=half.times(approx.plus(x.div(approx))),approx.c.slice(0,i).join("")!==r.c.slice(0,i).join(""););return rnd(r,Big.DP-=4,Big.RM),r},P.times=function(y){var c,x=this,xc=x.c,yc=(y=new Big(y)).c,a=xc.length,b=yc.length,i=x.e,j=y.e;if(y.s=x.s==y.s?1:-1,!xc[0]||!yc[0])return new Big(0*y.s);for(y.e=i+j,a<b&&(c=xc,xc=yc,yc=c,j=a,a=b,b=j),j=a+b,c=[];j--;c.push(0));for(i=b-1;-1<i;i--){for(b=0,j=a+i;i<j;b=c[j]+yc[i]*xc[j-i-1]+b,c[j--]=b%10|0,b=b/10|0);b&&(c[j]=(c[j]+b)%10)}for(b&&++y.e,!c[0]&&c.shift(),j=c.length;!c[--j];c.pop());return y.c=c,y},P.toString=P.valueOf=P.toJSON=function(){var x=this,e=x.e,str=x.c.join(""),strL=str.length;if(e<=TO_EXP_NEG||TO_EXP_POS<=e)str=str.charAt(0)+(1<strL?"."+str.slice(1):"")+(e<0?"e":"e+")+e;else if(e<0){for(;++e;str="0"+str);str="0."+str}else if(0<e)if(++e>strL)for(e-=strL;e--;str+="0");else e<strL&&(str=str.slice(0,e)+"."+str.slice(e));else 1<strL&&(str=str.charAt(0)+"."+str.slice(1));return x.s<0&&x.c[0]?"-"+str:str},P.toExponential=function(dp){return null==dp?dp=this.c.length-1:(dp!==~~dp||dp<0||1e6<dp)&&throwErr("!toExp!"),format(this,dp,1)},P.toFixed=function(dp){var str,x=this,neg=TO_EXP_NEG,pos=TO_EXP_POS;return TO_EXP_NEG=-(TO_EXP_POS=1/0),null==dp?str=x.toString():dp===~~dp&&0<=dp&&dp<=1e6&&(str=format(x,x.e+dp),x.s<0&&x.c[0]&&str.indexOf("-")<0&&(str="-"+str)),TO_EXP_NEG=neg,TO_EXP_POS=pos,str||throwErr("!toFix!"),str},P.toPrecision=function(sd){return null==sd?this.toString():((sd!==~~sd||sd<1||1e6<sd)&&throwErr("!toPre!"),format(this,sd-1,2))},"undefined"!=typeof module&&module.exports?module.exports=Big:"function"==typeof define&&define.amd?define(function(){return Big}):global.Big=Big}(this),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(void 0!==e[c=k[d]+b])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(d.radius,d.length,d.width,e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?function(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=(e=(e=e.childNodes[b+d])&&e.firstChild)&&e.firstChild)&&(e.opacity=c)}}():j=d(o,"animation"),h}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ally=e()}}(function(){return function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e&&"object"===(void 0===e?"undefined":ft(e))&&"default"in e?e.default:e}function c(e){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>"}function f(e,t,n){return function(e){if(!e.focus)try{HTMLElement.prototype.focus.call(e)}catch(t){xn(e)}}(t),n.activeElement===t}function m(){var e=function(e){var t=function(){var e={activeElement:document.activeElement,windowScrollTop:window.scrollTop,windowScrollLeft:window.scrollLeft,bodyScrollTop:document.body.scrollTop,bodyScrollLeft:document.body.scrollLeft},t=document.createElement("iframe");t.setAttribute("style","position:absolute; position:fixed; top:0; left:-2px; width:1px; height:1px; overflow:hidden;"),t.setAttribute("aria-live","off"),t.setAttribute("aria-busy","true"),t.setAttribute("aria-hidden","true"),document.body.appendChild(t);var n=t.contentWindow,r=n.document;r.open(),r.close();var i=r.createElement("div");return r.body.appendChild(i),e.iframe=t,e.wrapper=i,e.window=n,e.document=r,e}(),n={};return Object.keys(e).map(function(r){n[r]=function(e,t){e.wrapper.innerHTML="";var n="string"==typeof t.element?e.document.createElement(t.element):t.element(e.wrapper,e.document),r=t.mutate&&t.mutate(n,e.wrapper,e.document);return r||!1===r||(r=n),!n.parentNode&&e.wrapper.appendChild(n),r&&r.focus&&r.focus(),t.validate?t.validate(n,r,e.document):e.document.activeElement===r}(t,e[r])}),function(e){e.activeElement===document.body?(document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),Et.is.IE10&&document.body.focus()):e.activeElement&&e.activeElement.focus&&e.activeElement.focus(),document.body.removeChild(e.iframe),window.scrollTop=e.windowScrollTop,window.scrollLeft=e.windowScrollLeft,document.body.scrollTop=e.bodyScrollTop,document.body.scrollLeft=e.bodyScrollLeft}(t),n}(Pn);return Object.keys(_n).forEach(function(t){e[t]=_n[t]()}),e}function b(){zn.warn("trying to focus inert element",this)}function E(e,t){(function(e,t){$n({element:e,attribute:"aria-disabled",temporaryValue:t?"true":void 0})})(e,t),function(e,t){if(t){var n=jn(e);$n({element:e,attribute:"tabindex",temporaryValue:"-1",saveValue:null!==n?n:""})}else $n({element:e,attribute:"tabindex"})}(e,t),function(e,t){t?e.focus=b:delete e.focus}(e,t),function(e,t){if(t){var n=e.style.pointerEvents||"";e.setAttribute("data-inert-pointer-events",n),e.style.pointerEvents="none"}else{var r=e.getAttribute("data-inert-pointer-events");e.removeAttribute("data-inert-pointer-events"),e.style.pointerEvents=r}}(e,t);var n=e.nodeName.toLowerCase();("video"===n||"audio"===n)&&function(e,t){Zn({element:e,attribute:"controls",remove:t})}(e,t),("svg"===n||e.ownerSVGElement)&&(Jn.focusSvgFocusableAttribute?function(e,t){$n({element:e,attribute:"focusable",temporaryValue:t?"false":void 0})}(e,t):Jn.focusSvgTabindexAttribute||"a"!==n||function(e,t){Zn({element:e,attribute:"xlink:href",remove:t})}(e,t)),t?e.setAttribute("data-ally-disabled","true"):e.removeAttribute("data-ally-disabled")}function T(e,t){return tr||function(e){er.some(function(t){return!!e[t]&&(tr=t,!0)})}(e),e[tr](t)}function A(e){var t=e.webkitUserModify||"";return Boolean(t&&-1!==t.indexOf("write"))}function O(e){return[e.getPropertyValue("overflow"),e.getPropertyValue("overflow-x"),e.getPropertyValue("overflow-y")].some(function(e){return"auto"===e||"scroll"===e})}function C(e){return-1<e.display.indexOf("flex")}function I(e,t,n,r){return("div"===t||"span"===t)&&(!(n&&"div"!==n&&"span"!==n&&!O(r))&&(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth))}function L(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.except,r=void 0===n?{flexbox:!1,scrollable:!1,shadow:!1}:n;nr||(nr=Bn());var i=ht({label:"is/focus-relevant",resolveDocument:!0,context:t});if(!r.shadow&&i.shadowRoot)return!0;var o=i.nodeName.toLowerCase();if("input"===o&&"hidden"===i.type)return!1;if("input"===o||"select"===o||"button"===o||"textarea"===o)return!0;if("legend"===o&&nr.focusRedirectLegend)return!0;if("label"===o)return!0;if("area"===o)return!0;if("a"===o&&i.hasAttribute("href"))return!0;if("object"===o&&i.hasAttribute("usemap"))return!1;if("object"===o){var a=i.getAttribute("type");if(!nr.focusObjectSvg&&"image/svg+xml"===a)return!1;if(!nr.focusObjectSwf&&"application/x-shockwave-flash"===a)return!1}if("iframe"===o||"object"===o)return!0;if("embed"===o||"keygen"===o)return!0;if(i.hasAttribute("contenteditable"))return!0;if("audio"===o&&(nr.focusAudioWithoutControls||i.hasAttribute("controls")))return!0;if("video"===o&&(nr.focusVideoWithoutControls||i.hasAttribute("controls")))return!0;if(nr.focusSummary&&"summary"===o)return!0;var u=Hn(i);if("img"===o&&i.hasAttribute("usemap"))return u&&nr.focusImgUsemapTabindex||nr.focusRedirectImgUsemap;if(nr.focusTable&&("table"===o||"td"===o))return!0;if(nr.focusFieldset&&"fieldset"===o)return!0;var s="svg"===o,l=i.ownerSVGElement,c=i.getAttribute("focusable"),d=jn(i);if("use"===o&&null!==d&&!nr.focusSvgUseTabindex)return!1;if("foreignobject"===o)return null!==d&&nr.focusSvgForeignobjectTabindex;if(T(i,"svg a")&&i.hasAttribute("xlink:href"))return!0;if((s||l)&&i.focus&&!nr.focusSvgNegativeTabindexAttribute&&d<0)return!1;if(s)return u||nr.focusSvg||nr.focusSvgInIframe||Boolean(nr.focusSvgFocusableAttribute&&c&&"true"===c);if(l){if(nr.focusSvgTabindexAttribute&&u)return!0;if(nr.focusSvgFocusableAttribute)return"true"===c}if(u)return!0;var f=window.getComputedStyle(i,null);if(A(f))return!0;if(nr.focusImgIsmap&&"img"===o&&i.hasAttribute("ismap")&&Yn({context:i}).some(function(e){return"a"===e.nodeName.toLowerCase()&&e.hasAttribute("href")}))return!0;if(!r.scrollable&&nr.focusScrollContainer)if(nr.focusScrollContainerWithoutOverflow){if(I(i,o))return!0}else if(O(f))return!0;if(!r.flexbox&&nr.focusFlexboxContainer&&C(f))return!0;var b=i.parentElement;if(!r.scrollable&&b){var v=b.nodeName.toLowerCase(),h=window.getComputedStyle(b,null);if(nr.focusScrollBody&&I(b,o,v,h))return!0;if(nr.focusChildrenOfFocusableFlexbox&&C(h))return!0}return!1}function N(e,t){if(e.findIndex)return e.findIndex(t);var n=e.length;if(0===n)return-1;for(var r=0;r<n;r++)if(t(e[r],r,e))return r;return-1}function k(e){var t=yt(e);if(!t.parent||t.parent===t)return null;try{return t.frameElement||function(e){if(ur||(ur=ar("object, iframe")),void 0!==e._frameElement)return e._frameElement;e._frameElement=null;var t=e.parent.document.querySelectorAll(ur);return[].some.call(t,function(t){return ir(t)===e.document&&(e._frameElement=t,!0)}),e._frameElement}(t)}catch(n){return null}}function _(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}function D(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.except,r=void 0===n?{notRendered:!1,cssDisplay:!1,cssVisibility:!1,detailsElement:!1,browsingContext:!1}:n,i=ht({label:"is/visible",resolveDocument:!0,context:t}),o=i.nodeName.toLowerCase();if(!r.notRendered&&sr.test(o))return!0;var a=Yn({context:i}),u="audio"===o&&!i.hasAttribute("controls");if(!r.cssDisplay&&function(e){return e.some(function(e){return"none"===_(e,"display")})}(u?a.slice(1):a))return!1;if(!r.cssVisibility&&function(e){var t=N(e,function(e){var t=_(e,"visibility");return"hidden"===t||"collapse"===t});if(-1===t)return!1;var n=N(e,function(e){return"visible"===_(e,"visibility")});return-1===n||t<n}(a))return!1;if(!r.detailsElement&&function(e){var t=1;return"summary"===e[0].nodeName.toLowerCase()&&(t=2),e.slice(t).some(function(e){return"details"===e.nodeName.toLowerCase()&&!1===e.open})}(a))return!1;if(!r.browsingContext){var s=k(i),l=D.except(r);if(s&&!l(s))return!1}return!0}function R(e,t){return t.querySelector('map[name="'+bt(e)+'"]')||null}function H(e){var t=e.parentElement;return t.name&&"map"===t.nodeName.toLowerCase()&&pt(e).querySelector('img[usemap="#'+bt(t.name)+'"]')||null}function j(e){return"fieldset"===e.nodeName.toLowerCase()&&e.disabled}function q(e){return"form"===e.nodeName.toLowerCase()&&e.disabled}function G(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.except,r=void 0===n?{onlyFocusableBrowsingContext:!1,visible:!1}:n,i=ht({label:"is/only-tabbable",resolveDocument:!0,context:t});if(!r.visible&&!lr(i))return!1;if(!r.onlyFocusableBrowsingContext&&(Et.is.GECKO||Et.is.TRIDENT||Et.is.EDGE)){var o=k(i);if(o&&jn(o)<0)return!1}var a=i.nodeName.toLowerCase(),u=jn(i);return"label"===a&&Et.is.GECKO?null!==u&&0<=u:!!(Et.is.GECKO&&i.ownerSVGElement&&!i.focus&&"a"===a&&i.hasAttribute("xlink:href")&&Et.is.GECKO)}function V(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.except,r=void 0===n?{disabled:!1,visible:!1,onlyTabbable:!1}:n;vr||(vr=Bn());var i=br.rules.except({onlyFocusableBrowsingContext:!0,visible:r.visible}),o=ht({label:"is/focusable",resolveDocument:!0,context:t});if(!rr.rules({context:o,except:r})||function(e){var t=e.nodeName.toLowerCase();if("embed"===t||"keygen"===t)return!0;var n=jn(e);if(e.shadowRoot&&null===n)return!0;if("label"===t)return!vr.focusLabelTabindex||null===n;if("legend"===t)return null===n;if(!vr.focusSvgFocusableAttribute||!e.ownerSVGElement&&"svg"!==t)return"img"===t&&e.hasAttribute("usemap")?null===n||!vr.focusImgUsemapTabindex:"area"===t&&!dr(e);var r=e.getAttribute("focusable");return r&&"false"===r}(o))return!1;if(!r.disabled&&mr(o))return!1;if(!r.onlyTabbable&&i(o))return!1;if(!r.visible){var u={context:o,except:{}};if(vr.focusInHiddenIframe&&(u.except.browsingContext=!0),vr.focusObjectSvgHidden)"object"===o.nodeName.toLowerCase()&&(u.except.cssVisibility=!0);if(!lr.rules(u))return!1}var l=k(o);if(l&&!("object"!==l.nodeName.toLowerCase()||vr.focusInZeroDimensionObject||l.offsetWidth&&l.offsetHeight))return!1;return!("svg"===o.nodeName.toLowerCase()&&vr.focusSvgInIframe&&!l&&null===o.getAttribute("tabindex"))}function Z(e){var t=function(t){return t.shadowRoot?NodeFilter.FILTER_ACCEPT:e(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};return t.acceptNode=t}function U(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.includeContext,r=e.includeOnlyTabbable,i=(pr||(pr=Bn()),"string"==typeof xr?xr:(xr=(pr.focusTable?"table, td,":"")+(pr.focusFieldset?"fieldset,":"")+"svg a,a[href],area[href],input, select, textarea, button,iframe, object, embed,keygen,"+(pr.focusAudioWithoutControls?"audio,":"audio[controls],")+(pr.focusVideoWithoutControls?"video,":"video[controls],")+(pr.focusSummary?"summary,":"")+"[tabindex],[contenteditable]",xr=ar(xr))),o=t.querySelectorAll(i),a=hr.rules.except({onlyTabbable:r}),u=[].filter.call(o,a);return n&&a(t)&&u.unshift(t),u}function X(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.except,r=void 0===n?{flexbox:!1,scrollable:!1,shadow:!1,visible:!1,onlyTabbable:!1}:n;Er||(Er=Bn());var i=ht({label:"is/tabbable",resolveDocument:!0,context:t});if(Et.is.BLINK&&Et.is.ANDROID&&42<Et.majorVersion)return!1;var o=k(i);if(o){if(Et.is.WEBKIT&&Et.is.IOS)return!1;if(jn(o)<0)return!1;if(!r.visible&&(Et.is.BLINK||Et.is.WEBKIT)&&!lr(o))return!1;if("object"===o.nodeName.toLowerCase()){var u="Chrome"===Et.name&&54<=Et.majorVersion||"Opera"===Et.name&&41<=Et.majorVersion;if(Et.is.WEBKIT||Et.is.BLINK&&!u)return!1}}var s=i.nodeName.toLowerCase(),l=jn(i),c=null===l?null:0<=l;if(Et.is.EDGE&&14<=Et.majorVersion&&o&&i.ownerSVGElement&&l<0)return!0;var d=!1!==c,f=null!==l&&0<=l;if(i.hasAttribute("contenteditable"))return d;if(Sr.test(s)&&!0!==c)return!1;if(Et.is.WEBKIT&&Et.is.IOS){var m="input"===s&&"text"===i.type||"password"===i.type||"select"===s||"textarea"===s||i.hasAttribute("contenteditable");if(!m)m=A(window.getComputedStyle(i,null));if(!m)return!1}if("use"===s&&null!==l&&(Et.is.BLINK||Et.is.WEBKIT&&9===Et.majorVersion))return!0;if(T(i,"svg a")&&i.hasAttribute("xlink:href")){if(d)return!0;if(i.focus&&!Er.focusSvgNegativeTabindexAttribute)return!0}if("svg"===s&&Er.focusSvgInIframe&&d)return!0;if(Et.is.TRIDENT||Et.is.EDGE){if("svg"===s)return!!Er.focusSvg||(i.hasAttribute("focusable")||f);if(i.ownerSVGElement)return!(!Er.focusSvgTabindexAttribute||!f)||i.hasAttribute("focusable")}if(void 0===i.tabIndex)return Boolean(r.onlyTabbable);if("audio"===s){if(!i.hasAttribute("controls"))return!1;if(Et.is.BLINK)return!0}if("video"===s)if(i.hasAttribute("controls")){if(Et.is.BLINK||Et.is.GECKO)return!0}else if(Et.is.TRIDENT||Et.is.EDGE)return!1;if("object"===s&&(Et.is.BLINK||Et.is.WEBKIT))return!1;if("iframe"===s)return!1;if(!r.scrollable&&Et.is.GECKO&&O(window.getComputedStyle(i,null)))return d;if(Et.is.TRIDENT||Et.is.EDGE){if("area"===s){var h=H(i);if(h&&jn(h)<0)return!1}var g=window.getComputedStyle(i,null);if(A(g))return 0<=i.tabIndex;if(!r.flexbox&&C(g))return null!==l?f:Tr(i)&&Ar(i);if(I(i,s))return!1;var p=i.parentElement;if(p){var x=p.nodeName.toLowerCase(),y=window.getComputedStyle(p,null);if(I(p,s,x,y))return!1;if(C(y))return f}}return 0<=i.tabIndex}function z(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}function Q(e,t,n){var r=[];return t.forEach(function(t){var i=!0,o=e.indexOf(t);-1===o&&(o=function(e,t){return N(e,function(e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING})}(e,t),i=!1),-1===o&&(o=e.length);var a=vt(n?n(t):t);a.length&&r.push({offset:o,replace:i,elements:a})}),r}function ee(e){var t=e.nodeName.toLowerCase();return"input"===t||"textarea"===t||"select"===t||"button"===t}function ie(e,t){return Nr.focusRedirectLegend?"fieldset"!==e.parentNode.nodeName.toLowerCase()?null:"tabbable"===Nr.focusRedirectLegend?function(e,t){var n=Cr({context:t.body,strategy:"strict"});if(!n.length)return null;var r=Lr({list:n,elements:[e]}),i=r.indexOf(e);return i===r.length-1?null:r[i+1]}(e,t):function(e){var t=e.parentNode;return wr({context:t,strategy:"strict"}).filter(ee)[0]||null}(e):null}function oe(e){if(!Nr.focusRedirectImgUsemap)return null;var t=function(e){var t=e.getAttribute("usemap");if(!t)return null;var n=pt(e);return R(t.slice(1),n)}(e);return t&&t.querySelector("area")||null}function ce(){}function de(){if(document.activeElement){if(document.activeElement!==Wr){var e=new Dr("active-element",{bubbles:!1,cancelable:!1,detail:{focus:document.activeElement,blur:Wr}});document.dispatchEvent(e),Wr=document.activeElement}}else document.body.focus();!1!==Hr&&(Hr=requestAnimationFrame(de))}function pe(){}function xe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,n=e.element,r=e.includeSelf;if(t)return function(e){return Boolean(r&&e===t||t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)};if(n)return function(e){return Boolean(r&&n===e||e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)};throw new TypeError("util/compare-position#getParentComparator required either options.parent or options.element")}function ye(e){var t=e.context,n=e.filter,i=[],o=function(e){return n.some(function(t){return e===t})?NodeFilter.FILTER_REJECT:function(e){var t=xe({parent:e});return n.some(t)}(e)?NodeFilter.FILTER_ACCEPT:(i.push(e),NodeFilter.FILTER_REJECT)};o.acceptNode=o;for(var u=pt(t).createTreeWalker(t,NodeFilter.SHOW_ELEMENT,o,!1);u.nextNode(););return i}function we(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context,n=ht({label:"query/shadow-hosts",resolveDocument:!0,defaultToDocument:!0,context:t}),i=pt(t).createTreeWalker(n,NodeFilter.SHOW_ELEMENT,mi,!1),o=[];for(n.shadowRoot&&(o.push(n),o=o.concat(we({context:n.shadowRoot})));i.nextNode();)o.push(i.currentNode),o=o.concat(we({context:i.currentNode.shadowRoot}));return o}function Se(e){return Qn(e,!1)}function Te(e){$n({element:e,attribute:"aria-hidden",temporaryValue:"true"})}function Ae(e){$n({element:e,attribute:"aria-hidden"})}function Ce(e,t){return Ii.tabsequenceAreaAtImgPosition&&(e=function(e,t){var n=t.querySelectorAll("img[usemap]"),r=new Si(t),i=r.extractAreasFromList(e);return n.length?Lr({list:i,elements:n,resolveElement:function(e){var t=e.getAttribute("usemap").slice(1);return r.getAreasFor(t)}}):i}(e,t)),function(e){var t={},n=[],r=e.filter(function(e){var r=e.tabIndex;return void 0===r&&(r=jn(e)),r<=0||null==r||(t[r]||(t[r]=[],n.push(r)),t[r].push(e),!1)});return n.sort().map(function(e){return t[e]}).reduceRight(function(e,t){return t.concat(e)},r)}(e)}function ke(){$i=Zi=0}function _e(e){!1!==e.isPrimary&&Zi++}function Pe(e){return!1!==e.isPrimary?e.touches?void(Zi=e.touches.length):void(window.setImmediate||window.setTimeout)(function(){Zi=Math.max(Zi-1,0)}):void 0}function Fe(e){switch(e.keyCode||e.which){case 16:case 17:case 18:case 91:case 93:return}$i++}function Be(e){switch(e.keyCode||e.which){case 16:case 17:case 18:case 91:case 93:return}(window.setImmediate||window.setTimeout)(function(){$i=Math.max($i-1,0)})}function De(){return{pointer:Boolean(Zi),key:Boolean($i)}}function He(e){return e.hasAttribute("autofocus")}function je(e){return e.tabIndex<=0}function Ge(e,t,n){var r=function(e){var t=e.getAttribute&&e.getAttribute("class")||"";return""===t?[]:t.split(" ")}(e),i=r.indexOf(t),o=-1!==i,a=void 0!==n?n:!o;a!==o&&(a||r.splice(i,1),a&&r.push(t),e.setAttribute("class",r.join(" ")))}function Ke(e,t){return Ge(e,t,!1)}function Ve(e,t){return Ge(e,t,!0)}function Ze(e){var t="";if(e.type===to||"shadow-focus"===e.type){var n=ro.get();t=ao||n.pointer&&"pointer"||n.key&&"key"||"script"}else"initial"===e.type&&(t="initial");document.documentElement.setAttribute("data-focus-source",t),e.type!==no&&(uo[t]||Ve(document.documentElement,"focus-source-"+t),uo[t]=!0,oo=t)}function $e(){return oo}function Ue(e){return uo[e]}function Xe(e){ao=e}function ze(){ao=!1}function Ye(e){var t=e||Kr();lo.cssShadowPiercingDeepCombinator||(t=t.slice(-1));var n=[].slice.call(document.querySelectorAll(vo),0),r=t.map(function(e){return Yn({context:e})}).reduce(function(e,t){return t.concat(e)},[]);n.forEach(function(e){-1===r.indexOf(e)&&Ke(e,bo)}),r.forEach(function(e){-1===n.indexOf(e)&&Ve(e,bo)})}function et(){ho=(window.setImmediate||window.setTimeout)(function(){Ye()})}function tt(){(window.clearImmediate||window.clearTimeout)(ho),Ye()}function nt(e){Ye(e.detail.elements)}function ot(e,t){var n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.max(Math.min(e.right,t.right),r),o=Math.max(Math.min(e.bottom,t.bottom),n);return{top:n,right:i,bottom:o,left:r,width:i-r,height:o-n}}function ut(e){var t=e.getBoundingClientRect(),n=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight,i={top:t.top,left:t.left,right:t.right-n,bottom:t.bottom-r,width:t.width-n,height:t.height-r,area:0};return i.area=i.width*i.height,i}function lt(e){return!!function(e){var t=window.getComputedStyle(e,null),n="visible";return t.getPropertyValue("overflow-x")!==n&&t.getPropertyValue("overflow-y")!==n}(e)&&(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)}var dt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt=r(e("platform")),bt=r(e("css.escape")),vt=function(e){if(!e)return[];if(Array.isArray(e))return e;if(void 0!==e.nodeType)return[e];if("string"==typeof e&&(e=document.querySelectorAll(e)),void 0!==e.length)return[].slice.call(e,0);throw new TypeError("unexpected input "+String(e))},ht=function(e){var t=e.context,n=e.label,r=void 0===n?"context-to-element":n,i=e.resolveDocument,o=e.defaultToDocument,a=vt(t)[0];if(i&&a&&a.nodeType===Node.DOCUMENT_NODE&&(a=a.documentElement),!a&&o)return document.documentElement;if(!a)throw new TypeError(r+" requires valid options.context");if(a.nodeType!==Node.ELEMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)throw new TypeError(r+" requires options.context to be an Element");return a},gt=function(){for(var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context,n=ht({label:"get/shadow-host",context:t}),r=null;n;)n=(r=n).parentNode;return r.nodeType===r.DOCUMENT_FRAGMENT_NODE&&r.host?r.host:null},pt=function(e){return e?e.nodeType===Node.DOCUMENT_NODE?e:e.ownerDocument||document:document},xt=function(e){var t=ht({label:"is/active-element",resolveDocument:!0,context:e});if(pt(t).activeElement===t)return!0;var r=gt({context:t});return!(!r||r.shadowRoot.activeElement!==t)},yt=function(e){return pt(e).defaultView||window},Et=JSON.parse(JSON.stringify(mt)),St=Et.os.family||"",Tt="Android"===St,At="Windows"===St.slice(0,7),Ot="OS X"===St,Ct="iOS"===St,It="Blink"===Et.layout,Lt="Gecko"===Et.layout,Nt="Trident"===Et.layout,Mt="EdgeHTML"===Et.layout,kt="WebKit"===Et.layout,_t=parseFloat(Et.version),Pt=Math.floor(_t);Et.majorVersion=Pt,Et.is={ANDROID:Tt,WINDOWS:At,OSX:Ot,IOS:Ct,BLINK:It,GECKO:Lt,TRIDENT:Nt,EDGE:Mt,WEBKIT:kt,IE9:Nt&&9===Pt,IE10:Nt&&10===Pt,IE11:Nt&&11===Pt};var Bt="1.4.1",Dt="undefined"!=typeof window&&window.navigator.userAgent||"",Rt="ally-supports-cache",Wt=function(e){var t=void 0;try{t=(t=window.localStorage&&window.localStorage.getItem(e))?JSON.parse(t):{}}catch(n){t={}}return t}(Rt);(Wt.userAgent!==Dt||Wt.version!==Bt)&&(Wt={}),Wt.userAgent=Dt,Wt.version=Bt;var Ht_get=function(){return Wt},Ht_set=function(e){Object.keys(e).forEach(function(t){Wt[t]=e[t]}),Wt.time=(new Date).toISOString(),function(e,t){if(document.hasFocus())try{window.localStorage&&window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}else try{window.localStorage&&window.localStorage.removeItem(e)}catch(n){}}(Rt,Wt)},jt=function(){var e=void 0;try{document.querySelector("html >>> :first-child"),e=">>>"}catch(t){try{document.querySelector("html /deep/ :first-child"),e="/deep/"}catch(n){e=""}}return e},qt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Gt={element:"div",mutate:function(e){return e.innerHTML='<map name="image-map-tabindex-test"><area shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" tabindex="-1" alt="" src="'+qt+'">',e.querySelector("area")}},Kt={element:"div",mutate:function(e){return e.innerHTML='<map name="image-map-tabindex-test"><area href="#void" tabindex="-1" shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" alt="" src="'+qt+'">',!1},validate:function(e,t,n){if(Et.is.GECKO)return!0;var r=e.querySelector("area");return r.focus(),n.activeElement===r}},Vt={element:"div",mutate:function(e){return e.innerHTML='<map name="image-map-area-href-test"><area shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-area-href-test" alt="" src="'+qt+'">',e.querySelector("area")},validate:function(e,t,n){return!!Et.is.GECKO||n.activeElement===t}},Zt={name:"can-focus-audio-without-controls",element:"audio",mutate:function(e){try{e.setAttribute("src",qt)}catch(t){}}},Ut={element:"div",mutate:function(e){return e.innerHTML='<map name="broken-image-map-test"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#broken-image-map-test" alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ">',e.querySelector("area")}},en={element:"a",mutate:function(e){return e.href="#void",e.innerHTML='<img ismap src="'+qt+'" alt="">',e.querySelector("img")}},tn={element:"div",mutate:function(e){return e.innerHTML='<map name="image-map-tabindex-test"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" tabindex="-1" alt="" src="'+qt+'">',e.querySelector("img")}},rn=!Et.is.WEBKIT,sn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0ic3ZnIj48dGV4dCB4PSIxMCIgeT0iMjAiIGlkPSJzdmctbGluay10ZXh0Ij50ZXh0PC90ZXh0Pjwvc3ZnPg==",ln={element:"object",mutate:function(e){e.setAttribute("type","image/svg+xml"),e.setAttribute("data",sn),e.setAttribute("width","200"),e.setAttribute("height","50"),e.style.visibility="hidden"}},cn={name:"can-focus-object-svg",element:"object",mutate:function(e){e.setAttribute("type","image/svg+xml"),e.setAttribute("data",sn),e.setAttribute("width","200"),e.setAttribute("height","50")},validate:function(e,t,n){return!!Et.is.GECKO||n.activeElement===e}},dn=!Et.is.IE9,mn={element:"div",mutate:function(e){return e.innerHTML='<map name="focus-redirect-img-usemap"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#focus-redirect-img-usemap" alt="" src="'+qt+'">',e.querySelector("img")},validate:function(e,t,n){var r=e.querySelector("area");return n.activeElement===r}},xn=function(e){if(!(e.ownerSVGElement||"svg"===e.nodeName.toLowerCase()))return!1;var n=function(){var e=document.createElement("div");return e.innerHTML='<svg><foreignObject width="30" height="30">\n      <input type="text"/>\n  </foreignObject></svg>',e.firstChild.firstChild}();e.appendChild(n);var r=n.querySelector("input");return r.focus(),r.disabled=!0,e.removeChild(n),!0},yn={element:"div",mutate:function(e){return e.innerHTML=c('<text focusable="true">a</text>'),e.querySelector("text")},validate:f},wn={element:"div",mutate:function(e){return e.innerHTML=c('<text tabindex="0">a</text>'),e.querySelector("text")},validate:f},En={element:"div",mutate:function(e){return e.innerHTML=c('<text tabindex="-1">a</text>'),e.querySelector("text")},validate:f},Sn={element:"div",mutate:function(e){return e.innerHTML=c(['<g id="ally-test-target"><a xlink:href="#void"><text>link</text></a></g>','<use xlink:href="#ally-test-target" x="0" y="0" tabindex="-1" />'].join("")),e.querySelector("use")},validate:f},Tn={element:"div",mutate:function(e){return e.innerHTML=c('<foreignObject tabindex="-1"><input type="text" /></foreignObject>'),e.querySelector("foreignObject")||e.getElementsByTagName("foreignObject")[0]},validate:f},An=Boolean(Et.is.GECKO&&"undefined"!=typeof SVGElement&&SVGElement.prototype.focus),Cn={element:"div",mutate:function(e){return e.innerHTML=c(""),e.firstChild},validate:f},Nn={element:"video",mutate:function(e){try{e.setAttribute("src",qt)}catch(t){}}},Mn=Et.is.GECKO||Et.is.TRIDENT||Et.is.EDGE,_n={cssShadowPiercingDeepCombinator:jt,focusInZeroDimensionObject:function(){return rn},focusObjectSwf:function(){return dn},focusSvgInIframe:function(){return An},tabsequenceAreaAtImgPosition:function(){return Mn}},Pn={focusAreaImgTabindex:Gt,focusAreaTabindex:Kt,focusAreaWithoutHref:Vt,focusAudioWithoutControls:Zt,focusBrokenImageMap:Ut,focusChildrenOfFocusableFlexbox:{element:"div",mutate:function(e){return e.setAttribute("tabindex","-1"),e.setAttribute("style","display: -webkit-flex; display: -ms-flexbox; display: flex;"),e.innerHTML='<span style="display: block;">hello</span>',e.querySelector("span")}},focusFieldsetDisabled:{element:"fieldset",mutate:function(e){e.setAttribute("tabindex",0),e.setAttribute("disabled","disabled")}},focusFieldset:{element:"fieldset",mutate:function(e){e.innerHTML="<legend>legend</legend><p>content</p>"}},focusFlexboxContainer:{element:"span",mutate:function(e){e.setAttribute("style","display: -webkit-flex; display: -ms-flexbox; display: flex;"),e.innerHTML='<span style="display: block;">hello</span>'}},focusFormDisabled:{element:"form",mutate:function(e){e.setAttribute("tabindex",0),e.setAttribute("disabled","disabled")}},focusImgIsmap:en,focusImgUsemapTabindex:tn,focusInHiddenIframe:{element:function(e,t){var n=t.createElement("iframe");e.appendChild(n);var r=n.contentWindow.document;return r.open(),r.close(),n},mutate:function(e){e.style.visibility="hidden";var t=e.contentWindow.document,n=t.createElement("input");return t.body.appendChild(n),n},validate:function(e){var t=e.contentWindow.document,n=t.querySelector("input");return t.activeElement===n}},focusInvalidTabindex:{element:"div",mutate:function(e){e.setAttribute("tabindex","invalid-value")}},focusLabelTabindex:{element:"label",mutate:function(e){e.setAttribute("tabindex","-1")},validate:function(e,t,n){return e.offsetHeight,e.focus(),n.activeElement===e}},focusObjectSvg:cn,focusObjectSvgHidden:ln,focusRedirectImgUsemap:mn,focusRedirectLegend:{element:"fieldset",mutate:function(e){return!(e.innerHTML='<legend>legend</legend><input tabindex="-1"><input tabindex="0">')},validate:function(e,t,n){var r=e.querySelector('input[tabindex="-1"]'),i=e.querySelector('input[tabindex="0"]');return e.focus(),e.querySelector("legend").focus(),(n.activeElement===r?"focusable":n.activeElement===i&&"tabbable")||""}},focusScrollBody:{element:"div",mutate:function(e){return e.setAttribute("style","width: 100px; height: 50px; overflow: auto;"),e.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>',e.querySelector("div")}},focusScrollContainerWithoutOverflow:{element:"div",mutate:function(e){e.setAttribute("style","width: 100px; height: 50px;"),e.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>'}},focusScrollContainer:{element:"div",mutate:function(e){e.setAttribute("style","width: 100px; height: 50px; overflow: auto;"),e.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>'}},focusSummary:{element:"details",mutate:function(e){return e.innerHTML="<summary>foo</summary><p>content</p>",e.firstElementChild}},focusSvgFocusableAttribute:yn,focusSvgTabindexAttribute:wn,focusSvgNegativeTabindexAttribute:En,focusSvgUseTabindex:Sn,focusSvgForeignobjectTabindex:Tn,focusSvg:Cn,focusTabindexTrailingCharacters:{element:"div",mutate:function(e){e.setAttribute("tabindex","3x")}},focusTable:{element:"table",mutate:function(e,t,n){var r=n.createDocumentFragment();r.innerHTML="<tr><td>cell</td></tr>",e.appendChild(r)}},focusVideoWithoutControls:Nn},Fn=null,Bn=function(){return Fn||((Fn=Ht_get()).time||(Ht_set(m()),Fn=Ht_get()),Fn)},Dn=void 0,Rn=/^\s*(-|\+)?[0-9]+\s*$/,Wn=/^\s*(-|\+)?[0-9]+.*$/,Hn=function(e){Dn||(Dn=Bn());var t=Dn.focusTabindexTrailingCharacters?Wn:Rn,n=ht({label:"is/valid-tabindex",resolveDocument:!0,context:e}),r=n.hasAttribute("tabindex"),i=n.hasAttribute("tabIndex");if(!r&&!i)return!1;if((n.ownerSVGElement||"svg"===n.nodeName.toLowerCase())&&!Dn.focusSvgTabindexAttribute)return!1;if(Dn.focusInvalidTabindex)return!0;var a=n.getAttribute(r?"tabindex":"tabIndex");return"-32768"!==a&&Boolean(a&&t.test(a))},jn=function(e){if(!Hn(e))return null;var n=e.hasAttribute("tabindex")?"tabindex":"tabIndex",r=parseInt(e.getAttribute(n),10);return isNaN(r)?-1:r},qn=void 0,Gn=void 0,Kn={input:!0,select:!0,textarea:!0,button:!0,fieldset:!0,form:!0},Vn=function(e){qn||((qn=Bn()).focusFieldsetDisabled&&delete Kn.fieldset,qn.focusFormDisabled&&delete Kn.form,Gn=new RegExp("^("+Object.keys(Kn).join("|")+")$"));var n=ht({label:"is/native-disabled-supported",context:e}).nodeName.toLowerCase();return Boolean(Gn.test(n))},Zn=function(e){var t=e.element,n=e.attribute,r="data-cached-"+n;if(null===t.getAttribute(r)){var o=t.getAttribute(n);if(null===o)return;t.setAttribute(r,o||""),t.removeAttribute(n)}else{var a=t.getAttribute(r);t.removeAttribute(r),t.setAttribute(n,a)}},$n=function(e){var t=e.element,n=e.attribute,r=e.temporaryValue,i=e.saveValue,o="data-cached-"+n;if(void 0!==r){var a=i||t.getAttribute(n);t.setAttribute(o,a||""),t.setAttribute(n,r)}else{var u=t.getAttribute(o);t.removeAttribute(o),""===u?t.removeAttribute(n):t.setAttribute(n,u)}},Un=function(){},zn="undefined"!=typeof console?console:{log:Un,debug:Un,info:Un,warn:Un,error:Un},Jn=void 0,Qn=function(e,t){Jn||(Jn=Bn());var n=ht({label:"element/disabled",context:e});t=Boolean(t);var r=n.hasAttribute("data-ally-disabled"),i=1===arguments.length;return Vn(n)?i?n.disabled:(n.disabled=t,n):i?r:(r===t||E(n,t),n)},Yn=function(){for(var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context,n=[],r=ht({label:"get/parents",context:t});r;)n.push(r),(r=r.parentNode)&&r.nodeType!==Node.ELEMENT_NODE&&(r=null);return n},er=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],tr=null,nr=void 0;L.except=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return L({context:t,except:e})};return t.rules=L,t};var rr=L.except({}),ir=function(e){try{return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.getSVGDocument&&e.getSVGDocument()||null}catch(t){return null}},or=void 0,ar=function(e){if("string"!=typeof or){var t=jt();t&&(or=", html "+t+" ")}return or?e+or+e.replace(/\s*,\s*/g,",").split(",").join(or):e},ur=void 0,sr=/^(area)$/;D.except=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return D({context:t,except:e})};return t.rules=D,t};var lr=D.except({}),cr=void 0,dr=function(e){cr||(cr=Bn());var t=ht({label:"is/valid-area",context:e});if("area"!==t.nodeName.toLowerCase())return!1;var r=t.hasAttribute("tabindex");if(!cr.focusAreaTabindex&&r)return!1;var i=H(t);return!(!i||!lr(i))&&(!(!cr.focusBrokenImageMap&&(!i.complete||!i.naturalHeight||i.offsetWidth<=0||i.offsetHeight<=0))&&(cr.focusAreaWithoutHref||t.href?!Yn({context:i}).slice(1).some(function(e){var t=e.nodeName.toLowerCase();return"button"===t||"a"===t}):cr.focusAreaTabindex&&r||cr.focusAreaImgTabindex&&i.hasAttribute("tabindex")))},fr=void 0,mr=function(e){fr||(fr=Bn());var t=ht({label:"is/disabled",context:e});if(t.hasAttribute("data-ally-disabled"))return!0;if(!Vn(t))return!1;if(t.disabled)return!0;var n=Yn({context:t});return!!n.some(j)||!(fr.focusFormDisabled||!n.some(q))};G.except=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return G({context:t,except:e})};return t.rules=G,t};var br=G.except({}),vr=void 0;V.except=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return V({context:t,except:e})};return t.rules=V,t};var hr=V.except({}),gr=Z(rr),pr=void 0,xr=void 0,wr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.includeContext,r=e.includeOnlyTabbable,i=e.strategy,o=void 0===i?"quick":i,u={context:ht({label:"query/focusable",resolveDocument:!0,defaultToDocument:!0,context:t}),includeContext:n,includeOnlyTabbable:r,strategy:o};if("quick"===o)return U(u);if("strict"===o||"all"===o)return function $(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.includeContext,r=e.includeOnlyTabbable,i=e.strategy;t||(t=document.documentElement);for(var o=hr.rules.except({onlyTabbable:r}),u=pt(t).createTreeWalker(t,NodeFilter.SHOW_ELEMENT,"all"===i?gr:Z(o),!1),s=[];u.nextNode();)u.currentNode.shadowRoot?(o(u.currentNode)&&s.push(u.currentNode),s=s.concat($({context:u.currentNode.shadowRoot,includeOnlyTabbable:r,strategy:i}))):s.push(u.currentNode);return n&&("all"===i?rr(t)&&s.unshift(t):o(t)&&s.unshift(t)),s}(u);throw new TypeError('query/focusable requires option.strategy to be one of ["quick", "strict", "all"]')},Er=void 0,Sr=/^(fieldset|table|td|body)$/;X.except=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return X({context:t,except:e})};return t.rules=X,t};var Tr=rr.rules.except({flexbox:!0}),Ar=X.except({flexbox:!0}),Or=X.except({}),Cr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.includeContext,r=e.includeOnlyTabbable,i=e.strategy,o=Or.rules.except({onlyTabbable:r});return wr({context:t,includeContext:n,includeOnlyTabbable:r,strategy:i}).filter(o)},Lr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.list,n=e.elements,r=e.resolveElement,i=t.slice(0),o=vt(n).slice(0);return function(e){e.sort(z)}(o),function(e,t){var n=0;t.sort(function(e,t){return e.offset-t.offset}),t.forEach(function(t){var r=t.replace?1:0,i=[t.offset+n,r].concat(t.elements);e.splice.apply(e,i),n+=t.elements.length-r})}(i,Q(i,o,r)),i},Nr=void 0,Mr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.skipFocusable;Nr||(Nr=Bn());var r=ht({label:"get/focus-redirect-target",context:t});if(!n&&hr(r))return null;var i=r.nodeName.toLowerCase(),o=pt(r);return"label"===i?function(e,t){var n=e.getAttribute("for");return n?t.getElementById(n):e.querySelector("input, select, textarea")}(r,o):"legend"===i?ie(r,o):"img"===i?oe(r):null},kr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.except,r=ht({label:"get/focus-target",context:t}),i=null,o=function(e){return hr.rules({context:e,except:n})?(i=e,!0):(i=Mr({context:e,skipFocusable:!0}),Boolean(i))};return o(r)||Yn({context:r}).slice(1).some(o),i},_r={flexbox:!0,scrollable:!0,onlyTabbable:!0},Fr={blur:function(e){var t=ht({label:"element/blur",context:e});if(!xt(t))return null;if("body"===t.nodeName.toLowerCase())return null;if(t.blur)return t.blur(),document.activeElement;var r=yt(t);try{r.HTMLElement.prototype.blur.call(t)}catch(i){var o=r.document&&r.document.body;if(!o)return null;var a=o.getAttribute("tabindex");o.setAttribute("tabindex","-1"),o.focus(),a?o.setAttribute("tabindex",a):o.removeAttribute("tabindex")}return r.document.activeElement},disabled:Qn,focus:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultToAncestor,r=t.undoScrolling,i=ht({label:"element/focus",context:e}),o=hr.rules({context:i,except:_r});if(!n&&!o)return null;var a=kr({context:i,except:_r});if(!a)return null;if(xt(a))return a;var u=void 0;r&&(u=function(e){var n=Yn({context:e}).slice(1).map(function(e){return{element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}});return function(){n.forEach(function(e){e.element.scrollTop=e.scrollTop,e.element.scrollLeft=e.scrollLeft})}}(a));var s=function(e){if(e.focus)return e.focus(),xt(e)?e:null;var t=yt(e);try{return t.HTMLElement.prototype.focus.call(e),xt(e)?e:null}catch(n){return xn(e)&&xt(e)?e:null}}(a);return u&&u(),s}};"undefined"!=typeof window&&function(){for(var e=0,t=["ms","moz","webkit","o"],n="",r="",i=0,o=t.length;i<o;++i)n=window[t[i]+"RequestAnimationFrame"],r=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window[n]||function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=window.setTimeout(function(){t(n+r)},r);return e=n+r,i}),"function"!=typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame=window[r]||function(e){clearTimeout(e)})}();var Br="undefined"!=typeof window&&window.CustomEvent||function(){};"function"!=typeof Br&&((Br=function(e,t){var n=document.createEvent("CustomEvent");return!t&&(t={bubbles:!1,cancelable:!1,detail:void 0}),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype);var Dr=Br,Rr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.engage,n=e.disengage;return function(){return this.instances?this.instances++:(this.instances++,this._result=this.engage()||{},this._result.disengage=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).force?this.instances=0:this.instances--,this.instances||(this.disengage(),this._result=null)}.bind(this)),this._result}.bind({engage:t||ce,disengage:n||ce,instances:0,_result:null})},Wr=void 0,Hr=void 0,jr=Rr({engage:function(){Hr=!0,Wr=document.activeElement,de()},disengage:function(){cancelAnimationFrame(Hr),Hr=!1}}),qr=function(e){var t=ht({label:"is/shadowed",resolveDocument:!0,context:e});return Boolean(gt({context:t}))},Gr=function(){for(var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context,n=[],r=ht({label:"get/shadow-host-parents",context:t});r&&(r=gt({context:r}));)n.push(r);return n},Kr=function(){return null===document.activeElement&&document.body.focus(),qr(document.activeElement)?(e=Gr({context:document.activeElement}),[document.activeElement].concat(e)):function(){for(var e=[document.activeElement];e[0]&&e[0].shadowRoot;)e.unshift(e[0].shadowRoot.activeElement);return e}();var e},Vr=void 0,Zr=void 0;"undefined"!=typeof document&&document.documentElement.createShadowRoot?function(){var e=void 0,t=void 0,n=function(){i(),(window.clearImmediate||window.clearTimeout)(e),e=(window.setImmediate||window.setTimeout)(function(){o()})},r=function(e){e.addEventListener("blur",n,!0),t=e},i=function(){t&&t.removeEventListener("blur",n,!0),t=null},o=function(){var e=Kr();if(1!==e.length){r(e[0]);var t=new CustomEvent("shadow-focus",{bubbles:!1,cancelable:!1,detail:{elements:e,active:e[0],hosts:e.slice(1)}});document.dispatchEvent(t)}else i()},a=function(){(window.clearImmediate||window.clearTimeout)(e),o()};Vr=function(){document.addEventListener("focus",a,!0)},Zr=function(){(window.clearImmediate||window.clearTimeout)(e),t&&t.removeEventListener("blur",n,!0),document.removeEventListener("focus",a,!0)}}():Vr=Zr=function(){};var $r=Rr({engage:Vr,disengage:Zr}),Ur={activeElement:jr,shadowFocus:$r},Xr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.engage,n=e.disengage;return function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context;return this.context=vt(t||document),this.context.forEach(this.engage),{disengage:function(){this.context&&(this.context.forEach(this.disengage),this.context=null,this.engage=null,this.disengage=null)}.bind(this)}}.bind({engage:t||pe,disengage:n||pe,context:null})},zr=void 0,Jr=void 0;Et.is.TRIDENT&&(Et.is.IE10||Et.is.IE11)?function(){var e=function(e){var t=kr({context:e.target,except:{flexbox:!0,scrollable:!0}});if(t&&t!==e.target){window.setImmediate(function(){t.focus()});var n=[].map.call(t.children,function(e){var t=e.style.visibility||"",n=e.style.transition||"";return e.style.visibility="hidden",e.style.transition="none",[e,t,n]});window.setImmediate(function(){n.forEach(function(e){e[0].style.visibility=e[1],e[0].style.transition=e[2]})})}};zr=function(t){t.addEventListener("mousedown",e,!0)},Jr=function(t){t.removeEventListener("mousedown",e,!0)}}():zr=function(){};var Yr=Xr({engage:zr,disengage:Jr}),ei=void 0,ti=void 0;Et.is.OSX&&(Et.is.GECKO||Et.is.WEBKIT)?function(){var e=function(e){if(!e.defaultPrevented&&T(e.target,"input, button, button *")){var t=kr({context:e.target});(window.setImmediate||window.setTimeout)(function(){t.focus()})}},t=function(e){if(!e.defaultPrevented&&T(e.target,"label, label *")){var t=kr({context:e.target});t&&t.focus()}};ei=function(n){n.addEventListener("mousedown",e,!1),n.addEventListener("mouseup",t,!1)},ti=function(n){n.removeEventListener("mousedown",e,!1),n.removeEventListener("mouseup",t,!1)}}():ei=function(){};var ri=Xr({engage:ei,disengage:ti}),ii=void 0,oi=void 0;Et.is.WEBKIT?function(){var e=function(e){var t=kr({context:e.target});!t||t.hasAttribute("tabindex")&&Hn(t)||(t.setAttribute("tabindex",0),(window.setImmediate||window.setTimeout)(function(){t.removeAttribute("tabindex")},0))};ii=function(t){t.addEventListener("mousedown",e,!0),t.addEventListener("touchstart",e,!0)},oi=function(t){t.removeEventListener("mousedown",e,!0),t.removeEventListener("touchstart",e,!0)}}():ii=function(){};var si={pointerFocusChildren:Yr,pointerFocusInput:ri,pointerFocusParent:Xr({engage:ii,disengage:oi})},ci=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.filter;if(t=ht({label:"get/insignificant-branches",defaultToDocument:!0,context:t}),!(n=vt(n)).length)throw new TypeError("get/insignificant-branches requires valid options.filter");return ye({context:t,filter:n})},di={activeElement:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context,n=pt(t),r=void 0;try{r=n.activeElement}catch(i){}return r&&r.nodeType||(r=n.body||n.documentElement),r},activeElements:Kr,focusRedirectTarget:Mr,focusTarget:kr,insignificantBranches:ci,parents:Yn,shadowHostParents:Gr,shadowHost:gt},fi={activeElement:xt,disabled:mr,focusRelevant:rr,focusable:hr,onlyTabbable:br,shadowed:qr,tabbable:Or,validArea:dr,validTabindex:Hn,visible:lr},mi=function(e){return e.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};mi.acceptNode=mi;for(var bi={childList:!0,subtree:!0},vi=function(){function e(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=r.context,o=r.callback,a=r.config;n(this,e),this.config=a,this.disengage=this.disengage.bind(this),this.clientObserver=new MutationObserver(o),this.hostObserver=new MutationObserver(function(e){return e.forEach(t.handleHostMutation,t)}),this.observeContext(i),this.observeShadowHosts(i)}return dt(e,[{key:"disengage",value:function(){this.clientObserver&&this.clientObserver.disconnect(),this.clientObserver=null,this.hostObserver&&this.hostObserver.disconnect(),this.hostObserver=null}},{key:"observeShadowHosts",value:function(e){var t=this;we({context:e}).forEach(function(e){return t.observeContext(e.shadowRoot)})}},{key:"observeContext",value:function(e){this.clientObserver.observe(e,this.config),this.hostObserver.observe(e,bi)}},{key:"handleHostMutation",value:function(e){"childList"===e.type&&vt(e.addedNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).forEach(this.observeShadowHosts,this)}}]),e}(),hi=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.callback,r=e.config;if("function"!=typeof n)throw new TypeError("observe/shadow-mutations requires options.callback to be a function");if("object"!==(void 0===r?"undefined":ft(r)))throw new TypeError("observe/shadow-mutations requires options.config to be an object");if(!window.MutationObserver)return{disengage:function(){}};var i=ht({label:"observe/shadow-mutations",resolveDocument:!0,defaultToDocument:!0,context:t});return{disengage:new vi({context:i,callback:n,config:r}).disengage}},gi={attributes:!0,childList:!0,subtree:!0,attributeFilter:["tabindex","disabled","data-ally-disabled"]},pi=function(){function e(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=r.context,o=r.filter;n(this,e),this._context=vt(i||document.documentElement)[0],this._filter=vt(o),this._inertElementCache=[],this.disengage=this.disengage.bind(this),this.handleMutation=this.handleMutation.bind(this),this.renderInert=this.renderInert.bind(this),this.filterElements=this.filterElements.bind(this),this.filterParentElements=this.filterParentElements.bind(this);var a=wr({context:this._context,includeContext:!0,strategy:"all"});this.renderInert(a),this.shadowObserver=hi({context:this._context,config:gi,callback:function(e){return e.forEach(t.handleMutation)}})}return dt(e,[{key:"disengage",value:function(){this._context&&(Se(this._context),this._inertElementCache.forEach(function(e){return Se(e)}),this._inertElementCache=null,this._filter=null,this._context=null,this.shadowObserver&&this.shadowObserver.disengage(),this.shadowObserver=null)}},{key:"listQueryFocusable",value:function(e){return e.map(function(e){return wr({context:e,includeContext:!0,strategy:"all"})}).reduce(function(e,t){return e.concat(t)},[])}},{key:"renderInert",value:function(e){var t=this;e.filter(this.filterElements).filter(this.filterParentElements).filter(function(e){return!Qn(e)}).forEach(function(e){t._inertElementCache.push(e),function(e){Qn(e,!0)}(e)})}},{key:"filterElements",value:function(e){var t=xe({element:e,includeSelf:!0});return!this._filter.some(t)}},{key:"filterParentElements",value:function(e){var t=xe({parent:e});return!this._filter.some(t)}},{key:"handleMutation",value:function(e){if("childList"===e.type){var t=vt(e.addedNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE});if(!t.length)return;var n=this.listQueryFocusable(t);this.renderInert(n)}else"attributes"===e.type&&this.renderInert([e.target])}}]),e}(),yi={attributes:!1,childList:!0,subtree:!0},wi=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.context,i=t.filter;n(this,e),this._context=vt(r||document.documentElement)[0],this._filter=vt(i),this.disengage=this.disengage.bind(this),this.handleMutation=this.handleMutation.bind(this),this.isInsignificantBranch=this.isInsignificantBranch.bind(this),ci({context:this._context,filter:this._filter}).forEach(Te),this.startObserver()}return dt(e,[{key:"disengage",value:function(){this._context&&([].forEach.call(this._context.querySelectorAll("[data-cached-aria-hidden]"),Ae),this._context=null,this._filter=null,this._observer&&this._observer.disconnect(),this._observer=null)}},{key:"startObserver",value:function(){var e=this;window.MutationObserver&&(this._observer=new MutationObserver(function(t){return t.forEach(e.handleMutation)}),this._observer.observe(this._context,yi))}},{key:"handleMutation",value:function(e){"childList"===e.type&&vt(e.addedNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).filter(this.isInsignificantBranch).forEach(Te)}},{key:"isInsignificantBranch",value:function(e){if(Yn({context:e}).some(function(e){return"true"===e.getAttribute("aria-hidden")}))return!1;var n=xe({element:e});return!this._filter.some(n)}}]),e}(),Si=function(){function e(t){n(this,e),this._document=pt(t),this.maps={}}return dt(e,[{key:"getAreasFor",value:function(e){return this.maps[e]||this.addMapByName(e),this.maps[e]}},{key:"addMapByName",value:function(e){var t=R(e,this._document);t&&(this.maps[t.name]=Cr({context:t}))}},{key:"extractAreasFromList",value:function(e){return e.filter(function(e){if("area"!==e.nodeName.toLowerCase())return!0;var n=e.parentNode;return this.maps[n.name]||(this.maps[n.name]=[]),this.maps[n.name].push(e),!1},this)}}]),e}(),Ai=function(){function e(t,r){n(this,e),this.context=t,this.sortElements=r,this.hostCounter=1,this.inHost={},this.inDocument=[],this.hosts={},this.elements={}}return dt(e,[{key:"_registerHost",value:function(e){if(!e._sortingId){e._sortingId="shadow-"+this.hostCounter++,this.hosts[e._sortingId]=e;var t=gt({context:e});t?(this._registerHost(t),this._registerHostParent(e,t)):this.inDocument.push(e)}}},{key:"_registerHostParent",value:function(e,t){this.inHost[t._sortingId]||(this.inHost[t._sortingId]=[]),this.inHost[t._sortingId].push(e)}},{key:"_registerElement",value:function(e,t){this.elements[t._sortingId]||(this.elements[t._sortingId]=[]),this.elements[t._sortingId].push(e)}},{key:"extractElements",value:function(e){return e.filter(function(e){var t=gt({context:e});return!t||(this._registerHost(t),this._registerElement(e,t),!1)},this)}},{key:"sort",value:function(e){var t=this._injectHosts(e);return t=this._replaceHosts(t),this._cleanup(),t}},{key:"_injectHosts",value:function(e){return Object.keys(this.hosts).forEach(function(e){var t=this.elements[e],n=this.inHost[e],r=this.hosts[e].shadowRoot;this.elements[e]=this._merge(t,n,r)},this),this._merge(e,this.inDocument,this.context)}},{key:"_merge",value:function(e,t,n){var r=Lr({list:e,elements:t});return this.sortElements(r,n)}},{key:"_replaceHosts",value:function(e){return Lr({list:e,elements:this.inDocument,resolveElement:this._resolveHostElement.bind(this)})}},{key:"_resolveHostElement",value:function(e){var t=Lr({list:this.elements[e._sortingId],elements:this.inHost[e._sortingId],resolveElement:this._resolveHostElement.bind(this)}),n=jn(e);return null!==n&&-1<n?[e].concat(t):t}},{key:"_cleanup",value:function(){Object.keys(this.hosts).forEach(function(e){delete this.hosts[e]._sortingId},this)}}]),e}(),Ii=void 0,Li=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.includeContext,r=e.includeOnlyTabbable,i=e.strategy;Ii||(Ii=Bn());var o=vt(t)[0]||document.documentElement,a=Cr({context:o,includeContext:n,includeOnlyTabbable:r,strategy:i});return a=document.body.createShadowRoot&&Et.is.BLINK?function(e,t,n){var r=new Ai(t,n),i=r.extractElements(e);return i.length===e.length?n(e):r.sort(i)}(a,o,Ce):Ce(a,o),n&&(a=function(e,t){var n=e.indexOf(t);return 0<n?e.splice(n,1).concat(e):e}(a,o)),a},Ni={tab:9,left:37,up:38,right:39,down:40,pageUp:33,"page-up":33,pageDown:34,"page-down":34,end:35,home:36,enter:13,escape:27,space:32,shift:16,capsLock:20,"caps-lock":20,ctrl:17,alt:18,meta:91,pause:19,insert:45,delete:46,backspace:8,_alias:{91:[92,93,224]}},Mi=1;Mi<26;Mi++)Ni["f"+Mi]=Mi+111;for(var ki=0;ki<10;ki++){var _i=ki+48,Pi=ki+96;Ni[ki]=_i,Ni["num-"+ki]=Pi,Ni._alias[_i]=[Pi]}for(var Fi=0;Fi<26;Fi++){var Bi=Fi+65,Di=String.fromCharCode(Bi).toLowerCase();Ni[Di]=Bi}var Ri={alt:"altKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Wi=Object.keys(Ri).map(function(e){return Ri[e]}),Hi=function(e){return e.split(/\s+/).map(function(e){var t=e.split("+"),n=function(e){var n=function(e){var t=!!e&&null;return{altKey:t,ctrlKey:t,metaKey:t,shiftKey:t}}(-1!==e.indexOf("*"));return e.forEach(function(e){if("*"!==e){var t=!0,r=e.slice(0,1);"?"===r?t=null:"!"===r&&(t=!1),!0!==t&&(e=e.slice(1));var i=Ri[e];if(!i)throw new TypeError('Unknown modifier "'+e+'"');n[i]=t}}),n}(t.slice(0,-1));return{keyCodes:function(e){var t=Ni[e]||parseInt(e,10);if(!t||"number"!=typeof t||isNaN(t))throw new TypeError('Unknown key "'+e+'"');return[t].concat(Ni._alias[t]||[])}(t.slice(-1)),modifiers:n,matchModifiers:function(e,t){return!Wi.some(function(n){return"boolean"==typeof e[n]&&Boolean(t[n])!==e[n]})}.bind(null,n)}})},ji=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t={},n=vt(e.context)[0]||document.documentElement;delete e.context;var r=vt(e.filter);delete e.filter;var i=Object.keys(e);if(!i.length)throw new TypeError("when/key requires at least one option key");var o=function(e){e.keyCodes.forEach(function(n){t[n]||(t[n]=[]),t[n].push(e)})};i.forEach(function(t){if("function"!=typeof e[t])throw new TypeError('when/key requires option["'+t+'"] to be a function');Hi(t).map(function(n){return n.callback=e[t],n}).forEach(o)});var a=function(e){if(!e.defaultPrevented){if(r.length){var i=xe({element:e.target,includeSelf:!0});if(r.some(i))return}var o=e.keyCode||e.which;t[o]&&t[o].forEach(function(t){t.matchModifiers(e)&&t.callback.call(n,e,u)})}};n.addEventListener("keydown",a,!1);var u=function(){n.removeEventListener("keydown",a,!1)};return{disengage:u}},Gi={disabled:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.filter;return{disengage:new pi({context:t,filter:n}).disengage}},hidden:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.filter;return{disengage:new wi({context:t,filter:n}).disengage}},tabFocus:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).context;return t||(t=document.documentElement),Li(),ji({"?alt+?shift+tab":function(e){e.preventDefault();var n=Li({context:t}),r=e.shiftKey,i=n[0],o=n[n.length-1],u=r?o:i;if(xt(r?i:o))u.focus();else{var s=void 0;n.some(function(e,t){return!!xt(e)&&(s=t,!0)})?n[s+(r?-1:1)].focus():i.focus()}}})}},Vi={attribute:{"aria-busy":{default:"false",values:["true","false"]},"aria-checked":{default:void 0,values:["true","false","mixed",void 0]},"aria-disabled":{default:"false",values:["true","false"]},"aria-expanded":{default:void 0,values:["true","false",void 0]},"aria-grabbed":{default:void 0,values:["true","false",void 0]},"aria-hidden":{default:"false",values:["true","false"]},"aria-invalid":{default:"false",values:["true","false","grammar","spelling"]},"aria-pressed":{default:void 0,values:["true","false","mixed",void 0]},"aria-selected":{default:void 0,values:["true","false",void 0]},"aria-atomic":{default:"false",values:["true","false"]},"aria-autocomplete":{default:"none",values:["inline","list","both","none"]},"aria-dropeffect":{default:"none",multiple:!0,values:["copy","move","link","execute","popup","none"]},"aria-haspopup":{default:"false",values:["true","false"]},"aria-live":{default:"off",values:["off","polite","assertive"]},"aria-multiline":{default:"false",values:["true","false"]},"aria-multiselectable":{default:"false",values:["true","false"]},"aria-orientation":{default:"horizontal",values:["vertical","horizontal"]},"aria-readonly":{default:"false",values:["true","false"]},"aria-relevant":{default:"additions text",multiple:!0,values:["additions","removals","text","all"]},"aria-required":{default:"false",values:["true","false"]},"aria-sort":{default:"none",other:!0,values:["ascending","descending","none"]}},keycode:Ni},Zi=0,$i=0,Ui=["touchstart","pointerdown","MSPointerDown","mousedown"],Xi=["touchend","touchcancel","pointerup","MSPointerUp","pointercancel","MSPointerCancel","mouseup"],zi=Rr({engage:function(){return window.addEventListener("blur",ke,!1),document.documentElement.addEventListener("keydown",Fe,!0),document.documentElement.addEventListener("keyup",Be,!0),Ui.forEach(function(e){document.documentElement.addEventListener(e,_e,!0)}),Xi.forEach(function(e){document.documentElement.addEventListener(e,Pe,!0)}),{get:De}},disengage:function(){Zi=$i=0,window.removeEventListener("blur",ke,!1),document.documentElement.removeEventListener("keydown",Fe,!0),document.documentElement.removeEventListener("keyup",Be,!0),Ui.forEach(function(e){document.documentElement.removeEventListener(e,_e,!0)}),Xi.forEach(function(e){document.documentElement.removeEventListener(e,Pe,!0)})}}),Ji={interactionType:zi,shadowMutations:hi},Yi={firstTabbable:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.sequence,r=e.strategy,i=e.ignoreAutofocus,o=e.defaultToContext,a=e.includeOnlyTabbable,u=-1;n||(t=vt(t||document.body)[0],n=Cr({context:t,includeOnlyTabbable:a,strategy:r})),n.length&&!i&&(u=N(n,He)),n.length&&-1===u&&(u=N(n,je));var s=hr.rules.except({onlyTabbable:a});return-1===u&&o&&t&&s(t)?t:n[u]||null},focusable:wr,shadowHosts:we,tabbable:Cr,tabsequence:Li},eo="undefined"!=typeof document&&"onfocusin"in document,to=eo?"focusin":"focus",no=eo?"focusout":"blur",ro=void 0,io=void 0,oo=null,ao=null,uo={pointer:!1,key:!1,script:!1,initial:!1},so=Rr({engage:function(){return io=$r(),document.addEventListener("shadow-focus",Ze,!0),document.documentElement.addEventListener(to,Ze,!0),document.documentElement.addEventListener(no,Ze,!0),ro=zi(),Ze({type:"initial"}),{used:Ue,current:$e,lock:Xe,unlock:ze}},disengage:function(){Ze({type:no}),oo=ao=null,Object.keys(uo).forEach(function(e){Ke(document.documentElement,"focus-source-"+e),uo[e]=!1}),ro.disengage(),io&&io.disengage(),document.removeEventListener("shadow-focus",Ze,!0),document.documentElement.removeEventListener(to,Ze,!0),document.documentElement.removeEventListener(no,Ze,!0),document.documentElement.removeAttribute("data-focus-source")}}),lo=void 0,co="undefined"!=typeof document&&"onfocusin"in document,fo=co?"focusin":"focus",mo=co?"focusout":"blur",bo="ally-focus-within",vo=void 0,ho=void 0,go=void 0,xo={focusSource:so,focusWithin:Rr({engage:function(){lo||(lo=Bn(),vo=ar("."+bo)),go=$r(),document.addEventListener(mo,et,!0),document.addEventListener(fo,tt,!0),document.addEventListener("shadow-focus",nt,!0),Ye()},disengage:function(){go&&go.disengage(),(window.clearImmediate||window.clearTimeout)(ho),document.removeEventListener(mo,et,!0),document.removeEventListener(fo,tt,!0),document.removeEventListener("shadow-focus",nt,!0),[].forEach.call(document.querySelectorAll(vo),function(e){Ke(e,bo)})}})},yo=function(e){var t=e.getBoundingClientRect(),n=function(){var e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{top:0,right:e,bottom:t,left:0,width:e,height:t}}();n.area=n.width*n.height;var r=n,i=function(e){var t=Yn({context:e}).slice(1).filter(lt);return t.length?t.reduce(function(e,t){var n=ut(t),r=ot(n,e);return r.area=Math.min(n.area,e.area),r},ut(t[0])):null}(e);if(i){if(!i.width||!i.height)return 0;(r=ot(i,n)).area=i.area}var o=ot(t,r);if(!o.width||!o.height)return 0;var a=t.width*t.height,u=Math.min(a,r.area),Oo=Math.round(o.width)*Math.round(o.height)/u,l=Math.round(1e4*Oo)/1e4;return Math.min(l,1)},wo=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.callback,r=e.area;if("function"!=typeof n)throw new TypeError("when/visible-area requires options.callback to be a function");"number"!=typeof r&&(r=1);var i=ht({label:"when/visible-area",context:t}),o=void 0,a=null,u=function(){o&&cancelAnimationFrame(o)},l=function(){return!lr(i)||yo(i)<r||!1===n(i)?void a():void u()};return(a=function(){o=requestAnimationFrame(l)})(),{disengage:u}},So={focusable:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=e.callback,r=e.area;if("function"!=typeof n)throw new TypeError("when/focusable requires options.callback to be a function");var i=ht({label:"when/focusable",context:t}),a=pt(i),u=wo({context:i,callback:function(e){return!!hr(e)&&n(e)},area:r}),s=function l(){a.removeEventListener("focus",l,!0),u&&u.disengage()};return a.addEventListener("focus",s,!0),{disengage:s}},key:ji,visibleArea:wo},To="undefined"!=typeof window&&window.ally,Ao={element:Fr,event:Ur,fix:si,get:di,is:fi,maintain:Gi,map:Vi,observe:Ji,query:Yi,style:xo,when:So,version:Bt,noConflict:function(){return"undefined"!=typeof window&&window.ally===this&&(window.ally=To),this}};t.exports=Ao},{"css.escape":2,platform:3}],2:[function(t,n,r){(function(t){!function(t,i){"object"==typeof r?n.exports=i(t):i(t)}(void 0!==t?t:this,function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),r=n.length,i=-1,o="",a=n.charCodeAt(0);++i<r;)o+=0!=(t=n.charCodeAt(i))?1<=t&&t<=31||127==t||0==i&&48<=t&&t<=57||1==i&&48<=t&&t<=57&&45==a?"\\"+t.toString(16)+" ":0==i&&1==r&&45==t||!(128<=t||45==t||95==t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122)?"\\"+n.charAt(i):n.charAt(i):"ï¿½";return o};return e.CSS||(e.CSS={}),e.CSS.escape=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,n,r){(function(t){(function(){"use strict";function i(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function u(e){return e=m(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:i(e)}function s(e,t){for(var n in e)A.call(e,n)&&t(e[n],n,e)}function l(e){return null==e?i(e):O.call(e).slice(8,-1)}function c(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function d(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function f(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&-1<r&&r<=w)for(;++n<r;)t(e[n],n,e);else s(e,t)}(e,function(r,i){n=t(n,r,i,e)}),n}function m(e){return String(e).replace(/^ +| +$/g,"")}var v={function:!0,object:!0},h=v[typeof window]&&window||this,g=h,p=v[typeof r]&&r,x=v[typeof n]&&n&&!n.nodeType&&n,y=p&&x&&"object"==typeof t&&t;!y||y.global!==y&&y.window!==y&&y.self!==y||(h=y);var w=Math.pow(2,53)-1,E=/\bOpera/,S=this,T=Object.prototype,A=T.hasOwnProperty,O=T.toString,C=function b(e){function a(t){return f(t,function(t,n){var r=n.pattern||d(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=u(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}var x=h,y=e&&"object"==typeof e&&"String"!=l(e);y&&(x=e,e=null);var w=x.navigator||{},T=w.userAgent||"";e||(e=T);var A,C,I=y||S==g,L=y?!!w.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(O.toString()),N="Object",M=y?N:"ScriptBridgingProxyObject",k=y?N:"Environment",_=y&&x.java?"JavaPackage":l(x.java),P=y?N:"RuntimeObject",F=/\bJava/.test(_)&&x.java,B=F&&l(x.environment)==k,D=F?"a":"Î±",R=F?"b":"Î²",W=x.document||{},H=x.operamini||x.opera,j=E.test(j=y&&H?H["[[Class]]"]:l(H))?j:H=null,q=e,G=[],K=null,V=e==T,Z=V&&H&&"function"==typeof H.version&&H.version(),$=function(t){return f(t,function(t,n){return t||RegExp("\\b"+(n.pattern||d(n))+"\\b","i").exec(e)&&(n.label||n)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),U=function(t){return f(t,function(t,n){return t||RegExp("\\b"+(n.pattern||d(n))+"\\b","i").exec(e)&&(n.label||n)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),X=a([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),z=function(t){return f(t,function(t,n,r){return t||(n[X]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(X)]||RegExp("\\b"+d(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),J=function(t){return f(t,function(t,n){var r=n.pattern||d(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),u(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if($&&($=[$]),z&&!X&&(X=a([z])),(A=/\bGoogle TV\b/.exec(X))&&(X=A[0]),/\bSimulator\b/i.test(e)&&(X=(X?X+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&G.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(z=(A=b(e.replace(/like iPhone OS/,""))).manufacturer,X=A.product):/^iP/.test(X)?(U||(U="Safari"),J="iOS"+((A=/ OS ([\d_]+)/i.exec(e))?" "+A[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(J)?z&&"Google"!=z&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(X))||/\bAndroid\b/.test(J)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(J="Android",G.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&G.unshift("accelerated")):"PaleMoon"==U&&(A=/\bFirefox\/([\d.]+)\b/.exec(e))?G.push("identifying as Firefox "+A[1]):"Firefox"==U&&(A=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(J||(J="Firefox OS"),X||(X=A[1])):(!U||(A=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U)))&&(U&&!X&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(A+"/")+8))&&(U=null),(A=X||z||J)&&(X||z||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:A)+" Browser")):J="Kubuntu",Z||(Z=function(t){return f(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",d(U),"(?:Firefox|Minefield|NetFront)"])),(A=("iCab"==$&&3<parseFloat(Z)?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test($)&&"WebKit"||!$&&/\bMSIE\b/i.test(e)&&("Mac OS"==J?"Tasman":"Trident")||"WebKit"==$&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&($=[A]),"IE"==U&&(A=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",J="Windows Phone "+(/\+$/.test(A)?A:A+".x"),G.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",J="Windows Phone 8.x",G.unshift("desktop mode"),Z||(Z=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==$&&(A=/\brv:([\d.]+)/.exec(e))&&(U&&G.push("identifying as "+U+(Z?" "+Z:"")),U="IE",Z=A[1]),V){if(c(x,"global"))if(F&&(q=(A=F.lang.System).getProperty("os.arch"),J=J||A.getProperty("os.name")+" "+A.getProperty("os.version")),I&&c(x,"system")&&(A=[x.system])[0]){J||(J=A[0].os||null);try{A[1]=x.require("ringo/engine").version,Z=A[1].join("."),U="RingoJS"}catch(Q){A[0].global.system==x.system&&(U="Narwhal")}}else"object"==typeof x.process&&!x.process.browser&&(A=x.process)?(U="Node.js",q=A.arch,J=A.platform,Z=/[\d.]+/.exec(A.version)[0]):B&&(U="Rhino");else l(A=x.runtime)==M?(U="Adobe AIR",J=A.flash.system.Capabilities.os):l(A=x.phantom)==P?(U="PhantomJS",Z=(A=A.version||null)&&A.major+"."+A.minor+"."+A.patch):"number"==typeof W.documentMode&&(A=/\bTrident\/(\d+)/i.exec(e))&&(Z=[Z,W.documentMode],(A=+A[1]+4)!=Z[1]&&(G.push("IE "+Z[1]+" mode"),$&&($[1]=""),Z[1]=A),Z="IE"==U?String(Z[1].toFixed(1)):Z[0]);J=J&&u(J)}Z&&(A=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Z)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(V&&w.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(K=/b/i.test(A)?"beta":"alpha",Z=Z.replace(RegExp(A+"\\+?$"),"")+("beta"==K?R:D)+(/\d+\+?/.exec(A)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(J)?U="Firefox Mobile":"Maxthon"==U&&Z?Z=Z.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(X)?(J=null,"Xbox 360"==X&&/\bIEMobile\b/.test(e)&&G.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||X||/Browser|Mobi/.test(U))||"Windows CE"!=J&&!/Mobi/i.test(e)?"IE"==U&&V&&null===x.external?G.unshift("platform preview"):(/\bBlackBerry\b/.test(X)||/\bBB10\b/.test(e))&&(A=(RegExp(X.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||Z)?(J=((A=[A,/BB10/.test(e)])[1]?(X=null,z="BlackBerry"):"Device Software")+" "+A[0],Z=null):this!=s&&"Wii"!=X&&(V&&H||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(J)||"IE"==U&&(J&&!/^Win/.test(J)&&5.5<Z||/\bWindows XP\b/.test(J)&&8<Z||8==Z&&!/\bTrident\b/.test(e)))&&!E.test(A=b.call(s,e.replace(E,"")+";"))&&A.name&&(A="ing as "+A.name+((A=A.version)?" "+A:""),E.test(U)?(/\bIE\b/.test(A)&&"Mac OS"==J&&(J=null),A="identify"+A):(A="mask"+A,U=j?u(j.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(A)&&(J=null),V||(Z=null)),$=["Presto"],G.push(A)):U+=" Mobile",(A=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(A=[parseFloat(A.replace(/\.(\d)$/,".0$1")),A],"Safari"==U&&"+"==A[1].slice(-1)?(U="WebKit Nightly",K="alpha",Z=A[1].slice(0,-1)):(Z==A[1]||Z==(A[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1]))&&(Z=null),A[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==A[0]&&537.36==A[2]&&28<=parseFloat(A[1])&&"WebKit"==$&&($=["Blink"]),A=V&&(L||A[1])?($&&($[1]="like Chrome"),A[1]||((A=A[0])<530?1:A<532?2:A<532.05?3:A<533?4:A<534.03?5:A<534.07?6:A<534.1?7:A<534.13?8:A<534.16?9:A<534.24?10:A<534.3?11:A<535.01?12:A<535.02?"13+":A<535.07?15:A<535.11?16:A<535.19?17:A<536.05?18:A<536.1?19:A<537.01?20:A<537.11?"21+":A<537.13?23:A<537.18?24:A<537.24?25:A<537.36?26:"Blink"!=$?"27":"28")):($&&($[1]="like Safari"),(A=A[0])<400?1:A<500?2:A<526?3:A<533?4:A<534?"4+":A<535?5:A<537?6:A<538?7:A<601?8:"8"),$&&($[1]+=" "+(A+="number"==typeof A?".x":/[.+]/.test(A)?"":"+")),"Safari"==U&&(!Z||45<parseInt(Z))&&(Z=A)),"Opera"==U&&(A=/\bzbov|zvav$/.exec(J))?(U+=" ",G.unshift("desktop mode"),"zvav"==A?(U+="Mini",Z=null):U+="Mobile",J=J.replace(RegExp(" *"+A+"$"),"")):"Safari"==U&&/\bChrome\b/.exec($&&$[1])&&(G.unshift("desktop mode"),U="Chrome Mobile",Z=null,J=/\bOS X\b/.test(J)?(z="Apple","iOS 4.3+"):null),Z&&0==Z.indexOf(A=/[\d.]+$/.exec(J))&&-1<e.indexOf("/"+A+"-")&&(J=m(J.replace(A,""))),$&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(J)&&/\bSafari\b/.test($[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(U)&&$[1])&&(A=$[$.length-1])&&G.push(A),G.length&&(G=["("+G.join("; ")+")"]),z&&X&&X.indexOf(z)<0&&G.push("on "+z),X&&G.push((/^on /.test(G[G.length-1])?"":"on ")+X),J&&(A=/ ([\d.+]+)$/.exec(J),C=A&&"/"==J.charAt(J.length-A[0].length-1),J={architecture:32,family:A&&!C?J.replace(A[0],""):J,version:A?A[1]:null,toString:function(){var e=this.version;return this.family+(e&&!C?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(A=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+A),"")),U&&(/\bWOW64\b/i.test(e)||V&&/\w(?:86|32)$/.test(w.cpuClass||w.platform)&&!/\bWin64; x64\b/i.test(e))&&G.unshift("32-bit")):J&&/^OS X/.test(J.family)&&"Chrome"==U&&39<=parseFloat(Z)&&(J.architecture=64),e||(e=null);var Y={};return Y.description=e,Y.layout=$&&$[0],Y.manufacturer=z,Y.name=U,Y.prerelease=K,Y.product=X,Y.ua=e,Y.version=U&&Z,Y.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},Y.parse=b,Y.toString=function(){return this.description||""},Y.version&&G.unshift(Z),Y.name&&G.unshift(U),J&&U&&(J!=String(J).split(" ")[0]||J!=U.split(" ")[0]&&!X)&&G.push(X?"("+J+")":"on "+J),G.length&&(Y.description=G.join(" ")),Y}();p&&x?s(C,function(e,t){p[t]=e}):h.platform=C}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),function(undefined){var moment,oldGlobalMoment,i,globalScope="undefined"!=typeof global?global:this,round=Math.round,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,languages={},momentProperties={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOrdinal=/\d{1,2}/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,unitMillisecondFactors=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,dd:25,dm:45,dy:345},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year();return(0<=y?"+":"-")+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function dfl(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(!1===moment.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg),firstTime=!1),fn.apply(this,arguments)},fn)}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}for(;ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);function Language(){}function Moment(config){checkOverflow(config),extend(this,config)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._bubble()}function extend(a,b){for(var i in b)b.hasOwnProperty(i)&&(a[i]=b[i]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function absRound(number){return number<0?Math.ceil(number):Math.floor(number)}function leftZeroFill(number,targetLength,forceSign){for(var output=""+Math.abs(number),sign=0<=number;output.length<targetLength;)output="0"+output;return(sign?forceSign?"+":"":"-")+output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding),months&&rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding),updateOffset&&moment.updateOffset(mom,days||months)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)inputObject.hasOwnProperty(prop)&&(normalizedProp=normalizeUnits(prop))&&(normalizedInput[normalizedProp]=inputObject[prop]);return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else{if(0!==field.indexOf("month"))return;count=12,setter="month"}moment[field]=function(format,index){var i,getter,method=moment.fn._lang[field],results=[];if("number"==typeof format&&(index=format,format=undefined),getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment.fn._lang,m,format||"")},null!=index)return getter(index);for(i=0;i<count;i++)results.push(getter(i));return results}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=0<=coercedNumber?Math.floor(coercedNumber):Math.ceil(coercedNumber)),value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}function checkOverflow(m){var overflow;m._a&&-2===m._pf.overflow&&(overflow=m._a[MONTH]<0||11<m._a[MONTH]?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||23<m._a[HOUR]?HOUR:m._a[MINUTE]<0||59<m._a[MINUTE]?MINUTE:m._a[SECOND]<0||59<m._a[SECOND]?SECOND:m._a[MILLISECOND]<0||999<m._a[MILLISECOND]?MILLISECOND:-1,m._pf._overflowDayOfYear&&(overflow<YEAR||DATE<overflow)&&(overflow=DATE),m._pf.overflow=overflow)}function isValid(m){return null==m._isValid&&(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated,m._strict&&(m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length)),m._isValid}function normalizeLanguage(key){return key?key.toLowerCase().replace("_","-"):key}function makeAs(input,model){return model._isUTC?moment(input).zone(model._offset||0):moment(input).local()}function getLangDefinition(key){var j,lang,next,split,i=0,get=function(k){if(!languages[k]&&hasModule)try{require("./lang/"+k)}catch(e){}return languages[k]};if(!key)return moment.fn._lang;if(!isArray(key)){if(lang=get(key))return lang;key=[key]}for(;i<key.length;){for(j=(split=normalizeLanguage(key[i]).split("-")).length,next=(next=normalizeLanguage(key[i+1]))?next.split("-"):null;0<j;){if(lang=get(split.slice(0,j).join("-")))return lang;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return moment.fn._lang}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.lang()),formatFunctions[format]||(formatFunctions[format]=function(format){var i,length,input,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=(input=array[i]).match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"");return function(mom){var output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}(format)),formatFunctions[format](m)):m.lang().invalidDate()}function expandFormat(format,lang){var i=5;function replaceLongDateFormatTokens(input){return lang.longDateFormat(input)||input}for(localFormattingTokens.lastIndex=0;0<=i&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict)return parseTokenOneDigit;case"SS":if(strict)return parseTokenTwoDigits;case"SSS":if(strict)return parseTokenThreeDigits;case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return parseTokenOrdinal;default:return new RegExp(function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(token.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})))}}function timezoneMinutesFromString(string){var possibleTzMatches=(string=string||"").match(parseTokenTimezone)||[],parts=((possibleTzMatches[possibleTzMatches.length-1]||[])+"").match(parseTimezoneChunker)||["-",0,0],minutes=60*parts[1]+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":null!=input&&(datePartArray[MONTH]=3*(toInt(input)-1));break;case"M":case"MM":null!=input&&(datePartArray[MONTH]=toInt(input)-1);break;case"MMM":case"MMMM":null!=(a=getLangDefinition(config._l).monthsParse(input))?datePartArray[MONTH]=a:config._pf.invalidMonth=input;break;case"D":case"DD":null!=input&&(datePartArray[DATE]=toInt(input));break;case"Do":null!=input&&(datePartArray[DATE]=toInt(parseInt(input,10)));break;case"DDD":case"DDDD":null!=input&&(config._dayOfYear=toInt(input));break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input);break;case"dd":case"ddd":case"dddd":null!=(a=getLangDefinition(config._l).weekdaysParse(input))?(config._w=config._w||{},config._w.d=a):config._pf.invalidWeekday=input;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":token=token.substr(0,1);case"gggg":case"GGGG":case"GGGGG":token=token.substr(0,2),input&&(config._w=config._w||{},config._w[token]=toInt(input));break;case"gg":case"GG":config._w=config._w||{},config._w[token]=moment.parseTwoDigitYear(input)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,lang;null!=(w=config._w).GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year),week=dfl(w.W,1),weekday=dfl(w.E,1)):(dow=(lang=getLangDefinition(config._l))._week.dow,doy=lang._week.doy,weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year),week=dfl(w.w,1),null!=w.d?(weekday=w.d)<dow&&++week:weekday=null!=w.e?w.e+dow:dow),temp=function(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var dayOfYear,d=makeUTCDate(year,0,1).getUTCDay();return{year:0<(dayOfYear=7*(week-1)+((weekday=null!=weekday?weekday:firstDayOfWeek)-firstDayOfWeek)+(firstDayOfWeek-(d=0===d?7:d)+(firstDayOfWeekOfYear<d?7:0)-(d<firstDayOfWeek?7:0))+1)?year:year-1,dayOfYear:0<dayOfYear?dayOfYear:daysInYear(year-1)+dayOfYear}}(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function dateFromConfig(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=function(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=dfl(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(config._pf._overflowDayOfYear=!0),date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];config._d=(config._useUTC?makeUTCDate:function(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);y<1970&&date.setFullYear(y);return date}).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()+config._tzm)}}function makeDateFromStringAndFormat(config){if(config._f!==moment.ISO_8601){config._a=[],config._pf.empty=!0;var i,parsedInput,tokens,token,skipped,lang=getLangDefinition(config._l),string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,lang).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],(parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0])&&(0<(skipped=string.substr(0,string.indexOf(parsedInput))).length&&config._pf.unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?config._pf.empty=!1:config._pf.unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&config._pf.unusedTokens.push(token);config._pf.charsLeftOver=stringLength-totalParsedInputLength,0<string.length&&config._pf.unusedInput.push(string),config._isPm&&config._a[HOUR]<12&&(config._a[HOUR]+=12),!1===config._isPm&&12===config._a[HOUR]&&(config._a[HOUR]=0),dateFromConfig(config),checkOverflow(config)}else parseISO(config)}function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){for(config._pf.iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}string.match(parseTokenTimezone)&&(config._f+="Z"),makeDateFromStringAndFormat(config)}else config._isValid=!1}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);input===undefined?config._d=new Date:matched?config._d=new Date(+matched[1]):"string"==typeof input?function(config){parseISO(config),!1===config._isValid&&(delete config._isValid,moment.createFromInputFallback(config))}(config):isArray(input)?(config._a=input.slice(0),dateFromConfig(config)):function(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}(input)?config._d=new Date(+input):"object"==typeof input?function(config){var normalizedInput;config._d||(normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config))}(config):"number"==typeof input?config._d=new Date(input):moment.createFromInputFallback(config)}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<1970&&date.setUTCFullYear(y),date}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return end<daysToDayOfWeek&&(daysToDayOfWeek-=7),daysToDayOfWeek<end-7&&(daysToDayOfWeek+=7),adjustedMoment=moment(mom).add("d",daysToDayOfWeek),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function makeMoment(config){var input=config._i,format=config._f;return null===input||format===undefined&&""===input?moment.invalid({nullInput:!0}):("string"==typeof input&&(config._i=input=getLangDefinition().preparse(input)),moment.isMoment(input)?(config=function(m){var i,result={};for(i in m)m.hasOwnProperty(i)&&momentProperties.hasOwnProperty(i)&&(result[i]=m[i]);return result}(input))._d=new Date(+input._d):format?isArray(format)?function(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return config._pf.invalidFormat=!0,config._d=new Date(NaN);for(i=0;i<config._f.length;i++)currentScore=0,(tempConfig=extend({},config))._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}(config):makeDateFromStringAndFormat(config):makeDateFromInput(config),new Moment(config))}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return moment();for(res=moments[0],i=1;i<moments.length;++i)moments[i][fn](res)&&(res=moments[i]);return res}for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Language.prototype,{set:function(config){var prop,i;for(i in config)"function"==typeof(prop=config[i])?this[i]=prop:this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[]),i=0;i<12;i++)if(this._monthsParse[i]||(mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),this._monthsParse[i].test(monthName))return i},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;i<7;i++)if(this._weekdaysParse[i]||(mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];return!output&&this._longDateFormat[key.toUpperCase()]&&(output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output),output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){return 11<hours?isLower?"pm":"PM":isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[0<diff?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(moment=function(input,format,lang,strict){var c;return"boolean"==typeof lang&&(strict=lang,lang=undefined),(c={_isAMomentObject:!0})._i=input,c._f=format,c._l=lang,c._strict=strict,c._isUTC=!1,c._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},makeMoment(c)}).suppressDeprecationWarnings=!1,moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i)}),moment.min=function(){return pickBy("isBefore",[].slice.call(arguments,0))},moment.max=function(){return pickBy("isAfter",[].slice.call(arguments,0))},moment.utc=function(input,format,lang,strict){var c;return"boolean"==typeof lang&&(strict=lang,lang=undefined),(c={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0})._l=lang,c._i=input,c._f=format,c._strict=strict,c._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},makeMoment(c).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var sign,ret,parseIso,duration=input,match=null;return moment.isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetTimeSpanJsonRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoDurationRegex.exec(input))&&(sign="-"===match[1]?-1:1,duration={y:(parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign})(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}),ret=new Duration(duration),moment.isDuration(input)&&input.hasOwnProperty("_lang")&&(ret._lang=input._lang),ret},moment.version="2.7.0",moment.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",moment.ISO_8601=function(){},moment.momentProperties=momentProperties,moment.updateOffset=function(){},moment.relativeTimeThreshold=function(threshold,limit){return relativeTimeThresholds[threshold]!==undefined&&(relativeTimeThresholds[threshold]=limit,!0)},moment.lang=function(key,values){return key?(values?function(key,values){values.abbr=key,languages[key]||(languages[key]=new Language),languages[key].set(values),languages[key]}(normalizeLanguage(key),values):null===values?(!function(key){delete languages[key]}(key),key="en"):languages[key]||getLangDefinition(key),(moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key))._abbr):moment.fn._lang._abbr},moment.langData=function(key){return key&&key._lang&&key._lang._abbr&&(key=key._lang._abbr),getLangDefinition(key)},moment.isMoment=function(obj){return obj instanceof Moment||null!=obj&&obj.hasOwnProperty("_isAMomentObject")},moment.isDuration=function(obj){return obj instanceof Duration},i=lists.length-1;0<=i;--i)makeList(lists[i]);function rawMonthSetter(mom,value){var dayOfMonth;return"string"==typeof value&&"number"!=typeof(value=mom.lang().monthsParse(value))||(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth)),mom}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){return"Month"===unit?rawMonthSetter(mom,value):mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function makeAccessor(unit,keepTime){return function(value){return null!=value?(rawSetter(this,unit,value),moment.updateOffset(this,keepTime),this):rawGetter(this,unit)}}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}for(i in moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(NaN);return null!=flags?extend(m._pf,flags):m._pf.userInvalidated=!0,m},moment.parseZone=function(){return moment.apply(null,arguments).parseZone()},moment.parseTwoDigitYear=function(input){return toInt(input)+(68<toInt(input)?1900:2e3)},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();return 0<m.year()&&m.year()<=9999?formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&0<compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray()))},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){return addOrSubtractDurationFromMoment(this,"string"==typeof input&&"string"==typeof val?moment.duration(isNaN(+val)?+input:+val,isNaN(+val)?val:input):"string"==typeof input?moment.duration(+val,input):moment.duration(input,val),1),this},subtract:function(input,val){return addOrSubtractDurationFromMoment(this,"string"==typeof input&&"string"==typeof val?moment.duration(isNaN(+val)?+input:+val,isNaN(+val)?val:input):"string"==typeof input?moment.duration(+val,input):moment.duration(input,val),-1),this},diff:function(input,units,asFloat){var diff,output,that=makeAs(input,this),zoneDiff=6e4*(this.zone()-that.zone());return"year"===(units=normalizeUnits(units))||"month"===units?(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff,output-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))/diff,"year"===units&&(output/=12)):(diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff),asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var sod=makeAs(time||moment(),this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=function(input,language){if("string"==typeof input)if(isNaN(input)){if("number"!=typeof(input=language.weekdaysParse(input)))return null}else input=parseInt(input,10);return input}(input,this.lang()),this.add({d:input-day})):day},month:makeAccessor("Month",!0),startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units?this.weekday(0):"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add("isoWeek"===units?"week":units,1).subtract("ms",1)},isAfter:function(input,units){return units=void 0!==units?units:"millisecond",+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units=void 0!==units?units:"millisecond",+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units=units||"ms",+this.clone().startOf(units)==+makeAs(input,this).startOf(units)},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){return(other=moment.apply(null,arguments))<this?this:other}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){return this<(other=moment.apply(null,arguments))?this:other}),zone:function(input,keepTime){var offset=this._offset||0;return null==input?this._isUTC?offset:this._d.getTimezoneOffset():("string"==typeof input&&(input=timezoneMinutesFromString(input)),Math.abs(input)<16&&(input*=60),this._offset=input,this._isUTC=!0,offset!==input&&(!keepTime||this._changeInProgress?addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,moment.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(input){return input=input?moment(input).zone():0,(this.zone()-input)%60==0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add("d",input-dayOfYear)},quarter:function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==input?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return null==input?week:this.add("d",7*(input-week))},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add("d",7*(input-week))},weekday:function(input){var weekday=(this.day()+7-this.lang()._week.dow)%7;return null==input?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this._lang._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){return this[units=normalizeUnits(units)]()},set:function(units,value){return"function"==typeof this[units=normalizeUnits(units)]&&this[units](value),this},lang:function(key){return key===undefined?this._lang:(this._lang=getLangDefinition(key),this)}}),moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",!1),moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",!1),moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",!1),moment.fn.hour=moment.fn.hours=makeAccessor("Hours",!0),moment.fn.date=makeAccessor("Date",!0),moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",!0)),moment.fn.year=makeAccessor("FullYear",!0),moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",!0)),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.quarters=moment.fn.quarter,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var seconds,minutes,hours,years,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),data.days=days%30,months+=absRound(days/30),data.months=months%12,years=absRound(months/12),data.years=years},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var milliseconds,withoutSuffix,lang,seconds,minutes,hours,days,years,args,difference=+this,output=(milliseconds=difference,withoutSuffix=!withSuffix,lang=this.lang(),seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),(args=seconds<relativeTimeThresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<relativeTimeThresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<relativeTimeThresholds.h&&["hh",hours]||1===days&&["d"]||days<=relativeTimeThresholds.dd&&["dd",days]||days<=relativeTimeThresholds.dm&&["M"]||days<relativeTimeThresholds.dy&&["MM",round(days/30)]||1===years&&["y"]||["yy",years])[2]=withoutSuffix,args[3]=0<milliseconds,args[4]=lang,function(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}.apply({},args));return withSuffix&&(output=this.lang().pastFuture(difference,output)),this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return this[(units=normalizeUnits(units)).toLowerCase()+"s"]()},as:function(units){return this["as"+(units=normalizeUnits(units)).charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang,toIsoString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":""):"P0D"}}),unitMillisecondFactors)unitMillisecondFactors.hasOwnProperty(i)&&(makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase()));function makeGlobal(shouldDeprecate){"undefined"==typeof ender&&(oldGlobalMoment=globalScope.moment,globalScope.moment=shouldDeprecate?deprecate("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",moment):moment)}makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(number){var b=number%10;return number+(1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),function(moment){moment.lang("ar-ma",{months:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§Ù_ÙÙÙÙÙ_ÙÙÙÙÙØ²_ØºØ´Øª_Ø´ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙØ¨Ø±_Ø¯Ø¬ÙØ¨Ø±".split("_"),monthsShort:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§Ù_ÙÙÙÙÙ_ÙÙÙÙÙØ²_ØºØ´Øª_Ø´ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙØ¨Ø±_Ø¯Ø¬ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥ØªÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø§Ø­Ø¯_Ø§ØªÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø§Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},week:{dow:6,doy:12}})}(moment),function(moment){var symbolMap={1:"Ù¡",2:"Ù¢",3:"Ù£",4:"Ù¤",5:"Ù¥",6:"Ù¦",7:"Ù§",8:"Ù¨",9:"Ù©",0:"Ù "},numberMap={"Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9","Ù ":"0"};moment.lang("ar-sa",{months:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§ÙÙ_ÙÙÙÙÙ_ÙÙÙÙÙ_Ø£ØºØ³Ø·Ø³_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),monthsShort:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§ÙÙ_ÙÙÙÙÙ_ÙÙÙÙÙ_Ø£ØºØ³Ø·Ø³_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(hour,minute,isLower){return hour<12?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},preparse:function(string){return string.replace(/[Û°-Û¹]/g,function(match){return numberMap[match]}).replace(/Ø/g,",")},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]}).replace(/,/g,"Ø")},week:{dow:6,doy:12}})}(moment),function(moment){var symbolMap={1:"Ù¡",2:"Ù¢",3:"Ù£",4:"Ù¤",5:"Ù¥",6:"Ù¦",7:"Ù§",8:"Ù¨",9:"Ù©",0:"Ù "},numberMap={"Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9","Ù ":"0"};moment.lang("ar",{months:"ÙÙØ§ÙØ±/ ÙØ§ÙÙÙ Ø§ÙØ«Ø§ÙÙ_ÙØ¨Ø±Ø§ÙØ±/ Ø´Ø¨Ø§Ø·_ÙØ§Ø±Ø³/ Ø¢Ø°Ø§Ø±_Ø£Ø¨Ø±ÙÙ/ ÙÙØ³Ø§Ù_ÙØ§ÙÙ/ Ø£ÙØ§Ø±_ÙÙÙÙÙ/ Ø­Ø²ÙØ±Ø§Ù_ÙÙÙÙÙ/ ØªÙÙØ²_Ø£ØºØ³Ø·Ø³/ Ø¢Ø¨_Ø³Ø¨ØªÙØ¨Ø±/ Ø£ÙÙÙÙ_Ø£ÙØªÙØ¨Ø±/ ØªØ´Ø±ÙÙ Ø§ÙØ£ÙÙ_ÙÙÙÙØ¨Ø±/ ØªØ´Ø±ÙÙ Ø§ÙØ«Ø§ÙÙ_Ø¯ÙØ³ÙØ¨Ø±/ ÙØ§ÙÙÙ Ø§ÙØ£ÙÙ".split("_"),monthsShort:"ÙÙØ§ÙØ±/ ÙØ§ÙÙÙ Ø§ÙØ«Ø§ÙÙ_ÙØ¨Ø±Ø§ÙØ±/ Ø´Ø¨Ø§Ø·_ÙØ§Ø±Ø³/ Ø¢Ø°Ø§Ø±_Ø£Ø¨Ø±ÙÙ/ ÙÙØ³Ø§Ù_ÙØ§ÙÙ/ Ø£ÙØ§Ø±_ÙÙÙÙÙ/ Ø­Ø²ÙØ±Ø§Ù_ÙÙÙÙÙ/ ØªÙÙØ²_Ø£ØºØ³Ø·Ø³/ Ø¢Ø¨_Ø³Ø¨ØªÙØ¨Ø±/ Ø£ÙÙÙÙ_Ø£ÙØªÙØ¨Ø±/ ØªØ´Ø±ÙÙ Ø§ÙØ£ÙÙ_ÙÙÙÙØ¨Ø±/ ØªØ´Ø±ÙÙ Ø§ÙØ«Ø§ÙÙ_Ø¯ÙØ³ÙØ¨Ø±/ ÙØ§ÙÙÙ Ø§ÙØ£ÙÙ".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(hour,minute,isLower){return hour<12?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},preparse:function(string){return string.replace(/[Û°-Û¹]/g,function(match){return numberMap[match]}).replace(/Ø/g,",")},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]}).replace(/,/g,"Ø")},week:{dow:6,doy:12}})}(moment),function(moment){var suffixes={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-Ã¼ncÃ¼",4:"-Ã¼ncÃ¼",100:"-Ã¼ncÃ¼",6:"-ncÄ±",9:"-uncu",10:"-uncu",30:"-uncu",60:"-Ä±ncÄ±",90:"-Ä±ncÄ±"};moment.lang("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertÉsi_ÃÉrÅÉnbÉ axÅamÄ±_ÃÉrÅÉnbÉ_CÃ¼mÉ axÅamÄ±_CÃ¼mÉ_ÅÉnbÉ".split("_"),weekdaysShort:"Baz_BzE_ÃAx_ÃÉr_CAx_CÃ¼m_ÅÉn".split("_"),weekdaysMin:"Bz_BE_ÃA_ÃÉ_CA_CÃ¼_ÅÉ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugÃ¼n saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gÉlÉn hÉftÉ] dddd [saat] LT",lastDay:"[dÃ¼nÉn] LT",lastWeek:"[keÃ§Én hÉftÉ] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s ÉvvÉl",s:"birneÃ§É saniyyÉ",m:"bir dÉqiqÉ",mm:"%d dÉqiqÉ",h:"bir saat",hh:"%d saat",d:"bir gÃ¼n",dd:"%d gÃ¼n",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiem:function(hour,minute,isLower){return hour<4?"gecÉ":hour<12?"sÉhÉr":hour<17?"gÃ¼ndÃ¼z":"axÅam"},ordinal:function(number){if(0===number)return number+"-Ä±ncÄ±";var a=number%10,b=number%100-a,c=100<=number?100:null;return number+(suffixes[a]||suffixes[b]||suffixes[c])},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("bg",{months:"ÑÐ½ÑÐ°ÑÐ¸_ÑÐµÐ²ÑÑÐ°ÑÐ¸_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ð¹_ÑÐ½Ð¸_ÑÐ»Ð¸_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð²ÑÐ¸_Ð¾ÐºÑÐ¾Ð¼Ð²ÑÐ¸_Ð½Ð¾ÐµÐ¼Ð²ÑÐ¸_Ð´ÐµÐºÐµÐ¼Ð²ÑÐ¸".split("_"),monthsShort:"ÑÐ½Ñ_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_ÑÐ½Ð¸_ÑÐ»Ð¸_Ð°Ð²Ð³_ÑÐµÐ¿_Ð¾ÐºÑ_Ð½Ð¾Ðµ_Ð´ÐµÐº".split("_"),weekdays:"Ð½ÐµÐ´ÐµÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÑÐ´Ð°_ÑÐµÑÐ²ÑÑÑÑÐº_Ð¿ÐµÑÑÐº_ÑÑÐ±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´_Ð¿Ð¾Ð½_Ð²ÑÐ¾_ÑÑÑ_ÑÐµÑ_Ð¿ÐµÑ_ÑÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ÐÐ½ÐµÑ Ð²] LT",nextDay:"[Ð£ÑÑÐµ Ð²] LT",nextWeek:"dddd [Ð²] LT",lastDay:"[ÐÑÐµÑÐ° Ð²] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Ð Ð¸Ð·Ð¼Ð¸Ð½Ð°Ð»Ð°ÑÐ°] dddd [Ð²] LT";case 1:case 2:case 4:case 5:return"[Ð Ð¸Ð·Ð¼Ð¸Ð½Ð°Ð»Ð¸Ñ] dddd [Ð²] LT"}},sameElse:"L"},relativeTime:{future:"ÑÐ»ÐµÐ´ %s",past:"Ð¿ÑÐµÐ´Ð¸ %s",s:"Ð½ÑÐºÐ¾Ð»ÐºÐ¾ ÑÐµÐºÑÐ½Ð´Ð¸",m:"Ð¼Ð¸Ð½ÑÑÐ°",mm:"%d Ð¼Ð¸Ð½ÑÑÐ¸",h:"ÑÐ°Ñ",hh:"%d ÑÐ°ÑÐ°",d:"Ð´ÐµÐ½",dd:"%d Ð´Ð½Ð¸",M:"Ð¼ÐµÑÐµÑ",MM:"%d Ð¼ÐµÑÐµÑÐ°",y:"Ð³Ð¾Ð´Ð¸Ð½Ð°",yy:"%d Ð³Ð¾Ð´Ð¸Ð½Ð¸"},ordinal:function(number){var lastDigit=number%10,last2Digits=number%100;return 0===number?number+"-ÐµÐ²":0===last2Digits?number+"-ÐµÐ½":10<last2Digits&&last2Digits<20?number+"-ÑÐ¸":1===lastDigit?number+"-Ð²Ð¸":2===lastDigit?number+"-ÑÐ¸":7===lastDigit||8===lastDigit?number+"-Ð¼Ð¸":number+"-ÑÐ¸"},week:{dow:1,doy:7}})}(moment),function(moment){var symbolMap={1:"à§§",2:"à§¨",3:"à§©",4:"à§ª",5:"à§«",6:"à§¬",7:"à§­",8:"à§®",9:"à§¯",0:"à§¦"},numberMap={"à§§":"1","à§¨":"2","à§©":"3","à§ª":"4","à§«":"5","à§¬":"6","à§­":"7","à§®":"8","à§¯":"9","à§¦":"0"};moment.lang("bn",{months:"à¦à¦¾à¦¨à§à§à¦¾à¦°à§_à¦«à§à¦¬à§à§à¦¾à¦°à§_à¦®à¦¾à¦°à§à¦_à¦à¦ªà§à¦°à¦¿à¦²_à¦®à§_à¦à§à¦¨_à¦à§à¦²à¦¾à¦_à¦à¦à¦¾à¦¸à§à¦_à¦¸à§à¦ªà§à¦à§à¦®à§à¦¬à¦°_à¦à¦à§à¦à§à¦¬à¦°_à¦¨à¦­à§à¦®à§à¦¬à¦°_à¦¡à¦¿à¦¸à§à¦®à§à¦¬à¦°".split("_"),monthsShort:"à¦à¦¾à¦¨à§_à¦«à§à¦¬_à¦®à¦¾à¦°à§à¦_à¦à¦ªà¦°_à¦®à§_à¦à§à¦¨_à¦à§à¦²_à¦à¦_à¦¸à§à¦ªà§à¦_à¦à¦à§à¦à§_à¦¨à¦­_à¦¡à¦¿à¦¸à§à¦®à§".split("_"),weekdays:"à¦°à¦¬à¦¿à¦¬à¦¾à¦°_à¦¸à§à¦®à¦¬à¦¾à¦°_à¦®à¦à§à¦à¦²à¦¬à¦¾à¦°_à¦¬à§à¦§à¦¬à¦¾à¦°_à¦¬à§à¦¹à¦¸à§à¦ªà¦¤à§à¦¤à¦¿à¦¬à¦¾à¦°_à¦¶à§à¦à§à¦°à§à¦¬à¦¾à¦°_à¦¶à¦¨à¦¿à¦¬à¦¾à¦°".split("_"),weekdaysShort:"à¦°à¦¬à¦¿_à¦¸à§à¦®_à¦®à¦à§à¦à¦²_à¦¬à§à¦§_à¦¬à§à¦¹à¦¸à§à¦ªà¦¤à§à¦¤à¦¿_à¦¶à§à¦à§à¦°à§_à¦¶à¦¨à¦¿".split("_"),weekdaysMin:"à¦°à¦¬_à¦¸à¦®_à¦®à¦à§à¦_à¦¬à§_à¦¬à§à¦°à¦¿à¦¹_à¦¶à§_à¦¶à¦¨à¦¿".split("_"),longDateFormat:{LT:"A h:mm à¦¸à¦®à§",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à¦à¦] LT",nextDay:"[à¦à¦à¦¾à¦®à§à¦à¦¾à¦²] LT",nextWeek:"dddd, LT",lastDay:"[à¦à¦¤à¦à¦¾à¦²] LT",lastWeek:"[à¦à¦¤] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¦ªà¦°à§",past:"%s à¦à¦à§",s:"à¦à¦à¦ à¦¸à§à¦à§à¦¨à§à¦¡",m:"à¦à¦ à¦®à¦¿à¦¨à¦¿à¦",mm:"%d à¦®à¦¿à¦¨à¦¿à¦",h:"à¦à¦ à¦à¦¨à§à¦à¦¾",hh:"%d à¦à¦¨à§à¦à¦¾",d:"à¦à¦ à¦¦à¦¿à¦¨",dd:"%d à¦¦à¦¿à¦¨",M:"à¦à¦ à¦®à¦¾à¦¸",MM:"%d à¦®à¦¾à¦¸",y:"à¦à¦ à¦¬à¦à¦°",yy:"%d à¦¬à¦à¦°"},preparse:function(string){return string.replace(/[à§§à§¨à§©à§ªà§«à§¬à§­à§®à§¯à§¦]/g,function(match){return numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]})},meridiem:function(hour,minute,isLower){return hour<4?"à¦°à¦¾à¦¤":hour<10?"à¦¶à¦à¦¾à¦²":hour<17?"à¦¦à§à¦ªà§à¦°":hour<20?"à¦¬à¦¿à¦à§à¦²":"à¦°à¦¾à¦¤"},week:{dow:0,doy:6}})}(moment),function(moment){function relativeTimeWithMutation(number,withoutSuffix,key){return number+" "+function(text,number){return 2!==number?text:function(text){var mutationTable={m:"v",b:"v",d:"z"};return mutationTable[text.charAt(0)]!==undefined?mutationTable[text.charAt(0)]+text.substring(1):text}(text)}({mm:"munutenn",MM:"miz",dd:"devezh"}[key],number)}function lastNumber(number){return 9<number?lastNumber(number%10):number}moment.lang("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoÃ¹",m:"ur vunutenn",mm:relativeTimeWithMutation,h:"un eur",hh:"%d eur",d:"un devezh",dd:relativeTimeWithMutation,M:"ur miz",MM:relativeTimeWithMutation,y:"ur bloaz",yy:function(number){switch(lastNumber(number)){case 1:case 3:case 4:case 5:case 9:return number+" bloaz";default:return number+" vloaz"}}},ordinal:function(number){var output=1===number?"aÃ±":"vet";return number+output},week:{dow:1,doy:4}})}(moment),function(moment){function translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"jedna minuta":"jedne minute";case"mm":return result+=1===number?"minuta":2===number||3===number||4===number?"minute":"minuta";case"h":return withoutSuffix?"jedan sat":"jednog sata";case"hh":return result+=1===number?"sat":2===number||3===number||4===number?"sata":"sati";case"dd":return result+=1===number?"dan":"dana";case"MM":return result+=1===number?"mjesec":2===number||3===number||4===number?"mjeseca":"mjeseci";case"yy":return result+=1===number?"godina":2===number||3===number||4===number?"godine":"godina"}}moment.lang("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[proÅ¡lu] dddd [u] LT";case 6:return"[proÅ¡le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proÅ¡li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:translate,mm:translate,h:translate,hh:translate,d:"dan",dd:translate,M:"mjesec",MM:translate,y:"godinu",yy:translate},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("ca",{months:"gener_febrer_marÃ§_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demÃ  a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%dÂº",week:{dow:1,doy:4}})}(moment),function(moment){var months="leden_Ãºnor_bÅezen_duben_kvÄten_Äerven_Äervenec_srpen_zÃ¡ÅÃ­_ÅÃ­jen_listopad_prosinec".split("_"),monthsShort="led_Ãºno_bÅe_dub_kvÄ_Ävn_Ävc_srp_zÃ¡Å_ÅÃ­j_lis_pro".split("_");function plural(n){return 1<n&&n<5&&1!=~~(n/10)}function translate(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"pÃ¡r sekund":"pÃ¡r sekundami";case"m":return withoutSuffix?"minuta":isFuture?"minutu":"minutou";case"mm":return withoutSuffix||isFuture?result+(plural(number)?"minuty":"minut"):result+"minutami";case"h":return withoutSuffix?"hodina":isFuture?"hodinu":"hodinou";case"hh":return withoutSuffix||isFuture?result+(plural(number)?"hodiny":"hodin"):result+"hodinami";case"d":return withoutSuffix||isFuture?"den":"dnem";case"dd":return withoutSuffix||isFuture?result+(plural(number)?"dny":"dnÃ­"):result+"dny";case"M":return withoutSuffix||isFuture?"mÄsÃ­c":"mÄsÃ­cem";case"MM":return withoutSuffix||isFuture?result+(plural(number)?"mÄsÃ­ce":"mÄsÃ­cÅ¯"):result+"mÄsÃ­ci";case"y":return withoutSuffix||isFuture?"rok":"rokem";case"yy":return withoutSuffix||isFuture?result+(plural(number)?"roky":"let"):result+"lety"}}moment.lang("cs",{months:months,monthsShort:monthsShort,monthsParse:function(months,monthsShort){var i,_monthsParse=[];for(i=0;i<12;i++)_monthsParse[i]=new RegExp("^"+months[i]+"$|^"+monthsShort[i]+"$","i");return _monthsParse}(months,monthsShort),weekdays:"nedÄle_pondÄlÃ­_ÃºterÃ½_stÅeda_Ätvrtek_pÃ¡tek_sobota".split("_"),weekdaysShort:"ne_po_Ãºt_st_Ät_pÃ¡_so".split("_"),weekdaysMin:"ne_po_Ãºt_st_Ät_pÃ¡_so".split("_"),longDateFormat:{LT:"H.mm",L:"DD.Â MM.Â YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zÃ­tra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedÄli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stÅedu v] LT";case 4:return"[ve Ätvrtek v] LT";case 5:return"[v pÃ¡tek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vÄera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedÄli v] LT";case 1:case 2:return"[minulÃ©] dddd [v] LT";case 3:return"[minulou stÅedu v] LT";case 4:case 5:return"[minulÃ½] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pÅed %s",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("cv",{months:"ÐºÄÑÐ»Ð°Ñ_Ð½Ð°ÑÄÑ_Ð¿ÑÑ_Ð°ÐºÐ°_Ð¼Ð°Ð¹_Ã§ÄÑÑÐ¼Ðµ_ÑÑÄ_Ã§ÑÑÐ»Ð°_Ð°Ð²ÄÐ½_ÑÐ¿Ð°_ÑÓ³Ðº_ÑÐ°ÑÑÐ°Ð²".split("_"),monthsShort:"ÐºÄÑ_Ð½Ð°Ñ_Ð¿ÑÑ_Ð°ÐºÐ°_Ð¼Ð°Ð¹_Ã§ÄÑ_ÑÑÄ_Ã§ÑÑ_Ð°Ð²_ÑÐ¿Ð°_ÑÓ³Ðº_ÑÐ°Ñ".split("_"),weekdays:"Ð²ÑÑÑÐ°ÑÐ½Ð¸ÐºÑÐ½_ÑÑÐ½ÑÐ¸ÐºÑÐ½_ÑÑÐ»Ð°ÑÐ¸ÐºÑÐ½_ÑÐ½ÐºÑÐ½_ÐºÄÃ§Ð½ÐµÑÐ½Ð¸ÐºÑÐ½_ÑÑÐ½ÐµÐºÑÐ½_ÑÄÐ¼Ð°ÑÐºÑÐ½".split("_"),weekdaysShort:"Ð²ÑÑ_ÑÑÐ½_ÑÑÐ»_ÑÐ½_ÐºÄÃ§_ÑÑÐ½_ÑÄÐ¼".split("_"),weekdaysMin:"Ð²Ñ_ÑÐ½_ÑÑ_ÑÐ½_ÐºÃ§_ÑÑ_ÑÐ¼".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [Ã§ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÄÑÄÐ½] D[-Ð¼ÄÑÄ]",LLL:"YYYY [Ã§ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÄÑÄÐ½] D[-Ð¼ÄÑÄ], LT",LLLL:"dddd, YYYY [Ã§ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÄÑÄÐ½] D[-Ð¼ÄÑÄ], LT"},calendar:{sameDay:"[ÐÐ°ÑÐ½] LT [ÑÐµÑÐµÑÑÐµ]",nextDay:"[Ð«ÑÐ°Ð½] LT [ÑÐµÑÐµÑÑÐµ]",lastDay:"[ÄÐ½ÐµÑ] LT [ÑÐµÑÐµÑÑÐµ]",nextWeek:"[ÃÐ¸ÑÐµÑ] dddd LT [ÑÐµÑÐµÑÑÐµ]",lastWeek:"[ÐÑÑÐ½Ä] dddd LT [ÑÐµÑÐµÑÑÐµ]",sameElse:"L"},relativeTime:{future:function(output){var affix=/ÑÐµÑÐµÑ$/i.exec(output)?"ÑÐµÐ½":/Ã§ÑÐ»$/i.exec(output)?"ÑÐ°Ð½":"ÑÐ°Ð½";return output+affix},past:"%s ÐºÐ°ÑÐ»Ð»Ð°",s:"Ð¿ÄÑ-Ð¸Ðº Ã§ÐµÐºÐºÑÐ½Ñ",m:"Ð¿ÄÑ Ð¼Ð¸Ð½ÑÑ",mm:"%d Ð¼Ð¸Ð½ÑÑ",h:"Ð¿ÄÑ ÑÐµÑÐµÑ",hh:"%d ÑÐµÑÐµÑ",d:"Ð¿ÄÑ ÐºÑÐ½",dd:"%d ÐºÑÐ½",M:"Ð¿ÄÑ ÑÐ¹ÄÑ",MM:"%d ÑÐ¹ÄÑ",y:"Ð¿ÄÑ Ã§ÑÐ»",yy:"%d Ã§ÑÐ»"},ordinal:"%d-Ð¼ÄÑ",week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn Ã´l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(number){var b=number,output="";return 20<b?output=40===b||50===b||60===b||80===b||100===b?"fed":"ain":0<b&&(output=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][b]),number+output},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sÃ¸ndag_mandag_tirsdag_onsdag_torsdag_fredag_lÃ¸rdag".split("_"),weekdaysShort:"sÃ¸n_man_tir_ons_tor_fre_lÃ¸r".split("_"),weekdaysMin:"sÃ¸_ma_ti_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gÃ¥r kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"fÃ¥ sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mÃ¥ned",MM:"%d mÃ¥neder",y:"et Ã¥r",yy:"%d Ã¥r"},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){function processRelativeTime(number,withoutSuffix,key,isFuture){var format={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[number+" Tage",number+" Tagen"],M:["ein Monat","einem Monat"],MM:[number+" Monate",number+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[number+" Jahre",number+" Jahren"]};return withoutSuffix?format[key][0]:format[key][1]}moment.lang("de-at",{months:"JÃ¤nner_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"JÃ¤n._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){function processRelativeTime(number,withoutSuffix,key,isFuture){var format={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[number+" Tage",number+" Tagen"],M:["ein Monat","einem Monat"],MM:[number+" Monate",number+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[number+" Jahre",number+" Jahren"]};return withoutSuffix?format[key][0]:format[key][1]}moment.lang("de",{months:"Januar_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("el",{monthsNominativeEl:"ÎÎ±Î½Î¿ÏÎ¬ÏÎ¹Î¿Ï_Î¦ÎµÎ²ÏÎ¿ÏÎ¬ÏÎ¹Î¿Ï_ÎÎ¬ÏÏÎ¹Î¿Ï_ÎÏÏÎ¯Î»Î¹Î¿Ï_ÎÎ¬Î¹Î¿Ï_ÎÎ¿ÏÎ½Î¹Î¿Ï_ÎÎ¿ÏÎ»Î¹Î¿Ï_ÎÏÎ³Î¿ÏÏÏÎ¿Ï_Î£ÎµÏÏÎ­Î¼Î²ÏÎ¹Î¿Ï_ÎÎºÏÏÎ²ÏÎ¹Î¿Ï_ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï_ÎÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï".split("_"),monthsGenitiveEl:"ÎÎ±Î½Î¿ÏÎ±ÏÎ¯Î¿Ï_Î¦ÎµÎ²ÏÎ¿ÏÎ±ÏÎ¯Î¿Ï_ÎÎ±ÏÏÎ¯Î¿Ï_ÎÏÏÎ¹Î»Î¯Î¿Ï_ÎÎ±ÎÎ¿Ï_ÎÎ¿ÏÎ½Î¯Î¿Ï_ÎÎ¿ÏÎ»Î¯Î¿Ï_ÎÏÎ³Î¿ÏÏÏÎ¿Ï_Î£ÎµÏÏÎµÎ¼Î²ÏÎ¯Î¿Ï_ÎÎºÏÏÎ²ÏÎ¯Î¿Ï_ÎÎ¿ÎµÎ¼Î²ÏÎ¯Î¿Ï_ÎÎµÎºÎµÎ¼Î²ÏÎ¯Î¿Ï".split("_"),months:function(momentToFormat,format){return/D/.test(format.substring(0,format.indexOf("MMMM")))?this._monthsGenitiveEl[momentToFormat.month()]:this._monthsNominativeEl[momentToFormat.month()]},monthsShort:"ÎÎ±Î½_Î¦ÎµÎ²_ÎÎ±Ï_ÎÏÏ_ÎÎ±Ï_ÎÎ¿ÏÎ½_ÎÎ¿ÏÎ»_ÎÏÎ³_Î£ÎµÏ_ÎÎºÏ_ÎÎ¿Îµ_ÎÎµÎº".split("_"),weekdays:"ÎÏÏÎ¹Î±ÎºÎ®_ÎÎµÏÏÎ­ÏÎ±_Î¤ÏÎ¯ÏÎ·_Î¤ÎµÏÎ¬ÏÏÎ·_Î Î­Î¼ÏÏÎ·_Î Î±ÏÎ±ÏÎºÎµÏÎ®_Î£Î¬Î²Î²Î±ÏÎ¿".split("_"),weekdaysShort:"ÎÏÏ_ÎÎµÏ_Î¤ÏÎ¹_Î¤ÎµÏ_Î ÎµÎ¼_Î Î±Ï_Î£Î±Î²".split("_"),weekdaysMin:"ÎÏ_ÎÎµ_Î¤Ï_Î¤Îµ_Î Îµ_Î Î±_Î£Î±".split("_"),meridiem:function(hours,minutes,isLower){return 11<hours?isLower?"Î¼Î¼":"ÎÎ":isLower?"ÏÎ¼":"Î Î"},longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Î£Î®Î¼ÎµÏÎ± {}] LT",nextDay:"[ÎÏÏÎ¹Î¿ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Î§Î¸ÎµÏ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ÏÎ¿ ÏÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿] dddd [{}] LT";default:return"[ÏÎ·Î½ ÏÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î·] dddd [{}] LT"}},sameElse:"L"},calendar:function(key,mom){var output=this._calendarEl[key],hours=mom&&mom.hours();return"function"==typeof output&&(output=output.apply(mom)),output.replace("{}",hours%12==1?"ÏÏÎ·":"ÏÏÎ¹Ï")},relativeTime:{future:"ÏÎµ %s",past:"%s ÏÏÎ¹Î½",s:"Î´ÎµÏÏÎµÏÏÎ»ÎµÏÏÎ±",m:"Î­Î½Î± Î»ÎµÏÏÏ",mm:"%d Î»ÎµÏÏÎ¬",h:"Î¼Î¯Î± ÏÏÎ±",hh:"%d ÏÏÎµÏ",d:"Î¼Î¯Î± Î¼Î­ÏÎ±",dd:"%d Î¼Î­ÏÎµÏ",M:"Î­Î½Î±Ï Î¼Î®Î½Î±Ï",MM:"%d Î¼Î®Î½ÎµÏ",y:"Î­Î½Î±Ï ÏÏÏÎ½Î¿Ï",yy:"%d ÏÏÏÎ½Î¹Î±"},ordinal:function(number){return number+"Î·"},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10,output=1==~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10,output=1==~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}})}(moment),function(moment){moment.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10,output=1==~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aÅ­gusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aÅ­g_sep_okt_nov_dec".split("_"),weekdays:"DimanÄo_Lundo_Mardo_Merkredo_Ä´aÅ­do_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ä´aÅ­_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ä´a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(hours,minutes,isLower){return 11<hours?isLower?"p.t.m.":"P.T.M.":isLower?"a.t.m.":"A.T.M."},calendar:{sameDay:"[HodiaÅ­ je] LT",nextDay:"[MorgaÅ­ je] LT",nextWeek:"dddd [je] LT",lastDay:"[HieraÅ­ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaÅ­ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}(moment),function(moment){var monthsShortDot="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),monthsShort="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");moment.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(m,format){return/-MMM-/.test(format)?monthsShort[m.month()]:monthsShortDot[m.month()]},weekdays:"domingo_lunes_martes_miÃ©rcoles_jueves_viernes_sÃ¡bado".split("_"),weekdaysShort:"dom._lun._mar._miÃ©._jue._vie._sÃ¡b.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_SÃ¡".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maÃ±ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un aÃ±o",yy:"%d aÃ±os"},ordinal:"%dÂº",week:{dow:1,doy:4}})}(moment),function(moment){function processRelativeTime(number,withoutSuffix,key,isFuture){var format={s:["mÃµne sekundi","mÃµni sekund","paar sekundit"],m:["Ã¼he minuti","Ã¼ks minut"],mm:[number+" minuti",number+" minutit"],h:["Ã¼he tunni","tund aega","Ã¼ks tund"],hh:[number+" tunni",number+" tundi"],d:["Ã¼he pÃ¤eva","Ã¼ks pÃ¤ev"],M:["kuu aja","kuu aega","Ã¼ks kuu"],MM:[number+" kuu",number+" kuud"],y:["Ã¼he aasta","aasta","Ã¼ks aasta"],yy:[number+" aasta",number+" aastat"]};return withoutSuffix?format[key][2]?format[key][2]:format[key][1]:isFuture?format[key][0]:format[key][1]}moment.lang("et",{months:"jaanuar_veebruar_mÃ¤rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mÃ¤rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pÃ¼hapÃ¤ev_esmaspÃ¤ev_teisipÃ¤ev_kolmapÃ¤ev_neljapÃ¤ev_reede_laupÃ¤ev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[TÃ¤na,] LT",nextDay:"[Homme,] LT",nextWeek:"[JÃ¤rgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pÃ¤rast",past:"%s tagasi",s:processRelativeTime,m:processRelativeTime,mm:processRelativeTime,h:processRelativeTime,hh:processRelativeTime,d:processRelativeTime,dd:"%d pÃ¤eva",M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){var symbolMap={1:"Û±",2:"Û²",3:"Û³",4:"Û´",5:"Ûµ",6:"Û¶",7:"Û·",8:"Û¸",9:"Û¹",0:"Û°"},numberMap={"Û±":"1","Û²":"2","Û³":"3","Û´":"4","Ûµ":"5","Û¶":"6","Û·":"7","Û¸":"8","Û¹":"9","Û°":"0"};moment.lang("fa",{months:"ÚØ§ÙÙÛÙ_ÙÙØ±ÛÙ_ÙØ§Ø±Ø³_Ø¢ÙØ±ÛÙ_ÙÙ_ÚÙØ¦Ù_ÚÙØ¦ÛÙ_Ø§ÙØª_Ø³Ù¾ØªØ§ÙØ¨Ø±_Ø§Ú©ØªØ¨Ø±_ÙÙØ§ÙØ¨Ø±_Ø¯Ø³Ø§ÙØ¨Ø±".split("_"),monthsShort:"ÚØ§ÙÙÛÙ_ÙÙØ±ÛÙ_ÙØ§Ø±Ø³_Ø¢ÙØ±ÛÙ_ÙÙ_ÚÙØ¦Ù_ÚÙØ¦ÛÙ_Ø§ÙØª_Ø³Ù¾ØªØ§ÙØ¨Ø±_Ø§Ú©ØªØ¨Ø±_ÙÙØ§ÙØ¨Ø±_Ø¯Ø³Ø§ÙØ¨Ø±".split("_"),weekdays:"ÛÚ©âØ´ÙØ¨Ù_Ø¯ÙØ´ÙØ¨Ù_Ø³ÙâØ´ÙØ¨Ù_ÚÙØ§Ø±Ø´ÙØ¨Ù_Ù¾ÙØ¬âØ´ÙØ¨Ù_Ø¬ÙØ¹Ù_Ø´ÙØ¨Ù".split("_"),weekdaysShort:"ÛÚ©âØ´ÙØ¨Ù_Ø¯ÙØ´ÙØ¨Ù_Ø³ÙâØ´ÙØ¨Ù_ÚÙØ§Ø±Ø´ÙØ¨Ù_Ù¾ÙØ¬âØ´ÙØ¨Ù_Ø¬ÙØ¹Ù_Ø´ÙØ¨Ù".split("_"),weekdaysMin:"Û_Ø¯_Ø³_Ú_Ù¾_Ø¬_Ø´".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(hour,minute,isLower){return hour<12?"ÙØ¨Ù Ø§Ø² Ø¸ÙØ±":"Ø¨Ø¹Ø¯ Ø§Ø² Ø¸ÙØ±"},calendar:{sameDay:"[Ø§ÙØ±ÙØ² Ø³Ø§Ø¹Øª] LT",nextDay:"[ÙØ±Ø¯Ø§ Ø³Ø§Ø¹Øª] LT",nextWeek:"dddd [Ø³Ø§Ø¹Øª] LT",lastDay:"[Ø¯ÛØ±ÙØ² Ø³Ø§Ø¹Øª] LT",lastWeek:"dddd [Ù¾ÛØ´] [Ø³Ø§Ø¹Øª] LT",sameElse:"L"},relativeTime:{future:"Ø¯Ø± %s",past:"%s Ù¾ÛØ´",s:"ÚÙØ¯ÛÙ Ø«Ø§ÙÛÙ",m:"ÛÚ© Ø¯ÙÛÙÙ",mm:"%d Ø¯ÙÛÙÙ",h:"ÛÚ© Ø³Ø§Ø¹Øª",hh:"%d Ø³Ø§Ø¹Øª",d:"ÛÚ© Ø±ÙØ²",dd:"%d Ø±ÙØ²",M:"ÛÚ© ÙØ§Ù",MM:"%d ÙØ§Ù",y:"ÛÚ© Ø³Ø§Ù",yy:"%d Ø³Ø§Ù"},preparse:function(string){return string.replace(/[Û°-Û¹]/g,function(match){return numberMap[match]}).replace(/Ø/g,",")},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]}).replace(/,/g,"Ø")},ordinal:"%dÙ",week:{dow:6,doy:12}})}(moment),function(moment){var numbersPast="nolla yksi kaksi kolme neljÃ¤ viisi kuusi seitsemÃ¤n kahdeksan yhdeksÃ¤n".split(" "),numbersFuture=["nolla","yhden","kahden","kolmen","neljÃ¤n","viiden","kuuden",numbersPast[7],numbersPast[8],numbersPast[9]];function translate(number,withoutSuffix,key,isFuture){var result="";switch(key){case"s":return isFuture?"muutaman sekunnin":"muutama sekunti";case"m":return isFuture?"minuutin":"minuutti";case"mm":result=isFuture?"minuutin":"minuuttia";break;case"h":return isFuture?"tunnin":"tunti";case"hh":result=isFuture?"tunnin":"tuntia";break;case"d":return isFuture?"pÃ¤ivÃ¤n":"pÃ¤ivÃ¤";case"dd":result=isFuture?"pÃ¤ivÃ¤n":"pÃ¤ivÃ¤Ã¤";break;case"M":return isFuture?"kuukauden":"kuukausi";case"MM":result=isFuture?"kuukauden":"kuukautta";break;case"y":return isFuture?"vuoden":"vuosi";case"yy":result=isFuture?"vuoden":"vuotta"}return result=function(number,isFuture){return number<10?isFuture?numbersFuture[number]:numbersPast[number]:number}(number,isFuture)+" "+result}moment.lang("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesÃ¤kuu_heinÃ¤kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesÃ¤_heinÃ¤_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tÃ¤nÃ¤Ã¤n] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pÃ¤Ã¤stÃ¤",past:"%s sitten",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("fo",{months:"januar_februar_mars_aprÃ­l_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mÃ¡nadagur_tÃ½sdagur_mikudagur_hÃ³sdagur_frÃ­ggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mÃ¡n_tÃ½s_mik_hÃ³s_frÃ­_ley".split("_"),weekdaysMin:"su_mÃ¡_tÃ½_mi_hÃ³_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Ã dag kl.] LT",nextDay:"[Ã morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Ã gjÃ¡r kl.] LT",lastWeek:"[sÃ­Ã°stu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sÃ­Ã°ani",s:"fÃ¡ sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tÃ­mi",hh:"%d tÃ­mar",d:"ein dagur",dd:"%d dagar",M:"ein mÃ¡naÃ°i",MM:"%d mÃ¡naÃ°ir",y:"eitt Ã¡r",yy:"%d Ã¡r"},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("fr-ca",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(number){return number+(1===number?"er":"")}})}(moment),function(moment){moment.lang("fr",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(number){return number+(1===number?"er":"")},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_XuÃ±o_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._XuÃ±._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_MÃ©rcores_Xoves_Venres_SÃ¡bado".split("_"),weekdaysShort:"Dom._Lun._Mar._MÃ©r._Xov._Ven._SÃ¡b.".split("_"),weekdaysMin:"Do_Lu_Ma_MÃ©_Xo_Ve_SÃ¡".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"Ã¡s":"Ã¡")+"] LT"},nextDay:function(){return"[maÃ±Ã¡ "+(1!==this.hours()?"Ã¡s":"Ã¡")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"Ã¡s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"Ã¡":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"Ã¡s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(str){return"uns segundos"===str?"nuns segundos":"en "+str},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%dÂº",week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("he",{months:"×× ×××¨_×¤××¨×××¨_××¨×¥_××¤×¨××_×××_××× ×_××××_×××××¡×_×¡×¤××××¨_×××§××××¨_× ×××××¨_××¦×××¨".split("_"),monthsShort:"×× ××³_×¤××¨×³_××¨×¥_××¤×¨×³_×××_××× ×_××××_××××³_×¡×¤××³_×××§×³_× ×××³_××¦××³".split("_"),weekdays:"×¨××©××_×©× ×_×©×××©×_×¨×××¢×_××××©×_×©××©×_×©××ª".split("_"),weekdaysShort:"××³_××³_××³_××³_××³_××³_×©×³".split("_"),weekdaysMin:"×_×_×_×_×_×_×©".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [×]MMMM YYYY",LLL:"D [×]MMMM YYYY LT",LLLL:"dddd, D [×]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[×××× ×Ö¾]LT",nextDay:"[×××¨ ×Ö¾]LT",nextWeek:"dddd [××©×¢×] LT",lastDay:"[××ª××× ×Ö¾]LT",lastWeek:"[××××] dddd [××××¨×× ××©×¢×] LT",sameElse:"L"},relativeTime:{future:"××¢×× %s",past:"××¤× × %s",s:"××¡×¤×¨ ×©× ×××ª",m:"××§×",mm:"%d ××§××ª",h:"×©×¢×",hh:function(number){return 2===number?"×©×¢×ª×××":number+" ×©×¢××ª"},d:"×××",dd:function(number){return 2===number?"××××××":number+" ××××"},M:"××××©",MM:function(number){return 2===number?"××××©×××":number+" ××××©××"},y:"×©× ×",yy:function(number){return 2===number?"×©× ×ª×××":number+" ×©× ××"}}})}(moment),function(moment){var symbolMap={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},numberMap={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};moment.lang("hi",{months:"à¤à¤¨à¤µà¤°à¥_à¤«à¤¼à¤°à¤µà¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¥à¤²_à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤_à¤à¤à¤¸à¥à¤¤_à¤¸à¤¿à¤¤à¤®à¥à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¤µà¤®à¥à¤¬à¤°_à¤¦à¤¿à¤¸à¤®à¥à¤¬à¤°".split("_"),monthsShort:"à¤à¤¨._à¤«à¤¼à¤°._à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¥._à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²._à¤à¤._à¤¸à¤¿à¤¤._à¤à¤à¥à¤à¥._à¤¨à¤µ._à¤¦à¤¿à¤¸.".split("_"),weekdays:"à¤°à¤µà¤¿à¤µà¤¾à¤°_à¤¸à¥à¤®à¤µà¤¾à¤°_à¤®à¤à¤à¤²à¤µà¤¾à¤°_à¤¬à¥à¤§à¤µà¤¾à¤°_à¤à¥à¤°à¥à¤µà¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤µà¤¾à¤°_à¤¶à¤¨à¤¿à¤µà¤¾à¤°".split("_"),weekdaysShort:"à¤°à¤µà¤¿_à¤¸à¥à¤®_à¤®à¤à¤à¤²_à¤¬à¥à¤§_à¤à¥à¤°à¥_à¤¶à¥à¤à¥à¤°_à¤¶à¤¨à¤¿".split("_"),weekdaysMin:"à¤°_à¤¸à¥_à¤®à¤_à¤¬à¥_à¤à¥_à¤¶à¥_à¤¶".split("_"),longDateFormat:{LT:"A h:mm à¤¬à¤à¥",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤à¤²] LT",nextWeek:"dddd, LT",lastDay:"[à¤à¤²] LT",lastWeek:"[à¤ªà¤¿à¤à¤²à¥] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¤®à¥à¤",past:"%s à¤ªà¤¹à¤²à¥",s:"à¤à¥à¤ à¤¹à¥ à¤à¥à¤·à¤£",m:"à¤à¤ à¤®à¤¿à¤¨à¤",mm:"%d à¤®à¤¿à¤¨à¤",h:"à¤à¤ à¤à¤à¤à¤¾",hh:"%d à¤à¤à¤à¥",d:"à¤à¤ à¤¦à¤¿à¤¨",dd:"%d à¤¦à¤¿à¤¨",M:"à¤à¤ à¤®à¤¹à¥à¤¨à¥",MM:"%d à¤®à¤¹à¥à¤¨à¥",y:"à¤à¤ à¤µà¤°à¥à¤·",yy:"%d à¤µà¤°à¥à¤·"},preparse:function(string){return string.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(match){return numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]})},meridiem:function(hour,minute,isLower){return hour<4?"à¤°à¤¾à¤¤":hour<10?"à¤¸à¥à¤¬à¤¹":hour<17?"à¤¦à¥à¤ªà¤¹à¤°":hour<20?"à¤¶à¤¾à¤®":"à¤°à¤¾à¤¤"},week:{dow:0,doy:6}})}(moment),function(moment){function translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"jedna minuta":"jedne minute";case"mm":return result+=1===number?"minuta":2===number||3===number||4===number?"minute":"minuta";case"h":return withoutSuffix?"jedan sat":"jednog sata";case"hh":return result+=1===number?"sat":2===number||3===number||4===number?"sata":"sati";case"dd":return result+=1===number?"dan":"dana";case"MM":return result+=1===number?"mjesec":2===number||3===number||4===number?"mjeseca":"mjeseci";case"yy":return result+=1===number?"godina":2===number||3===number||4===number?"godine":"godina"}}moment.lang("hr",{months:"sjeÄanj_veljaÄa_oÅ¾ujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._oÅ¾u._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[proÅ¡lu] dddd [u] LT";case 6:return"[proÅ¡le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proÅ¡li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:translate,mm:translate,h:translate,hh:translate,d:"dan",dd:translate,M:"mjesec",MM:translate,y:"godinu",yy:translate},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){var weekEndings="vasÃ¡rnap hÃ©tfÅn kedden szerdÃ¡n csÃ¼tÃ¶rtÃ¶kÃ¶n pÃ©nteken szombaton".split(" ");function translate(number,withoutSuffix,key,isFuture){var num=number;switch(key){case"s":return isFuture||withoutSuffix?"nÃ©hÃ¡ny mÃ¡sodperc":"nÃ©hÃ¡ny mÃ¡sodperce";case"m":return"egy"+(isFuture||withoutSuffix?" perc":" perce");case"mm":return num+(isFuture||withoutSuffix?" perc":" perce");case"h":return"egy"+(isFuture||withoutSuffix?" Ã³ra":" Ã³rÃ¡ja");case"hh":return num+(isFuture||withoutSuffix?" Ã³ra":" Ã³rÃ¡ja");case"d":return"egy"+(isFuture||withoutSuffix?" nap":" napja");case"dd":return num+(isFuture||withoutSuffix?" nap":" napja");case"M":return"egy"+(isFuture||withoutSuffix?" hÃ³nap":" hÃ³napja");case"MM":return num+(isFuture||withoutSuffix?" hÃ³nap":" hÃ³napja");case"y":return"egy"+(isFuture||withoutSuffix?" Ã©v":" Ã©ve");case"yy":return num+(isFuture||withoutSuffix?" Ã©v":" Ã©ve")}return""}function week(isFuture){return(isFuture?"":"[mÃºlt] ")+"["+weekEndings[this.day()]+"] LT[-kor]"}moment.lang("hu",{months:"januÃ¡r_februÃ¡r_mÃ¡rcius_Ã¡prilis_mÃ¡jus_jÃºnius_jÃºlius_augusztus_szeptember_oktÃ³ber_november_december".split("_"),monthsShort:"jan_feb_mÃ¡rc_Ã¡pr_mÃ¡j_jÃºn_jÃºl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasÃ¡rnap_hÃ©tfÅ_kedd_szerda_csÃ¼tÃ¶rtÃ¶k_pÃ©ntek_szombat".split("_"),weekdaysShort:"vas_hÃ©t_kedd_sze_csÃ¼t_pÃ©n_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(hours,minutes,isLower){return hours<12?!0===isLower?"de":"DE":!0===isLower?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return week.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return week.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mÃºlva",past:"%s",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("hy-am",{months:function(m,format){var months={nominative:"Õ°Õ¸ÖÕ¶Õ¾Õ¡Ö_ÖÕ¥Õ¿ÖÕ¾Õ¡Ö_Õ´Õ¡ÖÕ¿_Õ¡ÕºÖÕ«Õ¬_Õ´Õ¡ÕµÕ«Õ½_Õ°Õ¸ÖÕ¶Õ«Õ½_Õ°Õ¸ÖÕ¬Õ«Õ½_ÖÕ£Õ¸Õ½Õ¿Õ¸Õ½_Õ½Õ¥ÕºÕ¿Õ¥Õ´Õ¢Õ¥Ö_Õ°Õ¸Õ¯Õ¿Õ¥Õ´Õ¢Õ¥Ö_Õ¶Õ¸ÕµÕ¥Õ´Õ¢Õ¥Ö_Õ¤Õ¥Õ¯Õ¿Õ¥Õ´Õ¢Õ¥Ö".split("_"),accusative:"Õ°Õ¸ÖÕ¶Õ¾Õ¡ÖÕ«_ÖÕ¥Õ¿ÖÕ¾Õ¡ÖÕ«_Õ´Õ¡ÖÕ¿Õ«_Õ¡ÕºÖÕ«Õ¬Õ«_Õ´Õ¡ÕµÕ«Õ½Õ«_Õ°Õ¸ÖÕ¶Õ«Õ½Õ«_Õ°Õ¸ÖÕ¬Õ«Õ½Õ«_ÖÕ£Õ¸Õ½Õ¿Õ¸Õ½Õ«_Õ½Õ¥ÕºÕ¿Õ¥Õ´Õ¢Õ¥ÖÕ«_Õ°Õ¸Õ¯Õ¿Õ¥Õ´Õ¢Õ¥ÖÕ«_Õ¶Õ¸ÕµÕ¥Õ´Õ¢Õ¥ÖÕ«_Õ¤Õ¥Õ¯Õ¿Õ¥Õ´Õ¢Õ¥ÖÕ«".split("_")},nounCase=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(format)?"accusative":"nominative";return months[nounCase][m.month()]},monthsShort:function(m,format){return"Õ°Õ¶Õ¾_ÖÕ¿Ö_Õ´ÖÕ¿_Õ¡ÕºÖ_Õ´ÕµÕ½_Õ°Õ¶Õ½_Õ°Õ¬Õ½_ÖÕ£Õ½_Õ½ÕºÕ¿_Õ°Õ¯Õ¿_Õ¶Õ´Õ¢_Õ¤Õ¯Õ¿".split("_")[m.month()]},weekdays:function(m,format){return"Õ¯Õ«ÖÕ¡Õ¯Õ«_Õ¥ÖÕ¯Õ¸ÖÕ·Õ¡Õ¢Õ©Õ«_Õ¥ÖÕ¥ÖÕ·Õ¡Õ¢Õ©Õ«_Õ¹Õ¸ÖÕ¥ÖÕ·Õ¡Õ¢Õ©Õ«_Õ°Õ«Õ¶Õ£Õ·Õ¡Õ¢Õ©Õ«_Õ¸ÖÖÕ¢Õ¡Õ©_Õ·Õ¡Õ¢Õ¡Õ©".split("_")[m.day()]},weekdaysShort:"Õ¯ÖÕ¯_Õ¥ÖÕ¯_Õ¥ÖÖ_Õ¹ÖÖ_Õ°Õ¶Õ£_Õ¸ÖÖÕ¢_Õ·Õ¢Õ©".split("_"),weekdaysMin:"Õ¯ÖÕ¯_Õ¥ÖÕ¯_Õ¥ÖÖ_Õ¹ÖÖ_Õ°Õ¶Õ£_Õ¸ÖÖÕ¢_Õ·Õ¢Õ©".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Õ©.",LLL:"D MMMM YYYY Õ©., LT",LLLL:"dddd, D MMMM YYYY Õ©., LT"},calendar:{sameDay:"[Õ¡ÕµÕ½ÖÖ] LT",nextDay:"[Õ¾Õ¡Õ²Õ¨] LT",lastDay:"[Õ¥ÖÕ¥Õ¯] LT",nextWeek:function(){return"dddd [ÖÖÕ¨ ÕªÕ¡Õ´Õ¨] LT"},lastWeek:function(){return"[Õ¡Õ¶ÖÕ¡Õ®] dddd [ÖÖÕ¨ ÕªÕ¡Õ´Õ¨] LT"},sameElse:"L"},relativeTime:{future:"%s Õ°Õ¥Õ¿Õ¸",past:"%s Õ¡Õ¼Õ¡Õ»",s:"Õ´Õ« ÖÕ¡Õ¶Õ« Õ¾Õ¡ÕµÖÕ¯ÕµÕ¡Õ¶",m:"ÖÕ¸ÕºÕ¥",mm:"%d ÖÕ¸ÕºÕ¥",h:"ÕªÕ¡Õ´",hh:"%d ÕªÕ¡Õ´",d:"ÖÖ",dd:"%d ÖÖ",M:"Õ¡Õ´Õ«Õ½",MM:"%d Õ¡Õ´Õ«Õ½",y:"Õ¿Õ¡ÖÕ«",yy:"%d Õ¿Õ¡ÖÕ«"},meridiem:function(hour){return hour<4?"Õ£Õ«Õ·Õ¥ÖÕ¾Õ¡":hour<12?"Õ¡Õ¼Õ¡Õ¾Õ¸Õ¿Õ¾Õ¡":hour<17?"ÖÕ¥ÖÕ¥Õ¯Õ¾Õ¡":"Õ¥ÖÕ¥Õ¯Õ¸ÕµÕ¡Õ¶"},ordinal:function(number,period){switch(period){case"DDD":case"w":case"W":case"DDDo":return 1===number?number+"-Õ«Õ¶":number+"-ÖÕ¤";default:return number}},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(hours,minutes,isLower){return hours<11?"pagi":hours<15?"siang":hours<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(moment),function(moment){function plural(n){return n%100==11||n%10!=1}function translate(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"nokkrar sekÃºndur":"nokkrum sekÃºndum";case"m":return withoutSuffix?"mÃ­nÃºta":"mÃ­nÃºtu";case"mm":return plural(number)?result+(withoutSuffix||isFuture?"mÃ­nÃºtur":"mÃ­nÃºtum"):withoutSuffix?result+"mÃ­nÃºta":result+"mÃ­nÃºtu";case"hh":return plural(number)?result+(withoutSuffix||isFuture?"klukkustundir":"klukkustundum"):result+"klukkustund";case"d":return withoutSuffix?"dagur":isFuture?"dag":"degi";case"dd":return plural(number)?withoutSuffix?result+"dagar":result+(isFuture?"daga":"dÃ¶gum"):withoutSuffix?result+"dagur":result+(isFuture?"dag":"degi");case"M":return withoutSuffix?"mÃ¡nuÃ°ur":isFuture?"mÃ¡nuÃ°":"mÃ¡nuÃ°i";case"MM":return plural(number)?withoutSuffix?result+"mÃ¡nuÃ°ir":result+(isFuture?"mÃ¡nuÃ°i":"mÃ¡nuÃ°um"):withoutSuffix?result+"mÃ¡nuÃ°ur":result+(isFuture?"mÃ¡nuÃ°":"mÃ¡nuÃ°i");case"y":return withoutSuffix||isFuture?"Ã¡r":"Ã¡ri";case"yy":return plural(number)?result+(withoutSuffix||isFuture?"Ã¡r":"Ã¡rum"):result+(withoutSuffix||isFuture?"Ã¡r":"Ã¡ri")}}moment.lang("is",{months:"janÃºar_febrÃºar_mars_aprÃ­l_maÃ­_jÃºnÃ­_jÃºlÃ­_Ã¡gÃºst_september_oktÃ³ber_nÃ³vember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maÃ­_jÃºn_jÃºl_Ã¡gÃº_sep_okt_nÃ³v_des".split("_"),weekdays:"sunnudagur_mÃ¡nudagur_Ã¾riÃ°judagur_miÃ°vikudagur_fimmtudagur_fÃ¶studagur_laugardagur".split("_"),weekdaysShort:"sun_mÃ¡n_Ã¾ri_miÃ°_fim_fÃ¶s_lau".split("_"),weekdaysMin:"Su_MÃ¡_Ãr_Mi_Fi_FÃ¶_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[Ã­ dag kl.] LT",nextDay:"[Ã¡ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Ã­ gÃ¦r kl.] LT",lastWeek:"[sÃ­Ã°asta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s sÃ­Ã°an",s:translate,m:translate,mm:translate,h:"klukkustund",hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_LunedÃ¬_MartedÃ¬_MercoledÃ¬_GiovedÃ¬_VenerdÃ¬_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(s){return(/^[0-9].+$/.test(s)?"tra":"in")+" "+s},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%dÂº",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("ja",{months:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æ¥ææ¥_æææ¥_ç«ææ¥_æ°´ææ¥_æ¨ææ¥_éææ¥_åææ¥".split("_"),weekdaysShort:"æ¥_æ_ç«_æ°´_æ¨_é_å".split("_"),weekdaysMin:"æ¥_æ_ç«_æ°´_æ¨_é_å".split("_"),longDateFormat:{LT:"Ahæmå",L:"YYYY/MM/DD",LL:"YYYYå¹´MæDæ¥",LLL:"YYYYå¹´MæDæ¥LT",LLLL:"YYYYå¹´MæDæ¥LT dddd"},meridiem:function(hour,minute,isLower){return hour<12?"åå":"åå¾"},calendar:{sameDay:"[ä»æ¥] LT",nextDay:"[ææ¥] LT",nextWeek:"[æ¥é±]dddd LT",lastDay:"[æ¨æ¥] LT",lastWeek:"[åé±]dddd LT",sameElse:"L"},relativeTime:{future:"%så¾",past:"%så",s:"æ°ç§",m:"1å",mm:"%då",h:"1æé",hh:"%dæé",d:"1æ¥",dd:"%dæ¥",M:"1ã¶æ",MM:"%dã¶æ",y:"1å¹´",yy:"%då¹´"}})}(moment),function(moment){moment.lang("ka",{months:function(m,format){var months={nominative:"áááááá á_ááááá áááá_ááá á¢á_ááá ááá_áááá¡á_ááááá¡á_ááááá¡á_ááááá¡á¢á_á¡áá¥á¢ááááá á_áá¥á¢ááááá á_ááááááá á_áááááááá á".split("_"),accusative:"áááááá á¡_ááááá áááá¡_ááá á¢á¡_ááá áááá¡_áááá¡á¡_ááááá¡á¡_ááááá¡á¡_ááááá¡á¢á¡_á¡áá¥á¢ááááá á¡_áá¥á¢ááááá á¡_ááááááá á¡_áááááááá á¡".split("_")},nounCase=/D[oD] *MMMM?/.test(format)?"accusative":"nominative";return months[nounCase][m.month()]},monthsShort:"ááá_ááá_ááá _ááá _ááá_ááá_ááá_ááá_á¡áá¥_áá¥á¢_ááá_ááá".split("_"),weekdays:function(m,format){var weekdays={nominative:"áááá á_áá á¨ááááá_á¡ááá¨ááááá_ááá®á¨ááááá_á®á£áá¨ááááá_ááá áá¡áááá_á¨ááááá".split("_"),accusative:"áááá áá¡_áá á¨ááááá¡_á¡ááá¨ááááá¡_ááá®á¨ááááá¡_á®á£áá¨ááááá¡_ááá áá¡áááá¡_á¨ááááá¡".split("_")},nounCase=/(á¬ááá|á¨ááááá)/.test(format)?"accusative":"nominative";return weekdays[nounCase][m.day()]},weekdaysShort:"ááá_áá á¨_á¡áá_ááá®_á®á£á_ááá _á¨áá".split("_"),weekdaysMin:"áá_áá _á¡á_áá_á®á£_áá_á¨á".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[áá¦áá¡] LT[-áá]",nextDay:"[á®ááá] LT[-áá]",lastDay:"[áá£á¨áá] LT[-áá]",nextWeek:"[á¨ááááá] dddd LT[-áá]",lastWeek:"[á¬ááá] dddd LT-áá",sameElse:"L"},relativeTime:{future:function(s){return/(á¬ááá|á¬á£áá|á¡áááá|á¬ááá)/.test(s)?s.replace(/á$/,"á¨á"):s+"á¨á"},past:function(s){return/(á¬ááá|á¬á£áá|á¡áááá|áá¦á|ááá)/.test(s)?s.replace(/(á|á)$/,"áá¡ á¬áá"):/á¬ááá/.test(s)?s.replace(/á¬ááá$/,"á¬ááá¡ á¬áá"):void 0},s:"á áááááááá á¬ááá",m:"á¬á£áá",mm:"%d á¬á£áá",h:"á¡áááá",hh:"%d á¡áááá",d:"áá¦á",dd:"%d áá¦á",M:"ááá",MM:"%d ááá",y:"á¬ááá",yy:"%d á¬ááá"},ordinal:function(number){return 0===number?number:1===number?number+"-áá":number<20||number<=100&&number%20==0||number%100==0?"áá-"+number:number+"-á"},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("km",{months:"áááá¶_áá»áááá_áá·áá¶_áááá¶_á§ááá¶_áá·áá»áá¶_áááááá¶_áá¸á á¶_ááááá¶_áá»áá¶_áá·áááá·áá¶_áááá¼".split("_"),monthsShort:"áááá¶_áá»áááá_áá·áá¶_áááá¶_á§ááá¶_áá·áá»áá¶_áááááá¶_áá¸á á¶_ááááá¶_áá»áá¶_áá·áááá·áá¶_áááá¼".split("_"),weekdays:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),weekdaysShort:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),weekdaysMin:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[áááááá áááá] LT",nextDay:"[ááá¢áá áááá] LT",nextWeek:"dddd [áááá] LT",lastDay:"[áááá·ááá·á áááá] LT",lastWeek:"dddd [ááááá¶á ááá»á] [áááá] LT",sameElse:"L"},relativeTime:{future:"%sááá",past:"%sáá»á",s:"ááá»áááá¶ááá·áá¶áá¸",m:"áá½ááá¶áá¸",mm:"%d áá¶áá¸",h:"áá½ááááá",hh:"%d áááá",d:"áá½ááááá",dd:"%d áááá",M:"áá½ááá",MM:"%d áá",y:"áá½ááááá¶á",yy:"%d áááá¶á"},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("ko",{months:"1ì_2ì_3ì_4ì_5ì_6ì_7ì_8ì_9ì_10ì_11ì_12ì".split("_"),monthsShort:"1ì_2ì_3ì_4ì_5ì_6ì_7ì_8ì_9ì_10ì_11ì_12ì".split("_"),weekdays:"ì¼ìì¼_ììì¼_íìì¼_ììì¼_ëª©ìì¼_ê¸ìì¼_í ìì¼".split("_"),weekdaysShort:"ì¼_ì_í_ì_ëª©_ê¸_í ".split("_"),weekdaysMin:"ì¼_ì_í_ì_ëª©_ê¸_í ".split("_"),longDateFormat:{LT:"A hì mmë¶",L:"YYYY.MM.DD",LL:"YYYYë MMMM Dì¼",LLL:"YYYYë MMMM Dì¼ LT",LLLL:"YYYYë MMMM Dì¼ dddd LT"},meridiem:function(hour,minute,isUpper){return hour<12?"ì¤ì ":"ì¤í"},calendar:{sameDay:"ì¤ë LT",nextDay:"ë´ì¼ LT",nextWeek:"dddd LT",lastDay:"ì´ì  LT",lastWeek:"ì§ëì£¼ dddd LT",sameElse:"L"},relativeTime:{future:"%s í",past:"%s ì ",s:"ëªì´",ss:"%dì´",m:"ì¼ë¶",mm:"%dë¶",h:"íìê°",hh:"%dìê°",d:"íë£¨",dd:"%dì¼",M:"íë¬",MM:"%dë¬",y:"ì¼ë",yy:"%dë"},ordinal:"%dì¼",meridiemParse:/(ì¤ì |ì¤í)/,isPM:function(token){return"ì¤í"===token}})}(moment),function(moment){function processRelativeTime(number,withoutSuffix,key,isFuture){var format={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],dd:[number+" Deeg",number+" Deeg"],M:["ee Mount","engem Mount"],MM:[number+" MÃ©int",number+" MÃ©int"],y:["ee Joer","engem Joer"],yy:[number+" Joer",number+" Joer"]};return withoutSuffix?format[key][0]:format[key][1]}function eifelerRegelAppliesToWeekday(weekday){switch(weekday=parseInt(weekday,10)){case 0:case 1:case 3:case 5:case 6:return!0;default:return!1}}function eifelerRegelAppliesToNumber(number){if(number=parseInt(number,10),isNaN(number))return!1;if(number<0)return!0;if(number<10)return 4<=number&&number<=7;if(number<100){var lastDigit=number%10,firstDigit=number/10;return eifelerRegelAppliesToNumber(0===lastDigit?firstDigit:lastDigit)}if(number<1e4){for(;10<=number;)number/=10;return eifelerRegelAppliesToNumber(number)}return eifelerRegelAppliesToNumber(number/=1e3)}moment.lang("lb",{months:"Januar_Februar_MÃ¤erz_AbrÃ«ll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_MÃ©indeg_DÃ«nschdeg_MÃ«ttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._MÃ©._DÃ«._MÃ«._Do._Fr._Sa.".split("_"),weekdaysMin:"So_MÃ©_DÃ«_MÃ«_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[GÃ«schter um] LT",lastWeek:function(string1){return eifelerRegelAppliesToWeekday(this.format("d"))?"[Leschte] dddd [um] LT":"[Leschten] dddd [um] LT"}},relativeTime:{future:function(string){return eifelerRegelAppliesToNumber(string.substr(0,string.indexOf(" ")))?"a "+string:"an "+string},past:function(string){return eifelerRegelAppliesToNumber(string.substr(0,string.indexOf(" ")))?"viru "+string:"virun "+string},s:"e puer Sekonnen",m:processRelativeTime,mm:"%d Minutten",h:processRelativeTime,hh:"%d Stonnen",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){var units={m:"minutÄ_minutÄs_minutÄ",mm:"minutÄs_minuÄiÅ³_minutes",h:"valanda_valandos_valandÄ",hh:"valandos_valandÅ³_valandas",d:"diena_dienos_dienÄ",dd:"dienos_dienÅ³_dienas",M:"mÄnuo_mÄnesio_mÄnesÄ¯",MM:"mÄnesiai_mÄnesiÅ³_mÄnesius",y:"metai_metÅ³_metus",yy:"metai_metÅ³_metus"},weekDays="sekmadienis_pirmadienis_antradienis_treÄiadienis_ketvirtadienis_penktadienis_Å¡eÅ¡tadienis".split("_");function translateSingular(number,withoutSuffix,key,isFuture){return withoutSuffix?forms(key)[0]:isFuture?forms(key)[1]:forms(key)[2]}function special(number){return number%10==0||10<number&&number<20}function forms(key){return units[key].split("_")}function translate(number,withoutSuffix,key,isFuture){var result=number+" ";return 1===number?result+translateSingular(number,withoutSuffix,key[0],isFuture):withoutSuffix?result+(special(number)?forms(key)[1]:forms(key)[0]):isFuture?result+forms(key)[1]:result+(special(number)?forms(key)[1]:forms(key)[2])}moment.lang("lt",{months:"sausio_vasario_kovo_balandÅ¾io_geguÅ¾Äs_birÅ¾Älio_liepos_rugpjÅ«Äio_rugsÄjo_spalio_lapkriÄio_gruodÅ¾io".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:function(moment,format){var nominative=-1===format.indexOf("dddd HH:mm"),weekDay=weekDays[moment.day()];return nominative?weekDay:weekDay.substring(0,weekDay.length-2)+"Ä¯"},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Å eÅ¡".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Å ".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Å iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[PraÄjusÄ¯] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieÅ¡ %s",s:function(number,withoutSuffix,key,isFuture){return withoutSuffix?"kelios sekundÄs":isFuture?"keliÅ³ sekundÅ¾iÅ³":"kelias sekundes"},m:translateSingular,mm:translate,h:translateSingular,hh:translate,d:translateSingular,dd:translate,M:translateSingular,MM:translate,y:translateSingular,yy:translate},ordinal:function(number){return number+"-oji"},week:{dow:1,doy:4}})}(moment),function(moment){var units={mm:"minÅ«ti_minÅ«tes_minÅ«te_minÅ«tes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mÄnesi_mÄneÅ¡us_mÄnesis_mÄneÅ¡i",yy:"gadu_gadus_gads_gadi"};function relativeTimeWithPlural(number,withoutSuffix,key){return number+" "+function(word,number,withoutSuffix){var forms=word.split("_");return withoutSuffix?number%10==1&&11!==number?forms[2]:forms[3]:number%10==1&&11!==number?forms[0]:forms[1]}(units[key],number,withoutSuffix)}moment.lang("lv",{months:"janvÄris_februÄris_marts_aprÄ«lis_maijs_jÅ«nijs_jÅ«lijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jÅ«n_jÅ«l_aug_sep_okt_nov_dec".split("_"),weekdays:"svÄtdiena_pirmdiena_otrdiena_treÅ¡diena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Å odien pulksten] LT",nextDay:"[RÄ«t pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[PagÄjuÅ¡Ä] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vÄlÄk",past:"%s agrÄk",s:"daÅ¾as sekundes",m:"minÅ«ti",mm:relativeTimeWithPlural,h:"stundu",hh:relativeTimeWithPlural,d:"dienu",dd:relativeTimeWithPlural,M:"mÄnesi",MM:relativeTimeWithPlural,y:"gadu",yy:relativeTimeWithPlural},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("mk",{months:"ÑÐ°Ð½ÑÐ°ÑÐ¸_ÑÐµÐ²ÑÑÐ°ÑÐ¸_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ñ_ÑÑÐ½Ð¸_ÑÑÐ»Ð¸_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð²ÑÐ¸_Ð¾ÐºÑÐ¾Ð¼Ð²ÑÐ¸_Ð½Ð¾ÐµÐ¼Ð²ÑÐ¸_Ð´ÐµÐºÐµÐ¼Ð²ÑÐ¸".split("_"),monthsShort:"ÑÐ°Ð½_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ñ_ÑÑÐ½_ÑÑÐ»_Ð°Ð²Ð³_ÑÐµÐ¿_Ð¾ÐºÑ_Ð½Ð¾Ðµ_Ð´ÐµÐº".split("_"),weekdays:"Ð½ÐµÐ´ÐµÐ»Ð°_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÑÑÐ¾Ðº_Ð¿ÐµÑÐ¾Ðº_ÑÐ°Ð±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´_Ð¿Ð¾Ð½_Ð²ÑÐ¾_ÑÑÐµ_ÑÐµÑ_Ð¿ÐµÑ_ÑÐ°Ð±".split("_"),weekdaysMin:"Ð½e_Ð¿o_Ð²Ñ_ÑÑ_ÑÐµ_Ð¿Ðµ_Ña".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ÐÐµÐ½ÐµÑ Ð²Ð¾] LT",nextDay:"[Ð£ÑÑÐµ Ð²Ð¾] LT",nextWeek:"dddd [Ð²Ð¾] LT",lastDay:"[ÐÑÐµÑÐ° Ð²Ð¾] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ÐÐ¾ Ð¸Ð·Ð¼Ð¸Ð½Ð°ÑÐ°ÑÐ°] dddd [Ð²Ð¾] LT";case 1:case 2:case 4:case 5:return"[ÐÐ¾ Ð¸Ð·Ð¼Ð¸Ð½Ð°ÑÐ¸Ð¾Ñ] dddd [Ð²Ð¾] LT"}},sameElse:"L"},relativeTime:{future:"Ð¿Ð¾ÑÐ»Ðµ %s",past:"Ð¿ÑÐµÐ´ %s",s:"Ð½ÐµÐºÐ¾Ð»ÐºÑ ÑÐµÐºÑÐ½Ð´Ð¸",m:"Ð¼Ð¸Ð½ÑÑÐ°",mm:"%d Ð¼Ð¸Ð½ÑÑÐ¸",h:"ÑÐ°Ñ",hh:"%d ÑÐ°ÑÐ°",d:"Ð´ÐµÐ½",dd:"%d Ð´ÐµÐ½Ð°",M:"Ð¼ÐµÑÐµÑ",MM:"%d Ð¼ÐµÑÐµÑÐ¸",y:"Ð³Ð¾Ð´Ð¸Ð½Ð°",yy:"%d Ð³Ð¾Ð´Ð¸Ð½Ð¸"},ordinal:function(number){var lastDigit=number%10,last2Digits=number%100;return 0===number?number+"-ÐµÐ²":0===last2Digits?number+"-ÐµÐ½":10<last2Digits&&last2Digits<20?number+"-ÑÐ¸":1===lastDigit?number+"-Ð²Ð¸":2===lastDigit?number+"-ÑÐ¸":7===lastDigit||8===lastDigit?number+"-Ð¼Ð¸":number+"-ÑÐ¸"},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("ml",{months:"à´à´¨àµà´µà´°à´¿_à´«àµà´¬àµà´°àµà´µà´°à´¿_à´®à´¾àµ¼à´àµà´àµ_à´à´ªàµà´°à´¿àµ½_à´®àµà´¯àµ_à´àµàµº_à´àµà´²àµ_à´à´à´¸àµà´±àµà´±àµ_à´¸àµà´ªàµà´±àµà´±à´à´¬àµ¼_à´à´àµà´àµà´¬àµ¼_à´¨à´µà´à´¬àµ¼_à´¡à´¿à´¸à´à´¬àµ¼".split("_"),monthsShort:"à´à´¨àµ._à´«àµà´¬àµà´°àµ._à´®à´¾àµ¼._à´à´ªàµà´°à´¿._à´®àµà´¯àµ_à´àµàµº_à´àµà´²àµ._à´à´._à´¸àµà´ªàµà´±àµà´±._à´à´àµà´àµ._à´¨à´µà´._à´¡à´¿à´¸à´.".split("_"),weekdays:"à´à´¾à´¯à´±à´¾à´´àµà´_à´¤à´¿à´àµà´à´³à´¾à´´àµà´_à´àµà´µàµà´µà´¾à´´àµà´_à´¬àµà´§à´¨à´¾à´´àµà´_à´µàµà´¯à´¾à´´à´¾à´´àµà´_à´µàµà´³àµà´³à´¿à´¯à´¾à´´àµà´_à´¶à´¨à´¿à´¯à´¾à´´àµà´".split("_"),weekdaysShort:"à´à´¾à´¯àµ¼_à´¤à´¿à´àµà´àµ¾_à´àµà´µàµà´µ_à´¬àµà´§àµ»_à´µàµà´¯à´¾à´´à´_à´µàµà´³àµà´³à´¿_à´¶à´¨à´¿".split("_"),weekdaysMin:"à´à´¾_à´¤à´¿_à´àµ_à´¬àµ_à´µàµà´¯à´¾_à´µàµ_à´¶".split("_"),longDateFormat:{LT:"A h:mm -à´¨àµ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à´à´¨àµà´¨àµ] LT",nextDay:"[à´¨à´¾à´³àµ] LT",nextWeek:"dddd, LT",lastDay:"[à´à´¨àµà´¨à´²àµ] LT",lastWeek:"[à´à´´à´¿à´àµà´] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à´à´´à´¿à´àµà´àµ",past:"%s à´®àµàµ»à´ªàµ",s:"à´àµ½à´ª à´¨à´¿à´®à´¿à´·à´àµà´àµ¾",m:"à´à´°àµ à´®à´¿à´¨à´¿à´±àµà´±àµ",mm:"%d à´®à´¿à´¨à´¿à´±àµà´±àµ",h:"à´à´°àµ à´®à´£à´¿à´àµà´àµàµ¼",hh:"%d à´®à´£à´¿à´àµà´àµàµ¼",d:"à´à´°àµ à´¦à´¿à´µà´¸à´",dd:"%d à´¦à´¿à´µà´¸à´",M:"à´à´°àµ à´®à´¾à´¸à´",MM:"%d à´®à´¾à´¸à´",y:"à´à´°àµ à´µàµ¼à´·à´",yy:"%d à´µàµ¼à´·à´"},meridiem:function(hour,minute,isLower){return hour<4?"à´°à´¾à´¤àµà´°à´¿":hour<12?"à´°à´¾à´µà´¿à´²àµ":hour<17?"à´à´àµà´ à´à´´à´¿à´àµà´àµ":hour<20?"à´µàµà´àµà´¨àµà´¨àµà´°à´":"à´°à´¾à´¤àµà´°à´¿"}})}(moment),function(moment){var symbolMap={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},numberMap={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};moment.lang("mr",{months:"à¤à¤¾à¤¨à¥à¤µà¤¾à¤°à¥_à¤«à¥à¤¬à¥à¤°à¥à¤µà¤¾à¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿à¤²_à¤®à¥_à¤à¥à¤¨_à¤à¥à¤²à¥_à¤à¤à¤¸à¥à¤_à¤¸à¤ªà¥à¤à¥à¤à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¥à¤µà¥à¤¹à¥à¤à¤¬à¤°_à¤¡à¤¿à¤¸à¥à¤à¤¬à¤°".split("_"),monthsShort:"à¤à¤¾à¤¨à¥._à¤«à¥à¤¬à¥à¤°à¥._à¤®à¤¾à¤°à¥à¤._à¤à¤ªà¥à¤°à¤¿._à¤®à¥._à¤à¥à¤¨._à¤à¥à¤²à¥._à¤à¤._à¤¸à¤ªà¥à¤à¥à¤._à¤à¤à¥à¤à¥._à¤¨à¥à¤µà¥à¤¹à¥à¤._à¤¡à¤¿à¤¸à¥à¤.".split("_"),weekdays:"à¤°à¤µà¤¿à¤µà¤¾à¤°_à¤¸à¥à¤®à¤µà¤¾à¤°_à¤®à¤à¤à¤³à¤µà¤¾à¤°_à¤¬à¥à¤§à¤µà¤¾à¤°_à¤à¥à¤°à¥à¤µà¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤µà¤¾à¤°_à¤¶à¤¨à¤¿à¤µà¤¾à¤°".split("_"),weekdaysShort:"à¤°à¤µà¤¿_à¤¸à¥à¤®_à¤®à¤à¤à¤³_à¤¬à¥à¤§_à¤à¥à¤°à¥_à¤¶à¥à¤à¥à¤°_à¤¶à¤¨à¤¿".split("_"),weekdaysMin:"à¤°_à¤¸à¥_à¤®à¤_à¤¬à¥_à¤à¥_à¤¶à¥_à¤¶".split("_"),longDateFormat:{LT:"A h:mm à¤µà¤¾à¤à¤¤à¤¾",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤à¤¦à¥à¤¯à¤¾] LT",nextWeek:"dddd, LT",lastDay:"[à¤à¤¾à¤²] LT",lastWeek:"[à¤®à¤¾à¤à¥à¤²] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¤¨à¤à¤¤à¤°",past:"%s à¤ªà¥à¤°à¥à¤µà¥",s:"à¤¸à¥à¤à¤à¤¦",m:"à¤à¤ à¤®à¤¿à¤¨à¤¿à¤",mm:"%d à¤®à¤¿à¤¨à¤¿à¤à¥",h:"à¤à¤ à¤¤à¤¾à¤¸",hh:"%d à¤¤à¤¾à¤¸",d:"à¤à¤ à¤¦à¤¿à¤µà¤¸",dd:"%d à¤¦à¤¿à¤µà¤¸",M:"à¤à¤ à¤®à¤¹à¤¿à¤¨à¤¾",MM:"%d à¤®à¤¹à¤¿à¤¨à¥",y:"à¤à¤ à¤µà¤°à¥à¤·",yy:"%d à¤µà¤°à¥à¤·à¥"},preparse:function(string){return string.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(match){return numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]})},meridiem:function(hour,minute,isLower){return hour<4?"à¤°à¤¾à¤¤à¥à¤°à¥":hour<10?"à¤¸à¤à¤¾à¤³à¥":hour<17?"à¤¦à¥à¤ªà¤¾à¤°à¥":hour<20?"à¤¸à¤¾à¤¯à¤à¤à¤¾à¤³à¥":"à¤°à¤¾à¤¤à¥à¤°à¥"},week:{dow:0,doy:6}})}(moment),function(moment){moment.lang("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(hours,minutes,isLower){return hours<11?"pagi":hours<15?"tengahari":hours<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"sÃ¸ndag_mandag_tirsdag_onsdag_torsdag_fredag_lÃ¸rdag".split("_"),weekdaysShort:"sÃ¸._ma._ti._on._to._fr._lÃ¸.".split("_"),weekdaysMin:"sÃ¸_ma_ti_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gÃ¥r kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mÃ¥ned",MM:"%d mÃ¥neder",y:"ett Ã¥r",yy:"%d Ã¥r"},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){var symbolMap={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},numberMap={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};moment.lang("ne",{months:"à¤à¤¨à¤µà¤°à¥_à¤«à¥à¤¬à¥à¤°à¥à¤µà¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿à¤²_à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤_à¤à¤à¤·à¥à¤_à¤¸à¥à¤ªà¥à¤à¥à¤®à¥à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¥à¤­à¥à¤®à¥à¤¬à¤°_à¤¡à¤¿à¤¸à¥à¤®à¥à¤¬à¤°".split("_"),monthsShort:"à¤à¤¨._à¤«à¥à¤¬à¥à¤°à¥._à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿._à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤._à¤à¤._à¤¸à¥à¤ªà¥à¤._à¤à¤à¥à¤à¥._à¤¨à¥à¤­à¥._à¤¡à¤¿à¤¸à¥.".split("_"),weekdays:"à¤à¤à¤¤à¤¬à¤¾à¤°_à¤¸à¥à¤®à¤¬à¤¾à¤°_à¤®à¤à¥à¤à¤²à¤¬à¤¾à¤°_à¤¬à¥à¤§à¤¬à¤¾à¤°_à¤¬à¤¿à¤¹à¤¿à¤¬à¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤¬à¤¾à¤°_à¤¶à¤¨à¤¿à¤¬à¤¾à¤°".split("_"),weekdaysShort:"à¤à¤à¤¤._à¤¸à¥à¤®._à¤®à¤à¥à¤à¤²._à¤¬à¥à¤§._à¤¬à¤¿à¤¹à¤¿._à¤¶à¥à¤à¥à¤°._à¤¶à¤¨à¤¿.".split("_"),weekdaysMin:"à¤à¤._à¤¸à¥._à¤®à¤à¥_à¤¬à¥._à¤¬à¤¿._à¤¶à¥._à¤¶.".split("_"),longDateFormat:{LT:"Aà¤à¥ h:mm à¤¬à¤à¥",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(string){return string.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(match){return numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match]})},meridiem:function(hour,minute,isLower){return hour<3?"à¤°à¤¾à¤¤à¥":hour<10?"à¤¬à¤¿à¤¹à¤¾à¤¨":hour<15?"à¤¦à¤¿à¤à¤à¤¸à¥":hour<18?"à¤¬à¥à¤²à¥à¤à¤¾":hour<20?"à¤¸à¤¾à¤à¤":"à¤°à¤¾à¤¤à¥"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤­à¥à¤²à¥] LT",nextWeek:"[à¤à¤à¤à¤¦à¥] dddd[,] LT",lastDay:"[à¤¹à¤¿à¤à¥] LT",lastWeek:"[à¤à¤à¤à¥] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sà¤®à¤¾",past:"%s à¤à¤à¤¾à¤¡à¥",s:"à¤à¥à¤¹à¥ à¤¸à¤®à¤¯",m:"à¤à¤ à¤®à¤¿à¤¨à¥à¤",mm:"%d à¤®à¤¿à¤¨à¥à¤",h:"à¤à¤ à¤à¤£à¥à¤à¤¾",hh:"%d à¤à¤£à¥à¤à¤¾",d:"à¤à¤ à¤¦à¤¿à¤¨",dd:"%d à¤¦à¤¿à¤¨",M:"à¤à¤ à¤®à¤¹à¤¿à¤¨à¤¾",MM:"%d à¤®à¤¹à¤¿à¤¨à¤¾",y:"à¤à¤ à¤¬à¤°à¥à¤·",yy:"%d à¤¬à¤°à¥à¤·"},week:{dow:1,doy:7}})}(moment),function(moment){var monthsShortWithDots="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsShortWithoutDots="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");moment.lang("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(m,format){return/-MMM-/.test(format)?monthsShortWithoutDots[m.month()]:monthsShortWithDots[m.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"Ã©Ã©n minuut",mm:"%d minuten",h:"Ã©Ã©n uur",hh:"%d uur",d:"Ã©Ã©n dag",dd:"%d dagen",M:"Ã©Ã©n maand",MM:"%d maanden",y:"Ã©Ã©n jaar",yy:"%d jaar"},ordinal:function(number){return number+(1===number||8===number||20<=number?"ste":"de")},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mÃ¥ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mÃ¥n_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_mÃ¥_ty_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gÃ¥r klokka] LT",lastWeek:"[FÃ¸regÃ¥ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mÃ¥nad",MM:"%d mÃ¥nader",y:"eit Ã¥r",yy:"%d Ã¥r"},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){var monthsNominative="styczeÅ_luty_marzec_kwiecieÅ_maj_czerwiec_lipiec_sierpieÅ_wrzesieÅ_paÅºdziernik_listopad_grudzieÅ".split("_"),monthsSubjective="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzeÅnia_paÅºdziernika_listopada_grudnia".split("_");function plural(n){return n%10<5&&1<n%10&&~~(n/10)%10!=1}function translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"minuta":"minutÄ";case"mm":return result+(plural(number)?"minuty":"minut");case"h":return withoutSuffix?"godzina":"godzinÄ";case"hh":return result+(plural(number)?"godziny":"godzin");case"MM":return result+(plural(number)?"miesiÄce":"miesiÄcy");case"yy":return result+(plural(number)?"lata":"lat")}}moment.lang("pl",{months:function(momentToFormat,format){return/D MMMM/.test(format)?monthsSubjective[momentToFormat.month()]:monthsNominative[momentToFormat.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paÅº_lis_gru".split("_"),weekdays:"niedziela_poniedziaÅek_wtorek_Åroda_czwartek_piÄtek_sobota".split("_"),weekdaysShort:"nie_pon_wt_År_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_År_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[DziÅ o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszÅÄ niedzielÄ o] LT";case 3:return"[W zeszÅÄ ÅrodÄ o] LT";case 6:return"[W zeszÅÄ sobotÄ o] LT";default:return"[W zeszÅy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:translate,mm:translate,h:translate,hh:translate,d:"1 dzieÅ",dd:"%d dni",M:"miesiÄc",MM:translate,y:"rok",yy:translate},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("pt-br",{months:"janeiro_fevereiro_marÃ§o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terÃ§a-feira_quarta-feira_quinta-feira_sexta-feira_sÃ¡bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sÃ¡b".split("_"),weekdaysMin:"dom_2Âª_3Âª_4Âª_5Âª_6Âª_sÃ¡b".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [Ã s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [Ã s] LT"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãltimo] dddd [Ã s] LT":"[Ãltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrÃ¡s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dÂº"})}(moment),function(moment){moment.lang("pt",{months:"janeiro_fevereiro_marÃ§o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terÃ§a-feira_quarta-feira_quinta-feira_sexta-feira_sÃ¡bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sÃ¡b".split("_"),weekdaysMin:"dom_2Âª_3Âª_4Âª_5Âª_6Âª_sÃ¡b".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãltimo] dddd [Ã s] LT":"[Ãltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"hÃ¡ %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dÂº",week:{dow:1,doy:4}})}(moment),function(moment){function relativeTimeWithPlural(number,withoutSuffix,key){var separator=" ";return(20<=number%100||100<=number&&number%100==0)&&(separator=" de "),number+separator+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[key]}moment.lang("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminicÄ_luni_marÈi_miercuri_joi_vineri_sÃ¢mbÄtÄ".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_SÃ¢m".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_SÃ¢".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mÃ¢ine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s Ã®n urmÄ",s:"cÃ¢teva secunde",m:"un minut",mm:relativeTimeWithPlural,h:"o orÄ",hh:relativeTimeWithPlural,d:"o zi",dd:relativeTimeWithPlural,M:"o lunÄ",MM:relativeTimeWithPlural,y:"un an",yy:relativeTimeWithPlural},week:{dow:1,doy:7}})}(moment),function(moment){function relativeTimeWithPlural(number,withoutSuffix,key){var num,forms,format={mm:withoutSuffix?"Ð¼Ð¸Ð½ÑÑÐ°_Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑ":"Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑ",hh:"ÑÐ°Ñ_ÑÐ°ÑÐ°_ÑÐ°ÑÐ¾Ð²",dd:"Ð´ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð½ÐµÐ¹",MM:"Ð¼ÐµÑÑÑ_Ð¼ÐµÑÑÑÐ°_Ð¼ÐµÑÑÑÐµÐ²",yy:"Ð³Ð¾Ð´_Ð³Ð¾Ð´Ð°_Ð»ÐµÑ"};return"m"===key?withoutSuffix?"Ð¼Ð¸Ð½ÑÑÐ°":"Ð¼Ð¸Ð½ÑÑÑ":number+" "+(num=+number,forms=format[key].split("_"),num%10==1&&num%100!=11?forms[0]:2<=num%10&&num%10<=4&&(num%100<10||20<=num%100)?forms[1]:forms[2])}moment.lang("ru",{months:function(m,format){var months={nominative:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_"),accusative:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑÐ°_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ñ_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑÐ°_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_")},nounCase=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(format)?"accusative":"nominative";return months[nounCase][m.month()]},monthsShort:function(m,format){var monthsShort={nominative:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_"),accusative:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ñ_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_")},nounCase=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(format)?"accusative":"nominative";return monthsShort[nounCase][m.month()]},weekdays:function(m,format){var weekdays={nominative:"Ð²Ð¾ÑÐºÑÐµÑÐµÐ½ÑÐµ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÐµÑÐ³_Ð¿ÑÑÐ½Ð¸ÑÐ°_ÑÑÐ±Ð±Ð¾ÑÐ°".split("_"),accusative:"Ð²Ð¾ÑÐºÑÐµÑÐµÐ½ÑÐµ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ñ_ÑÐµÑÐ²ÐµÑÐ³_Ð¿ÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð±Ð¾ÑÑ".split("_")},nounCase=/\[ ?[ÐÐ²] ?(?:Ð¿ÑÐ¾ÑÐ»ÑÑ|ÑÐ»ÐµÐ´ÑÑÑÑÑ)? ?\] ?dddd/.test(format)?"accusative":"nominative";return weekdays[nounCase][m.day()]},weekdaysShort:"Ð²Ñ_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð²Ñ_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),monthsParse:[/^ÑÐ½Ð²/i,/^ÑÐµÐ²/i,/^Ð¼Ð°Ñ/i,/^Ð°Ð¿Ñ/i,/^Ð¼Ð°[Ð¹|Ñ]/i,/^Ð¸ÑÐ½/i,/^Ð¸ÑÐ»/i,/^Ð°Ð²Ð³/i,/^ÑÐµÐ½/i,/^Ð¾ÐºÑ/i,/^Ð½Ð¾Ñ/i,/^Ð´ÐµÐº/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ð³.",LLL:"D MMMM YYYY Ð³., LT",LLLL:"dddd, D MMMM YYYY Ð³., LT"},calendar:{sameDay:"[Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð²] LT",nextDay:"[ÐÐ°Ð²ÑÑÐ° Ð²] LT",lastDay:"[ÐÑÐµÑÐ° Ð²] LT",nextWeek:function(){return 2===this.day()?"[ÐÐ¾] dddd [Ð²] LT":"[Ð] dddd [Ð²] LT"},lastWeek:function(){switch(this.day()){case 0:return"[Ð Ð¿ÑÐ¾ÑÐ»Ð¾Ðµ] dddd [Ð²] LT";case 1:case 2:case 4:return"[Ð Ð¿ÑÐ¾ÑÐ»ÑÐ¹] dddd [Ð²] LT";case 3:case 5:case 6:return"[Ð Ð¿ÑÐ¾ÑÐ»ÑÑ] dddd [Ð²] LT"}},sameElse:"L"},relativeTime:{future:"ÑÐµÑÐµÐ· %s",past:"%s Ð½Ð°Ð·Ð°Ð´",s:"Ð½ÐµÑÐºÐ¾Ð»ÑÐºÐ¾ ÑÐµÐºÑÐ½Ð´",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"ÑÐ°Ñ",hh:relativeTimeWithPlural,d:"Ð´ÐµÐ½Ñ",dd:relativeTimeWithPlural,M:"Ð¼ÐµÑÑÑ",MM:relativeTimeWithPlural,y:"Ð³Ð¾Ð´",yy:relativeTimeWithPlural},meridiemParse:/Ð½Ð¾ÑÐ¸|ÑÑÑÐ°|Ð´Ð½Ñ|Ð²ÐµÑÐµÑÐ°/i,isPM:function(input){return/^(Ð´Ð½Ñ|Ð²ÐµÑÐµÑÐ°)$/.test(input)},meridiem:function(hour,minute,isLower){return hour<4?"Ð½Ð¾ÑÐ¸":hour<12?"ÑÑÑÐ°":hour<17?"Ð´Ð½Ñ":"Ð²ÐµÑÐµÑÐ°"},ordinal:function(number,period){switch(period){case"M":case"d":case"DDD":return number+"-Ð¹";case"D":return number+"-Ð³Ð¾";case"w":case"W":return number+"-Ñ";default:return number}},week:{dow:1,doy:7}})}(moment),function(moment){var months="januÃ¡r_februÃ¡r_marec_aprÃ­l_mÃ¡j_jÃºn_jÃºl_august_september_oktÃ³ber_november_december".split("_"),monthsShort="jan_feb_mar_apr_mÃ¡j_jÃºn_jÃºl_aug_sep_okt_nov_dec".split("_");function plural(n){return 1<n&&n<5}function translate(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"pÃ¡r sekÃºnd":"pÃ¡r sekundami";case"m":return withoutSuffix?"minÃºta":isFuture?"minÃºtu":"minÃºtou";case"mm":return withoutSuffix||isFuture?result+(plural(number)?"minÃºty":"minÃºt"):result+"minÃºtami";case"h":return withoutSuffix?"hodina":isFuture?"hodinu":"hodinou";case"hh":return withoutSuffix||isFuture?result+(plural(number)?"hodiny":"hodÃ­n"):result+"hodinami";case"d":return withoutSuffix||isFuture?"deÅ":"dÅom";case"dd":return withoutSuffix||isFuture?result+(plural(number)?"dni":"dnÃ­"):result+"dÅami";case"M":return withoutSuffix||isFuture?"mesiac":"mesiacom";case"MM":return withoutSuffix||isFuture?result+(plural(number)?"mesiace":"mesiacov"):result+"mesiacmi";case"y":return withoutSuffix||isFuture?"rok":"rokom";case"yy":return withoutSuffix||isFuture?result+(plural(number)?"roky":"rokov"):result+"rokmi"}}moment.lang("sk",{months:months,monthsShort:monthsShort,monthsParse:function(months,monthsShort){var i,_monthsParse=[];for(i=0;i<12;i++)_monthsParse[i]=new RegExp("^"+months[i]+"$|^"+monthsShort[i]+"$","i");return _monthsParse}(months,monthsShort),weekdays:"nedeÄ¾a_pondelok_utorok_streda_Å¡tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_Å¡t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_Å¡t_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeÄ¾u o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo Å¡tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vÄera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulÃº nedeÄ¾u o] LT";case 1:case 2:return"[minulÃ½] dddd [o] LT";case 3:return"[minulÃº stredu o] LT";case 4:case 5:return"[minulÃ½] dddd [o] LT";case 6:return"[minulÃº sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){function translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"ena minuta":"eno minuto";case"mm":return result+=1===number?"minuta":2===number?"minuti":3===number||4===number?"minute":"minut";case"h":return withoutSuffix?"ena ura":"eno uro";case"hh":return result+=1===number?"ura":2===number?"uri":3===number||4===number?"ure":"ur";case"dd":return result+=1===number?"dan":"dni";case"MM":return result+=1===number?"mesec":2===number?"meseca":3===number||4===number?"mesece":"mesecev";case"yy":return result+=1===number?"leto":2===number?"leti":3===number||4===number?"leta":"let"}}moment.lang("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_Äetrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._Äet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_Äe_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[vÄeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejÅ¡nja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejÅ¡nji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"Äez %s",past:"%s nazaj",s:"nekaj sekund",m:translate,mm:translate,h:translate,hh:translate,d:"en dan",dd:translate,M:"en mesec",MM:translate,y:"eno leto",yy:translate},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_NÃ«ntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_NÃ«n_Dhj".split("_"),weekdays:"E Diel_E HÃ«nÃ«_E MartÃ«_E MÃ«rkurÃ«_E Enjte_E Premte_E ShtunÃ«".split("_"),weekdaysShort:"Die_HÃ«n_Mar_MÃ«r_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_MÃ«_E_P_Sh".split("_"),meridiem:function(hours,minutes,isLower){return hours<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot nÃ«] LT",nextDay:"[NesÃ«r nÃ«] LT",nextWeek:"dddd [nÃ«] LT",lastDay:"[Dje nÃ«] LT",lastWeek:"dddd [e kaluar nÃ«] LT",sameElse:"L"},relativeTime:{future:"nÃ« %s",past:"%s mÃ« parÃ«",s:"disa sekonda",m:"njÃ« minutÃ«",mm:"%d minuta",h:"njÃ« orÃ«",hh:"%d orÃ«",d:"njÃ« ditÃ«",dd:"%d ditÃ«",M:"njÃ« muaj",MM:"%d muaj",y:"njÃ« vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}(moment),function(moment){var translator={words:{m:["ÑÐµÐ´Ð°Ð½ Ð¼Ð¸Ð½ÑÑ","ÑÐµÐ´Ð½Ðµ Ð¼Ð¸Ð½ÑÑÐµ"],mm:["Ð¼Ð¸Ð½ÑÑ","Ð¼Ð¸Ð½ÑÑÐµ","Ð¼Ð¸Ð½ÑÑÐ°"],h:["ÑÐµÐ´Ð°Ð½ ÑÐ°Ñ","ÑÐµÐ´Ð½Ð¾Ð³ ÑÐ°ÑÐ°"],hh:["ÑÐ°Ñ","ÑÐ°ÑÐ°","ÑÐ°ÑÐ¸"],dd:["Ð´Ð°Ð½","Ð´Ð°Ð½Ð°","Ð´Ð°Ð½Ð°"],MM:["Ð¼ÐµÑÐµÑ","Ð¼ÐµÑÐµÑÐ°","Ð¼ÐµÑÐµÑÐ¸"],yy:["Ð³Ð¾Ð´Ð¸Ð½Ð°","Ð³Ð¾Ð´Ð¸Ð½Ðµ","Ð³Ð¾Ð´Ð¸Ð½Ð°"]},correctGrammaticalCase:function(number,wordKey){return 1===number?wordKey[0]:2<=number&&number<=4?wordKey[1]:wordKey[2]},translate:function(number,withoutSuffix,key){var wordKey=translator.words[key];return 1===key.length?withoutSuffix?wordKey[0]:wordKey[1]:number+" "+translator.correctGrammaticalCase(number,wordKey)}};moment.lang("sr-cyrl",{months:["ÑÐ°Ð½ÑÐ°Ñ","ÑÐµÐ±ÑÑÐ°Ñ","Ð¼Ð°ÑÑ","Ð°Ð¿ÑÐ¸Ð»","Ð¼Ð°Ñ","ÑÑÐ½","ÑÑÐ»","Ð°Ð²Ð³ÑÑÑ","ÑÐµÐ¿ÑÐµÐ¼Ð±Ð°Ñ","Ð¾ÐºÑÐ¾Ð±Ð°Ñ","Ð½Ð¾Ð²ÐµÐ¼Ð±Ð°Ñ","Ð´ÐµÑÐµÐ¼Ð±Ð°Ñ"],monthsShort:["ÑÐ°Ð½.","ÑÐµÐ±.","Ð¼Ð°Ñ.","Ð°Ð¿Ñ.","Ð¼Ð°Ñ","ÑÑÐ½","ÑÑÐ»","Ð°Ð²Ð³.","ÑÐµÐ¿.","Ð¾ÐºÑ.","Ð½Ð¾Ð².","Ð´ÐµÑ."],weekdays:["Ð½ÐµÐ´ÐµÑÐ°","Ð¿Ð¾Ð½ÐµÐ´ÐµÑÐ°Ðº","ÑÑÐ¾ÑÐ°Ðº","ÑÑÐµÐ´Ð°","ÑÐµÑÐ²ÑÑÐ°Ðº","Ð¿ÐµÑÐ°Ðº","ÑÑÐ±Ð¾ÑÐ°"],weekdaysShort:["Ð½ÐµÐ´.","Ð¿Ð¾Ð½.","ÑÑÐ¾.","ÑÑÐµ.","ÑÐµÑ.","Ð¿ÐµÑ.","ÑÑÐ±."],weekdaysMin:["Ð½Ðµ","Ð¿Ð¾","ÑÑ","ÑÑ","ÑÐµ","Ð¿Ðµ","ÑÑ"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Ð´Ð°Ð½Ð°Ñ Ñ] LT",nextDay:"[ÑÑÑÑÐ° Ñ] LT",nextWeek:function(){switch(this.day()){case 0:return"[Ñ] [Ð½ÐµÐ´ÐµÑÑ] [Ñ] LT";case 3:return"[Ñ] [ÑÑÐµÐ´Ñ] [Ñ] LT";case 6:return"[Ñ] [ÑÑÐ±Ð¾ÑÑ] [Ñ] LT";case 1:case 2:case 4:case 5:return"[Ñ] dddd [Ñ] LT"}},lastDay:"[ÑÑÑÐµ Ñ] LT",lastWeek:function(){return["[Ð¿ÑÐ¾ÑÐ»Ðµ] [Ð½ÐµÐ´ÐµÑÐµ] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [Ð¿Ð¾Ð½ÐµÐ´ÐµÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [ÑÑÐ¾ÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ðµ] [ÑÑÐµÐ´Ðµ] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [ÑÐµÑÐ²ÑÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [Ð¿ÐµÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ðµ] [ÑÑÐ±Ð¾ÑÐµ] [Ñ] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"Ð·Ð° %s",past:"Ð¿ÑÐµ %s",s:"Ð½ÐµÐºÐ¾Ð»Ð¸ÐºÐ¾ ÑÐµÐºÑÐ½Ð´Ð¸",m:translator.translate,mm:translator.translate,h:translator.translate,hh:translator.translate,d:"Ð´Ð°Ð½",dd:translator.translate,M:"Ð¼ÐµÑÐµÑ",MM:translator.translate,y:"Ð³Ð¾Ð´Ð¸Ð½Ñ",yy:translator.translate},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){var translator={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(number,wordKey){return 1===number?wordKey[0]:2<=number&&number<=4?wordKey[1]:wordKey[2]},translate:function(number,withoutSuffix,key){var wordKey=translator.words[key];return 1===key.length?withoutSuffix?wordKey[0]:wordKey[1]:number+" "+translator.correctGrammaticalCase(number,wordKey)}};moment.lang("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","Äetvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","Äet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","Äe","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄe u] LT",lastWeek:function(){return["[proÅ¡le] [nedelje] [u] LT","[proÅ¡log] [ponedeljka] [u] LT","[proÅ¡log] [utorka] [u] LT","[proÅ¡le] [srede] [u] LT","[proÅ¡log] [Äetvrtka] [u] LT","[proÅ¡log] [petka] [u] LT","[proÅ¡le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:translator.translate,mm:translator.translate,h:translator.translate,hh:translator.translate,d:"dan",dd:translator.translate,M:"mesec",MM:translator.translate,y:"godinu",yy:translator.translate},ordinal:"%d.",week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sÃ¶ndag_mÃ¥ndag_tisdag_onsdag_torsdag_fredag_lÃ¶rdag".split("_"),weekdaysShort:"sÃ¶n_mÃ¥n_tis_ons_tor_fre_lÃ¶r".split("_"),weekdaysMin:"sÃ¶_mÃ¥_ti_on_to_fr_lÃ¶".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[IgÃ¥r] LT",nextWeek:"dddd LT",lastWeek:"[FÃ¶rra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fÃ¶r %s sedan",s:"nÃ¥gra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mÃ¥nad",MM:"%d mÃ¥nader",y:"ett Ã¥r",yy:"%d Ã¥r"},ordinal:function(number){var b=number%10,output=1==~~(number%100/10)?"e":1===b?"a":2===b?"a":"e";return number+output},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("ta",{months:"à®à®©à®µà®°à®¿_à®ªà®¿à®ªà¯à®°à®µà®°à®¿_à®®à®¾à®°à¯à®à¯_à®à®ªà¯à®°à®²à¯_à®®à¯_à®à¯à®©à¯_à®à¯à®²à¯_à®à®à®¸à¯à®à¯_à®à¯à®ªà¯à®à¯à®®à¯à®ªà®°à¯_à®à®à¯à®à¯à®¾à®ªà®°à¯_à®¨à®µà®®à¯à®ªà®°à¯_à®à®¿à®à®®à¯à®ªà®°à¯".split("_"),monthsShort:"à®à®©à®µà®°à®¿_à®ªà®¿à®ªà¯à®°à®µà®°à®¿_à®®à®¾à®°à¯à®à¯_à®à®ªà¯à®°à®²à¯_à®®à¯_à®à¯à®©à¯_à®à¯à®²à¯_à®à®à®¸à¯à®à¯_à®à¯à®ªà¯à®à¯à®®à¯à®ªà®°à¯_à®à®à¯à®à¯à®¾à®ªà®°à¯_à®¨à®µà®®à¯à®ªà®°à¯_à®à®¿à®à®®à¯à®ªà®°à¯".split("_"),weekdays:"à®à®¾à®¯à®¿à®±à¯à®±à¯à®à¯à®à®¿à®´à®®à¯_à®¤à®¿à®à¯à®à®à¯à®à®¿à®´à®®à¯_à®à¯à®µà¯à®µà®¾à®¯à¯à®à®¿à®´à®®à¯_à®ªà¯à®¤à®©à¯à®à®¿à®´à®®à¯_à®µà®¿à®¯à®¾à®´à®à¯à®à®¿à®´à®®à¯_à®µà¯à®³à¯à®³à®¿à®à¯à®à®¿à®´à®®à¯_à®à®©à®¿à®à¯à®à®¿à®´à®®à¯".split("_"),weekdaysShort:"à®à®¾à®¯à®¿à®±à¯_à®¤à®¿à®à¯à®à®³à¯_à®à¯à®µà¯à®µà®¾à®¯à¯_à®ªà¯à®¤à®©à¯_à®µà®¿à®¯à®¾à®´à®©à¯_à®µà¯à®³à¯à®³à®¿_à®à®©à®¿".split("_"),weekdaysMin:"à®à®¾_à®¤à®¿_à®à¯_à®ªà¯_à®µà®¿_à®µà¯_à®".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à®à®©à¯à®±à¯] LT",nextDay:"[à®¨à®¾à®³à¯] LT",nextWeek:"dddd, LT",lastDay:"[à®¨à¯à®±à¯à®±à¯] LT",lastWeek:"[à®à®à®¨à¯à®¤ à®µà®¾à®°à®®à¯] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à®à®²à¯",past:"%s à®®à¯à®©à¯",s:"à®à®°à¯ à®à®¿à®² à®µà®¿à®¨à®¾à®à®¿à®à®³à¯",m:"à®à®°à¯ à®¨à®¿à®®à®¿à®à®®à¯",mm:"%d à®¨à®¿à®®à®¿à®à®à¯à®à®³à¯",h:"à®à®°à¯ à®®à®£à®¿ à®¨à¯à®°à®®à¯",hh:"%d à®®à®£à®¿ à®¨à¯à®°à®®à¯",d:"à®à®°à¯ à®¨à®¾à®³à¯",dd:"%d à®¨à®¾à®à¯à®à®³à¯",M:"à®à®°à¯ à®®à®¾à®¤à®®à¯",MM:"%d à®®à®¾à®¤à®à¯à®à®³à¯",y:"à®à®°à¯ à®µà®°à¯à®à®®à¯",yy:"%d à®à®£à¯à®à¯à®à®³à¯"},ordinal:function(number){return number+"à®µà®¤à¯"},meridiem:function(hour,minute,isLower){return 6<=hour&&hour<=10?" à®à®¾à®²à¯":10<=hour&&hour<=14?" à®¨à®£à¯à®ªà®à®²à¯":14<=hour&&hour<=18?" à®à®±à¯à®ªà®¾à®à¯":18<=hour&&hour<=20?" à®®à®¾à®²à¯":20<=hour&&hour<=24?" à®à®°à®µà¯":0<=hour&&hour<=6?" à®µà¯à®à®±à¯":void 0},week:{dow:0,doy:6}})}(moment),function(moment){moment.lang("th",{months:"à¸¡à¸à¸£à¸²à¸à¸¡_à¸à¸¸à¸¡à¸ à¸²à¸à¸±à¸à¸à¹_à¸¡à¸µà¸à¸²à¸à¸¡_à¹à¸¡à¸©à¸²à¸¢à¸_à¸à¸¤à¸©à¸ à¸²à¸à¸¡_à¸¡à¸´à¸à¸¸à¸à¸²à¸¢à¸_à¸à¸£à¸à¸à¸²à¸à¸¡_à¸ªà¸´à¸à¸«à¸²à¸à¸¡_à¸à¸±à¸à¸¢à¸²à¸¢à¸_à¸à¸¸à¸¥à¸²à¸à¸¡_à¸à¸¤à¸¨à¸à¸´à¸à¸²à¸¢à¸_à¸à¸±à¸à¸§à¸²à¸à¸¡".split("_"),monthsShort:"à¸¡à¸à¸£à¸²_à¸à¸¸à¸¡à¸ à¸²_à¸¡à¸µà¸à¸²_à¹à¸¡à¸©à¸²_à¸à¸¤à¸©à¸ à¸²_à¸¡à¸´à¸à¸¸à¸à¸²_à¸à¸£à¸à¸à¸²_à¸ªà¸´à¸à¸«à¸²_à¸à¸±à¸à¸¢à¸²_à¸à¸¸à¸¥à¸²_à¸à¸¤à¸¨à¸à¸´à¸à¸²_à¸à¸±à¸à¸§à¸²".split("_"),weekdays:"à¸­à¸²à¸à¸´à¸à¸¢à¹_à¸à¸±à¸à¸à¸£à¹_à¸­à¸±à¸à¸à¸²à¸£_à¸à¸¸à¸_à¸à¸¤à¸«à¸±à¸ªà¸à¸à¸µ_à¸¨à¸¸à¸à¸£à¹_à¹à¸ªà¸²à¸£à¹".split("_"),weekdaysShort:"à¸­à¸²à¸à¸´à¸à¸¢à¹_à¸à¸±à¸à¸à¸£à¹_à¸­à¸±à¸à¸à¸²à¸£_à¸à¸¸à¸_à¸à¸¤à¸«à¸±à¸ª_à¸¨à¸¸à¸à¸£à¹_à¹à¸ªà¸²à¸£à¹".split("_"),weekdaysMin:"à¸­à¸²._à¸._à¸­._à¸._à¸à¸¤._à¸¨._à¸ª.".split("_"),longDateFormat:{LT:"H à¸à¸²à¸¬à¸´à¸à¸² m à¸à¸²à¸à¸µ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY à¹à¸§à¸¥à¸² LT",LLLL:"à¸§à¸±à¸ddddà¸à¸µà¹ D MMMM YYYY à¹à¸§à¸¥à¸² LT"},meridiem:function(hour,minute,isLower){return hour<12?"à¸à¹à¸­à¸à¹à¸à¸µà¹à¸¢à¸":"à¸«à¸¥à¸±à¸à¹à¸à¸µà¹à¸¢à¸"},calendar:{sameDay:"[à¸§à¸±à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",nextDay:"[à¸à¸£à¸¸à¹à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",nextWeek:"dddd[à¸«à¸à¹à¸² à¹à¸§à¸¥à¸²] LT",lastDay:"[à¹à¸¡à¸·à¹à¸­à¸§à¸²à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",lastWeek:"[à¸§à¸±à¸]dddd[à¸à¸µà¹à¹à¸¥à¹à¸§ à¹à¸§à¸¥à¸²] LT",sameElse:"L"},relativeTime:{future:"à¸­à¸µà¸ %s",past:"%sà¸à¸µà¹à¹à¸¥à¹à¸§",s:"à¹à¸¡à¹à¸à¸µà¹à¸§à¸´à¸à¸²à¸à¸µ",m:"1 à¸à¸²à¸à¸µ",mm:"%d à¸à¸²à¸à¸µ",h:"1 à¸à¸±à¹à¸§à¹à¸¡à¸",hh:"%d à¸à¸±à¹à¸§à¹à¸¡à¸",d:"1 à¸§à¸±à¸",dd:"%d à¸§à¸±à¸",M:"1 à¹à¸à¸·à¸­à¸",MM:"%d à¹à¸à¸·à¸­à¸",y:"1 à¸à¸µ",yy:"%d à¸à¸µ"}})}(moment),function(moment){moment.lang("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(number){return number},week:{dow:1,doy:4}})}(moment),function(moment){var suffixes={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'Ã¼ncÃ¼",4:"'Ã¼ncÃ¼",100:"'Ã¼ncÃ¼",6:"'ncÄ±",9:"'uncu",10:"'uncu",30:"'uncu",60:"'Ä±ncÄ±",90:"'Ä±ncÄ±"};moment.lang("tr",{months:"Ocak_Åubat_Mart_Nisan_MayÄ±s_Haziran_Temmuz_AÄustos_EylÃ¼l_Ekim_KasÄ±m_AralÄ±k".split("_"),monthsShort:"Oca_Åub_Mar_Nis_May_Haz_Tem_AÄu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_SalÄ±_ÃarÅamba_PerÅembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Ãar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ãa_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugÃ¼n saat] LT",nextDay:"[yarÄ±n saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dÃ¼n] LT",lastWeek:"[geÃ§en hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s Ã¶nce",s:"birkaÃ§ saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gÃ¼n",dd:"%d gÃ¼n",M:"bir ay",MM:"%d ay",y:"bir yÄ±l",yy:"%d yÄ±l"},ordinal:function(number){if(0===number)return number+"'Ä±ncÄ±";var a=number%10,b=number%100-a,c=100<=number?100:null;return number+(suffixes[a]||suffixes[b]||suffixes[c])},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("tzm-latn",{months:"innayr_brË¤ayrË¤_marË¤sË¤_ibrir_mayyw_ywnyw_ywlywz_É£wÅ¡t_Å¡wtanbir_ktË¤wbrË¤_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brË¤ayrË¤_marË¤sË¤_ibrir_mayyw_ywnyw_ywlywz_É£wÅ¡t_Å¡wtanbir_ktË¤wbrË¤_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuá¸",mm:"%d minuá¸",h:"saÉa",hh:"%d tassaÉin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(moment),function(moment){moment.lang("tzm",{months:"âµâµâµâ´°âµ¢âµ_â´±âµâ´°âµ¢âµ_âµâ´°âµâµ_âµâ´±âµâµâµ_âµâ´°âµ¢âµ¢âµ_âµ¢âµâµâµ¢âµ_âµ¢âµâµâµ¢âµâµ£_âµâµâµâµ_âµâµâµâ´°âµâ´±âµâµ_â´½âµâµâ´±âµ_âµâµâµ¡â´°âµâ´±âµâµ_â´·âµâµâµâ´±âµâµ".split("_"),monthsShort:"âµâµâµâ´°âµ¢âµ_â´±âµâ´°âµ¢âµ_âµâ´°âµâµ_âµâ´±âµâµâµ_âµâ´°âµ¢âµ¢âµ_âµ¢âµâµâµ¢âµ_âµ¢âµâµâµ¢âµâµ£_âµâµâµâµ_âµâµâµâ´°âµâ´±âµâµ_â´½âµâµâ´±âµ_âµâµâµ¡â´°âµâ´±âµâµ_â´·âµâµâµâ´±âµâµ".split("_"),weekdays:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),weekdaysShort:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),weekdaysMin:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[â´°âµâ´·âµ â´´] LT",nextDay:"[â´°âµâ´½â´° â´´] LT",nextWeek:"dddd [â´´] LT",lastDay:"[â´°âµâ´°âµâµ â´´] LT",lastWeek:"dddd [â´´] LT",sameElse:"L"},relativeTime:{future:"â´·â´°â´·âµ âµ âµ¢â´°âµ %s",past:"âµ¢â´°âµ %s",s:"âµâµâµâ´½",m:"âµâµâµâµâ´º",mm:"%d âµâµâµâµâ´º",h:"âµâ´°âµâ´°",hh:"%d âµâ´°âµâµâ´°âµâµâµ",d:"â´°âµâµ",dd:"%d oâµâµâ´°âµ",M:"â´°âµ¢oâµâµ",MM:"%d âµâµ¢âµ¢âµâµâµ",y:"â´°âµâ´³â´°âµ",yy:"%d âµâµâ´³â´°âµâµ"},week:{dow:6,doy:12}})}(moment),function(moment){function relativeTimeWithPlural(number,withoutSuffix,key){var num,forms;return"m"===key?withoutSuffix?"ÑÐ²Ð¸Ð»Ð¸Ð½Ð°":"ÑÐ²Ð¸Ð»Ð¸Ð½Ñ":"h"===key?withoutSuffix?"Ð³Ð¾Ð´Ð¸Ð½Ð°":"Ð³Ð¾Ð´Ð¸Ð½Ñ":number+" "+(num=+number,forms={mm:"ÑÐ²Ð¸Ð»Ð¸Ð½Ð°_ÑÐ²Ð¸Ð»Ð¸Ð½Ð¸_ÑÐ²Ð¸Ð»Ð¸Ð½",hh:"Ð³Ð¾Ð´Ð¸Ð½Ð°_Ð³Ð¾Ð´Ð¸Ð½Ð¸_Ð³Ð¾Ð´Ð¸Ð½",dd:"Ð´ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð½ÑÐ²",MM:"Ð¼ÑÑÑÑÑ_Ð¼ÑÑÑÑÑ_Ð¼ÑÑÑÑÑÐ²",yy:"ÑÑÐº_ÑÐ¾ÐºÐ¸_ÑÐ¾ÐºÑÐ²"}[key].split("_"),num%10==1&&num%100!=11?forms[0]:2<=num%10&&num%10<=4&&(num%100<10||20<=num%100)?forms[1]:forms[2])}function processHoursFunction(str){return function(){return str+"Ð¾"+(11===this.hours()?"Ð±":"")+"] LT"}}moment.lang("uk",{months:function(m,format){var months={nominative:"ÑÑÑÐµÐ½Ñ_Ð»ÑÑÐ¸Ð¹_Ð±ÐµÑÐµÐ·ÐµÐ½Ñ_ÐºÐ²ÑÑÐµÐ½Ñ_ÑÑÐ°Ð²ÐµÐ½Ñ_ÑÐµÑÐ²ÐµÐ½Ñ_Ð»Ð¸Ð¿ÐµÐ½Ñ_ÑÐµÑÐ¿ÐµÐ½Ñ_Ð²ÐµÑÐµÑÐµÐ½Ñ_Ð¶Ð¾Ð²ÑÐµÐ½Ñ_Ð»Ð¸ÑÑÐ¾Ð¿Ð°Ð´_Ð³ÑÑÐ´ÐµÐ½Ñ".split("_"),accusative:"ÑÑÑÐ½Ñ_Ð»ÑÑÐ¾Ð³Ð¾_Ð±ÐµÑÐµÐ·Ð½Ñ_ÐºÐ²ÑÑÐ½Ñ_ÑÑÐ°Ð²Ð½Ñ_ÑÐµÑÐ²Ð½Ñ_Ð»Ð¸Ð¿Ð½Ñ_ÑÐµÑÐ¿Ð½Ñ_Ð²ÐµÑÐµÑÐ½Ñ_Ð¶Ð¾Ð²ÑÐ½Ñ_Ð»Ð¸ÑÑÐ¾Ð¿Ð°Ð´Ð°_Ð³ÑÑÐ´Ð½Ñ".split("_")},nounCase=/D[oD]? *MMMM?/.test(format)?"accusative":"nominative";return months[nounCase][m.month()]},monthsShort:"ÑÑÑ_Ð»ÑÑ_Ð±ÐµÑ_ÐºÐ²ÑÑ_ÑÑÐ°Ð²_ÑÐµÑÐ²_Ð»Ð¸Ð¿_ÑÐµÑÐ¿_Ð²ÐµÑ_Ð¶Ð¾Ð²Ñ_Ð»Ð¸ÑÑ_Ð³ÑÑÐ´".split("_"),weekdays:function(m,format){var weekdays={nominative:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»Ð¾Ðº_Ð²ÑÐ²ÑÐ¾ÑÐ¾Ðº_ÑÐµÑÐµÐ´Ð°_ÑÐµÑÐ²ÐµÑ_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÐ°".split("_"),accusative:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»Ð¾Ðº_Ð²ÑÐ²ÑÐ¾ÑÐ¾Ðº_ÑÐµÑÐµÐ´Ñ_ÑÐµÑÐ²ÐµÑ_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÑ".split("_"),genitive:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»ÐºÐ°_Ð²ÑÐ²ÑÐ¾ÑÐºÐ°_ÑÐµÑÐµÐ´Ð¸_ÑÐµÑÐ²ÐµÑÐ³Ð°_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÐ¸".split("_")},nounCase=/(\[[ÐÐ²Ð£Ñ]\]) ?dddd/.test(format)?"accusative":/\[?(?:Ð¼Ð¸Ð½ÑÐ»Ð¾Ñ|Ð½Ð°ÑÑÑÐ¿Ð½Ð¾Ñ)? ?\] ?dddd/.test(format)?"genitive":"nominative";return weekdays[nounCase][m.day()]},weekdaysShort:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ñ.",LLL:"D MMMM YYYY Ñ., LT",LLLL:"dddd, D MMMM YYYY Ñ., LT"},calendar:{sameDay:processHoursFunction("[Ð¡ÑÐ¾Ð³Ð¾Ð´Ð½Ñ "),nextDay:processHoursFunction("[ÐÐ°Ð²ÑÑÐ° "),lastDay:processHoursFunction("[ÐÑÐ¾ÑÐ° "),nextWeek:processHoursFunction("[Ð£] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return processHoursFunction("[ÐÐ¸Ð½ÑÐ»Ð¾Ñ] dddd [").call(this);case 1:case 2:case 4:return processHoursFunction("[ÐÐ¸Ð½ÑÐ»Ð¾Ð³Ð¾] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"Ð·Ð° %s",past:"%s ÑÐ¾Ð¼Ñ",s:"Ð´ÐµÐºÑÐ»ÑÐºÐ° ÑÐµÐºÑÐ½Ð´",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"Ð³Ð¾Ð´Ð¸Ð½Ñ",hh:relativeTimeWithPlural,d:"Ð´ÐµÐ½Ñ",dd:relativeTimeWithPlural,M:"Ð¼ÑÑÑÑÑ",MM:relativeTimeWithPlural,y:"ÑÑÐº",yy:relativeTimeWithPlural},meridiem:function(hour,minute,isLower){return hour<4?"Ð½Ð¾ÑÑ":hour<12?"ÑÐ°Ð½ÐºÑ":hour<17?"Ð´Ð½Ñ":"Ð²ÐµÑÐ¾ÑÐ°"},ordinal:function(number,period){switch(period){case"M":case"d":case"DDD":case"w":case"W":return number+"-Ð¹";case"D":return number+"-Ð³Ð¾";default:return number}},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("uz",{months:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_"),monthsShort:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½_Ð¸ÑÐ»_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_"),weekdays:"Ð¯ÐºÑÐ°Ð½Ð±Ð°_ÐÑÑÐ°Ð½Ð±Ð°_Ð¡ÐµÑÐ°Ð½Ð±Ð°_Ð§Ð¾ÑÑÐ°Ð½Ð±Ð°_ÐÐ°Ð¹ÑÐ°Ð½Ð±Ð°_ÐÑÐ¼Ð°_Ð¨Ð°Ð½Ð±Ð°".split("_"),weekdaysShort:"Ð¯ÐºÑ_ÐÑÑ_Ð¡ÐµÑ_Ð§Ð¾Ñ_ÐÐ°Ð¹_ÐÑÐ¼_Ð¨Ð°Ð½".split("_"),weekdaysMin:"Ð¯Ðº_ÐÑ_Ð¡Ðµ_Ð§Ð¾_ÐÐ°_ÐÑ_Ð¨Ð°".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[ÐÑÐ³ÑÐ½ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",nextDay:"[Ð­ÑÑÐ°Ð³Ð°] LT [Ð´Ð°]",nextWeek:"dddd [ÐºÑÐ½Ð¸ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",lastDay:"[ÐÐµÑÐ° ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",lastWeek:"[Ð£ÑÐ³Ð°Ð½] dddd [ÐºÑÐ½Ð¸ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",sameElse:"L"},relativeTime:{future:"Ð¯ÐºÐ¸Ð½ %s Ð¸ÑÐ¸Ð´Ð°",past:"ÐÐ¸Ñ Ð½ÐµÑÐ° %s Ð¾Ð»Ð´Ð¸Ð½",s:"ÑÑÑÑÐ°Ñ",m:"Ð±Ð¸Ñ Ð´Ð°ÐºÐ¸ÐºÐ°",mm:"%d Ð´Ð°ÐºÐ¸ÐºÐ°",h:"Ð±Ð¸Ñ ÑÐ¾Ð°Ñ",hh:"%d ÑÐ¾Ð°Ñ",d:"Ð±Ð¸Ñ ÐºÑÐ½",dd:"%d ÐºÑÐ½",M:"Ð±Ð¸Ñ Ð¾Ð¹",MM:"%d Ð¾Ð¹",y:"Ð±Ð¸Ñ Ð¹Ð¸Ð»",yy:"%d Ð¹Ð¸Ð»"},week:{dow:1,doy:7}})}(moment),function(moment){moment.lang("vi",{months:"thÃ¡ng 1_thÃ¡ng 2_thÃ¡ng 3_thÃ¡ng 4_thÃ¡ng 5_thÃ¡ng 6_thÃ¡ng 7_thÃ¡ng 8_thÃ¡ng 9_thÃ¡ng 10_thÃ¡ng 11_thÃ¡ng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chá»§ nháº­t_thá»© hai_thá»© ba_thá»© tÆ°_thá»© nÄm_thá»© sÃ¡u_thá»© báº£y".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [nÄm] YYYY",LLL:"D MMMM [nÄm] YYYY LT",LLLL:"dddd, D MMMM [nÄm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[HÃ´m nay lÃºc] LT",nextDay:"[NgÃ y mai lÃºc] LT",nextWeek:"dddd [tuáº§n tá»i lÃºc] LT",lastDay:"[HÃ´m qua lÃºc] LT",lastWeek:"dddd [tuáº§n rá»i lÃºc] LT",sameElse:"L"},relativeTime:{future:"%s tá»i",past:"%s trÆ°á»c",s:"vÃ i giÃ¢y",m:"má»t phÃºt",mm:"%d phÃºt",h:"má»t giá»",hh:"%d giá»",d:"má»t ngÃ y",dd:"%d ngÃ y",M:"má»t thÃ¡ng",MM:"%d thÃ¡ng",y:"má»t nÄm",yy:"%d nÄm"},ordinal:function(number){return number},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("zh-cn",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"å¨æ¥_å¨ä¸_å¨äº_å¨ä¸_å¨å_å¨äº_å¨å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahç¹mm",L:"YYYY-MM-DD",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYY-MM-DD",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiem:function(hour,minute,isLower){var hm=100*hour+minute;return hm<600?"åæ¨":hm<900?"æ©ä¸":hm<1130?"ä¸å":hm<1230?"ä¸­å":hm<1800?"ä¸å":"æä¸"},calendar:{sameDay:function(){return 0===this.minutes()?"[ä»å¤©]Ah[ç¹æ´]":"[ä»å¤©]LT"},nextDay:function(){return 0===this.minutes()?"[æå¤©]Ah[ç¹æ´]":"[æå¤©]LT"},lastDay:function(){return 0===this.minutes()?"[æ¨å¤©]Ah[ç¹æ´]":"[æ¨å¤©]LT"},nextWeek:function(){var startOfWeek,prefix;return startOfWeek=moment().startOf("week"),prefix=604800<=this.unix()-startOfWeek.unix()?"[ä¸]":"[æ¬]",0===this.minutes()?prefix+"dddAhç¹æ´":prefix+"dddAhç¹mm"},lastWeek:function(){var startOfWeek,prefix;return startOfWeek=moment().startOf("week"),prefix=this.unix()<startOfWeek.unix()?"[ä¸]":"[æ¬]",0===this.minutes()?prefix+"dddAhç¹æ´":prefix+"dddAhç¹mm"},sameElse:"LL"},ordinal:function(number,period){switch(period){case"d":case"D":case"DDD":return number+"æ¥";case"M":return number+"æ";case"w":case"W":return number+"å¨";default:return number}},relativeTime:{future:"%så",past:"%så",s:"å ç§",m:"1åé",mm:"%dåé",h:"1å°æ¶",hh:"%då°æ¶",d:"1å¤©",dd:"%då¤©",M:"1ä¸ªæ",MM:"%dä¸ªæ",y:"1å¹´",yy:"%då¹´"},week:{dow:1,doy:4}})}(moment),function(moment){moment.lang("zh-tw",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"é±æ¥_é±ä¸_é±äº_é±ä¸_é±å_é±äº_é±å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahé»mm",L:"YYYYå¹´MMMDæ¥",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYYå¹´MMMDæ¥",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiem:function(hour,minute,isLower){var hm=100*hour+minute;return hm<900?"æ©ä¸":hm<1130?"ä¸å":hm<1230?"ä¸­å":hm<1800?"ä¸å":"æä¸"},calendar:{sameDay:"[ä»å¤©]LT",nextDay:"[æå¤©]LT",nextWeek:"[ä¸]ddddLT",lastDay:"[æ¨å¤©]LT",lastWeek:"[ä¸]ddddLT",sameElse:"L"},ordinal:function(number,period){switch(period){case"d":case"D":case"DDD":return number+"æ¥";case"M":return number+"æ";case"w":case"W":return number+"é±";default:return number}},relativeTime:{future:"%så§",past:"%så",s:"å¹¾ç§",m:"ä¸åé",mm:"%dåé",h:"ä¸å°æ",hh:"%då°æ",d:"ä¸å¤©",dd:"%då¤©",M:"ä¸åæ",MM:"%dåæ",y:"ä¸å¹´",yy:"%då¹´"}})}(moment),moment.lang("en"),hasModule?module.exports=moment:"function"==typeof define&&define.amd?(define("moment",function(require,exports,module){return module.config&&module.config()&&!0===module.config().noGlobal&&(globalScope.moment=oldGlobalMoment),moment}),makeGlobal(!0)):makeGlobal()}.call(this);var dbits,b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64padchar="=";function hex2b64(h){var i,c,ret="";for(i=0;i+3<=h.length;i+=3)c=parseInt(h.substring(i,i+3),16),ret+=b64map.charAt(c>>6)+b64map.charAt(63&c);for(i+1==h.length?(c=parseInt(h.substring(i,i+1),16),ret+=b64map.charAt(c<<2)):i+2==h.length&&(c=parseInt(h.substring(i,i+2),16),ret+=b64map.charAt(c>>2)+b64map.charAt((3&c)<<4));0<(3&ret.length);)ret+=b64padchar;return ret}function b64tohex(s){var i,slop,ret="",k=0;for(i=0;i<s.length&&s.charAt(i)!=b64padchar;++i)v=b64map.indexOf(s.charAt(i)),v<0||(k=0==k?(ret+=int2char(v>>2),slop=3&v,1):1==k?(ret+=int2char(slop<<2|v>>4),slop=15&v,2):2==k?(ret+=int2char(slop),ret+=int2char(v>>2),slop=3&v,3):(ret+=int2char(slop<<2|v>>4),ret+=int2char(15&v),0));return 1==k&&(ret+=int2char(slop<<2)),ret}function b64toBA(s){var i,h=b64tohex(s),a=new Array;for(i=0;2*i<h.length;++i)a[i]=parseInt(h.substring(2*i,2*i+2),16);return a}var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){for(;0<=--n;){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864),w[j++]=67108863&v}return c}function am2(i,x,w,j,c,n){for(var xl=32767&x,xh=x>>15;0<=--n;){var l=32767&this[i],h=this[i++]>>15,m=xh*l+h*xl;c=((l=xl*l+((32767&m)<<15)+w[j]+(1073741823&c))>>>30)+(m>>>15)+xh*h+(c>>>30),w[j++]=1073741823&l}return c}function am3(i,x,w,j,c,n){for(var xl=16383&x,xh=x>>14;0<=--n;){var l=16383&this[i],h=this[i++]>>14,m=xh*l+h*xl;c=((l=xl*l+((16383&m)<<14)+w[j]+c)>>28)+(m>>14)+xh*h,w[j++]=268435455&l}return c}dbits=j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,26):(BigInteger.prototype.am=am3,28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var rr,vv,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return null==c?-1:c}function bnpCopyTo(r){for(var i=this.t-1;0<=i;--i)r[i]=this[i];r.t=this.t,r.s=this.s}function bnpFromInt(x){this.t=1,this.s=x<0?-1:0,0<x?this[0]=x:x<-1?this[0]=x+this.DV:this.t=0}function nbv(i){var r=nbi();return r.fromInt(i),r}function bnpFromString(s,b){var k;if(16==b)k=4;else if(8==b)k=3;else if(256==b)k=8;else if(2==b)k=1;else if(32==b)k=5;else{if(4!=b)return void this.fromRadix(s,b);k=2}this.t=0,this.s=0;for(var i=s.length,mi=!1,sh=0;0<=--i;){var x=8==k?255&s[i]:intAt(s,i);x<0?"-"==s.charAt(i)&&(mi=!0):(mi=!1,0==sh?this[this.t++]=x:sh+k>this.DB?(this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh,this[this.t++]=x>>this.DB-sh):this[this.t-1]|=x<<sh,(sh+=k)>=this.DB&&(sh-=this.DB))}8==k&&0!=(128&s[0])&&(this.s=-1,0<sh&&(this[this.t-1]|=(1<<this.DB-sh)-1<<sh)),this.clamp(),mi&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var c=this.s&this.DM;0<this.t&&this[this.t-1]==c;)--this.t}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(16==b)k=4;else if(8==b)k=3;else if(2==b)k=1;else if(32==b)k=5;else{if(4!=b)return this.toRadix(b);k=2}var d,km=(1<<k)-1,m=!1,r="",i=this.t,p=this.DB-i*this.DB%k;if(0<i--)for(p<this.DB&&0<(d=this[i]>>p)&&(m=!0,r=int2char(d));0<=i;)p<k?(d=(this[i]&(1<<p)-1)<<k-p,d|=this[--i]>>(p+=this.DB-k)):(d=this[i]>>(p-=k)&km,p<=0&&(p+=this.DB,--i)),0<d&&(m=!0),m&&(r+=int2char(d));return m?r:"0"}function bnNegate(){var r=nbi();return BigInteger.ZERO.subTo(this,r),r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(0!=r)return r;var i=this.t;if(0!=(r=i-a.t))return this.s<0?-r:r;for(;0<=--i;)if(0!=(r=this[i]-a[i]))return r;return 0}function nbits(x){var t,r=1;return 0!=(t=x>>>16)&&(x=t,r+=16),0!=(t=x>>8)&&(x=t,r+=8),0!=(t=x>>4)&&(x=t,r+=4),0!=(t=x>>2)&&(x=t,r+=2),0!=(t=x>>1)&&(x=t,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;0<=i;--i)r[i+n]=this[i];for(i=n-1;0<=i;--i)r[i]=0;r.t=this.t+n,r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0),r.s=this.s}function bnpLShiftTo(n,r){var i,bs=n%this.DB,cbs=this.DB-bs,bm=(1<<cbs)-1,ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM;for(i=this.t-1;0<=i;--i)r[i+ds+1]=this[i]>>cbs|c,c=(this[i]&bm)<<bs;for(i=ds-1;0<=i;--i)r[i]=0;r[ds]=c,r.t=this.t+ds+1,r.s=this.s,r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t)r.t=0;else{var bs=n%this.DB,cbs=this.DB-bs,bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i)r[i-ds-1]|=(this[i]&bm)<<cbs,r[i-ds]=this[i]>>bs;0<bs&&(r[this.t-ds-1]|=(this.s&bm)<<cbs),r.t=this.t-ds,r.clamp()}}function bnpSubTo(a,r){for(var i=0,c=0,m=Math.min(a.t,this.t);i<m;)c+=this[i]-a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c-=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c-=a[i],r[i++]=c&this.DM,c>>=this.DB;c-=a.s}r.s=c<0?-1:0,c<-1?r[i++]=this.DV+c:0<c&&(r[i++]=c),r.t=i,r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs(),i=x.t;for(r.t=i+y.t;0<=--i;)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0,r.clamp(),this.s!=a.s&&BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){for(var x=this.abs(),i=r.t=2*x.t;0<=--i;)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);(r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV&&(r[i+x.t]-=x.DV,r[i+x.t+1]=1)}0<r.t&&(r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)),r.s=0,r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(!(pm.t<=0)){var pt=this.abs();if(pt.t<pm.t)return null!=q&&q.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var y=nbi(),ts=this.s,ms=m.s,nsh=this.DB-nbits(pm[pm.t-1]);0<nsh?(pm.lShiftTo(nsh,y),pt.lShiftTo(nsh,r)):(pm.copyTo(y),pt.copyTo(r));var ys=y.t,y0=y[ys-1];if(0!=y0){var yt=y0*(1<<this.F1)+(1<ys?y[ys-2]>>this.F2:0),d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2,i=r.t,j=i-ys,t=null==q?nbi():q;for(y.dlShiftTo(j,t),0<=r.compareTo(t)&&(r[r.t++]=1,r.subTo(t,r)),BigInteger.ONE.dlShiftTo(ys,t),t.subTo(y,y);y.t<ys;)y[y.t++]=0;for(;0<=--j;){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd)for(y.dlShiftTo(j,t),r.subTo(t,r);r[i]<--qd;)r.subTo(t,r)}null!=q&&(r.drShiftTo(ys,q),ts!=ms&&BigInteger.ZERO.subTo(q,q)),r.t=ys,r.clamp(),0<nsh&&r.rShiftTo(nsh,r),ts<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(a){var r=nbi();return this.abs().divRemTo(a,null,r),this.s<0&&0<r.compareTo(BigInteger.ZERO)&&a.subTo(r,r),r}function Classic(m){this.m=m}function cConvert(x){return x.s<0||0<=x.compareTo(this.m)?x.mod(this.m):x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r),this.reduce(r)}function cSqrTo(x,r){x.squareTo(r),this.reduce(r)}function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if(0==(1&x))return 0;var y=3&x;return 0<(y=(y=(y=(y=y*(2-(15&x)*y)&15)*(2-(255&x)*y)&255)*(2-((65535&x)*y&65535))&65535)*(2-x*y%this.DV)%this.DV)?this.DV-y:-y}function Montgomery(m){this.m=m,this.mp=m.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<m.DB-15)-1,this.mt2=2*m.t}function montConvert(x){var r=nbi();return x.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),x.s<0&&0<r.compareTo(BigInteger.ZERO)&&this.m.subTo(r,r),r}function montRevert(x){var r=nbi();return x.copyTo(r),this.reduce(r),r}function montReduce(x){for(;x.t<=this.mt2;)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=32767&x[i],u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;for(x[j=i+this.m.t]+=this.m.am(0,u0,x,i,0,this.m.t);x[j]>=x.DV;)x[j]-=x.DV,x[++j]++}x.clamp(),x.drShiftTo(this.m.t,x),0<=x.compareTo(this.m)&&x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r),this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r),this.reduce(r)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(e,z){if(4294967295<e||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;for(g.copyTo(r);0<=--i;)if(z.sqrTo(r,r2),0<(e&1<<i))z.mulTo(r2,g,r);else{var t=r;r=r2,r2=t}return z.revert(r)}function bnModPowInt(e,m){var z;return z=e<256||m.isEven()?new Classic(m):new Montgomery(m),this.exp(e,z)}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(key){var i,j,t;for(i=0;i<256;++i)this.S[i]=i;for(i=j=0;i<256;++i)j=j+this.S[i]+key[i%key.length]&255,t=this.S[i],this.S[i]=this.S[j],this.S[j]=t;this.i=0,this.j=0}function ARC4next(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_state,rng_pool,rng_pptr,rng_psize=256;function rng_seed_int(x){rng_pool[rng_pptr++]^=255&x,rng_pool[rng_pptr++]^=x>>8&255,rng_pool[rng_pptr++]^=x>>16&255,rng_pool[rng_pptr++]^=x>>24&255,rng_psize<=rng_pptr&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t;if(rng_pool=new Array,rng_pptr=0,window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);for(window.crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i)ba[i]=rng_get_byte()}function SecureRandom(){}function parseBigInt(str,r){return new BigInteger(str,r)}function linebrk(s,n){for(var ret="",i=0;i+n<s.length;)ret+=s.substring(i,i+n)+"\n",i+=n;return ret+s.substring(i,s.length)}function byte2Hex(b){return b<16?"0"+b.toString(16):b.toString(16)}function pkcs1pad2(s,n){if(n<s.length+11)return alert("Message too long for RSA"),null;for(var ba=new Array,i=s.length-1;0<=i&&0<n;){var c=s.charCodeAt(i--);c<128?ba[--n]=c:127<c&&c<2048?(ba[--n]=63&c|128,ba[--n]=c>>6|192):(ba[--n]=63&c|128,ba[--n]=c>>6&63|128,ba[--n]=c>>12|224)}ba[--n]=0;for(var rng=new SecureRandom,x=new Array;2<n;){for(x[0]=0;0==x[0];)rng.nextBytes(x);ba[--n]=x[0]}return ba[--n]=2,ba[--n]=0,new BigInteger(ba)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(N,E){null!=N&&null!=E&&0<N.length&&0<E.length?(this.n=parseBigInt(N,16),this.e=parseInt(E,16)):alert("Invalid RSA public key")}function RSADoPublic(x){return x.modPowInt(this.e,this.n)}function RSAEncrypt(text){var m=pkcs1pad2(text,this.n.bitLength()+7>>3);if(null==m)return null;var c=this.doPublic(m);if(null==c)return null;var h=c.toString(16);return 0==(1&h.length)?h:"0"+h}if(SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,angular.module("ONO-Services",["LocalStorageModule"]),angular.module("ONO-Base-UI",["ngAnimate","ngCookies","ngSanitize","ui.router","ONO-Services","ONO-SiteMap","toaster"]).provider("title",function(){var title;this.setTitle=function(message){title=message+" Online Ordering"},this.$get=["$window",function($window){function updateTitle(message){title=message,$window.document.title=message}return updateTitle(title),{updateTitle:updateTitle,getTitle:function(){return $window.document.title},title:title}}]}).factory("systemTimeInjector",["localStorageService",function(localStorageService){return{request:function(config){if(-1<config.url.indexOf(".html"))return config;var systemTime=localStorageService.get("SystemTime");return systemTime&&(config.params?config.params.SystemTime=systemTime:config.params={SystemTime:systemTime}),config}}}]).config(["$httpProvider",function($httpProvider){$httpProvider.defaults.headers.common["Cache-Control"]="no-cache",$httpProvider.defaults.headers.common.Pragma="no-cache"}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("systemTimeInjector")}]).config(["$provide",function($provide){$provide.decorator("$uiViewScroll",["$delegate","$window",function($delegate,$window){return function(uiViewElement){$window.scrollTo(0,0)}}]),$provide.decorator("$http",["$delegate","$window",function($delegate,$window){var $http=$delegate,pendingPromises={},deduplicator=function(config){"apim"===config.service&&(config.url="/api/"+config.url);var requestKey=config.url+config.method,promise=pendingPromises[requestKey];return promise||(pendingPromises[requestKey]=$http(config),(promise=pendingPromises[requestKey]).finally(function(){delete pendingPromises[requestKey]})),promise};return Enumerable.From(Object.keys($http)).Where(function(key){return!deduplicator.hasOwnProperty(key)}).ForEach(function(key){deduplicator[key]=angular.isFunction($http[key])?function(){return $http[key].apply($http,arguments)}:$http[key]}),deduplicator}])}]).run(["$animate",function($animate){$animate.enabled(!1)}]).run(["$sniffer",function($sniffer){$(document).on("keyup","select",function(){$(this).trigger("change")})}]),String.prototype.truncate=function(chars){if(this.length>=chars){var text=this.substring(0,chars),lastspace=text.lastIndexOf(" ");return-1!==lastspace&&(text=text.substr(0,lastspace)),text+" ..."}return this},"object"==typeof window.localStorage)try{window.localStorage.setItem("localStorage",1),window.localStorage.removeItem("localStorage")}catch(e){!function(){var Storage=function(type){function createCookie(name,value,days){var date,expires;expires=days?((date=new Date).setTime(date.getTime()+24*days*60*60*1e3),"; expires="+date.toGMTString()):"",document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){var i,c,nameEQ=name+"=",ca=document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function setData(data){data=encodeURIComponent(JSON.stringify(data)),createCookie("session"==type?getSessionName():"localStorage",data,365)}function getSessionName(){return window.name||(window.name=(new Date).getTime()),"sessionStorage"+window.name}var data=function(){var data=readCookie("session"==type?getSessionName():"localStorage");return data?JSON.parse(decodeURIComponent(data)):{}}();return{length:0,clear:function(){data={},this.length=0,createCookie("session"==type?getSessionName():"localStorage","",365)},getItem:function(key){return void 0===data[key]?null:data[key]},key:function(i){var ctr=0;for(var k in data){if(ctr==i)return k;ctr++}return null},removeItem:function(key){delete data[key],this.length--,setData(data)},setItem:function(key,value){data[key]=value+"",this.length++,setData(data)}}},localStorage=new Storage("local"),sessionStorage=new Storage("session");window.localStorage=localStorage,window.sessionStorage=sessionStorage,window.localStorage.__proto__=localStorage,window.sessionStorage.__proto__=sessionStorage}()}String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)});var app=angular.module("genericApp",["ONO-Base-UI","ui.date","ui.autocomplete","angulartics","angulartics.google.analytics"]).config(["onoDialogProvider",function(onoDialogProvider){onoDialogProvider.create({name:"account.login",templateUrl:'"/web/app/account/login.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Log_In",$scope.classes=[$scope.type,"login"]}]}),onoDialogProvider.create({name:"account.dualLogin",templateUrl:'"/web/app/account/dualLogin.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Log_In_Or_Register",$scope.classes=[$scope.type,"dualLoginDialog"]}]}),onoDialogProvider.create({name:"account.register",templateUrl:'"/web/app/account/register.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Dialog_Register",$scope.classes=[$scope.type,"register"]}]}),onoDialogProvider.create({name:"account.tooltipInformation",templateUrl:'"/web/app/_2.0/_directives/registerTeaser/tooltipInformation.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Dialog_RegisterTeaser",$scope.classes=[$scope.type,"tooltipInformation"]}]}),onoDialogProvider.create({name:"account.forgotPassword",templateUrl:'"/web/app/account/forgotPassword.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Dialog_ForgotPassword",$scope.classes=[$scope.type,"forgotPassword"]}]}),onoDialogProvider.create({name:"account.firstTimeLogin",templateUrl:'"/web/app/account/firstTimeLogin.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="",$scope.classes=[$scope.type,"forgotPassword"]}]}),onoDialogProvider.create({name:"restaurant.hours",templateUrl:'"/web/app/restaurant/restaurant.hours.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="StoreHours",$scope.classes=[$scope.type,"restaurantHours"],$scope.showOk=!0}]}),onoDialogProvider.create({name:"order.review",templateUrl:'"/web/app/cart/cartReview.html"',ctrl:["$rootScope","$scope","customerSvc","onoAlert","cartSvc","restaurantSvc","$state",function($rootScope,$scope,customerSvc,onoAlert,cartSvc,restaurantSvc,$state){var ctrl=this;$scope.type="dialog",$scope.title="Order_Summary",$scope.classes=[$scope.type,"orderReview"],$scope.model=$scope.model||{},$scope.model.cart=cartSvc.viewCart(),this.expectedDateTime=function(dateTime,isAsap){var expectedDateTime=moment(dateTime).lang($rootScope.shortLanguage);isAsap&&expectedDateTime.zone(dateTime).add($scope.model.cart.order_setup.lead_time,"m"),$scope.estimatedDate=expectedDateTime.format("dddd, MMMM Do"),$scope.estimatedTime=expectedDateTime.format("LT"),moment().isSame(expectedDateTime,"day")?$scope.isToday=!0:$scope.isToday=!1},$scope.model.cart.order_setup.fulfillment_date?ctrl.expectedDateTime($scope.model.cart.order_setup.fulfillment_date):restaurantSvc.getTime($scope.model.cart.restaurant.id).then(function(restaurantTime){ctrl.expectedDateTime(restaurantTime,!0)}),$scope.cancelOrder=function(){cartSvc.cancelOrder().then(function(){$scope.$emit("done"),$state.go("home")})}}]}),onoDialogProvider.create({name:"order.save",templateUrl:'"/web/app/orderHistory/saveOrder.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Save_Order",$scope.classes=[$scope.type,"saveOrder"]}]}),onoDialogProvider.create({name:"creditCard.create",templateUrl:'"/web/app/creditcard/credit_card.edit.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Create_New_Credit_Card",$scope.classes=[$scope.type,"newCreditCard"]}]}),onoDialogProvider.create({name:"menu.download",templateUrl:'"/web/app/_directives/downloadMenu.dialog.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Menu_Selection",$scope.classes=[$scope.type,"downloadMenu"]}]}),onoDialogProvider.create({name:"restaurant.number",templateUrl:'"/web/app/_2.0/_components/header/resturantContactNumber.dialog.html"',ctrl:["$scope","restaurantSvc","cartSvc","$state","$window",function($scope,restaurantSvc,cartSvc,$state,$window){var restaurant;($scope.type="dialog",$scope.title="Resturant_Contact_Number",$scope.cart=cartSvc.viewCart(),$scope.contactNumber="",$scope.cart.restaurant)?$scope.contactNumber=$scope.cart.restaurant&&$scope.cart.restaurant.address.phone?$scope.cart.restaurant.address.phone:"":$state.params.id?restaurantSvc.getRestaurant($state.params.id).then(function(restaurant){$scope.contactNumber=restaurant&&restaurant.address.phone?restaurant.address.phone:""}):(angular.isDefined($window.sessionStorage.fulfillmentType)&&("Delivery"===$window.sessionStorage.fulfillmentType?restaurant=angular.fromJson($window.sessionStorage.deliveryRestaurant):"Curbside"===$window.sessionStorage.fulfillmentType&&(restaurant=angular.fromJson($window.sessionStorage.curbsideRestaurant))),angular.isDefined(restaurant)?$scope.contactNumber=restaurant.address.phone?restaurant.address.phone:"":$scope.resturant=cartSvc.getRestaurant().then(function(restaurant){$scope.contactNumber=restaurant&&restaurant.address.phone?restaurant.address.phone:""}))}]}),onoDialogProvider.create({name:"delivery.upsell",templateUrl:'"/web/app/_2.0/_components/delivery/upsell.dialog.html"',ctrl:["$scope",function($scope){$scope.type="dialog",$scope.title="Delivery_Upsell_Title",$scope.classes=[$scope.type,"delivery-upsell"]}]})}]).config(["$analyticsProvider",function($analyticsProvider){$analyticsProvider.virtualPageviews(!0)}]).run(["$rootScope","featureFlagSvc",function($rootScope,featureFlagSvc){if(!_.isObject($rootScope.featureFlags)){featureFlagSvc.getFeatureFlags("root",[["dineRewards","displayDineRewardsSideBar"],["dineRewards","allowAutoSynchDineRewardsAccountNumbers"],["dineRewards","allowDineRewardsReviewAccountLink"],["dineRewards","showDineRewardsModule"],["menu","enableSearchMenu"],["layout","header"],["layout","toasterEnabled"],["layout","opinionLabSurveyOnFooter"],["UserAccount","hideAccounts"],["UserAccount","displaySavedDeliveryAddress"],["UserAccount","loginSidebar"],["UserAccount","displayCheckoutOnAccountDropDown"],["displayPromoCode"],["payment","savingCreditCards"],["payment","payWithSavedCards"],["payment","tokenizedOneTimePayment"],["payment","fraudPrevention"],["payment","restrictTokenizationPilotWithQueryParameter"],["displayFulfillmentType"],["status","giftCards"],["serviceTime"],["googleLocationSearch"],["isRackspace"],["hideSaveOrder"],["adjustSubtotalDeliveryFee"],["forceTodayForDeliveryOrders"],["logging","logConsoleErrors"],["promotionURL"]]).then(function(data){$rootScope.featureFlags=data})}}]).run(["domainEventSvc","pushEventHandler",function(domainEventSvc,pushEventHandler){domainEventSvc.addHandler(pushEventHandler)}]).run(["$rootScope","$state","cartSvc","$timeout",function($rootScope,$state,cartSvc,$timeout){$rootScope.$on("user:loggedOut",function(){cartSvc.clearOrder(),$timeout(function(){$state.current.name&&$state.reload(!0)})})}]).run(["accountSvc","cartSvc","$cookies",function(accountSvc,cartSvc,$cookies){accountSvc.initialize(),cartSvc.initialize(),$cookies.get("isActive")||accountSvc.logout()}]).run(["$rootScope","$window","$state","$http","$document","dynamicTemplate","defaultMenuState",function($rootScope,$window,$state,$http,$document,dynamicTemplate,defaultMenuState){var clientWidth=angular.isDefined($document.context.body.clientWidth)?$document.context.body.clientWidth:$document.body.clientWidth,windowSize=$window.innerWidth||clientWidth;function getElementFontSize(context){return parseFloat(getComputedStyle(context||$document.context.body).fontSize)}function convertToEm(value,context){return value/getElementFontSize(context)}function setContext(width,reload){var context;$rootScope.displaySize.adjustedWidth=width*getElementFontSize(context),width<=50?($rootScope.displaySize.isMobile=!0,$rootScope.displaySize.isDesktop=!1,$rootScope.defaultMenuState=defaultMenuState.mobile,$http.defaults.headers.common.DisplayContext="MobileWeb","mobile"!==dynamicTemplate.context&&(dynamicTemplate.context="mobile",reload&&$state.reload(!0))):($http.defaults.headers.common.DisplayContext="Default",$rootScope.displaySize.isMobile=!1,$rootScope.displaySize.isDesktop=!0,$rootScope.defaultMenuState=defaultMenuState.desktop,"desktop"!==dynamicTemplate.context&&(dynamicTemplate.context="desktop",reload&&$state.reload(!0)))}$rootScope.displaySize={},$rootScope.defaultMenuState="",setContext(convertToEm(windowSize)),angular.element($window).bind("resize orientationchange",function(){var clientWidth=angular.isDefined($document.body)?$document.body.clientWidth:$window.document.body.clientWidth,em=convertToEm(windowSize=$window.innerWidth||clientWidth);$rootScope.$$phase||(setContext(em,!0),$rootScope.$apply())})}]).run(["$rootScope","$sce",function($rootScope,$sce){$rootScope.safe=function(html){return $sce.trustAsHtml(html)}}]).run(["$rootScope","onoDialog",function($rootScope,onoDialog){$rootScope.showDialog=function(name,scope){onoDialog.find(name).setupScope(scope||this).show()}}]).run(["$rootScope",function($rootScope){$rootScope.inDrawerNav=!1,$rootScope.inDrawerCart=!1,$rootScope.inDrawer=!1,$rootScope.toggleDrawer=function(show){"menu"===show?$rootScope.inDrawerNav=!$rootScope.inDrawerNav:"cart"===show?$rootScope.inDrawerCart=!$rootScope.inDrawerCart:($rootScope.inDrawerNav=!1,$rootScope.inDrawerCart=!1),$rootScope.inDrawer=!(!$rootScope.inDrawerNav&&!$rootScope.inDrawerCart),$rootScope.inDrawerNav&&setTimeout(function(){var drawer=$(".drawerTitleContainer");drawer&&drawer.focus()},1e3)}}]).run(["$rootScope","$state","$location","cartSvc","sessionManager","sessionTimer","$window",function($rootScope,$state,$location,cartSvc,sessionManager,sessionTimer,$window){$rootScope.$on("$stateChangeStart",function(e,toState,toParams,fromState,fromParams){sessionTimer.onActivity();var systemTime=$location.search().SystemTime;if(systemTime&&sessionManager.systemTime(systemTime),angular.isObject(toState)&&"orderSetup"===toState.name&&angular.isObject(fromState)&&"delivery"===fromState.name&&"Delivery"!==toParams.fulfillmentType&&$window.sessionStorage.setItem("fulfillmentType","Curbside"),$rootScope.displaySize.isMobile&&"home"===toState.name&&(angular.isDefined($rootScope.featureFlags.layout.header)&&!$rootScope.featureFlags.layout.header?$state.go("restaurantSearch"):null===sessionManager.order()?(sessionStorage.fulfillmentType="Curbside",$state.go("pickup")):sessionStorage&&sessionStorage.fulfillmentType?"Curbside"===sessionStorage.fulfillmentType?$state.go("pickup"):$state.go("delivery"):$state.go("pickup")),toState.data&&angular.isFunction(toState.data.navigate)){var result=toState.data.navigate($rootScope,{toParams:toParams,fromState:fromState,fromParams:fromParams,cartSvc:cartSvc}),validActions=cartSvc.getValidActions();!result.redirect&&toState.data.checkValidAction&&0<validActions.length&&(result.redirect=validActions.filter(function(n){return-1!=toState.data.checkValidAction.indexOf(n)}).length<=0),result&&result.redirect&&(e.preventDefault(),result.to?$state.go(result.to,result.params):$state.go(fromState,fromParams,{notify:!1}))}})}]).run(["$rootScope","$state","$window",function($rootScope,$state,$window){$rootScope.$on("form:submitted",function(){$window.history.back(),$state.reload()}),$rootScope.$on("cancel",function(){$window.history.back()})}]).run(["$rootScope","$state","cartSvc","defaultMenuState","domainEventSvc","tagManagerSvc","invalidMenuHandler","leadTimeChangedEventHandler","fulfillmentDateEventHandler","invalidCartEventHandler","cartEventsSvc","cartExpiredEventHandler","profanitySvc",function($rootScope,$state,cartSvc,defaultMenuState,domainEventSvc,tagManagerSvc,invalidMenuHandler,leadTimeChangedEventHandler,fulfillmentDateEventHandler,invalidCartEventHandler,cartEventsSvc,cartExpiredEventHandler,profanitySvc){var orderSetup=cartSvc.viewOrderSetup();$rootScope.humanizeMinutes=function(mins){if(60<=mins){var t=moment.duration(mins,"minutes"),hours=t.hours()+(1===t.hours()?" hour":" hours"),minutes=t.minutes()+(1===t.minutes()?" minute":" minutes");return hours+(0<t.minutes()?" and "+minutes:"")}return mins+(1===mins?" minute":" minutes")},$rootScope.isDelivery=function(){return"Delivery"===orderSetup.fulfillment_type},$rootScope.validateProfanity=function(fieldReference,fieldValue){profanitySvc.sanitize(fieldValue).then(function(validity){validity?fieldReference.$setValidity("sanitize_profanity",!0):fieldReference.$setValidity("sanitize_profanity",!1)})},$rootScope.gotoMenu=function(){if(orderSetup.restaurant_id){var menuParams={restaurantId:orderSetup.restaurant_id,menuType:orderSetup.menu_type,fulfillmentType:orderSetup.fulfillment_type};orderSetup.fulfillment_date&&(menuParams.fulfillmentDate=orderSetup.fulfillment_date),$state.go($rootScope.defaultMenuState,menuParams)}else $state.go("home");$rootScope.$emit("done")},$rootScope.gotoOrder=function(){orderSetup.restaurant_id?$state.go("orderSetup",{id:orderSetup.restaurant_id}):$state.go("home")},domainEventSvc.addHandler(tagManagerSvc),domainEventSvc.addHandler(invalidMenuHandler),domainEventSvc.addHandler(leadTimeChangedEventHandler.eventHandlers),domainEventSvc.addHandler(fulfillmentDateEventHandler),domainEventSvc.addHandler(invalidCartEventHandler),domainEventSvc.addHandler(cartEventsSvc),domainEventSvc.addHandler(cartExpiredEventHandler)}]).run(["$rootScope","$log","$state","title","translationSvc","globalTelemetrySvc","onoAlert",function($rootScope,$log,$state,title,translationSvc,globalTelemetrySvc,onoAlert){$rootScope.$on("$stateChangeError",function(e,to,toParams,from,fromParams,error){if($log.error(error,e,to,toParams,from,fromParams),angular.isDefined(error)&&globalTelemetrySvc.trackEvent({"type ":"state change error","status ":error.status,"message ":error,"current state":"from: "+from+" to: "+to,"query params ":toParams}),angular.isDefined(error.status)&&500===error.status){onoAlert.show({title:"Server_Exception_Title",message:"Server_Exception_Message",actions:[{name:"Close",action:function(scope){scope.hide()}}]})}}),$rootScope.$on("$stateChangeSuccess",function(e,to,toParams,from,fromParams){to.data&&to.data.pageTitle?to.data.interpolated&&to.data.pageTitleData?(-1===to.data.pageTitleData.indexOf(to.data.pageTitle)&&to.data.pageTitleData.unshift(to.data.pageTitle),title.updateTitle(translationSvc.translate.apply(this,to.data.pageTitleData))):title.updateTitle(translationSvc.translate(to.data.pageTitle)):title.updateTitle(translationSvc.translate("ADA_Page_Title_Home"))})}]).run(["accountSvc","localStorageService",function(accountSvc,localStorageService){var now=moment(),sessionExpiresOn=localStorageService.get("sessionExpiresOn")?JSON.parse(localStorageService.get("sessionExpiresOn")):"";sessionExpiresOn&&now.isAfter(sessionExpiresOn)&&accountSvc.logout()}]).value("defaultMenuState",{desktop:"category",mobile:"menu"});!function(app){for(var inited=!1,controller=["$rootScope","sessionManager","$window","domainEventSvc",function($rootScope,sessionManager,$window,domainEventSvc){return{restrict:"E",controller:["$scope","$element","$state",function($scope,$element,$state){!function(rootScope,state,sessionManager,$window,domainEventSvc){if(inited)return;inited=!0,storedOrder=sessionManager.order(),angular.isObject(storedOrder)&&angular.isDefined(storedOrder.created_time)&&moment()>moment(storedOrder.created_time).add($window.CartExpiryTimeout,"minutes")&&domainEventSvc.raiseEvent("onCartExpired");var storedOrder}(0,0,sessionManager,$window,domainEventSvc),$element.on("click",function(e){$rootScope.$broadcast("userInteraction"),e.stopPropagation()})}]}}],i=0,els=["button","a"];i<els.length;i++)app.directive(els[i],controller)}(app),angular.module("clientApp",["genericApp","ONO-Check-Support","ONO-GiftCard-Support","ONO-HouseAccount-Support","ONO-Other-Support","ONO-POD-Support"]).config(["$urlRouterProvider",function($urlRouterProvider){$urlRouterProvider.otherwise(function($injector,$location){return"/"})}]).config(["onoSiteMapProvider","$stateProvider",function(onoSiteMapProvider,$stateProvider){onoSiteMapProvider.remove(["giftCard","houseAccounts","giftCards","addresses","editAddress"]).update({mainLayout:{resolve:{ctrlSettings:function(){return{categoryItemClick:!0,prePaymentQuestion:!0}}}},orderSetupLayout:{resolve:{dateOptions:function(){return{dateDisplayFormat:{en:"DD, MM d, yy","fr-ca":"yy/m/d"},dateParseFormat:{en:"m/d/yy","fr-ca":"yy-m-d"}}}}},order:{parent:"sidebar"},homeLayout:{templateUrl:"/web/app/layout/home.split.html"},reviewLayout:{templateUrl:"/web/app/cart/cartReview.sections.html",controller:"BBI.cartReviewCtrl"},checkoutLayout:{templateUrl:"/web/app/checkout/checkout.sections.html"},confirmationLayout:{templateUrl:"/web/app/confirmation/confirmation.sections.html"},creditCardLayout:{controller:"paymentCreditCardCtrl"},CreditCard:{views:{tip:{templateUrl:"/web/app/checkout/payment.tipCalc.html",controller:"paymentTipCalculatorCtrl"}}},GiftCard:{views:{tip:{templateUrl:"/web/app/checkout/payment.tipCalc.html",controller:"paymentTipCalculatorCtrl"}}},review:{parent:"reviewLayout",url:""},bbi:{parent:"",abstract:"true",url:"/bbi",template:"<ui-view/>"},bbiMenuItem:{parent:"bbi",url:"/menu/:storeNumber/:menuType/:fulfillmentType/category/:categoryId/item/:menuItemId?fulfillmentDate",template:"<ui-view/>",controller:["$state","$stateParams","cartSvc",function($state,$stateParams,cartSvc){$stateParams.storeNumber?cartSvc.getRestaurant($stateParams.storeNumber).then(function(rest){$state.go("menuItem",{restaurantId:rest.id,menuType:$stateParams.menuType,fulfillmentType:$stateParams.fulfillmentType,fulfillmentDate:$stateParams.fulfillmentDate,categoryId:$stateParams.categoryId,menuItemId:$stateParams.menuItemId})}):$state.go("orderSetup")}]}}).setupRoutes()}]).config(["titleProvider",function(titleProvider){titleProvider.setTitle("Outback Steakhouse Online Ordering")}]).config(["dynamicTemplateProvider",function(dynamicTemplateProvider){dynamicTemplateProvider.overrideViews({desktop:{"/web/app/layout/header.html":"/web/desktop/layout/header.html","/web/app/layout/footer.html":"/web/desktop/layout/footer.html","/web/app/restaurant/restaurantSearch.findBy.multipleFields.html":"/web/app/restaurant/restaurantSearch.findBy.singleField.html"},mobile:{"/web/app/layout/header.html":"/web/mobile/layout/header.html","/web/app/restaurant/restaurantSearch.findBy.multipleFields.html":"/web/app/restaurant/restaurantSearch.findBy.singleField.html","/web/app/menu/categoryItem.html":"/web/app/menu/categoryItem.stacked.html","/web/app/menu/menuItem.html":"/web/app/menu/menuItem.stacked.html"}})}]).run(["domainEventSvc","bbiTagManagerSvc",function(domainEventSvc,bbiTagManagerSvc){domainEventSvc.addHandler(bbiTagManagerSvc)}]),angular.module("ONO-Base-UI").controller("accountRegisterCtrl",["$rootScope","$scope","accountSvc","dinerewardsSvc","$window","$log","onoAlert","$state","sessionManager","valuesSvc","tagManagerSvc","featureFlagSvc",function($rootScope,$scope,accountSvc,dinerewardsSvc,$window,$log,onoAlert,$state,sessionManager,valuesSvc,tagManagerSvc,featureFlagSvc){var countriesEnumerable;$scope.registration={},$scope.values={};var order=sessionManager.order();order&&($scope.registration={first_name:order.fulfillment_details.first_name,last_name:order.fulfillment_details.last_name,email:order.fulfillment_details.email,username:order.fulfillment_details.email,phone:order.fulfillment_details.phone}),valuesSvc.getValues().then(function(values){countriesEnumerable=Enumerable.From(values.Countries),$scope.values.countries=countriesEnumerable.ToArray();var currentCountry=countriesEnumerable.First(function(c){return null==$scope.registration.country||c.Key==$scope.registration.country});$scope.registration.country=currentCountry.Key}),$scope.$watch("registration.country",function(){var countryCode=$scope.registration.country;if(countryCode){var c=countriesEnumerable.FirstOrDefault({},function(country){return country.Key===countryCode}).Value;c&&($scope.phoneMask=c.PhoneNumberMask)}}),$scope.trackErrors=function(){var errors=angular.element(".dialog .form").error().data().$formController.$error.required,errorNames=[];for(var key in errors)errorNames.push(errors[key].$name);errorString=errorNames.join("|"),errors&&tagManagerSvc.registrationErrors(errorString)},$scope.registrationFormSubmit=function(){var request=angular.copy($scope.registration);return request.email_as_username=!0,request.username=request.email,request.country=request.country,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","dineRewards","allowAutoSynchDineRewardsAccountNumbers")?dinerewardsSvc.register(request).then(function(loyaltyNumber){return request.loyalty_card_number=loyaltyNumber,accountSvc.register(request)},function(reason){return $log.warn("DR: Registration failed: "+angular.toJson(reason.data)),accountSvc.register(request)}):accountSvc.register(request)},$scope.$on("form:submitted",function(e){e.stopPropagation(),accountSvc.login({grant_type:"password",username:$scope.registration.email,password:$scope.registration.password}).then(function(){$scope.$emit("done"),tagManagerSvc.registration(),onoAlert.show({title:"RegisterSuccessful",message:"RegisterSuccessful_Message",actions:[{name:"Ok",action:function(scope){scope.hide(),$state.go("home")}}]})})})}]),angular.module("ONO-Services").factory("accountSvc",["$rootScope","$http","$q","sessionManager","cartSvc","checkoutSvc","tagManagerSvc","$cookies","$window","tokenizationFeatureFlagsSvc","localStorageService",function($rootScope,$http,$q,sessionManager,cartSvc,checkoutSvc,tagManagerSvc,$cookies,$window,tokenizationFeatureFlagsSvc,localStorageService){"use strict";var accountResource_login=function(postData){return $http({method:"POST",url:"/api/account/login",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(data){return function serialize(obj,prefix){var k,p,v,str=[];for(p in obj)obj.hasOwnProperty(p)&&(k=prefix?prefix+"["+p+"]":p,v=obj[p],str.push(angular.isObject(v)?serialize(v,k):k+"="+encodeURIComponent(v)));return str.join("&")}(data)},data:postData}).then(function(response){return response.data})},accountResource_logout=function(){return $http({method:"DELETE",url:"/api/account/logout"}).then(function(response){return tagManagerSvc.logout(),tokenizationFeatureFlagsSvc.resetLocationBasedFlags(),response.data})},accountResource_register=function(postData){return $http({url:"/api/account/register",method:"POST",data:postData}).then(function(response){return response.data})},accountResource_forgotPassword=function(username){return $http({method:"POST",url:"/api/account/forgot_password",params:{user_name:username}}).then(function(response){return response.data})},accountResource_resetPassword=function(postData){return $http({method:"POST",url:"/api/account/reset_password",data:postData}).then(function(response){return response.data})},accountResource_changePassword=function(postData){return $http({method:"POST",url:"/api/account/change_password",data:postData}).then(function(response){return response.data})},accountResource_getAccount=function(id){return $http({method:"GET",url:"/api/customer/"+id}).then(function(response){return response.data})},accountResource_closeAccount=function(id){return $http({method:"DELETE",url:"/api/account/close_account",params:{id:id}}).then(function(response){return response.data})};function onLoginStatusChanged(auth){if(auth){var previousOrder=null;auth.previous_order&&(previousOrder=angular.fromJson(auth.previous_order),delete auth.previous_order),accountSvc.user.account_id=auth.account_id,accountSvc.user.access_token=auth.access_token,accountSvc.user.username=auth.userName,accountSvc.user.expires_in=auth.expires_in,$http.defaults.headers.common.Authorization="Bearer "+auth.access_token,sessionManager.user(auth),cartSvc.previousOrder(previousOrder),$rootScope.loggedIn=!0,$rootScope.$broadcast("user:loggedIn",auth)}else accountSvc.user.account_id="",accountSvc.user.access_token="",accountSvc.user.username="",accountSvc.user.expires_in="",$http.defaults.headers.common.Authorization=null,$rootScope.loggedIn=!1,$rootScope.$broadcast("user:loggedOut")}var account=null,accountSvc={user:{account_id:"",access_token:"",username:"",expires_in:""},login:function(loginInfo,rememberMe){return accountResource_login(loginInfo).then(function(auth){auth&&(auth.remember_me=rememberMe,onLoginStatusChanged(auth),localStorageService.set("sessionExpiresOn",moment().minutes(moment().minutes()+$window.SessionTimeoutLimit)),$cookies.put("isActive",!0))}).catch(function(ex){if(ex&&ex.data&&"FLA"==ex.data.error)return"first login attempt not completed";throw ex})},logout:function(){var promise,def;return account=null,checkoutSvc.clearPayments(),""===accountSvc.user.account_id?((def=$q.defer()).resolve(),promise=def.promise):(promise=accountResource_logout()).finally(function(){var user=sessionManager.user();user=user&&user.remember_me?{firstName:user.firstName,userName:user.userName,remember_me:!0,language:user.language}:{},localStorageService.remove("sessionExpiresOn"),sessionManager.user(user),onLoginStatusChanged(null)}),$cookies.put("isActive",!1),promise},register:function(registration){return accountResource_register(registration)},resetPassword:function(resetInfo){return accountResource_resetPassword(resetInfo)},forgotPassword:function(username){return accountResource_forgotPassword(username)},changePassword:function(changePassword){return accountResource_changePassword({old_password:changePassword.oldPassword,new_password:changePassword.newPassword,new_password_confirm:changePassword.confirmPassword})},initialize:function(){var user=sessionManager.user();user&&user.access_token&&onLoginStatusChanged(user)},getAccount:function(){var deferred=$q.defer();return angular.isDefined(accountSvc.user)&&""!==accountSvc.user.account_id&&accountResource_getAccount(accountSvc.user.account_id).then(function(a){account=a,deferred.resolve(account)}),deferred.promise},closeAccount:function(id){return accountResource_closeAccount(id)}};return accountSvc}]),angular.module("ONO-Base-UI").controller("changePasswordCtrl",["$scope","accountSvc",function($scope,accountSvc){$scope.changePasswordFormSubmit=function(){return accountSvc.changePassword($scope.changePassword)}}]),angular.module("ONO-Base-UI").controller("forgotPasswordCtrl",["$scope","$state","$window","onoAlert","accountSvc",function($scope,$state,$window,onoAlert,accountSvc){var loginEmailAddress,obj;$scope.goState=function(){$window.sessionStorage.fulfillmentType.includes("Delivery")?$state.go("delivery"):$state.go("pickup")},obj=$scope.$parent.$parent.loginForm,"username".split(".").every(function(x){return!("object"!=typeof obj||null===obj||!x in obj||(obj=obj[x],0))})&&(loginEmailAddress=$scope.$parent.$parent.loginForm.username.$viewValue),loginEmailAddress&&($scope.email=loginEmailAddress),$scope.forgotPasswordFormSubmit=function(){accountSvc.forgotPassword($scope.email).then(function(){$scope.$emit("done"),$scope.$emit("dialogClosed"),$scope.email="",onoAlert.show({title:"ForgotPassword_Alert_Title",message:"ForgotPassword_Alert_Message",actions:[{name:"Ok",action:function(scope){scope.$emit("done"),scope.$emit("alertClosed"),$scope.goState()}}],acknowledge:!0})})}}]),angular.module("ONO-Base-UI").controller("loginCtrl",["$rootScope","$scope","accountSvc","customerSvc","dinerewardsSvc","$timeout","$state","sessionManager","domainEventSvc","tagManagerSvc","cartSvc","featureFlagSvc","$window","$log",function($rootScope,$scope,accountSvc,customerSvc,dinerewardsSvc,$timeout,$state,sessionManager,domainEventSvc,tagManagerSvc,cartSvc,featureFlagSvc,$window,$log){$scope.session=angular.extend($scope.$new(!0),$scope.session),$scope.maxUserNameChar=56,$scope.maxUserPasswordChar=30;var errors,category,errorString,user=sessionManager.user();user&&($scope.session.username=user.userName,$scope.session.first_name=user.firstName,$scope.rememberMe=!0),$scope.trackErrors=function(){category=null!==angular.element(".dialog .form").error().data()?(errors=angular.element(".dialog .form").error().data().$formController.$error.required,"Login Dialog"):(errors=angular.element(".loginForm.form").error().data().$formController.$error.required,"Restaurant Search Pane");var errorNames=[];for(var key in errors)errorNames.push(errors[key].$name);errorString=errorNames.join("|"),errors&&tagManagerSvc.loginErrors(errorString,category)},$scope.login=function(){return accountSvc.login({grant_type:"password",username:$scope.session.username,password:$scope.session.password},$scope.rememberMe).then(function(response){if("first login attempt not completed"===response)$scope.$emit("done"),$scope.showDialog("account.firstTimeLogin");else{var isDialog=angular.element(".dialog .form")[0],eventAction=angular.isUndefined(isDialog)?"Restaurant Search Pane":"Dialog";tagManagerSvc.login(eventAction),$scope.session.username=null,$scope.session.password=null;var reorderConfig=angular.isString($window.sessionStorage.getItem("reorderConfig"))&&""!==$window.sessionStorage.getItem("reorderConfig")?angular.fromJson($window.sessionStorage.getItem("reorderConfig")):null;$scope.handleDialogUserAction(),"forgotPassword"===$state.current.name?$state.go("home"):$rootScope.displaySize.isMobile&&"confirmation"===$state.current.name?featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")?"Delivery"===$window.sessionStorage.getItem("fulfillmentType")?$state.go("delivery"):$state.go("pickup"):$state.go("home"):angular.isObject(reorderConfig)?featureFlagSvc.getFeatureFlags("status",["enableReorder"]).then(function(enabled){return enabled?cartSvc.reorder(reorderConfig.orderId,reorderConfig.restaurantId).then(function(cart){return cart}):null}):"confirmation"!==$state.current.name&&"checkout"!==$state.current.name&&$state.reload()}})},$scope.$on("customer:changed",function(){if(featureFlagSvc.featureFlagExists($rootScope,"featureFlags","dineRewards","allowAutoSynchDineRewardsAccountNumbers")){if($.isEmptyObject(customerSvc.customer))return;var customer=customerSvc.customer;customer.email=accountSvc.user.username,customer.email&&customer.phone?customer.email&&customer.phone&&!customer.loyalty_card_number?($log.info("DR: Connecting Account..."),dinerewardsSvc.linkAccount(customer)):$log.info("DR: Account Already linked ["+customer.loyalty_card_number.substring(customer.loyalty_card_number.length-3)+"]"):$log.info("DR: Cannot Link Account [Missing EMAIL or PHONE]")}}),$scope.handleSignUp=function(){$scope.register()},$scope.register=function(){$scope.handleDialogUserAction(),$scope.showDialog("account.register")},$scope.handleDialogUserAction=function(){$scope.$emit("done"),$scope.$emit("dialogClosed")}}]),angular.module("ONO-Base-UI").controller("resetPasswordCtrl",["$scope","$state","$window","accountSvc","$stateParams","onoAlert",function($scope,$state,$window,accountSvc,$stateParams,onoAlert){$scope.goState=function(){$window.sessionStorage.fulfillmentType.includes("Delivery")?$state.go("delivery"):$state.go("pickup")},$scope.resetPasswordFormSubmit=function(){accountSvc.resetPassword({security_key:$stateParams.key,new_password:$scope.resetPassword.newPassword}).then(function(){onoAlert.show({title:"ResetPassword_Alert_Title",message:"ResetPassword_Alert_Message",actions:[{name:"Ok",action:function(scope){scope.$emit("done"),$scope.goState()}}],acknowledge:!0})})}}]),angular.module("ONO-Base-UI").controller("addressEditCtrl",["$scope","$state","$stateParams","addressSvc","values","address",function($scope,$state,$stateParams,addressSvc,values,address){$scope.address=address,$scope.values={};var countriesEnumerable=Enumerable.From(values.Countries);$scope.values.countries=countriesEnumerable.ToArray();var currentCountry=countriesEnumerable.First(function(c){return null==$scope.address.country||c.Key==$scope.address.country});$scope.address.country=currentCountry.Key,$scope.values.states=currentCountry.Value.States,$scope.phoneMask=currentCountry.Value.PhoneNumberMask,$scope.zipCodeLength=currentCountry.Value.ZipMask.length,$scope.zipValidation=currentCountry.Value.ZipCodeValidation,$scope.$watch("address.country",function(){var selectedCountry=$scope.address.country;if(selectedCountry){var c=countriesEnumerable.FirstOrDefault({},function(country){return country.Key===selectedCountry}).Value;c&&($scope.zipCodeLength=currentCountry.Value.ZipMask.length,$scope.zipValidation=currentCountry.Value.ZipCodeValidation,$scope.phoneMask=c.PhoneNumberMask,$scope.values.states=c.States)}}),$scope.addressFormSubmit=function(){addressSvc.upsertAddress($scope.address).then(function(){$state.go("addresses",{},{reload:!0})})}}]),angular.module("ONO-Base-UI").controller("addressListCtrl",["$scope","addressSvc",function($scope,addressSvc){addressSvc.getAddresses().then(function(addresses){$scope.addresses=addresses}),$scope.removeAddress=function(address){addressSvc.removeAddress(address).then(function(){var index=$scope.addresses.indexOf(address);$scope.addresses.splice(index,1)})}}]),angular.module("ONO-Services").factory("addressSvc",["$rootScope","$http","$parse","$q","customerSvc","cartSvc","onoAlert","$timeout",function($rootScope,$http,$parse,$q,customerSvc,cartSvc,onoAlert,$timeout){var resource_getAddresses=function(customerId){return $http({method:"GET",url:"/api/customer/"+customerId+"/addresses"}).then(function(response){return response.data})},resource_getAddress=function(customerId,addressId){return $http({method:"GET",url:"/api/customer/"+customerId+"/address/"+addressId}).then(function(response){return angular.fromJson(response)})},resource_deleteAddress=function(customerId,addressId){return $http({method:"DELETE",url:"/api/customer/"+customerId+"/address/"+addressId}).then(function(response){return response.data})},resource_createAddress=function(customerId,postData){var config={method:"POST",url:"/api/customer/"+customerId+"/address",data:postData},deferred=$q.defer();return $http(config).then(function(response){deferred.resolve(response.data)},function(response){deferred.reject(response)}),deferred.promise},resource_updateAddress=function(customerId,postData){return $http({method:"PUT",url:"/api/customer/"+customerId+"/address",data:postData}).then(function(response){$timeout(function(){return angular.fromJson(response)},1e3)})},customerId=customerSvc.customer?customerSvc.customer.id:null;function fulfilledPromise(val){var empty=$q.defer();return empty.resolve(val),empty.promise}return $rootScope.$on("customer:changed",function(e,customer){customer?customerId!=customer.id&&(customerId=customer.id):customerId=null}),{isUpsertAddress:!1,getAddresses:function(){return customerId?resource_getAddresses(customerId):fulfilledPromise([])},getAddress:function(addressId){return customerId?resource_getAddress(customerId,addressId):fulfilledPromise({})},upsertAddress:function(address){return customerId?address.id?function(address){return resource_updateAddress(customerId,address)}(address):function(address){return resource_createAddress(customerId,address)}(address):fulfilledPromise(address)},upsertDeliveryAddress:function(address){return customerId?address.id?(this.isUpsertAddress=!0,function(address){return resource_updateAddress(customerId,address).catch(function(res){var errMessage=$.parseJSON(res.data.id.Message);onoAlert.show({title:"Error Updating Address",message:errMessage.message,actions:{Close:function(scope){scope.hide()}}})})}(address)):(this.isUpsertAddress=!1,function(address){return resource_createAddress(customerId,address).catch(function(res){var errMessage=$.parseJSON(res.data.id.Message);onoAlert.show({title:"Error Creating Address",message:errMessage.message,actions:[{name:"Close",action:function(scope){scope.hide()}}]})})}(address)):fulfilledPromise(null)},removeAddress:function(address){return customerId?resource_deleteAddress(customerId,address.id):fulfilledPromise(null)}}}]),angular.module("ONO-Base-UI").controller("cartReviewCtrl",["$window","$scope","$state","$q","customerSvc","cartSvc","restaurantSvc","onoAlert","checkoutSvc","domainEventSvc","sessionManager","endOfOrder","ctrlSettings","dinerewardsSvc","tagManagerSvc","$controller","$rootScope","featureFlagSvc",function($window,$scope,$state,$q,customerSvc,cartSvc,restaurantSvc,onoAlert,checkoutSvc,domainEventSvc,sessionManager,endOfOrder,ctrlSettings,dinerewardsSvc,tagManagerSvc,$controller,$rootScope,featureFlagSvc){angular.extend(this,$controller("dineRewardsGlobalCtrl",{$scope:$scope}));var ctrl=this,orderReviewDetails={orderSubTotal:$scope.model.cart.totals.subtotal};domainEventSvc.raiseEvent("onOrderReview",orderReviewDetails),!$rootScope.featureFlags.status.giftCards&&0<$scope.model.cart.accepted_payment_types.length&&_.reject($scope.model.cart.accepted_payment_types,function(string){return"GiftCard"===string}),$scope.SpecialInstructionMaxLength=$window.SpecialInstructionMaxLength,$scope.loyalty=[],$scope.showSuggestions=!1,$scope.updateLoyalty=function(){},$scope.endOfOrder=endOfOrder,$scope.showPayAtRestaurant=-1!=$scope.model.cart.accepted_payment_types.indexOf("POD"),$scope.showPayOnline=$scope.model.cart.accepted_payment_types.length>($scope.showPayAtRestaurant?1:0),$scope.prePaymentQuestion=ctrlSettings.prePaymentQuestion,$scope.address=$scope.model.cart.restaurant.address,checkoutSvc.clearPayments($scope.model),$scope.shouldFocusNextStep=!1,$scope.model.confirmation=checkoutSvc.confirmation,$scope.showDiscountForm=$scope.displaySettings.ShowCheckoutDiscountEntry&&$scope.featureFlags.displayPromoCode,$scope.couponOption=!0,$scope.displayCallPopup=!1,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&angular.isDefined($window.sessionStorage)&&angular.isDefined($window.sessionStorage.fulfillmentType)&&"Delivery"===$window.sessionStorage.fulfillmentType&&($scope.displayCallPopup=$rootScope.featureFlags.layout.header),featureFlagSvc.getFeatureFlags("status",["hidePayatRestaurantForDelivery"]).then(function(status){status&&angular.isDefined($scope.model.cart.order_setup.fulfillment_type)&&"Delivery"===$scope.model.cart.order_setup.fulfillment_type&&($scope.showPayOnline=1,$scope.showPayAtRestaurant=0,$scope.prePaymentQuestion=!1)}),featureFlagSvc.getFeatureFlags("status",["displayCouponQuestion"]).then(function(status){$scope.couponOption=status}),$scope.showCouponQuestion=function(){return $scope.couponOption?"Delivery"!==$scope.model.cart.order_setup.fulfillment_type&&prePaymentQuestion&&isToday:$scope.prePaymentQuestion=!1},$scope.changeLocation=function(){_.isUndefined($rootScope.featureFlags)||_.isUndefined($rootScope.featureFlags.layout)||!$rootScope.featureFlags.layout.header?$state.go("restaurantSearch"):_.isUndefined($window.sessionStorage)||"Delivery"!==$window.sessionStorage.fulfillmentType?$state.go("pickup"):$state.go("delivery")},$scope.$watch(function(){return $scope.model.cart.order_items.length},function(orderTotal){if($scope.showSuggestions=function(){var suggestions=angular.isDefined($scope.endOfOrder)?$scope.endOfOrder:[],cartItems=angular.isObject($scope.model.cart)&&angular.isDefined($scope.model.cart.order_items)?$scope.model.cart.order_items:[];if(0===suggestions.length)return!1;if(0<suggestions.length&&0===cartItems.length)return!0;return function(suggestions,cartItems){var suggestedItemIds=_.map(suggestions,function(item){return item.id}),cartItemIds=_.map(cartItems,function(item){return item.menu_item_id});return 0<_.difference(suggestedItemIds,cartItemIds).length}(suggestions,cartItems)}(),orderTotal<=0&&$state.$current.name&&"review"===$state.$current.name&&$scope.model&&$scope.model.cart&&$scope.model.cart.fulfillment_type_info&&$scope.model.cart.restaurant&&$scope.model.cart.restaurant.id){var menuParams={fulfillmentType:$scope.model.cart.fulfillment_type_info.fulfillment_type,menuType:$scope.model.cart.menu_type,restaurantId:$scope.model.cart.restaurant.id};$state.go("category",menuParams)}}),$scope.model.cart.available_rewards.forEach(function(reward){reward.applied&&($scope.model.dineRewardApplied=reward)}),this.expectedDateTime=function(dateTime,isAsap){var expectedDateTime=moment(dateTime).lang($scope.shortLanguage);isAsap&&expectedDateTime.zone(dateTime).add($scope.model.cart.order_setup.lead_time,"m"),$scope.estimatedDate=expectedDateTime.format("dddd, MMMM Do"),$scope.estimatedTime=expectedDateTime.format("LT"),moment().isSame(expectedDateTime,"day")?$scope.isToday=!0:$scope.isToday=!1},this.complimentaryValid=function(){return!angular.isDefined($scope.checkoutDetailsForm.complimentaryForm)||($scope.checkoutDetailsForm.complimentaryForm.$submit(),!$scope.checkoutDetailsForm.complimentaryForm.$error.required)},$scope.model.cart.order_setup.fulfillment_date?ctrl.expectedDateTime($scope.model.cart.order_setup.fulfillment_date):restaurantSvc.getTime($scope.model.cart.restaurant.id).then(function(restaurantTime){ctrl.expectedDateTime(restaurantTime,!0)}),$scope.payOnline=function(){ctrl.complimentaryValid()&&(domainEventSvc.raiseEvent("onPayOnlineSelected"),$state.go("checkout"))},$scope.payAtRestaurant=function(forced){var paymentLocationParam=forced?"ro":"par";ctrl.complimentaryValid()&&(domainEventSvc.raiseEvent("onPayAtRestaurantSelected"),$scope.updateCheckoutInfo(),$state.go("checkout",{paymentLocation:paymentLocationParam}))},$scope.removeDiscount=function(discount){cartSvc.removeDiscount(discount.coupon_code).then(function(){discount.is_loyalty_reward&&domainEventSvc.raiseEvent("onDRAccountRewardRemoved",discount.coupon_code),$scope.updateCheckoutInfo()})},$scope.showPaymentOptions=function(){var cart=cartSvc.viewCart();return cartSvc.setupComplete()&&0<cart.order_items.length},$scope.quickAdd=function(menuItem){return cartSvc.upsertItem(menuItem).catch(function(){})},$scope.updateComplimentaryItem=function(item){cartSvc.updateComplimentaryItem(item).catch(function(res){onoAlert.show({title:"Server_Exception_Title",message:"Error_Occured_Retry",actions:[{name:"Close",action:function(scope){scope.hide()}}]})})},$scope.updateEndOfOrder=function(item){if("false"==item.declined)$scope.contains(item)||$scope.quickAdd(item);else for(var i=0;i<$scope.model.cart.order_items.length;i++)if($scope.model.cart.order_items[i].menu_item_id===item.id){cartSvc.removeItem($scope.model.cart.order_items[i].id);break}},$scope.contains=function(item){for(var i=0;i<$scope.model.cart.order_items.length;i++)if(item.id==$scope.model.cart.order_items[i].menu_item_id)return!0;return!1},$scope.doesntContain=function(item){return!$scope.contains(item)},$scope.useCouponOrBonusCard=function(useCoupon){ctrl.complimentaryValid()&&(domainEventSvc.raiseEvent("onUseCouponSelected",useCoupon),!0===useCoupon?$scope.payAtRestaurant(!0):($scope.couponOption=!1,$scope.prePaymentQuestion=!1,$scope.shouldFocusNextStep=!0))},$scope.applyDiscount=function(){if($scope.model.discountCode)return cartSvc.applyDiscount($scope.model.discountCode).then(function(){$scope.model.discountCode=""})}}]).controller("BBI.cartReviewCtrl",["$controller","$scope","$state","cartSvc","checkoutSvc","domainEventSvc","endOfOrder","ctrlSettings","dinerewardsSvc",function($controller,$scope,$state,cartSvc,checkoutSvc,domainEventSvc,endOfOrder,ctrlSettings,dinerewardsSvc){var $base=$controller("cartReviewCtrl",{$scope:$scope,endOfOrder:endOfOrder,ctrlSettings:ctrlSettings}),validatePretransmit=function(cartContext){return!(angular.isObject(cartContext)&&angular.isObject(cartContext.pretransmit)&&cartContext.pretransmit.failed)||(delete cartContext.pretransmit,!1)};$scope.payOnline=function(){$base.complimentaryValid()&&(0<$scope.model.cart.order_items.length?(domainEventSvc.raiseEvent("onPayOnlineSelected"),cartSvc.pretransmitOrder().then(function(cart){if(validatePretransmit(cart)&&!cart.invalid_menu_items.Any()){if(_.isBoolean(cart.tryCurbside)&&cart.tryCurbside)return cart.isAsap=!0,cart.order_setup.fulfillmentDateType="ASAP",cart.order_setup.fulfillment_date=null,cartSvc.updateOrderSetup(cart.order_setup).then(function(cartSummary){cartSvc.getCartDetails().then(function(){$scope.updateCheckoutInfo(),$state.go("checkout")})});$scope.updateCheckoutInfo(),$state.go("checkout")}}).catch(function(fault){domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:fault,cart:$scope.model.cart})})):domainEventSvc.raiseEvent("onTriedCheckoutWithEmptyCart"))},$scope.payAtRestaurant=function(forced){if($base.complimentaryValid())if(0<$scope.model.cart.order_items.length){var paymentLocationParam=forced?"ro":"par";domainEventSvc.raiseEvent("onPayAtRestaurantSelected"),cartSvc.pretransmitOrder().then(function(c){validatePretransmit(c)&&!c.invalid_menu_items.Any()&&($scope.updateCheckoutInfo(),$state.go("checkout",{paymentLocation:paymentLocationParam}))}).catch(function(fault){domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:fault,cart:$scope.model.cart})})}else domainEventSvc.raiseEvent("onTriedCheckoutWithEmptyCart")},moment($scope.model.cart.order_setup.fulfillment_date).startOf("day")>moment().startOf("day")==!0&&($scope.showPayOnline=!1),$scope.updateEndOfOrder=function(item){if($scope.contains(item)){for(var i=0;i<$scope.model.cart.order_items.length;i++)if($scope.model.cart.order_items[i].menu_item_id===item.id){cartSvc.removeItem($scope.model.cart.order_items[i].id).then(function(){$scope.quickAdd(item)});break}}else $scope.quickAdd(item)},angular.equals($scope.model.cart.accepted_payment_types,["POD"])&&($scope.prePaymentQuestion=!1),$scope.applyDiscount=function(){if($scope.model.discountCode)return cartSvc.applyDiscount($scope.model.discountCode).then(function(){$scope.model.discountCode=""})},$scope.removeDiscount=function(discount){discount.is_loyalty_reward&&($scope.model.dineRewardApplied=null),cartSvc.removeDiscount(discount.coupon_code).then(function(){$scope.updateCheckoutInfo()})},$scope.updateOrderSetup=function(orderSetup){cartSvc.updateOrderSetup(orderSetup).then(function(res){cartSvc.getCartDetails()})}}]),angular.module("ONO-Services").factory("cartSvc",["$rootScope","$window","$http","$q","sessionManager","restaurantSvc","userAlertSvc","$state","onoAlert","domainEventSvc","$timeout","tokenizationFeatureFlagsSvc","toaster","translationSvc","featureFlagSvc",function($rootScope,$window,$http,$q,sessionManager,restaurantSvc,userAlertSvc,$state,onoAlert,domainEventSvc,$timeout,tokenizationFeatureFlagsSvc,toaster,translationSvc,featureFlagSvc){"use strict";var cart={order_setup:{fulfillment_details:{}},totals:{}},events=[];function processResponse(response,waitToFlushEvents){events=[];var eventType=response.headers("fulfillment_date_info");return eventType&&(cart.order_setup.fulfillment_date=null,"ChangedToASAP"===eventType?events.push({event:"onCartToASAP",data:{showAlert:!0}}):"RestaurantClosed"===eventType?events.push({event:"onRestaurantClosed"}):"DateExpired"===eventType&&events.push({event:"onFulfillmentDateExpired"})),waitToFlushEvents||cartSvc.flushEventArray(),response.data}var displayAlert=function(title,message,actions){var defaultActionList=[onoAlert.actions.close],actionList=angular.isArray(actions)&&0<actions.length?angular.copy(actions):angular.copy(defaultActionList);onoAlert.show({title:title,message:message,actions:actionList})};function getFullStoryURL(){return!_.isUndefined($window.FS)&&_.isString($window.FS.getCurrentSessionURL())?$window.FS.getCurrentSessionURL():null}var resource_getCartDetails=function(cartId){return $http({method:"GET",url:"/api/cart/"+cartId}).then(function(response){return processResponse(response)},function(response){if(400===response.status){initializeCart();var po=cartSvc.previousOrder();po&&(po.cart_id=null),processPreviousOrder(po)}})},resource_updateOrderSetup=function(cartId,postData){if(cartId)return $http({method:"PUT",url:"/api/cart/"+cartId,data:postData}).then(function(response){return processResponse(response)});var deferred=$q.defer();return deferred.reject("cartId must be specified"),deferred.promise},resource_startOrder=function(postData){return _.isNull(getFullStoryURL())||(postData.fullstory_url=getFullStoryURL()),$http({method:"POST",url:"/api/cart",data:postData}).then(function(response){return processResponse(response)})},resource_upsertItem=function(cartId,postData){return $http({method:"POST",url:"/api/cart/"+cartId+"/order_item",data:postData}).then(function(response){return processResponse(response,!0)})},resource_removeItem=function(cartId,orderItemId){return $http({method:"DELETE",url:"/api/cart/"+cartId+"/order_item/"+orderItemId}).then(function(response){return processResponse(response,!0)})},resource_getItem=function(cartId,orderItemId){return $http({method:"GET",url:"/api/cart/"+cartId+"/order_item/"+orderItemId}).then(function(response){return processResponse(response)})},resource_placeOrder=function(cartId,postData){return $http({method:"POST",url:"/api/cart/"+cartId+"/place",data:postData}).then(function(response){return featureFlagSvc.featureFlagExists($rootScope,"featureFlags","adjustSubtotalDeliveryFee")&&$rootScope.featureFlags.adjustSubtotalDeliveryFee&&angular.isObject(response)&&angular.isObject(response.data)&&"Delivery"===response.data.fulfillment_type&&angular.isObject(response.data.order_details)&&angular.isObject(response.data.order_details.totals)&&angular.isNumber(response.data.order_details.totals.subtotal)&&angular.isNumber(response.data.order_details.totals.delivery_fee)&&(response.data.order_details.totals.subtotal-=response.data.order_details.totals.delivery_fee),processResponse(response)},function(fault){throw fault})},resource_applyDiscount=function(cartId,discountCode){return $http({method:"POST",url:"/api/cart/"+cartId+"/apply_discount",params:{discountCode:discountCode}}).then(function(response){return processResponse(response)})},resource_removeDiscount=function(cartId,discountCode){return $http({method:"DELETE",url:"/api/cart/"+cartId+"/delete_discount",params:{discountCode:discountCode}}).then(function(response){return processResponse(response)})},resource_repeatOrder=function(orderId,cartId,restaurantId){return $http({method:"POST",url:"/api/cart/repeat_order/"+orderId,params:{restaurant_id:restaurantId,cart_id:cartId}}).then(function(response){return processResponse(response,!1)})},resource_cancelOrder=function(cartId){return $http({method:"DELETE",url:"/api/cart/"+cartId}).then(function(response){return processResponse(response)})},resource_applyLoyaltyReward=function(cartId,postData){return $http({method:"POST",url:"/api/cart/"+cartId+"/apply_reward",data:postData}).then(function(response){return processResponse(response)})},resource_removeLoyaltyReward=function(cartId,loyaltyRewardId){return $http({method:"DELETE",url:"/api/cart/"+cartId+"/remove_reward/"+loyaltyRewardId}).then(function(response){return processResponse(response)})},resource_pretransmit=function(cartId){return $http({method:"POST",url:"/api/cart/"+cartId+"/pretransmit/"}).then(function(response){return processResponse(response,!0)})},resource_checkBalance=function(cartId,postData){return $http({method:"POST",url:"/api/cart/"+cartId+"/giftcard/balance",data:postData}).then(function(response){return processResponse(response)})},resource_updateComplimentaryItem=function(cartId,postData){return $http({method:"PUT",url:"/api/cart/"+cartId+"/complimentary_item",hideLoader:!0,data:postData}).then(function(response){return processResponse(response)})};function initializeCart(){cart.id=null,cart.lead_time=null,cart.order_items=[],cart.complimentary_items=[],cart.setup_complete=!1,cart.accepted_payment_types=[],cart.isAsap=!1,cart.restaurant=null,cart.fulfillment_info={},cart.fulfillment_type_info={},cart.available_rewards=[],cart.loyalty_card_number=null,cart.order_setup.restaurant_id=null,cart.order_setup.lead_time=null,cart.order_setup.menu_type=null,cart.order_setup.fulfillment_type=null,cart.order_setup.fulfillment_date=null,cart.order_setup.loyalty_card_number=null,cart.order_setup.serviceTimeRangeLower=null,cart.order_setup.serviceTimeRangeUpper=null,cart.order_setup.fulfillment_details=cart.order_setup.fulfillment_details||{},cart.order_setup.fulfillment_details.first_name=null,cart.order_setup.fulfillment_details.last_name=null,cart.order_setup.fulfillment_details.email=null,cart.order_setup.fulfillment_details.phone=null,cart.order_setup.fulfillment_details.car_type=null,cart.order_setup.fulfillment_details.car_color=null,cart.order_setup.fulfillment_details.car_description=null,cart.order_setup.fulfillment_details.delivery_address=null,cart.order_setup.fulfillment_details.order_comments=null,cart.totals.discount_amount=0,cart.totals.subtotal=0,cart.totals.grand_total=0,cart.totals.tip=0,cart.totals.delivery_fee=0,cart.totals.taxes=[],cart.totals.discounts=[],cart.totals.total_taxes=0,cart.valid_actions=["ViewMenu","ModifySetup"],cart.invalid_menu_items=Enumerable.Empty()}function ensureRestaurant(){var deferred=$q.defer();return cart.restaurant&&cart.restaurant.id===cart.order_setup.restaurant_id?(configureOrderSetupDefaults(),deferred.resolve(cart.restaurant)):restaurantSvc.getRestaurant(cart.order_setup.restaurant_id).then(function(restaurant){setRestaurant(restaurant),deferred.resolve(restaurant)}),deferred.promise}function processCartSummary(cartSummary,itemWithLeadTimeId){if(""===cartSummary.id)return $q.when(cartSummary);for(var key in cart.id=cartSummary.id,cart.setup_complete=cartSummary.setup_complete,cart.totals.discount_amount=cartSummary.discount_amount,cart.totals.subtotal=cartSummary.subtotal,cart.totals.grand_total=cartSummary.grand_total,cart.totals.delivery_fee=cartSummary.delivery_fee,cart.totals.taxes=cartSummary.taxes,cart.isAsap=cartSummary.isAsap,cart.totals.total_taxes=0,cart.totals.taxes)cart.totals.total_taxes+=cart.totals.taxes[key];return"orderSetup"===$state.current.name&&(cart.available_rewards=cartSummary.available_rewards),cart.totals.discounts=cartSummary.discounts,cart.order_setup.restaurant_id=cartSummary.restaurant_id,cart.order_setup.menu_type=cartSummary.menu_type,cart.order_setup.fulfillment_date=cartSummary.fulfillment_date,cart.order_setup.fulfillment_type=cartSummary.fulfillment_type,cart.itemWithLeadTimeId=itemWithLeadTimeId,adjustCartForNewLeadTime(cartSummary.lead_time,cart),cart.valid_actions=cartSummary.valid_actions,processInvalidItems(cartSummary.invalid_menu_items,cart),0<cart.order_items.length&&cart.available_rewards.forEach(function(reward){reward.applicable=!0}),ensureRestaurant().then(function(restaurant){return processPreviousOrder(cartSummary),cartSummary})}function processCartDetails(cartDetails,doNotOverwriteRewards,doNotUpdateLeadTime){if(""===cartDetails.id)return $q.when(cartDetails);var reorderConfig=angular.isString($window.sessionStorage.getItem("reorderConfig"))&&""!==$window.sessionStorage.getItem("reorderConfig")?angular.fromJson($window.sessionStorage.getItem("reorderConfig")):null;cart.id=cartDetails.id,cart.setup_complete=angular.isObject(reorderConfig)?reorderConfig.forceSetUpComplete:cartDetails.setup_complete,cart.order_setup.restaurant_id=cartDetails.restaurant_id,cart.order_setup.menu_type=cartDetails.menu_type,cart.isAsap=cartDetails.isAsap,cart.gift_card_check_balance_attempt_failures=cartDetails.gift_card_check_balance_attempt_failures,cart.order_setup.fulfillment_date=cartDetails.fulfillment_date,cart.order_setup.fulfillment_type=cartDetails.fulfillment_type,cart.order_setup.fulfillment_details=cartDetails.fulfillment_details,cart.order_items=cartDetails.order_items,cart.complimentary_items=cartDetails.complimentary_items,doNotUpdateLeadTime||adjustCartForNewLeadTime(cartDetails.lead_time,cart);var totals=cartDetails.totals;return totals&&(cart.totals={discount_amount:totals.discount_amount,subtotal:totals.subtotal,grand_total:totals.grand_total,tip:totals.tip,delivery_fee:totals.delivery_fee,taxes:totals.taxes,discounts:totals.discounts,total_taxes:totals.total_taxes}),cart.accepted_payment_types=cartDetails.accepted_payment_types,doNotOverwriteRewards||(4<cartDetails.available_rewards.length?cart.available_rewards=cartDetails.available_rewards.slice(0,4):cart.available_rewards=cartDetails.available_rewards),cart.valid_actions=cartDetails.valid_actions,processInvalidItems(cartDetails.invalid_menu_items,cart),ensureRestaurant().then(function(restaurant){return restaurant.hasDynamicQuote&&cartDetails.service_time&&(updateServiceTimeRangeLower(cartDetails.service_time.LowerQuote),updateServiceTimeRangeUpper(cartDetails.service_time.UpperQuote)),processPreviousOrder(cartDetails),cartDetails})}function adjustCartForNewLeadTime(leadTime,cart){var previousLeadTime=cart.order_setup.lead_time||0,currentFulfillmentType=$window.sessionStorage.fulfillmentType,calculatedFulfillmentTime=moment(new Date).add(leadTime,"minutes"),tomorrow=moment(new Date).add(1,"days").startOf("day");if(previousLeadTime!==(cart.order_setup.lead_time=leadTime)&&(0<previousLeadTime||!_.isUndefined(cart.itemWithLeadTimeId))){var changedAtASAPEvent=events.filter(function(e){return"onCartToASAP"===e.event})[0];if(changedAtASAPEvent&&(changedAtASAPEvent.data={showAlert:!1}),calculatedFulfillmentTime.isAfter(tomorrow)&&"Delivery"===currentFulfillmentType&&0<cart.order_items.length&&!_.isUndefined(cart.itemWithLeadTimeId))return cartSvc.removeItem(cart.itemWithLeadTimeId),void userAlertSvc.show({title:"Alert_ItemRemoved",message:"Alert_ItemRemoved_due_to_delivery_leadtime_Message",actions:[userAlertSvc.commonActions.Dismiss]});!_.isUndefined(cart.order_setup.fulfillment_date)&&calculatedFulfillmentTime.isAfter(cart.order_setup.fulfillment_date)&&(cart.isAsap=!0,cart.order_setup.fulfillmentDateType="ASAP",cart.order_setup.fulfillment_date=null,cartSvc.updateOrderSetup(cart.order_setup)),events.push({event:"onLeadTimeChanged",data:cart})}}function updateServiceTimeRangeLower(serviceTimeRangeLower){cart.order_setup.serviceTimeRangeLower=serviceTimeRangeLower}function updateServiceTimeRangeUpper(serviceTimeRangeUpper){cart.order_setup.serviceTimeRangeUpper=serviceTimeRangeUpper}function processPreviousOrder(orderInfo){if(!orderInfo)return initializeCart();var previousOrder={cart_id:cart.id||orderInfo.cart_id,order_id:orderInfo.order_id,restaurant_id:orderInfo.restaurant_id,fulfillment_type:orderInfo.fulfillment_type,menu_type:orderInfo.menu_type};if(cart.id=cart.id||previousOrder.cart_id,orderInfo.fulfillment_details){previousOrder.fulfillment_details=orderInfo.fulfillment_details;var fd=cart.order_setup.fulfillment_details;fd.car_color=fd.car_color||previousOrder.fulfillment_details.car_color,fd.car_type=fd.car_type||previousOrder.fulfillment_details.car_type,fd.car_description=fd.car_description||previousOrder.fulfillment_details.car_description}else previousOrder.fulfillment_details=cart.order_setup.fulfillment_details;cart.order_setup.fulfillment_type=cart.order_setup.fulfillment_type||previousOrder.fulfillment_type,cart.menu_type=cart.menu_type||previousOrder.menu_type,cart.restaurant||cartSvc.getRestaurant(previousOrder.restaurant_id,null,!0),sessionManager.order(previousOrder)}var menuItemInvalid=["ProductNotFound","ComboNotFound","SplitItemNotFound"];function processInvalidItems(invalidItems,passedCart){if(invalidItems){var invalidItemsEnumerable=Enumerable.From(invalidItems);(passedCart.invalid_menu_items=invalidItemsEnumerable).ForEach(function(invalidItem){var actions,alertId="invalid_item_"+invalidItem.id;actions=-1!==menuItemInvalid.indexOf(invalidItem.reason)?[{name:"Remove",action:function(alert){cartSvc.removeItem(alert.item_id),alert.dismiss()}}]:[{name:"Edit",action:function(alert){$state.go("editOrderItem",{restaurantId:passedCart.order_setup.restaurant_id,menuType:passedCart.order_setup.menu_type,fulfillmentType:passedCart.order_setup.fulfillment_type,orderItemId:alert.item_id,fulfillmentDate:passedCart.order_setup.fulfillment_date}),alert.dismiss()}}],0===userAlertSvc.list.filter(function(alert){return alert.id===alertId}).length&&userAlertSvc.show({title:"UserAlert_InvalidItems_Title",message:invalidItem.message,actions:actions,item_id:invalidItem.id,id:alertId})})}}function setRestaurant(restaurant,isPreviousOrder){restaurant.taking_orders&&(cart.restaurant=restaurant,isPreviousOrder||tokenizationFeatureFlagsSvc.setLocationBasedFlags(restaurant),cart.order_setup.restaurant_id=restaurant.id,cart.order_setup.accepted_payments=angular.isDefined(restaurant.accepted_payments)&&_.isArray(restaurant.accepted_payments)?restaurant.accepted_payments:[],configureOrderSetupDefaults())}function configureOrderSetupDefaults(){var rest=cart.restaurant,orderSetup=cart.order_setup,fulfillmentInfos=Enumerable.From(rest.fulfillment_infos),fulfillmentInfo=null;if(orderSetup.menu_type&&(fulfillmentInfo=fulfillmentInfos.FirstOrDefault(null,function(fi){return fi.menu_type===orderSetup.default_menu_type})),fulfillmentInfo||(fulfillmentInfo=fulfillmentInfos.FirstOrDefault(rest.fulfillment_infos[0],function(fi){return!rest.default_menu_type||fi.menu_type===rest.default_menu_type})),fulfillmentInfo){orderSetup.menu_type=fulfillmentInfo.menu_type;var fulfillmentTypeInfos=Enumerable.From(fulfillmentInfo.fulfillment_type_infos),fulfillmentTypeInfo=null;orderSetup.fulfillment_type&&(fulfillmentTypeInfo=fulfillmentTypeInfos.FirstOrDefault(fulfillmentInfo.fulfillment_type_infos[0],function(fti){return fti.fulfillment_type===orderSetup.fulfillment_type})),fulfillmentTypeInfo||(fulfillmentTypeInfo=fulfillmentTypeInfos.FirstOrDefault(fulfillmentInfo.fulfillment_type_infos[0],function(fti){return!fulfillmentInfo.default_fulfillment_type||fti.fulfillment_type===fulfillmentInfo.default_fulfillment_type})),fulfillmentTypeInfo&&(orderSetup.fulfillment_type=fulfillmentTypeInfo.fulfillment_type),cart.fulfillment_type_info=fulfillmentTypeInfo,cart.fulfillment_info=fulfillmentInfo}}function updateFulfillmentDetails(fulfillmentDetails){cart.order_setup.fulfillment_details||(cart.order_setup.fulfillment_details={}),angular.extend(cart.order_setup.fulfillment_details,fulfillmentDetails)}var cartSvc={initialize:function(restaurant,menuType){restaurant||menuType?(menuType&&(cart.order_setup.menu_type=menuType),setRestaurant(restaurant)):(initializeCart(),processPreviousOrder(cartSvc.previousOrder()))},sendCheckoutGAData:function(source){domainEventSvc.raiseEvent("onCartReview",{cart:cart,source:source})},getRestaurant:function(id,forceRefresh,isPreviousOrder){return!id||!forceRefresh&&cart.restaurant&&cart.restaurant.id===id?$q.when(cart.restaurant):restaurantSvc.getRestaurant(id).then(function(restaurant){setRestaurant(restaurant,isPreviousOrder)})},startOrder:function(orderSetup){return cart.id?cartSvc.updateOrderSetup(orderSetup).then(function(cartSummary){return orderSetup.latestFulfillmentTime&&(cartSummary.latestFulfillmentTime=orderSetup.latestFulfillmentTime),updateFulfillmentDetails(orderSetup.fulfillment_details),processCartSummary(cartSummary)}).then(cartSvc.flushEventArray):resource_startOrder(orderSetup).then(function(cartSummary){return updateFulfillmentDetails(orderSetup.fulfillment_details),orderSetup.latestFulfillmentTime&&(cartSummary.latestFulfillmentTime=orderSetup.latestFulfillmentTime),processCartSummary(cartSummary)}).then(function(cartSummary){return cartSvc.temp_repeatOrderId?cartSvc.repeatOrder(cartSvc.temp_repeatOrderId,cart.id):cartSvc.temp_item?cartSvc.upsertItem(cartSvc.temp_item).then(function(cartSummary){return cartSvc.temp_item=null,cartSummary}):cartSummary}).then(cartSvc.flushEventArray)},updateOrderSetup:function(orderSetup){return resource_updateOrderSetup(cart.id,orderSetup).then(cartSvc.flushEventArray)},editOrderSetup:function(){return angular.copy(cart.order_setup)},viewOrderSetup:function(){return cart.order_setup},invalidateOrderSetup:function(){cart.setup_complete=!1,cart.order_setup&&"Delivery"===cart.order_setup.fulfillment_type&&(cart.order_setup.fulfillment_type=null,cart.order_setup.fulfillment_details&&(cart.order_setup.fulfillment_details.delivery_address=null))},updateFulfillmentDetails:function(fulfillmentDetails){updateFulfillmentDetails(fulfillmentDetails)},updateServiceTimeRangeLower:function(serviceTimeRangeLower){updateServiceTimeRangeLower(serviceTimeRangeLower)},updateServiceTimeRangeUpper:function(serviceTimeRangeUpper){updateServiceTimeRangeUpper(serviceTimeRangeUpper)},setupComplete:function(){return cart.setup_complete},viewCart:function(){return cart},getCartDetails:function(){return cart.id?resource_getCartDetails(cart.id).then(function(cartDetails){return cartDetails?processCartDetails(cartDetails).then(function(){return cart}):cart}).then(cartSvc.flushEventArray):$q.when(cart)},loadCart:function(id){return id&&(cart.id=id),cartSvc.getCartDetails()},upsertItem:function(menuItem){var cartItem=menuItem.toCartItem();return resource_upsertItem(cart.id,cartItem).then(function(response){var itemWithLeadTimeId,coupon,couponNotUsed,couponCode=sessionManager.firstTimePromoCode(),hasCouponCode=!_.isEmpty(couponCode),hasDiscounts=angular.isObject(cart.totals)&&!_.isEmpty(cart.totals.discounts),canUsePromoCodes=featureFlagSvc.featureFlagExists($rootScope,"featureFlags","promotionURL")&&$rootScope.featureFlags.promotionURL;return cartItem.id=response.id,cartItem.price=response.price,function(orderItem){for(var i=0;i<cart.order_items.length;i++)if(cart.order_items[i].id==orderItem.id){cart.order_items.splice(i,1);break}cart.order_items.push(orderItem),cart.invalid_menu_items=cart.invalid_menu_items.Where(function(x){return x.id!==orderItem.id})}(cartItem),cart.lead_time<response.cart_summary.lead_time&&(itemWithLeadTimeId=cartItem.id),canUsePromoCodes&&hasCouponCode&&hasDiscounts&&(coupon=_.find(cart.totals.discounts,function(disc){return disc.coupon_code===couponCode})),couponNotUsed=hasCouponCode&&angular.isUndefined(coupon),canUsePromoCodes&&couponNotUsed?cartSvc.applyDiscount(couponCode).then(function(response){return processCartSummary(response,itemWithLeadTimeId)}):processCartSummary(response.cart_summary,itemWithLeadTimeId)}).then(function(cartSummary){return featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","toasterEnabled")&&$rootScope.featureFlags.layout.toasterEnabled&&toaster.success({title:translationSvc.translate("toaster_item_title"),body:translationSvc.translate("toaster_item_body")}),domainEventSvc.raiseEvent("onMenuItemAdd",menuItem),cartSummary}).then(cartSvc.flushEventArray)},handleRemoveItemResponse:function(cartDetails,orderItemId,menuItem){return function(orderItemId){for(var i=0;i<cart.order_items.length;i++)if(cart.order_items[i].id==orderItemId){cart.order_items.splice(i,1);break}cart.invalid_menu_items=cart.invalid_menu_items.Where(function(x){return x.id!==orderItemId})}(orderItemId),0===cart.order_items.length&&cart.available_rewards.forEach(function(reward){reward.applicable=!1}),events.push({event:"onMenuItemRemove",data:menuItem}),cartSvc.checkUserAlerts(orderItemId),processCartDetails(cartDetails,!0)},removeItem:function(orderItemId){var menuItem=function(orderItemId){for(var i=0;i<cart.order_items.length;i++)if(cart.order_items[i].id==orderItemId)return cart.order_items[i]}(orderItemId);return resource_removeItem(cart.id,orderItemId).then(function(cartDetails){return cartSvc.handleRemoveItemResponse(cartDetails,orderItemId,menuItem)}).then(cartSvc.flushEventArray)},getItem:function(orderItemId){return resource_getItem(cart.id,orderItemId).then(cartSvc.flushEventArray)},cancelOrder:function(){var promise=resource_cancelOrder(cart.id);return promise.then(this.clearOrder()).then(cartSvc.flushEventArray),promise},clearOrder:function(){initializeCart();var po=cartSvc.previousOrder();po&&(po.cart_id=null),processPreviousOrder(po)},applyDiscount:function(couponCode){return resource_applyDiscount(cart.id,couponCode,!1).then(function(cartDetails){return processCartDetails(cartDetails)}).then(cartSvc.flushEventArray)},removeDiscount:function(couponCode){return resource_removeDiscount(cart.id,couponCode).then(function(cartDetails){return processCartDetails(cartDetails)}).then(cartSvc.flushEventArray)},applyLoyaltyReward:function(reward){return resource_applyLoyaltyReward(cart.id,reward).then(function(cartDetails){return processCartDetails(cartDetails)}).then(cartSvc.flushEventArray)},removeLoyaltyReward:function(reward){return resource_removeLoyaltyReward(cart.id,reward.loyalty_reward_id).then(function(cartDetails){return processCartDetails(cartDetails)}).then(cartSvc.flushEventArray)},getCheckoutInfo:function(){var checkoutDetails=angular.copy(cart.order_setup.fulfillment_details);return checkoutDetails.payments=[],{checkoutDetails:checkoutDetails,acceptedPaymentTypes:cart.accepted_payment_types,fulfillmentTypeInfo:cart.fulfillment_type_info,maxPayments:cart.restaurant?cart.restaurant.max_payments:null,total:cart.totals.grand_total,balance:cart.totals.grand_total}},getAcceptedPaymentTypes:function(){return cart.accepted_payment_types},placeOrder:function(checkoutDetails){var promise=resource_placeOrder(cart.id,checkoutDetails);return promise.then(function(orderConfirmation){var enablePromotionalURL=featureFlagSvc.featureFlagExists($rootScope,"featureFlags","promotionURL")&&$rootScope.featureFlags.promotionURL;initializeCart(),cartSvc.previousOrder(orderConfirmation.order_details),enablePromotionalURL&&sessionManager.remove("firstTimePromoCode")}),promise.catch(function(res){if(angular.isDefined(res.data)&&angular.isDefined(res.data.ModelState)&&angular.isDefined(res.data.ModelState.used_discount_code)){var usedDiscountCodes=angular.copy(res.data.ModelState.used_discount_code);delete res.data.ModelState.used_discount_code,0<usedDiscountCodes.length&&cartSvc.getCartDetails().then(function(){userAlertSvc.show({title:"Alert_Preused_Promocode_Title",message:"Alert_Preused_Promocode_Message",actions:[userAlertSvc.commonActions.RedirectToReview]})},function(){displayAlert("Server_Exception_Title","Server_Exception_Message")})}else 400!==res.status||angular.isObject(res.data)&&angular.isObject(res.data.ModelState)||displayAlert("Server_Exception_Title","Server_Exception_Message");if(409===res.status&&res.data){var error=angular.fromJson(res.data);error.invalid_menu_items&&processInvalidItems(error.invalid_menu_items,cart),$state.go("review")}}),promise},reorder:function(orderId,restaurantId){var deferred=$q.defer();return orderId&&restaurantId?$rootScope.loggedIn&&resource_repeatOrder(orderId,cart.id,restaurantId).then(function(cartDetails){processCartDetails(cartDetails)}).then(cartSvc.flushEventArray).then(function(){cart.setup_complete?$state.go("review"):($state.go("orderSetup",{id:cart.restaurant.id,gotoState:"review"}),cart.setup_complete=!0)}):deferred.reject("params not defined"),deferred.promise},repeatOrder:function(orderId,restaurant_id){var deferred=$q.defer();return cart.restaurant&&cart.restaurant.taking_orders?(cartSvc.temp_repeatOrderId=null,resource_repeatOrder(orderId,cart.id,cart.restaurant.id).then(function(cartDetails){processCartDetails(cartDetails).then(cartSvc.flushEventArray).then(function(){cart.setup_complete?$state.go("review"):($state.go("orderSetup",{id:cart.restaurant.id,gotoState:"review"}),cart.setup_complete=!0)})})):(cartSvc.temp_repeatOrderId=orderId,cart.restaurant=null,$state.go("restaurantSearch")),deferred.promise},getValidActions:function(){return cart?cart.valid_actions:["ViewMenu","ModifySetup"]},pretransmitOrder:function(){return resource_pretransmit(cart.id).then(function(cartDetails){return processCartDetails(cartDetails)}).catch(function(res){var error=angular.fromJson(res.data);if(angular.isObject(error.ModelState)&&0<_.size(error.ModelState)){var currentCart=cartSvc.viewCart();domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:res,cart:currentCart}),currentCart.tryCurbside=!_.isEmpty(error.ModelState.fulfillment_date)&&"UserAlert_FulfillmentDateExpired_TryCurbside"===error.ModelState.fulfillment_date[0]}else cart.pretransmit={failed:!0,errors:error}}).then(cartSvc.flushEventArray).then(function(){return cart})},checkBalance:function(payment){return resource_checkBalance(cart.id,payment)},previousOrder:function(orderDetails){return orderDetails?processPreviousOrder(orderDetails):sessionManager.order()},updateComplimentaryItem:function(complimentaryItem){return resource_updateComplimentaryItem(cart.id,complimentaryItem)},checkInvalidItems:function(){processInvalidItems(cart.invalid_menu_items,cart)},checkUserAlerts:function(orderItemId){userAlertSvc.list.filter(function(alert){return alert.id==="invalid_item_"+orderItemId}).forEach(function(alert){alert.dismiss()})},flushEventArray:function(previousResult){return events.forEach(function(e){domainEventSvc.raiseEvent(e.event,e.data)}),previousResult},__private__:{ensureRestaurant:ensureRestaurant,setRestaurant:setRestaurant}};return processPreviousOrder(cartSvc.previousOrder()),cartSvc}]),angular.module("ONO-Base-UI").controller("endOfOrderCtrl",["$scope","cartSvc",function($scope,cartSvc){$scope.$on("form:submitted",function(e){e.stopPropagation(),$scope.menuItemSubmit()}),$scope.menuItem.hideConfiguration=!0,$scope.showConfiguration=function(){$scope.menuItem.hideConfiguration=!1},$scope.goBack=function(){$scope.menuItem.hideConfiguration=!0},$scope.menuItemSubmit=function(){return cartSvc.upsertItem($scope.menuItem)}}]),angular.module("ONO-Base-UI").controller("fulfillmentAddressCtrl",["$scope","$rootScope","$state","cart","orderSetupSvc","featureFlagSvc",function($scope,$rootScope,$state,cart,orderSetupSvc,featureFlagSvc){return this.handleRestaurantChange=function(){$scope.cart.restaurant&&$scope.cart.restaurant.address&&($scope.address=$scope.cart.restaurant.address)},$scope.cart=cart,$scope.delivery=function(){return orderSetupSvc.orderSetup},$scope.deliveryAddress=function(){return cart.order_setup.fulfillment_details.delivery_address},$scope.$watch("cart.restaurant",this.handleRestaurantChange),$scope.goToDelivery=function(){featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&$rootScope.featureFlags.layout.header?$state.go("delivery"):$state.go("orderSetup",{id:model.cart.restaurant.id})},this}]),angular.module("ONO-Base-UI").controller("fulfillmentLocationCtrl",["$scope","cart","$window","$state","$rootScope","featureFlagSvc",function($scope,cart,$window,$state,$rootScope,featureFlagSvc){return this.handleRestaurantChange=function(){$scope.cart.restaurant&&$scope.cart.restaurant.address&&($scope.address=$scope.cart.restaurant.address)},$scope.cart=cart,$scope.$watch("cart.restaurant",this.handleRestaurantChange),$scope.displayCallPopup=!1,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&angular.isDefined($window.sessionStorage)&&angular.isDefined($window.sessionStorage.fulfillmentType)&&"Delivery"===$window.sessionStorage.fulfillmentType&&($scope.displayCallPopup=$rootScope.featureFlags.layout.header),$scope.changeLocation=function(){_.isUndefined($rootScope.featureFlags)||_.isUndefined($rootScope.featureFlags.layout)||!$rootScope.featureFlags.layout.header?$state.go("restaurantSearch"):_.isUndefined($window.sessionStorage)||"Delivery"!==$window.sessionStorage.fulfillmentType?$state.go("pickup"):$state.go("delivery")},this}]),angular.module("ONO-Base-UI").controller("fulfillmentTimeCtrl",["$rootScope","$scope","cart",function($rootScope,$scope,cart){return this.handleRestaurantChange=function(){$scope.cart.restaurant&&$scope.cart.restaurant.address&&($scope.address=$scope.cart.restaurant.address)},$scope.cart=cart,$scope.$watch("cart.restaurant",this.handleRestaurantChange),this}]),angular.module("ONO-Base-UI").controller("orderCtrl",["$scope","$state","cartSvc","values","customerSvc","checkoutSvc","$window","$rootScope","featureFlagSvc",function($scope,$state,cartSvc,values,customerSvc,checkoutSvc,$window,$rootScope,featureFlagSvc){$scope.hideSavedOrderPerm=!0;var overrideReviewLink=$scope.hideSavedOrder=!1;$scope.hideSavedOrderPerm||featureFlagSvc.featureFlagExists($rootScope,"featureFlags","hideSaveOrder")&&($scope.hideSavedOrder=$rootScope.featureFlags.hideSaveOrder),featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&(overrideReviewLink=$rootScope.featureFlags.layout.header),cartSvc.setupComplete()||(cartSvc.viewOrderSetup().restaurant_id?$state.go("orderSetup"):$state.go("restaurantSearch")),$scope.model.checkoutDetails={payments:checkoutSvc.payments},$scope.model.values={carTypes:values.CarType,carColors:values.CarColor,countries:Enumerable.From(values.Countries).ToArray()},$scope.model.phoneMask=$scope.model.values.countries[0].Value.PhoneNumberMask,customerSvc.getCustomer().then(function(customer){customer&&($scope.model.checkoutDetails.first_name=customer.first_name,$scope.model.checkoutDetails.last_name=customer.last_name,$scope.model.checkoutDetails.email=customer.email,$scope.model.checkoutDetails.phone=customer.phone)}),$scope.cancelOrder=function(){cartSvc.cancelOrder(),$scope.model.dineRewardApplied="",featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")||$state.go("restaurantSearch"),angular.isDefined(sessionStorage.fulfillmentType)&&"Delivery"===sessionStorage.fulfillmentType?(sessionStorage.removeItem("currentDeliveryAddress"),$state.go("delivery")):(sessionStorage.removeItem("curbsideRestaurant"),$state.go("pickup"))},$scope.updateCheckoutInfo=function(){checkoutSvc.updateCheckoutInfo($scope.model)},$scope.$watch("cart.order_items",function(items){$scope.updateCheckoutInfo()}),$scope.updateCheckoutInfo(),$scope.orderItemClick=function(oi){$scope.displaySize.isMobile&&(oi.hideOrderItemAdditional=!oi.hideOrderItemAdditional)},$scope.deliveryNavigation=function(){overrideReviewLink?$state.go("delivery",{id:$scope.model.cart.restaurant.id}):$state.go("orderSetup",{id:$scope.model.cart.restaurant.id})}}]),angular.module("ONO-Base-UI").controller("checkoutCtrl",["$scope","$rootScope","$state","$window","$q","dinerewardsSvc","cartSvc","customerSvc","userAlertSvc","onoAlert","$location","orderHistorySvc","checkoutSvc","creditCards","sessionManager","cryptoService","$log","featureFlagSvc","$anchorScroll","domainEventSvc","$timeout","gaSvc",function($scope,$rootScope,$state,$window,$q,dinerewardsSvc,cartSvc,customerSvc,userAlertSvc,onoAlert,$location,orderHistorySvc,checkoutSvc,creditCards,sessionManager,cryptoService,$log,featureFlagSvc,$anchorScroll,domainEventSvc,$timeout,gaSvc){"use strict";var paymentMode_creditCard="CreditCard";$scope.model.dineRewardsAccount=sessionManager.dineRewardsAccount(),$scope.model.canUnlinkDineRewards=!1,$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes),$scope.updateCheckoutInfo(),$scope.collectCarType=!1,$scope.restaurantOnly=!1,$scope.address=$scope.model.cart.restaurant.address,$scope.fraudPreventionDataCollectionInProgress=!1,$scope.editingPayment=void 0,$scope.showGiftCardDisabledMessage=!1,$scope.isCurbsideNotAvailable="Curbside"===$scope.model.cart.order_setup.fulfillment_type&&!$scope.model.cart.restaurant.isPickUpOnly,$scope.displayCreditCardDescription=!!_.isObject($scope.model.cart.accepted_payment_types)&&-1!==$scope.model.cart.accepted_payment_types.indexOf("CreditCard"),$scope.displayCreditCardEdit=!1,$scope.displayCallPopup=!1,$scope.encryptPaymentCardInfo=!1,$scope.enablePlaceOrder=!0;var failedAttemptsCount,maxGiftCardFailureAttempts;featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&angular.isDefined($window.sessionStorage)&&angular.isDefined($window.sessionStorage.fulfillmentType)&&"Delivery"===$window.sessionStorage.fulfillmentType&&($scope.displayCallPopup=$rootScope.featureFlags.layout.header),failedAttemptsCount=$scope.model.cart.gift_card_check_balance_attempt_failures?$scope.model.cart.gift_card_check_balance_attempt_failures:0,maxGiftCardFailureAttempts=$scope.model.cart.fulfillment_type_info&&$scope.model.cart.fulfillment_type_info.max_gift_card_check_balance_failure_attempts?$scope.model.cart.fulfillment_type_info.max_gift_card_check_balance_failure_attempts:3,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","status","giftCards")&&(!$rootScope.featureFlags.status.giftCards||maxGiftCardFailureAttempts<=failedAttemptsCount)&&_.reject($scope.model.acceptedPaymentTypes,function(string){return"GiftCard"===string}),$scope.showGiftCardDisabledMessage=!$rootScope.featureFlags.status.giftCards&&"Delivery"!==$scope.model.cart.order_setup.fulfillment_type,featureFlagSvc.getFeatureFlags("root",[["payment","encryptPaymentCardInfo"],["payment","displayCreditCardEdit"]]).then(function(data){angular.isDefined(data)&&angular.isObject(data)&&($scope.encryptPaymentCardInfo=featureFlagSvc.featureFlagExists(data,"payment","encryptPaymentCardInfo")&&data.payment.encryptPaymentCardInfo,$scope.displayCreditCardEdit=featureFlagSvc.featureFlagExists(data,"payment","displayCreditCardEdit")&&data.payment.displayCreditCardEdit)}),$scope.isPartialPaymentDisabled=function(){return $scope.model.maxPayments-1==$scope.model.checkoutDetails.payments.length||!function(){var isValid;if($scope.model.paymentOptions)return _.forEach($scope.model.paymentOptions,function(paymentType){0<paymentType.length&&(isValid=Enumerable.From(paymentType).Any(function(card){return angular.isDefined(card.type)&&"CreditCard"!==card.type||"CreditCard"!==card}))}),isValid}()},$scope.isPaymentInfoReady=function(){return 0==$scope.model.balance&&!$scope.editingPayment},$scope.isPlaceOrderDisabled=function(){return 0!=$scope.model.balance||!$scope.enablePlaceOrder},$scope.model.cart.available_rewards.forEach(function(reward){reward.applied&&($scope.model.dineRewardApplied=reward)}),"ro"===$state.params.paymentLocation&&($scope.restaurantOnly=!0),$scope.removePayment=function(payment){checkoutSvc.removePayment(payment,$scope.model),payment.credit_card&&payment.credit_card.cvv&&delete payment.credit_card.cvv,$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes),$state.go("checkout",{paymentLocation:""},{notify:!1})},$scope.removePayments=function(){checkoutSvc.clearPayments($scope.model),$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes)},$scope.applyPayment=function(orderPayment){!1,$scope.editingPayment&&(checkoutSvc.removePayment($scope.editingPayment,$scope.model),$scope.editingPayment=void 0),checkoutSvc.applyPayment(orderPayment,$scope.model)&&($scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes),$state.go("checkout",{},{reload:!0}))},$scope.getPayment=function(id){return checkoutSvc.editPayment(id,$scope.model)},$scope.createPayment=function(paymentType){return checkoutSvc.createPayment(paymentType,$scope.model.balance)},$scope.$on("cancelPayment",function(e){$scope.editingPayment=void 0,e.stopPropagation(),$state.go("checkout",{},{reload:!0})}),$scope.editPayment=function(payment){$scope.editingPayment=angular.copy(payment),$state.go(payment.payment_type,{id:payment.$$hashKey},{location:!1})},$scope.isPaymentEditable=function(payment){return 1<$scope.model.maxPayments&&!(payment.credit_card&&(payment.credit_card.id||payment.credit_card.one_time_token||!$scope.displayCreditCardEdit))},$scope.checkoutDetailsFormSubmit=function(){if($scope.attempted=!0,!$scope.model.balance.eq(0)||"Delivery"===$scope.model.cart.order_setup.fulfillment_type&&$scope.model.cart.totals.subtotal<$scope.model.cart.restaurant.delivery_minimum_subtotal)return!1;if(0<userAlertSvc.list.length)return onoAlert.show({title:"Alert_OutstandingUserAlerts_Title",message:"Alert_OutstandingUserAlerts_Message",actions:[{name:"Close",action:function(scope){scope.hide()}}]}),!1;if($scope.model.checkoutDetails.order_comments=$scope.model.cart.order_setup.fulfillment_details.order_comments,$scope.model.checkoutDetails.is_pickup_only=$scope.model.cart.restaurant.isPickUpOnly,"Delivery"===$scope.model.cart.order_setup.fulfillment_type&&($scope.model.checkoutDetails.fulfillment_type=2),$scope.encryptPaymentCardInfo&&0<$scope.model.checkoutDetails.payments.length){var deferred=$q.defer();return cryptoService.setLocation("1_"+$scope.model.cart.restaurant.store_number).then(function(){for(var checkoutDetails=angular.fromJson(angular.toJson($scope.model.checkoutDetails)),index=0;index<checkoutDetails.payments.length;index++){var payment=checkoutDetails.payments[index],paymentCardInfo={};switch(payment.payment_type){case"POD":continue;case"CreditCard":if(paymentCardInfo.number=payment.credit_card.card_number,payment.credit_card.card_number=payment.credit_card.card_number.replace(/\d(?=\d{4})/g,"*"),payment.credit_card.id||payment.credit_card.one_time_token)continue;null!==payment.credit_card.expiration_month&&(paymentCardInfo.exp_month=payment.credit_card.expiration_month,delete payment.credit_card.expiration_month),null!==payment.credit_card.expiration_year&&(paymentCardInfo.exp_year=payment.credit_card.expiration_year,delete payment.credit_card.expiration_year),null!==payment.credit_card.cvv&&(paymentCardInfo.cvc2=payment.credit_card.cvv,delete payment.credit_card.cvv);break;case"GiftCard":paymentCardInfo.number=payment.gift_card.card_number,payment.gift_card.card_number=payment.gift_card.card_number.replace(/\d(?=\d{4})/g,"*")}var encryptedPaymentCardInfo=cryptoService.encrypt(angular.toJson(paymentCardInfo));payment.encryptedPaymentCardInfo=encryptedPaymentCardInfo}$scope.checkOut(checkoutDetails).then(function(result){deferred.resolve(result)},function(fault){var hasCvvError=validateModelStateError("incorrect_cvv",fault),hasZipError=validateModelStateError("avs_zip_mismatch",fault);if(domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:fault,cart:$scope.model.cart}),$scope.isCurbsideNotAvailable="Curbside"===$scope.model.cart.order_setup.fulfillment_type&&!$scope.model.cart.restaurant.isPickUpOnly,hasCvvError&&(onoAlert.show({title:"Payment_Declined_Alert_Title",message:"Payment_Declined_Invalid_Cvv_Alert_Message",actions:[{name:"Ok",action:function(){$state.go("CreditCard",{id:getCreditCardPaymentId()},{location:!1})}}]}),deferred.resolve(fault)),hasZipError&&(onoAlert.show({title:"Payment_Declined_Alert_Title",message:"Payment_Declined_Invalid_zip_Alert_Message",actions:[{name:"Ok",action:function(){$state.go("CreditCard",{id:getCreditCardPaymentId()},{location:!1})}}]}),deferred.resolve(fault)),validateModelStateError("max_payments_attempt_reached",fault))checkoutSvc.clearPayments($scope.model),checkoutSvc.addPayment(checkoutSvc.createPayment("POD",$scope.model.balance),$scope.model),cartSvc.getCartDetails().then(function(response){checkoutSvc.getAcceptedPaymentTypes($scope.model),$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes)}),userAlertSvc.show({title:"UserAlert_MaxCreditCardPaymentAttemptReached",message:"UserAlert_MaxCreditCardPaymentAttemptReached",actions:[userAlertSvc.commonActions.RedirectToCheckout]}),deferred.resolve(fault);else if(validateModelStateError("payment_declined",fault)&&-1<fault.data.ModelState.payment_declined[0].indexOf("payment_status_Declined")){var newKey="";if(1<fault.data.ModelState.payment_declined.length&&-1<fault.data.ModelState.payment_declined[1].indexOf("Credit card is expired.")&&(fault.data.ModelState.payment_declined.shift(),newKey=fault.data.ModelState.payment_declined[0].replace("payment_status_Declined","expiration_month_GreaterThanOrEqualError")),""!==newKey&&(fault.data.ModelState.payment_declined[0]=newKey),!hasZipError&&!hasCvvError){resetPayments();var errorMsg=_.isObject(fault.data.ModelState.payment_declined)?fault.data.ModelState.payment_declined[0]:"UserAlert_MaxCreditCardPaymentAttemptReached";userAlertSvc.show({title:"Payment_Declined_Alert_Title",message:errorMsg,actions:[userAlertSvc.commonActions.RedirectToCheckout]})}}else if(angular.isObject(fault)&&angular.isObject(fault.data)&&angular.isObject(fault.data.ModelState)){errorMsg=_.isObject(fault.data.ModelState.payments)?fault.data.ModelState.payments[0]:"Server_Exception_Message";onoAlert.show({title:"Server_Exception_Title",message:errorMsg,actions:[{name:"Ok",action:function(){$scope.enablePlaceOrder=!1}}]}),deferred.resolve(fault)}!0,deferred.reject(fault)})}),deferred.promise}return $scope.checkOut($scope.model.checkoutDetails)},$scope.changeLocation=function(){featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&$rootScope.featureFlags.layout.header?_.isUndefined($window.sessionStorage)||"Delivery"!==$window.sessionStorage.fulfillmentType?$state.go("pickup"):$state.go("delivery"):$state.go("restaurantSearch")},$scope.checkOut=function(checkoutDetails){if(checkoutDetails||(checkoutDetails=$scope.model.checkoutDetails),checkoutDetails.fulfillment_type=$scope.model.cart.order_setup.fulfillment_type,$scope.serviceTimeRangeLower=$scope.model.cart.order_setup.serviceTimeRangeLower,$scope.serviceTimeRangeUpper=$scope.model.cart.order_setup.serviceTimeRangeUpper,angular.isDefined($window.sessionStorage.SaveUserCreditCard)&&!0===$window.sessionStorage.SaveUserCreditCard){var creditCardPayment=_.find(checkoutDetails.payments,function(payment){return"CreditCard"===payment.payment_type});if(_.isObject(creditCardPayment.credit_card)&&angular.isUndefined(creditCardPayment.credit_card.id)||""===creditCardPayment.credit_card.id)return resetPayments(),void $state.go("checkout")}return gaSvc.getGAID().then(function(gaid){return checkoutDetails.ga_id=gaid,checkoutDetails}).then(cartSvc.placeOrder).then(function(confirmation){confirmation.order_details.serviceTimeRangeLower=$scope.serviceTimeRangeLower,confirmation.order_details.serviceTimeRangeUpper=$scope.serviceTimeRangeUpper,removeEventListeners(),checkoutSvc.confirmation=confirmation,$scope.removePayments(),$scope.orderPlaced=!0,customerSvc.customer&&customerSvc.customer.id&&orderHistorySvc.getOrderHistory(!0),checkoutSvc.confirmation.dineRewardsStatus="Unlinked",null!=$scope.model.dineRewardsAccount&&$scope.model.dineRewardsAccount.printedCardNumber&&(checkoutSvc.confirmation.dineRewardsStatus="Linked"),$rootScope.featureFlags.dineRewards.allowDineRewardsReviewAccountLink&&$scope.model.dineRewardsAccount&&$scope.model.dineRewardsAccount.printedCardNumber&&dinerewardsSvc.sendCheck(confirmation.order_details.check_number,confirmation.order_details.fulfillment_date,confirmation.order_details.restaurant_id,$scope.model.dineRewardsAccount.printedCardNumber).then(function(data){var cart;$log.info("DR: Check sent to track for a qualified visit."),$scope.model.dineRewardApplied="",$scope.model.dineRewardsAccount="",sessionManager.dineRewardsAccount&&sessionManager.remove("dineRewardsAccount"),cart=$scope.model.cart,angular.isObject(cart)&&(cart.loyalty_card_number="",angular.isObject(cart.order_setup)&&(cart.order_setup.loyalty_card_number="")),$log.info("DR: Account and applied rewards cleared.")},function(data){$log.error("DR: An error occurred when attempting to send the Check to track for a qualified visit.")}),$state.go("confirmation")})},$scope.$on("customer:changed",function(e,customer){removeEventListeners(),$state.reload(!0)}),$scope.$on("form:submitted",function(e,args){"checkoutDetailsForm"===args.formName&&e.stopPropagation()}),$scope.$on("$destroy",function(){removeEventListeners(),$scope.orderPlaced||cartSvc.updateFulfillmentDetails($scope.model.checkoutDetails)});var unloadListener=function(event){checkoutSvc.warnBeforeClearingPayments()&&(angular.isUndefined(event)&&(event=$window.event),event&&0<$scope.model.checkoutDetails.payments.length&&(event.returnValue="You will lose all of your unsaved changes."))},stateChangeOff=function(){},allowedParents=["checkoutLayout","checkout","giftCardLayout","creditCardLayout"];function resetPayments(){checkoutSvc.clearPayments($scope.model),cartSvc.getCartDetails().then(function(response){checkoutSvc.getAcceptedPaymentTypes($scope.model),$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes)})}function validateModelStateError(error,fault){return angular.isObject(fault)&&angular.isObject(fault.data)&&angular.isObject(fault.data.ModelState)&&angular.isDefined(fault.data.ModelState[error])}function getCreditCardPaymentId(){var payment=_.find($scope.model.checkoutDetails.payments,function(payment){return payment.payment_type===paymentMode_creditCard});return angular.isDefined(payment)?payment.$$hashKey:$state.go("checkout")}function removeEventListeners(){stateChangeOff(),$window.removeEventListener("beforeunload",unloadListener)}$state.params.paymentLocation&&$scope.model.total.eq($scope.model.balance)&&($scope.removePayments(),checkoutSvc.applyPayment($scope.createPayment("POD"),$scope.model)),$window.addEventListener("beforeunload",unloadListener,!1),stateChangeOff=$rootScope.$on("$stateChangeStart",function(e,toState,toParams,fromState,fromParams){if(checkoutSvc.warnBeforeClearingPayments()){var cart=cartSvc.viewCart();if(0===$scope.model.checkoutDetails.payments.length)return;if(-1!==allowedParents.indexOf(toState.parent))return;if(angular.isDefined(cart)&&!cart.id)return;e.preventDefault(),onoAlert.show({title:"PaymentsAdded_Alert_Title",message:"PaymentsAdded_Alert_Message",actions:[{name:"Ok",action:function(scope){stateChangeOff(),scope.hide(),$scope.removePayments(),$state.go(toState,toParams)}},{name:"Cancel",action:function(scope){scope.hide()}}]})}}),$timeout(function(){$location.hash("contactInfo"),$anchorScroll()})}]).controller("BP.checkoutCtrl",["$controller","$scope","$rootScope","$state","$window","cartSvc","customerSvc","userAlertSvc","onoAlert","$location","orderHistorySvc","checkoutSvc","creditCards",function($controller,$scope,$rootScope,$state,$window,cartSvc,customerSvc,userAlertSvc,onoAlert,$location,orderHistorySvc,checkoutSvc,creditCards){"use strict";$controller("checkoutCtrl",{$scope:$scope,creditCards:creditCards});"Pickup"===$scope.model.cart.order_setup.fulfillment_type&&onoAlert.show({dialogTemplateUrl:'"/web/app/dialog/confirmLocationAlert.html"',actions:[{name:"ChangeLocation",classes:"changeLocation",action:function(scope){scope.hide(),$state.go("selectPickupLocation")}},{name:"SendOrderHere",action:function(scope){scope.hide()}}]})}]),angular.module("ONO-Services").factory("checkoutSvc",["cartSvc","$window","tokenizationFeatureFlagsSvc",function(cartSvc,$window,tokenizationFeatureFlagsSvc){"use strict";var checkoutInfo,payments=[];function validatePaymentRules(availablePaymentTypes){var orderSetupData,restaurantRules=(orderSetupData=cartSvc.viewOrderSetup(),angular.isDefined(orderSetupData.accepted_payments)&&_.isArray(orderSetupData.accepted_payments)?orderSetupData.accepted_payments:[]),availablePaymentsArray=_.last(availablePaymentTypes),paymentsByType=_.countBy(payments,function(obj){return obj.payment_type});return _.forEach(restaurantRules,function(obj){"GiftCard"===obj.payment_type&&angular.isDefined(paymentsByType.GiftCard)&&paymentsByType.GiftCard>=obj.max_per_order&&(availablePaymentsArray=_.reject(availablePaymentsArray,function(type){return"GiftCard"===type})),"CreditCard"===obj.payment_type&&angular.isDefined(paymentsByType.CreditCard)&&paymentsByType.CreditCard>=obj.max_per_order&&(availablePaymentsArray=_.reject(availablePaymentsArray,function(type){return"CreditCard"===type}))}),availablePaymentTypes[availablePaymentTypes.length-1]=availablePaymentsArray,availablePaymentTypes}function updateBalance(model){var balance=Big(checkoutInfo.total);if(angular.isDefined(model.checkoutDetails)&&angular.isArray(model.checkoutDetails.payments))for(var i=0;i<model.checkoutDetails.payments.length;i++)balance=balance.minus(model.checkoutDetails.payments[i].amount);model.balance=balance}var checkoutSvc={paymentOptions:function(creditCards,acceptedPaymentTypes){return function(creditCards,acceptedPaymentTypes){var availablePayments=[],partiallyPaidByCreditCard=!1,availablePaymentOptions={creditCards:Enumerable.From(creditCards).Select(function(cc){return cc.type="CreditCard",cc}),acceptedPaymentTypes:acceptedPaymentTypes},currentPayments=Enumerable.From(payments);if(payments)for(var i=0;i<payments.length;i++)"CreditCard"===payments[i].payment_type&&(partiallyPaidByCreditCard=!0);var ccs=-1===acceptedPaymentTypes.indexOf("CreditCard")?null:availablePaymentOptions.creditCards.Where(function(cc){return!currentPayments.Any(function(payment){return"CreditCard"==payment.payment_type&&cc.id==payment.credit_card.id})}).ToArray();return null!=ccs&&tokenizationFeatureFlagsSvc.payWithTokenizedCardsEnabled()&&!partiallyPaidByCreditCard&&availablePayments.push(ccs),availablePayments.push(availablePaymentOptions.acceptedPaymentTypes),availablePayments=validatePaymentRules(availablePayments)}(creditCards,acceptedPaymentTypes)},payments:payments,createPayment:function(paymentType,balance){return{payment_type:paymentType,amount:parseFloat(balance.toFixed(2)),tip:Big(0)}},applyPayment:function(orderPayment,model){return!!(orderPayment&&model.balance.gte(orderPayment.amount)&&0<orderPayment.amount)&&(checkoutSvc.addPayment(orderPayment,model),!0)},addPayment:function(payment,model){payment&&0<payment.amount&&checkoutSvc.payments.push(payment),updateBalance(model)},removePayment:function(payment,model){for(var i=0;i<checkoutSvc.payments.length;i++)checkoutSvc.payments[i]===payment&&checkoutSvc.payments.splice(i,1);updateBalance(model)},clearPayments:function(model){checkoutSvc.payments.splice(0,checkoutSvc.payments.length),model&&updateBalance(model)},editPayment:function(id,model){if(id){var payment=_.find(checkoutSvc.payments,function(payment){return payment.$$hashKey===id});return payment?(checkoutSvc.removePayment(payment,model),payment):null}return null},updateCheckoutInfo:function(model){checkoutInfo=cartSvc.getCheckoutInfo(),angular.extend(model.checkoutDetails||{},checkoutInfo.checkoutDetails),model.balance=Big(checkoutInfo.balance),model.total=Big(checkoutInfo.total),model.acceptedPaymentTypes=checkoutInfo.acceptedPaymentTypes,model.allowTips=checkoutInfo.fulfillmentTypeInfo.allow_tips,model.maxPayments=checkoutInfo.maxPayments,model.orderValid=checkoutInfo.orderValid,angular.isObject(model.checkoutDetails)&&(model.checkoutDetails.payments=checkoutSvc.payments),updateBalance(model)},getAcceptedPaymentTypes:function(model){model.acceptedPaymentTypes=cartSvc.getAcceptedPaymentTypes()},getBinRange:function(cardNumber){var binRanges=cartSvc.viewCart().restaurant.bin_ranges,invalidBinRange={require_pin:!1,permit:!1},validBinRange={require_pin:!1,permit:!0};if(!cardNumber)return invalidBinRange;if(0==binRanges.length)return validBinRange;var atLeastOnePermitted=!1,result=invalidBinRange;return binRanges.forEach(function(br){br.permit&&(atLeastOnePermitted=!0),null!=br.card_length&&br.card_length!==cardNumber.length||0!==cardNumber.indexOf(br.bin)||(result=br)}),atLeastOnePermitted?result:validBinRange},warnBeforeClearingPayments:function(){for(var i=0;i<checkoutSvc.payments.length;i++){var payment=checkoutSvc.payments[i];if("CreditCard"===payment.payment_type||"GiftCard"===payment.payment_type)return!0}return!1},confirmation:null};return checkoutSvc}]),angular.module("ONO-Check-Support",[]).controller("paymentCheckCtrl",["$scope","$stateParams","domainEventSvc",function($scope,$stateParams,domainEventSvc){var id=$stateParams.id,original=null;id?(original=$scope.getPayment(id),$scope.payment=angular.copy(original)):($scope.payment=$scope.createPayment("Check"),domainEventSvc.raiseEvent("onPaymentTypeSelected",$scope.payment.payment_type)),$scope.setPayment=function(){$scope.applyPayment($scope.payment)},$scope.$on("cancelPayment",function(e){$scope.applyPayment(original)})}]),angular.module("ONO-Base-UI").controller("paymentCreditCardCtrl",["$scope","$state","$stateParams","cart","creditCardSvc","values","creditCards","addresses","domainEventSvc","$sce","aurusSvc","customerSvc","$window","accountSvc","restaurantSvc","onoSiteMap","sessionManager","aurusSessionTimer","onoAlert","tokenizationFeatureFlagsSvc",function($scope,$state,$stateParams,cart,creditCardSvc,values,creditCards,addresses,domainEventSvc,$sce,aurusSvc,customerSvc,$window,accountSvc,restaurantSvc,onoSiteMap,sessionManager,aurusSessionTimer,onoAlert,tokenizationFeatureFlagsSvc){var ctrl=this;$scope.credit_card_types=cart.restaurant.accepted_credit_cards,$scope.creditCards=creditCards,$scope.addresses=addresses,$scope.removeCreditCard=creditCardSvc.removeCreditCard,$scope.card_type_mask="",$scope.card_type_cvv_mask="",$scope.months=Enumerable.Range(1,12).ToArray(),$scope.years=Enumerable.Range((new Date).getFullYear(),36,1).ToArray(),$scope.customerId=customerSvc.customer?customerSvc.customer.id:null,$scope.checkboxModel={saveCard:!1},$scope.saveCreditCard=function(){$scope.step="totals"},$scope.cardSelected=function(){$scope.step="totals"},$scope.setSelectedMonth=function(month){$scope.payment.credit_card.expiration_month=month},$scope.setSelectedYear=function(year){$scope.payment.credit_card.expiration_year=year},$scope.ShowOneTimePayment=tokenizationFeatureFlagsSvc.isOneTimeTokenizedPaymentsEnabled(),$scope.ShowOneTimeSaveCardOption=tokenizationFeatureFlagsSvc.isOneTimeTokenizedPaymentsEnabled()&&tokenizationFeatureFlagsSvc.savingCreditCardsEnabled(),$scope.ShowOneTimePayment&&(getAurusSession(),domainEventSvc.addHandler({onAurusSessionTimeOut:function(){aurusSessionTimer.stopTimer(),getAurusSession()}}));var original=null;this.setCountryValidation=function(selectedCountry){if(selectedCountry){var c=countriesEnumerable.FirstOrDefault({},function(country){return country.Key===selectedCountry}).Value;c&&($scope.zipCodeLength=c.ZipMask.length,$scope.zipCodeValidation=c.ZipCodeValidation,$scope.phoneMask=c.PhoneNumberMask,$scope.model.values.states=c.States)}},$scope.cardTypeChanged=function(cardType){var cardTypeMask=creditCardSvc.getCardTypeMask(cardType);$scope.card_type_mask=cardTypeMask.mask,$scope.card_type_cvv_mask=cardTypeMask.cvv_mask},this.initialize=function(id){var year,firstTwoDigitsOfYear,country=$scope.model.values.countries[0].Key;if(id)if(original=$scope.getPayment(id))$scope.payment=angular.copy(original),$scope.payment.credit_card.one_time_token=null,$scope.selectedMonth=parseInt($scope.payment.credit_card.expiration_month),$scope.selectedYear=parseInt((year=$scope.payment.credit_card.expiration_year,firstTwoDigitsOfYear=(new Date).getFullYear().toString().substring(0,2),year&&2===year.toString().length?firstTwoDigitsOfYear+year.toString():year)),$scope.formatCardType(),$scope.step="editCreditCard";else{for(var card,i=0;i<$scope.creditCards.length;i++)if($scope.creditCards[i].id==id){card=$scope.creditCards[i];break}card&&(card.country=country,card.billing_address=card.billing_address||{},card.billing_address.country=country,$scope.selectCreditCard(card))}else $scope.payment=$scope.createPayment("CreditCard"),$scope.payment.credit_card={country:country,billing_address:{country:country},expiration_month:$scope.months[0],expiration_year:$scope.years[0]},domainEventSvc.raiseEvent("onPaymentTypeSelected",$scope.payment.payment_type),$scope.step="editCreditCard";$scope.cardTypeChanged($scope.payment.credit_card.card_type)};var countriesEnumerable=Enumerable.From(values.Countries);function getAurusSession(){creditCardSvc.getAurusSession().then(function(session){var iFrameUrl,extracts;"APPROVAL"===session.responseText&&($scope.aurusSession={sessionId:session.sessionId,iframeUrl:$sce.trustAsResourceUrl(session.iFrameUrl),aurusUrl:(iFrameUrl=session.iFrameUrl,extracts=iFrameUrl.split("://"),url=extracts[0]+"://"+extracts[1].split("/")[0])},aurusSessionTimer.initTimer())})}return $scope.model.values.countries=countriesEnumerable.ToArray(),$scope.setPayment=function(){$scope.formatCardType(),$scope.applyPayment($scope.payment)},$scope.$on("cancelPayment",function(e){$scope.payment.credit_card&&($scope.payment.credit_card.billing_address=null),$scope.applyPayment($scope.editingPayment),$scope.editingPayment=void 0}),$scope.$watch("payment.credit_card.billing_address.country",function(){$scope.payment.credit_card&&$scope.payment.credit_card.billing_address&&($scope.payment.credit_card.country=$scope.payment.credit_card.billing_address.country),$scope.payment.credit_card&&$scope.payment.credit_card.billing_address&&ctrl.setCountryValidation($scope.payment.credit_card.billing_address.country)}),$scope.$watch("payment.credit_card.country",function(){$scope.payment.credit_card&&ctrl.setCountryValidation($scope.payment.credit_card.country)}),$scope.editCreditCard=function(creditCard){$scope.payment.credit_card=angular.copy(creditCard),$scope.step="editCreditCard"},$scope.selectCreditCard=function(creditCard){$scope.payment=$scope.createPayment("CreditCard"),$scope.payment.credit_card=creditCard,$scope.cardSelected()},$scope.formatCardType=function(){$scope.formattedCardType=creditCardSvc.transformCardType($scope.payment.credit_card.card_type),$scope.payment.credit_card.card_type=$scope.formattedCardType},$scope.setCardDetails=function(creditCard){$scope.payment.credit_card=creditCard.creditCard,$scope.formatCardType(),$scope.cardTypeChanged($scope.payment.credit_card.card_type),$scope.saveCardOption(),$scope.cardSelected(),$scope.$apply()},$scope.editBillingAddress=function(address){$scope.payment.credit_card.billing_address=angular.copy(address),!$scope.payment.credit_card.billing_address.country&&$scope.model.values.countries&&($scope.payment.credit_card.billing_address.country=$scope.model.values.countries[0].Key),$scope.step="editBillingAddress"},$scope.selectBillingAddress=function(address){$scope.payment.credit_card.billing_address=address,$scope.step="totals"},$scope.saveBillingAddress=function(){$scope.step="totals"},$scope.goToTotals=function(){$scope.payment.credit_card&&$scope.cardTypeChanged($scope.payment.credit_card.card_type),$scope.step="totals"},$scope.refreshAurusToken=function(){getAurusSession()},$scope.submitAurusIframe=function(){aurusSvc.getCardToken($scope.aurusSession.aurusUrl)},$scope.saveCardOption=function(){var cardId=null;$window.sessionStorage.SaveUserCreditCard=!1,$scope.customerId&&""!==$scope.customerId&&$scope.checkboxModel.saveCard&&($window.sessionStorage.SaveUserCreditCard=!0,creditCardSvc.upsertCreditCard($scope.payment.credit_card).then(function(response){cardId=angular.fromJson(response),$scope.payment.credit_card.id=cardId},function(response){var errorItem=angular.fromJson(response.data);errorItem&&errorItem.error&&"card_already_exists"===errorItem.error?(cardId=errorItem.id,$scope.payment.credit_card.id=cardId,creditCardSvc.upsertCreditCard($scope.payment.credit_card)):onoAlert.show({title:"Server_Exception_Payments_Title",message:"Server_Exception_Payments_Message",actions:[{name:"Close",action:function(scope){scope.hide(),ctrl.initialize($stateParams.id)}}]})}))},ctrl.initialize($stateParams.id),ctrl}]),angular.module("ONO-GiftCard-Support",[]).controller("paymentGiftCardCtrl",["$scope","$stateParams","$state","cartSvc","checkoutSvc","domainEventSvc","userAlertSvc","featureFlagSvc","creditCards",function($scope,$stateParams,$state,cartSvc,checkoutSvc,domainEventSvc,userAlertSvc,featureFlagSvc,creditCards){var original=null;return featureFlagSvc.getFeatureFlags("status",["layout","giftCardPinNumber"]).then(function(data){$scope.showPin=data}),$scope.saveGiftCard=function(){var giftCardExists=!1;if($scope.model.checkoutDetails&&$scope.model.checkoutDetails.payments&&0<$scope.model.checkoutDetails.payments.length){var giftCardPayment=_.find($scope.model.checkoutDetails.payments,function(payment){return"GiftCard"===payment.payment_type&&payment.gift_card.card_number===$scope.payment.gift_card.card_number});giftCardExists=angular.isDefined(giftCardPayment)}if(!giftCardExists)return cartSvc.checkBalance($scope.payment).then(function(){$scope.applyPayment($scope.payment)},function(fault){if(fault&&fault.data&&fault.data.ModelState.max_gift_card_check_balance_attempts_reached)checkoutSvc.clearPayments($scope.model),checkoutSvc.addPayment(checkoutSvc.createPayment("POD",$scope.model.balance),$scope.model),_.reject($scope.model.acceptedPaymentTypes,function(string){return"GiftCard"===string}),$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes),userAlertSvc.show({title:"UserAlert_MaxGiftCardPaymentAttemptReached",message:"UserAlert_MaxGiftCardPaymentAttemptReached",actions:[userAlertSvc.commonActions.Dismiss]}),$state.go("checkout");else{if(!(_.isObject(fault.data)&&_.isObject(fault.data.ModelState)&&_.isArray(fault.data.ModelState.gift_card)&&"invalid_gift_card_bin_range"===_.first(fault.data.ModelState.gift_card)))throw fault;checkoutSvc.clearPayments($scope.model),$scope.model.paymentOptions=checkoutSvc.paymentOptions(creditCards,$scope.model.acceptedPaymentTypes),userAlertSvc.show({title:"UserAlert_InvalidGiftCardBinRange",message:"UserAlert_InvalidGiftCardBinRange",actions:[userAlertSvc.commonActions.Dismiss]}),$state.go("checkout")}});userAlertSvc.show({title:"UserAlert_GiftCardAlreadyInUseTitle",message:"UserAlert_GiftCardAlreadyInUseMessage",actions:[userAlertSvc.commonActions.Dismiss]}),$state.go("checkout")},$scope.$on("cancelPayment",function(){$scope.applyPayment(original)}),this.initialize=function(id){id?(original=$scope.getPayment(id))&&($scope.payment=angular.copy(original),original.gift_card.id?$scope.goToTotals():$scope.step="editGiftCard"):($scope.payment=$scope.createPayment("GiftCard"),domainEventSvc.raiseEvent("onPaymentTypeSelected",$scope.payment.payment_type),$scope.step="editGiftCard")},this.initialize($stateParams.id),this}]),angular.module("ONO-HouseAccount-Support",[]).controller("paymentHouseAccountCtrl",["$scope","$stateParams","domainEventSvc",function($scope,$stateParams,domainEventSvc){var id=$stateParams.id,original=null;id?(original=$scope.getPayment(id),$scope.payment=angular.copy(original)):($scope.payment=$scope.createPayment("HouseAccount"),domainEventSvc.raiseEvent("onPaymentTypeSelected",$scope.payment.payment_type)),$scope.setPayment=function(){$scope.applyPayment($scope.payment)},$scope.$on("cancelPayment",function(e){$scope.applyPayment(original)})}]),angular.module("ONO-Other-Support",[]).controller("paymentOtherCtrl",["$scope","$stateParams","domainEventSvc",function($scope,$stateParams,domainEventSvc){var id=$stateParams.id,original=null;id?(original=$scope.getPayment(id),$scope.payment=angular.copy(original)):($scope.payment=$scope.createPayment("Other"),domainEventSvc.raiseEvent("onPaymentTypeSelected",$scope.payment.payment_type)),$scope.setPayment=function(){$scope.applyPayment($scope.payment)},$scope.$on("cancelPayment",function(e){$scope.applyPayment(original)}),1===$scope.model.maxPayments&&$scope.setPayment()}]),angular.module("ONO-POD-Support",[]).controller("paymentPODCtrl",["$scope","$stateParams","domainEventSvc",function($scope,$stateParams,domainEventSvc){var id=$stateParams.id,original=null;id?(original=$scope.getPayment(id),$scope.payment=angular.copy(original)):($scope.payment=$scope.createPayment("POD"),domainEventSvc.raiseEvent("onPaymentTypeSelected",$scope.payment.payment_type)),$scope.setPayment=function(){$scope.applyPayment($scope.payment)},$scope.$on("cancelPayment",function(e){$scope.applyPayment(original)}),1===$scope.model.maxPayments&&$scope.setPayment()}]),angular.module("ONO-Base-UI").controller("paymentTipCalculatorCtrl",["$scope",function($scope){$scope.payment.tip=0,$scope.leaveTip=0<$scope.payment.tip,$scope.updateTip=function(tipAsString){if(_.isNull(tipAsString))$scope.payment.tip=0;else{var tipAsPercent=parseFloat("."+tipAsString.replace("%","")),totalPayment=$scope.model.cart.totals.grand_total+$scope.model.cart.totals.discount_amount,tipAmount=Math.abs(totalPayment*tipAsPercent);$scope.payment.tip=function(tipAmount){return Number(tipAmount.toFixed(2))}(tipAmount)}},$scope.clearTip=function(){$scope.payment.tip=0,$scope.tipPercent=null}}]),angular.module("ONO-Base-UI").controller("orderConfirmationCtrl",["$window","$rootScope","$scope","$state","$http","checkoutSvc","stateRedirect","domainEventSvc","sessionManager","$log","restaurantSvc","featureFlagSvc","translationSvc",function($window,$rootScope,$scope,$state,$http,checkoutSvc,stateRedirect,domainEventSvc,sessionManager,$log,restaurantSvc,featureFlagSvc,translationSvc){"use strict";$scope.paymentModeText={payAtRestaurant:translationSvc.translate("PayAtRestaurant"),payOnline:translationSvc.translate("PayOnline")},$scope.model.confirmation=checkoutSvc.confirmation,$scope.model.customer=sessionManager.customer(),$scope.address=$scope.model.confirmation&&$scope.model.confirmation.restaurant_address?$scope.model.confirmation.restaurant_address:null,$scope.address.name=$scope.model.confirmation&&$scope.model.confirmation.restaurant_name?$scope.model.confirmation.restaurant_name:null,$scope.model.cart=_.isObject($scope.model.confirmation)&&_.isObject($scope.model.confirmation)&&angular.isDefined($scope.model.confirmation.order_details)?$scope.model.confirmation.order_details:null,$scope.model.cart.order_items=_.isObject($scope.model.confirmation)&&_.isObject($scope.model.confirmation.order_details)&&angular.isDefined($scope.model.confirmation.order_details.order_items)?$scope.model.confirmation.order_details.order_items:null,$scope.model.cart.totals=_.isObject($scope.model.confirmation)&&_.isObject($scope.model.confirmation.order_details)&&angular.isDefined($scope.model.confirmation.order_details.totals)?$scope.model.confirmation.order_details.totals:null,$scope.model.cart.setup_complete=!0,angular.isDefined($window.sessionStorage.getItem("reorderConfig"))&&$window.sessionStorage.removeItem("reorderConfig");var resturantId=$scope.model.confirmation.order_details.restaurant_id;$scope.curbsideUnavailable=!1,$scope.dineRewardsUrl=$window.DineRewardsUrl,$scope.ctaViewOrder=!1,$scope.opinionLabSurveyOnConfirmationPage=!1,resturantId&&restaurantSvc.getRestaurant(resturantId).then(function(restaurant){$scope.curbsideUnavailable=restaurant.isPickUpOnly,$scope.model.cart.restaurant=restaurant}),angular.isUndefined($rootScope.loggedIn)?$scope.loggedIn=0:$scope.loggedIn=$rootScope.loggedIn,$scope.model.confirmation||$state.go(stateRedirect),featureFlagSvc.getFeatureFlags("root",[["layout","opinionLabSurveyOnConfirmationPage"],["ctaViewOrder"]]).then(function(data){angular.isObject(data)&&($scope.ctaViewOrder=featureFlagSvc.featureFlagExists(data,"ctaViewOrder")&&data.ctaViewOrder,$scope.opinionLabSurveyOnConfirmationPage=featureFlagSvc.featureFlagExists(data,"layout","opinionLabSurveyOnConfirmationPage")&&data.layout.opinionLabSurveyOnConfirmationPage)});var paymentType,orderEventDetails={firstName:$scope.model.confirmation.order_details.fulfillment_details.first_name,lastName:$scope.model.confirmation.order_details.fulfillment_details.last_name,email:$scope.model.confirmation.order_details.fulfillment_details.email,phone:$scope.model.confirmation.order_details.fulfillment_details.phone,orderId:$scope.model.confirmation.order_id,orderNumber:$scope.model.confirmation.order_number,orderDateTime:$scope.model.confirmation.order_details.fulfillment_date,orderSubTotal:$scope.model.confirmation.order_details.totals.subtotal,orderType:$scope.model.confirmation.order_details.fulfillment_type,paymentType:(paymentType=_.find($scope.model.confirmation.order_details.totals.payments,function(item){return item.payment_type.toLowerCase()!==$scope.paymentModeText.payAtRestaurant.toLowerCase()}),angular.isUndefined(paymentType)?$scope.paymentModeText.payAtRestaurant:$scope.paymentModeText.payOnline),restaurantId:$scope.model.confirmation.order_details.restaurant_id,restaurantName:$scope.model.confirmation.restaurant_name,customerId:$scope.loggedIn?$scope.model.customer.id:null};domainEventSvc.raiseEvent("onPlaceOrder",orderEventDetails),domainEventSvc.raiseEvent("onOrderPlaced",$scope.model.confirmation),domainEventSvc.raiseEvent("onClearCart",$scope.model.confirmation),$scope.confirmationRegister=function(){$scope.showDialog("account.register")},$scope.confirmationTakeSurvey=function(){$window.OOo.oo_launch(event,"oo_feedback")},$http({method:"GET",url:"/Home/ShowDineRewardsModule"}).then(function(response){$scope.isDineRewardsModuleAvailable=response.data},function(response){$log.error("ERROR: ",response)}),$scope.$on("user:loggedIn",function(){$scope.loggedIn=!0}),$scope.$on("user:loggedOut",function(){$scope.loggedIn=!1})}]),angular.module("ONO-Base-UI").controller("creditCardEditCtrl",["$scope","$state","creditCardSvc","creditCard","onoAlert","$sce","aurusSvc","aurusSessionTimer","domainEventSvc",function($scope,$state,creditCardSvc,creditCard,onoAlert,$sce,aurusSvc,aurusSessionTimer,domainEventSvc){var year,firstTwoDigitsOfYear;function getAurusSession(){creditCardSvc.getAurusSession().then(function(session){var iFrameUrl,extracts;"APPROVAL"==session.responseText&&($scope.aurusSession={sessionId:session.sessionId,iframeUrl:$sce.trustAsResourceUrl(session.iFrameUrl),aurusUrl:(iFrameUrl=session.iFrameUrl,extracts=iFrameUrl.split("://"),url=extracts[0]+"://"+extracts[1].split("/")[0])},aurusSessionTimer.initTimer())})}function lPad(number){return("0"+number).slice(-2)}$scope.months=_.map(Enumerable.Range(1,12).ToArray(),function(mo){return lPad(mo)}),$scope.years=Enumerable.Range((new Date).getFullYear(),36,1).ToArray(),$scope.creditCard=creditCard,$scope.selectedMonth=lPad($scope.creditCard.expiration_month),$scope.selectedYear=parseInt((year=$scope.creditCard.expiration_year,firstTwoDigitsOfYear=(new Date).getFullYear().toString().substring(0,2),year&&2===year.toString().length?firstTwoDigitsOfYear+year.toString():year)),domainEventSvc.addHandler({onAurusSessionTimeOut:function(){aurusSessionTimer.stopTimer(),getAurusSession()}}),getAurusSession(),$scope.refreshAurusToken=function(){getAurusSession()},$scope.submitAurusIframe=function(){aurusSvc.getCardToken($scope.aurusSession.aurusUrl)},$scope.saveCreditCard=function(response){var creditCard=angular.isUndefined(response.creditCard)?response:response.creditCard;function displayErrorAlert(errorTitle,errorMessage){onoAlert.show({title:errorTitle,message:errorMessage,actions:[{name:"Ok",action:function(scope){scope.hide(),$state.go("creditCards",{},{reload:!0})}}]})}null!=creditCard.id&&$scope.$invalid||($scope.$invalid=!1,$scope.$formErrors=[],$scope.creditCard.expiration_month=$scope.selectedMonth,$scope.creditCard.expiration_year=$scope.selectedYear,creditCardSvc.upsertCreditCard(creditCard).then(function(){$state.go("creditCards",{},{reload:!0})},function(error){var errorItem=angular.fromJson(error.data);if(errorItem&&errorItem.error&&"card_already_exists"===errorItem.error)displayErrorAlert("Card_Already_Exists_Alert_Title","Card_Already_Exists_Alert_Message");else{if(!errorItem||"invalid_credit_card"!==errorItem.error)throw error;displayErrorAlert("Invalid_Credit_Card_Alert_Title","Invalid_Credit_Card_Alert_Messages")}}))}}]),angular.module("ONO-Base-UI").controller("creditCardListCtrl",["$scope","creditCardSvc","creditCards","featureFlagSvc",function($scope,creditCardSvc,creditCards,featureFlagSvc){$scope.creditCards=_.map(creditCards,function(creditCard){return _.extend(creditCard,{expiration_year:moment(creditCard.expiration_year,"YYYY").format("YY"),expiration_month:moment(creditCard.expiration_month,"MM").format("MM")})}),$scope.removeCreditCard=function(creditCard){creditCardSvc.removeCreditCard(creditCard).then(function(){var index=$scope.creditCards.indexOf(creditCard);$scope.creditCards.splice(index,1)})}}]),angular.module("ONO-Services").factory("creditCardSvc",["$rootScope","$http","$parse","$q","customerSvc",function($rootScope,$http,$parse,$q,customerSvc){"use strict";var resource_getCreditCards=function(customerId){return $http({method:"GET",url:"/api/customer/"+customerId+"/credit_cards"}).then(function(response){return response.data.forEach(function(creditCard){creditCard.card_type=transformCardType(creditCard.card_type)}),response.data})},resource_getCreditCard=function(customerId,creditCardId){return $http({method:"GET",url:"/api/customer/"+customerId+"/credit_card/"+creditCardId}).then(function(response){return response.data.formattedCardType=transformCardType(response.data.card_type),response.data})},resource_deleteCreditCard=function(customerId,creditCardId){return $http({method:"DELETE",url:"/api/customer/"+customerId+"/credit_card/"+creditCardId}).then(function(response){return response.data})},resource_createCreditCard=function(customerId,postData){return $http({method:"POST",url:"/api/customer/"+customerId+"/credit_card",data:postData,transformResponse:function(res){return null!=res&&0<res.indexOf("error:")?{id:$parse(res)({})}:res}}).then(function(response){return response.data})},resource_updateCreditCard=function(customerId,postData){return postData.one_time_token=postData.id,$http({method:"PUT",url:"/api/customer/"+customerId+"/credit_card",data:postData}).then(function(response){return response.data})},resource_getAurusSession=function(){return $http({method:"POST",url:"/api/tokenization/session",data:{conceptId:1}}).then(function(response){return response.data})};$rootScope.$on("customer:changed",function(e,customer){customerId=customer?customer.id:null});var customerId=customerSvc.customer?customerSvc.customer.id:null;function fulfilledPromise(val){var empty=$q.defer();return empty.resolve(val),empty.promise}function transformCardType(cardTypeCode){var formattedCardType;switch(cardTypeCode){case"VIC":formattedCardType="Visa";break;case"MCC":formattedCardType="Master Card";break;case"AXC":formattedCardType="American Express";break;case"DCC":formattedCardType="Diners Club";break;case"NVC":formattedCardType="Discover";break;case"JBC":formattedCardType="JCB";break;case"XXC":formattedCardType="Invalid";break;case"GCC":formattedCardType="Gift";break;case"DBD":formattedCardType="Debit";break;case"VID":formattedCardType="Visa Debit";break;case"MCD":formattedCardType="Master Debit";break;case"VIP":formattedCardType="Visa Prepaid";break;case"MCP":formattedCardType="Master Prepaid";break;case"AXP":formattedCardType="American Express Prepaid";break;case"DCP":formattedCardType="Diners Club Prepaid";break;case"NVP":formattedCardType="Discover Prepaid";break;case"JCP":formattedCardType="JCB Prepaid";break;default:formattedCardType=cardTypeCode}return formattedCardType}return{getCreditCards:function(){return customerId?resource_getCreditCards(customerId):fulfilledPromise([])},getCreditCard:function(creditCardId){return customerId?resource_getCreditCard(customerId,creditCardId):fulfilledPromise(null)},upsertCreditCard:function(creditCard){return customerId?creditCard.id?function(creditCard){return resource_updateCreditCard(customerId,creditCard)}(creditCard):function(creditCard){return resource_createCreditCard(customerId,creditCard)}(creditCard):fulfilledPromise(null)},removeCreditCard:function(creditCard){return customerId?resource_deleteCreditCard(customerId,creditCard.id):fulfilledPromise(null)},getCardTypeMask:function(card_type){return function(card_type){var cardTypeMask={mask:"#### #### #### ####",cvv_mask:"###"};return"Amex"==card_type||"American Express"==card_type?(cardTypeMask.mask="#### ###### #####",cardTypeMask.cvv_mask="####"):"DinersClub"==card_type||"Diners Club"==card_type?cardTypeMask.mask="#### #### #### ##":"Laser"==card_type&&(cardTypeMask.mask="#### #### #### #######"),cardTypeMask}(card_type)},getAurusSession:function(){return resource_getAurusSession()},transformCardType:function(cardTypeCode){return transformCardType(cardTypeCode)}}}]),angular.module("ONO-Base-UI").controller("customerEditCtrl",["$scope","customerSvc","accountSvc","values","onoAlert","translationSvc","customer",function($scope,customerSvc,accountSvc,values,onoAlert,translationSvc,customer){$scope.values={},$scope.customer=angular.extend($scope.$new(!0),customer),$scope.phoneMask=null;var countriesEnumerable=Enumerable.From(values.Countries);$scope.values.countries=countriesEnumerable.ToArray();var currentCountry=countriesEnumerable.First(function(c){return null==$scope.customer.country||c.Key==$scope.customer.country});$scope.customer.country=currentCountry,1==countriesEnumerable.Count()&&($scope.customer.country=countriesEnumerable.First()),$scope.$watch("customer.country",function(){var countryCode=$scope.customer.country;if(countryCode){var c=countriesEnumerable.FirstOrDefault({},function(country){return country.Key===countryCode}).Value;c&&($scope.phoneMask=c.PhoneNumberMask)}}),$scope.customerFormSubmit=function(){var customer={email:$scope.customer.email,first_name:$scope.customer.first_name,gender:$scope.customer.gender,id:$scope.customer.id,last_name:$scope.customer.last_name,phone:$scope.customer.phone,allow_sms:$scope.customer.allow_sms,sms_number:$scope.customer.sms_number,interests:$scope.customer.interests,username:$scope.customer.username,loyalty_card_number:$scope.customer.loyalty_card_number,country:$scope.customer.country.Key,date_created:$scope.customer.date_created,cig_get_news_letters:$scope.customer.cig_get_news_letters,obs_get_news_letters:$scope.customer.obs_get_news_letters,delivery_address:$scope.customer.delivery_address};return customerSvc.updateCustomer(customer)},$scope.closeAccount=function(){onoAlert.show({title:translationSvc.translate("CloseAccount_Alert_Title"),message:translationSvc.translate("CloseAccount_Alert_Message"),actions:[{name:"Ok",action:function(alertScope){accountSvc.getAccount().then(function(account){accountSvc.closeAccount(account.id).then(function(){accountSvc.logout(),alertScope.$emit("done")})})}},{name:"Cancel",action:function(alertScope){alertScope.$emit("done")}}],acknowledge:!0})}}]),angular.module("ONO-Services").factory("customerSvc",["$http","$rootScope","$q","sessionManager","accountSvc","Restaurant","domainEventSvc","pushSvc",function($http,$rootScope,$q,sessionManager,accountSvc,Restaurant,domainEventSvc,pushSvc){"use strict";var resource={getRecentRestaurants:function(customerId){var config={method:"GET",url:"/api/customer/"+customerId+"/recent_restaurants",transformResponse:Restaurant.transformArray};return $http(config).then(function(response){return response.data})},getFavoriteRestaurants:function(customerId){var config={method:"GET",url:"/api/customer/"+customerId+"/favorite_restaurants",transformResponse:Restaurant.transformArray};return $http(config).then(function(response){return response.data})},getCustomerById:function(customerId){return $http({method:"GET",url:"/api/customer/"+customerId}).then(function(response){return response.data})},updateCustomer:function(customerId,postData){return $http({method:"PUT",url:"/api/customer/"+customerId,data:postData}).then(function(response){return response.data})}};$rootScope.$on("user:loggedIn",function(e,auth){customerSvc.setCustomerId(auth.account_id)}),$rootScope.$on("user:loggedOut",function(){customerSvc.setCustomerId(null)});var map={customer:"getCustomerById",favoriteRestaurants:"getFavoriteRestaurants",recentRestaurants:"getRecentRestaurants"},customerDetails=angular.extend($rootScope.$new(),{customer:{},favoriteRestaurants:[],recentRestaurants:[]});function setupPromise(name,forceRefresh){var deferred=$q.defer(),customerId=customerSvc.customer?customerSvc.customer.id:null;customerId&&!customerDetails[name].length||forceRefresh?resource[map[name]](customerId).then(function(response){customerDetails[name]=response,deferred.resolve(customerDetails[name])},function(reason){deferred.resolve(null)}):customerDetails[name]?deferred.resolve(customerDetails[name]):deferred.reject("user is not logged in");return deferred.promise}function getPropertyValuePromise(name){var promise=customerSvc.load(name),deferred=$q.defer();return promise.then(function(){deferred.resolve(customerDetails[name])},function(reason){deferred.reject(reason)}),deferred.promise}function notifyCustomerChanged(){$rootScope.$broadcast("customer:changed",customerSvc.customer)}var customerSvc={load:function(attrs,forceRefresh){for(var array=attrs.split(" "),i=0;i<array.length;i++)array[i]=setupPromise(array[i],forceRefresh);return $q.all(array)},customer:{},setCustomerId:function(customerId){customerId?resource.getCustomerById(customerId).then(function(response){if(angular.isUndefined(response)||_.isNull(response))sessionManager.customer({}),customerSvc.customer={},customerDetails=angular.extend($rootScope.$new(),{customer:{},favoriteRestaurants:[],recentRestaurants:[]}),notifyCustomerChanged();else{customerSvc.customer=response,sessionManager.customer({id:customerId});var accountDetails={email:customerSvc.customer.email,phone:customerSvc.customer.phone,firstName:customerSvc.customer.first_name,lastName:customerSvc.customer.last_name};domainEventSvc.raiseEvent("onSignedIntoAccount",accountDetails),notifyCustomerChanged()}}):(sessionManager.customer({}),customerSvc.customer={},customerDetails=angular.extend($rootScope.$new(),{customer:{},favoriteRestaurants:[],recentRestaurants:[]}),notifyCustomerChanged())},getCustomer:function(){return getPropertyValuePromise("customer")},updateCustomer:function(customer){var updatedCustomer=resource.updateCustomer(customerSvc.customer.id,customer);return $rootScope.$broadcast("user:updated",customer),updatedCustomer},getFavoriteRestaurants:function(){var deferred=$q.defer();(customerSvc.customer?customerSvc.customer.id:null)?resource.getFavoriteRestaurants(customerSvc.customer.id).then(function(restaurants){for(var i=0;i<restaurants.length;i++)restaurants[i].is_favorite=!0;deferred.resolve(restaurants)},function(reason){deferred.resolve(null)}):deferred.resolve(null);return deferred.promise},getRecentRestaurants:function(){return getPropertyValuePromise("recentRestaurants")}};(angular.isUndefined($rootScope.loggedIn)||!1===$rootScope.loggedIn)&&sessionManager.customer({}),customerSvc.customer=sessionManager.customer()||{};var id=customerSvc.customer.id||accountSvc.user.account_id;return customerSvc.setCustomerId(id),customerSvc}]),angular.module("ONO-Base-UI").directive("onoAlertBox",["onoAlert","$document","$timeout",function(onoAlert,$document,$timeout){return{restrict:"A",link:function(scope,el){var disabledHandle,focusedElementBeforeDialogOpened;onoAlert.setParent(el,scope);var disableHandlers=[];function focusHandler(){var tabbable=$(":tabbable",$(el)),firstFocusable=$(":tabbable",$(el).find(".dialogBody")).first(),firstInput=tabbable.first(),lastInput=tabbable.last();firstFocusable.focus(),lastInput.on("keydown",function(e){9!=e.which||e.shiftKey||(e.preventDefault(),firstInput.focus())}),firstInput.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),lastInput.focus())})}scope.$on("alertShown",function(){focusedElementBeforeDialogOpened=$document[0].activeElement,disabledHandle=ally.maintain.disabled({filter:el}),disableHandlers.push(disabledHandle),$timeout(function(){-1<$(el).html().indexOf("ngInclude")?scope.$on("$includeContentLoaded",focusHandler):focusHandler()},1e3)}),scope.$on("alertClosed",function(){0<disableHandlers.length&&disableHandlers.pop(disabledHandle).disengage();focusedElementBeforeDialogOpened&&(focusedElementBeforeDialogOpened.focus(),focusedElementBeforeDialogOpened=null)})}}}]).controller("onoAlertCtrl",["$scope","cartSvc",function($scope,cartSvc){$scope.els={},$scope.height=0,$scope.addHeight=function(el,height){$scope.els[el]=height},$scope.$watch("els",function(){for(var i in $scope.height=0,$scope.els)$scope.els.hasOwnProperty(i)&&($scope.height+=$scope.els[i])},!0),$scope.gotoOrderSetup=function(){cartSvc.getRestaurant().then(function(rest){rest&&cartSvc.getRestaurant(rest.id,!0),$scope.gotoOrder()})},$scope.handleAlertAction=function(action){action.action(this),$scope.$emit("done"),$scope.$emit("alertClosed")}}]).directive("onoNotifyBox",["onoNotification",function(onoNotification){return{restrict:"A",link:function(scope,el){onoNotification.setHook(el,scope)}}}]),angular.module("ONO-Base-UI").directive("onoDialogBox",["onoDialog","$document","$timeout",function(onoDialog,$document,$timeout){return{restrict:"A",link:function(scope,el){var disabledHandle,focusedElementBeforeDialogOpened;function focusHandler(){var tabbable=$(":tabbable",$(el)),firstFocusable=$(":tabbable",$(el).find(".dialogBody")).first();0==firstFocusable.length&&$(".dialogCloseAction").focus();var firstInput=tabbable.first(),lastInput=tabbable.last();firstFocusable.focus(),lastInput.on("keydown",function(e){9!=e.which||e.shiftKey||(e.preventDefault(),firstInput.focus())}),firstInput.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),lastInput.focus())})}onoDialog.setParent(el),scope.$on("dialogShown",function(){focusedElementBeforeDialogOpened=$document[0].activeElement,disabledHandle=ally.maintain.disabled({filter:el}),$timeout(function(){-1<$(el).html().indexOf("ngInclude")&&scope.$on("$includeContentLoaded",focusHandler),focusHandler()},1e3)}),scope.$on("dialogClosed",function(){disabledHandle&&disabledHandle.disengage(),focusedElementBeforeDialogOpened&&(focusedElementBeforeDialogOpened.focus(),focusedElementBeforeDialogOpened=null)})}}}]).controller("onoDialogCtrl",["$scope",function($scope){$scope.els={},$scope.height=0,$scope.addHeight=function(el,height){$scope.els[el]=height},$scope.$watch("els",function(){for(var i in $scope.height=0,$scope.els)$scope.els.hasOwnProperty(i)&&($scope.height+=$scope.els[i])},!0),$scope.handleDialogUserAction=function(){$scope.$emit("done"),$scope.$emit("dialogClosed")}}]).directive("onoHeight",[function(){return{restrict:"A",scope:!0,controller:["$scope","$element",function($scope,$element){$scope.addHeight&&$scope.$watch(function(){$scope.addHeight($scope.$id,$element.height())})}]}}]),angular.module("ONO-Base-UI").directive("onoUserAlertBox",["userAlertSvc",function(userAlertSvc){return{restrict:"A",link:function(scope,el){userAlertSvc.setParent(el,scope)}}}]),angular.module("ONO-Base-UI").controller("userAlertCtrl",["$scope","userAlertSvc",function($scope,userAlertSvc){$scope.userAlerts=userAlertSvc.list}]),angular.module("ONO-Base-UI").controller("dineRewardsGlobalCtrl",["$scope","$rootScope","$q","customerSvc","cartSvc","domainEventSvc","sessionManager","dinerewardsSvc","$state","title","translationSvc","$log",function($scope,$rootScope,$q,customerSvc,cartSvc,domainEventSvc,sessionManager,dinerewardsSvc,$state,title,translationSvc,$log){var ctrl=this;$scope.mobileDRPodToggle=!1;var containsState=function(state){var findNaN=state!=state;return-1<(!findNaN&&angular.isFunction(Array.prototype.indexOf)?Array.prototype.indexOf:function(state){var i=-1,index=-1;for(i=0;i<this.length;i++){var item=this[i];if(findNaN&&item!=item||item===state){index=i;break}}return index}).call(this,state)},afterPrecheckStates=["checkout","CreditCard","GiftCard","POD"];containsState.call(afterPrecheckStates,$state.current.name)||($scope.model.canUnlinkDineRewards=!0),$scope.model.dineRewardsAccount=sessionManager.dineRewardsAccount(),$scope.$watch("model.cart.loyalty_card_number",function(newValue,oldValue){$scope.model.dineRewardsAccount&&$scope.model.dineRewardsAccount.printedCardNumber&&!$scope.model.cart.loyalty_card_number&&($scope.model.cart.loyalty_card_number=$scope.model.dineRewardsAccount.printedCardNumber,$scope.model.cart.order_setup.loyalty_card_number=$scope.model.dineRewardsAccount.printedCardNumber),0<newValue&&!containsState.call(afterPrecheckStates,$state.current.name)&&$scope.updateOrderSetup($scope.model.cart.order_setup)});var clearDineRewardsAccountData=function(){$scope.model.dineRewardsAccount="",$scope.model.dineRewardApplied="",sessionManager.remove("dineRewardsAccount")};ctrl.domainEventHandlers={onSessionTimeout:function(){clearDineRewardsAccountData()}},domainEventSvc.addHandler(ctrl.domainEventHandlers),$scope.$on("$destroy",function(){domainEventSvc.removeHandler(ctrl.domainEventHandlers)}),$scope.dineRewardsShowModal=function(type,clearFields){$scope.dineRewardsModalType=type,clearFields&&($scope.model.dineRewardsReviewFirstName="",$scope.model.dineRewardsReviewLastName="",$scope.model.dineRewardsReviewPhone="",$scope.model.dineRewardsReviewEmail=""),$scope.model.dineRewardsError=null,ctrl.parentTitle=title.getTitle(),title.updateTitle(translationSvc.translate("ADA_Page_Title_Dine_Rewards_Signup")),$scope.$broadcast("dialogClosed"),$scope.$broadcast("dialogShown")},$scope.sendGADataForSignup=function(origin){domainEventSvc.raiseEvent("onDRSignupModalDisplay",origin)},$scope.dineRewardsCloseModal=function(){var firstName=$scope.model.dineRewardsReviewFirstName?"filled":"blank",lastName=$scope.model.dineRewardsReviewLastName?"filled":"blank",phoneNumber=$scope.model.dineRewardsReviewPhone?"filled":"blank",email=$scope.model.dineRewardsReviewEmail?"filled":"blank";"signup"==$scope.dineRewardsModalType?domainEventSvc.raiseEvent("onDRAccountSignupModalCancel","FirstName:"+firstName+"|LastName:"+lastName+"|Email:"+email+"|Phone:"+phoneNumber):domainEventSvc.raiseEvent("onDRAccountVerifyModalCancel","Email:"+email+"|Phone:"+phoneNumber),ctrl.parentTitle&&title.updateTitle(ctrl.parentTitle),$scope.dineRewardsModalType=null,$scope.$broadcast("dialogClosed")},$scope.dineRewardsCloseOnKeyPress=function(e){13==e.keyCode&&$scope.dineRewardsCloseModal()};var setDineRewardsAccountData=function(data){$scope.model.dineRewardsAccount=data,sessionManager.dineRewardsAccount(data)};$scope.signupClick=function(){dinerewardsSvc.getUser($scope.model.dineRewardsReviewPhone,$scope.model.dineRewardsReviewEmail).then(function(data){$scope.model.dineRewardsReviewPhone=null,$scope.model.dineRewardsReviewEmail=null,setDineRewardsAccountData(data),$scope.model.cart.loyalty_card_number=data.printedCardNumber,$scope.model.cart.order_setup.loyalty_card_number=data.printedCardNumber,$scope.updateOrderSetup($scope.model.cart.order_setup),$scope.dineRewardsModalType=void 0},function(data){404===data.status&&dinerewardsSvc.register({email:$scope.model.dineRewardsReviewEmail,first_name:$scope.model.dineRewardsReviewFirstName,last_name:$scope.model.dineRewardsReviewLastName,phone:$scope.model.dineRewardsReviewPhone}).then(function(data){setDRAccountByLoyaltyCardNumber(data);var accountDetails={email:$scope.model.dineRewardsReviewEmail,phone:$scope.model.dineRewardsReviewPhone};domainEventSvc.raiseEvent("onSignedIntoDRAccount",accountDetails),domainEventSvc.raiseEvent("onDRAccountCreated"),domainEventSvc.raiseEvent("onDRAccountCreatedAndLinked"),$scope.dineRewardsModalType=void 0},function(data){400===data.status?(domainEventSvc.raiseEvent("onDRAccountCreationFailed","Partial match"),$scope.model.dineRewardsReviewPhone=null,$scope.model.dineRewardsReviewEmail=null,domainEventSvc.raiseEvent("onDRVerifyModalDisplay"),$scope.dineRewardsShowModal("partial-match")):500===data.status&&$log.error("DR: Cannot Connect.",data.status,data.data.status)})}),$scope.$broadcast("dialogClosed")},$scope.updateReward=function(reward){reward.applied=!reward.applied;var action=reward.applied?"applyLoyaltyReward":"removeLoyaltyReward";reward.applied?domainEventSvc.raiseEvent("onDRAccountRewardApplied",reward.title):domainEventSvc.raiseEvent("onDRAccountRewardRemoved",reward.title),$scope.model.dineRewardApplied=reward,cartSvc[action](reward).then(function(){$scope.updateCheckoutInfo()}).catch(function(){})},$scope.verifyClick=function(){dinerewardsSvc.getUser($scope.model.dineRewardsReviewPhone,$scope.model.dineRewardsReviewEmail).then(function(data){$scope.model.dineRewardsReviewPhone=null,$scope.model.dineRewardsReviewEmail=null,setDineRewardsAccountData(data),$scope.model.cart.loyalty_card_number=data.printedCardNumber,$scope.model.cart.order_setup.loyalty_card_number=data.printedCardNumber,domainEventSvc.raiseEvent("onDRAccountLinkedOnVerifyModal"),$scope.$broadcast("dialogClosed"),$scope.updateOrderSetup($scope.model.cart.order_setup)},function(data){409===data.status?$scope.dineRewardsShowModal("verify"):404===data.status&&(domainEventSvc.raiseEvent("onDRAccountVerifyModalSubmissionFailed","No match"),$scope.model.dineRewardsError="CANT_VERIFY",$scope.model.dineRewardsReviewEmail=null)})};var setDRAccountByLoyaltyCardNumber=function(cardNumber){dinerewardsSvc.getUser(null,null,cardNumber).then(function(data){setDineRewardsAccountData(data),$scope.model.cart.loyalty_card_number=data.printedCardNumber,$scope.model.cart.order_setup.loyalty_card_number=data.printedCardNumber,$scope.updateOrderSetup($scope.model.cart.order_setup)},function(data){if($log.error("DR: There was an error finding the user by loyalty number."),404===data.status){var counter=0;!function getUser(){dinerewardsSvc.getUser($scope.model.dineRewardsReviewPhone,$scope.model.dineRewardsReviewEmail).then(function(user){$scope.model.dineRewardsReviewPhone=null,$scope.model.dineRewardsReviewEmail=null,setDineRewardsAccountData(user),$scope.model.cart.loyalty_card_number=user.printedCardNumber,$scope.model.cart.order_setup.loyalty_card_number=user.printedCardNumber,$scope.updateOrderSetup($scope.model.cart.order_setup)},function(data){counter<3&&getUser()}),counter++}()}})};$rootScope.featureFlags.dineRewards.allowDineRewardsReviewAccountLink&&($scope.model.cart.loyalty_card_number?$scope.model.dineRewardsAccount&&$scope.model.cart.loyalty_card_number==$scope.model.dineRewardsAccount.printedCardNumber||setDRAccountByLoyaltyCardNumber($scope.model.cart.loyalty_card_number):customerSvc.getCustomer().then(function(customer){var userObj=sessionManager.user();customer&&customer.loyalty_card_number&&null!==userObj&&!userObj.accountAutoLinked&&(userObj.accountAutoLinked=!0,sessionManager.user(userObj),setDRAccountByLoyaltyCardNumber(customer.loyalty_card_number))}));$scope.dineRewardsUnlinkClick=function(){domainEventSvc.raiseEvent("onDRAccountUnlink"),$scope.model.dineRewardsReviewPhone=null,clearDineRewardsAccountData(),$scope.model.cart.loyalty_card_number=null,$scope.model.cart.order_setup.loyalty_card_number=null,$scope.model.dineRewardApplied=null,function(cart,thisCartSvc){if(!cart||!cart.totals||!cart.totals.discounts){var deferred=$q.defer();return deferred.resolve(),deferred.promise}var promises=[];return cart.totals.discounts.forEach(function(item){item.is_loyalty_reward&&promises.push(thisCartSvc.removeDiscount(item.coupon_code))}),$q.all(promises)}($scope.model.cart,cartSvc).then(function(res){$scope.updateOrderSetup($scope.model.cart.order_setup)})};$scope.dineRewardsReviewLinkClick=function(e){e&&e.preventDefault(),$scope.model.dineRewardsReviewPhone&&dinerewardsSvc.getUser($scope.model.dineRewardsReviewPhone).then(function(data){$scope.model.dineRewardsReviewPhone=null,setDineRewardsAccountData(data),$scope.model.cart.loyalty_card_number=data.printedCardNumber,$scope.model.cart.order_setup.loyalty_card_number=data.printedCardNumber,$scope.model.canUnlinkDineRewards=!0;var wallets,oldestReward=(wallets=data.accountRewards.rewardsWallets,_.min(wallets,function(item){return Date.parse(item.expirationDate)})),accountRewards={phone:data.phone,availableReward:oldestReward.name,availableRewardExpires:oldestReward.expirationDate,visitsUntilReward:data.accountRewards.visitsUntilReward};domainEventSvc.raiseEvent("onDRAccountLinked",accountRewards),domainEventSvc.raiseEvent("onDRAccountLinkedOnReviewOrder"),domainEventSvc.raiseEvent("onDROLOLinkSubmit"),0<$scope.model.cart.order_items.length&&$scope.updateOrderSetup($scope.model.cart.order_setup)},function(data){409===data.status?(domainEventSvc.raiseEvent("onDRVerifyModalDisplay"),$scope.dineRewardsShowModal("verify")):404===data.status&&(domainEventSvc.raiseEvent("onDROLOLinkSubmitNoMatch"),$scope.sendGADataForSignup("linkSubmission"),$scope.dineRewardsShowModal("signup"))})},$scope.updateOrderSetup=function(orderSetup){cartSvc.updateOrderSetup(orderSetup).then(function(res){cartSvc.getCartDetails()}).catch(function(fault){domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:fault,cart:$scope.model.cart})})}}]),angular.module("ONO-Base-UI").controller("drawerCtrl",["$scope","$rootScope","$state","accountSvc","cartSvc","onoSiteMap","$window","tokenizationFeatureFlagsSvc","domainEventSvc","featureFlagSvc",function($scope,$rootScope,$state,accountSvc,cartSvc,onoSiteMap,$window,tokenizationFeatureFlagsSvc,domainEventSvc,featureFlagSvc){var domainEventHandlers={onRestaurantChanged:function(){$scope.sections=getSections()}};function getSections(){var hideSaveOrder=featureFlagSvc.featureFlagExists($rootScope,"featureFlags","hideSaveOrder")&&$rootScope.featureFlags.hideSaveOrder;return featureFlagSvc.featureFlagExists($rootScope,"featureFlags","isRackspace")&&$rootScope.featureFlags.isRackspace?onoSiteMap.parents.account:onoSiteMap.parents.account.filter(function(item){return hideSaveOrder&&(item.title="RecentSavedOrders"===item.title?"RecentOrders":item.title,$scope.title=item.title),!("creditCards"===item.name&&!tokenizationFeatureFlagsSvc.savingCreditCardsEnabled())&&item})}$scope.opinionLabSurveyOnMobileSidebar=!1,featureFlagSvc.getFeatureFlags("status",["layout","opinionLabSurveyOnMobileSidebar"]).then(function(status){$scope.opinionLabSurveyOnMobileSidebar=status}),domainEventSvc.addHandler(domainEventHandlers),$scope.$on("$destroy",function(){domainEventSvc.removeHandler(domainEventHandlers)}),$scope.logout=accountSvc.logout,$scope.sections=getSections(),$scope.cancelOrder=function(){cartSvc.cancelOrder(),$state.go("home")}}]),angular.module("ONO-Base-UI").controller("headerCtrl",["$scope","translationSvc","cartSvc","accountSvc",function($scope,translationSvc,cartSvc,accountSvc){function loadAccount(){accountSvc.getAccount().then(function(account){$scope.user=account})}$scope.showCart=cartSvc.setupComplete,$scope.logout=accountSvc.logout,$scope.setLang=function(lang){translationSvc.setLanguage(lang).then(function(){$state.reload()})},loadAccount(),$scope.$on("user:updated",function(e,customer){customer&&($scope.user.first_name=customer.first_name,$scope.user.last_name=customer.last_name,$scope.user.email=customer.email,$scope.user.phone=customer.phone)}),$scope.$on("user:loggedIn",function(){loadAccount()}),$scope.$on("user:loggedOut",function(){loadAccount()})}]),angular.module("ONO-Base-UI").controller("homeCtrl",["$scope","$rootScope","$state","accountSvc","restaurantSvc","onoSiteMap","sessionManager","customerSvc","$window","tokenizationFeatureFlagsSvc","domainEventSvc","featureFlagSvc",function($scope,$rootScope,$state,accountSvc,restaurantSvc,onoSiteMap,sessionManager,customerSvc,$window,tokenizationFeatureFlagsSvc,domainEventSvc,featureFlagSvc){var domainEventHandlers={onRestaurantChanged:function(){$scope.sections=getSections()}};function getSections(){var hideSaveOrder=featureFlagSvc.featureFlagExists($rootScope,"featureFlags","hideSaveOrder")&&$rootScope.featureFlags.hideSaveOrder;return featureFlagSvc.featureFlagExists($rootScope,"featureFlags","isRackspace")&&$rootScope.featureFlags.isRackspace?onoSiteMap.parents.account:onoSiteMap.parents.account.filter(function(item){return hideSaveOrder&&(item.title="RecentSavedOrders"===item.title?"RecentOrders":item.title,$scope.title=item.title),!("creditCards"===item.name&&!tokenizationFeatureFlagsSvc.savingCreditCardsEnabled())&&item})}if(domainEventSvc.addHandler(domainEventHandlers),$scope.$on("$destroy",function(){domainEventSvc.removeHandler(domainEventHandlers)}),$scope.restaurants=[],$scope.logout=accountSvc.logout,$scope.title=$state.current.title||"",$scope.featureFlags=$scope.featureFlags||{},$scope.featureFlags.loginSidebar=!1,$scope.featureFlags.header=!1,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&($scope.featureFlags.header=$rootScope.featureFlags.layout.header),featureFlagSvc.featureFlagExists($rootScope,"featureFlags","UserAccount","loginSidebar")&&($scope.featureFlags.loginSidebar=$rootScope.featureFlags.UserAccount.loginSidebar),$scope.sections=getSections(),$scope.loggedIn)$scope.firstName=customerSvc.customer?customerSvc.customer.first_name:null;else{var user=sessionManager.user()||{};$scope.firstName=user.firstName}$scope.$on("$stateChangeSuccess",function(){switch($scope.title=$state.current.title,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&$scope.title){case"pickup":$scope.title="ChooseLocation";break;case"Nav_Delivery":$scope.title="chooseDeliveryLocation";break;case"RestaurantSearch":$scope.title="ChooseLocation"}})}]),angular.module("ONO-Base-UI").controller("mainCtrl",["$rootScope","$scope","$state","customerSvc","cart","values","onoAlert","translationSvc","featureFlagSvc",function($rootScope,$scope,$state,customerSvc,cart,values,onoAlert,translationSvc,featureFlagSvc){$scope.model=$scope.model||{},$scope.featureFlags=$scope.featureFlags||{},$scope.model.cart=cart,$scope.featureFlags.header=!1,$scope.toasterTimeout=3e3;var version,createUserAgentData={};"/"===$state.current.url&&(featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")?$state.go("pickup"):$state.go("home")),featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&($scope.featureFlags.header=$rootScope.featureFlags.layout.header),$scope.$state=$state,$scope.displaySettings=values.DisplaySettings;var doorsideLocationGuids=translationSvc.translate("DoorsideLocationGuids");$scope.isDoorsideLocation=function(restaurantid){return!!doorsideLocationGuids&&doorsideLocationGuids.includes(restaurantid)};var osDefaultInfo={iOS:{name:"iOS",lastSupportedVersion:{number:7}},Android:{name:"Android",lastSupportedVersion:{number:4,nickname:"Ice Cream Sandwich"}}};createUserAgentData=function(osName,osVersion){return{os:{name:osName,version:osVersion}}};var uaInfo=/ip(hone|od|ad)/i.test(navigator.userAgent)?!!(version=!!(version=navigator.userAgent.match(/os\s([0-9_\.]*)/i))[1]&&version[1].replace(/_/g,"."))&&createUserAgentData(osDefaultInfo.iOS.name,version):!!/(android)/i.test(navigator.userAgent)&&!!(version=!!(version=navigator.userAgent.match(/android\s([0-9\.]*)/i))[1]&&version[1])&&createUserAgentData(osDefaultInfo.Android.name,version),unsupportedOs=function(uaInfo,osDevice){var title="Unsupported Version of "+uaInfo.os.name,message=uaInfo.os.name+" "+uaInfo.os.version+" is no longer supported. Please update your device to "+osDevice.name+" "+osDevice.lastSupportedVersion.number+(osDevice.lastSupportedVersion.nickname?" ("+osDevice.lastSupportedVersion.nickname+")":"")+" or newer before continuing.";onoAlert.show({title:title,message:message})};if(uaInfo&&uaInfo.os.version)for(var i in osDefaultInfo){var osItem=osDefaultInfo[i];if(uaInfo.os.name===osItem.name&&parseInt(uaInfo.os.version.split(".")[0])<osItem.lastSupportedVersion.number){unsupportedOs(uaInfo,osItem);break}}}]),angular.module("ONO-Services").provider("onoLocation",function(){"use strict";this.$get=["$q",function($q){return{getLocation:function(){var def=$q.defer();return navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){def.resolve(position.coords)},function(){def.resolve(null)}),def.promise}}}]}),angular.module("ONO-Base-UI").controller("orderPathCtrl",["$scope","cartSvc","$state","$rootScope",function($scope,cartSvc,$state,$rootScope){$scope.showCart=cartSvc.setupComplete,$scope.displayMicroCart=!($rootScope.featureFlags&&$rootScope.featureFlags.layout&&$rootScope.featureFlags.layout.header),$scope.sendCheckoutGAData=function(source){cartSvc.sendCheckoutGAData(source)}}]),angular.module("ONO-Base-UI").controller("sidebarCtrl",["$scope","$state","translationSvc","cartSvc","accountSvc","orderSetupSvc","checkoutSvc","$rootScope","$window","featureFlagSvc",function($scope,$state,translationSvc,cartSvc,accountSvc,orderSetupSvc,checkoutSvc,$rootScope,$window,featureFlagSvc){$scope.showCart=cartSvc.setupComplete,$scope.logout=accountSvc.logout,$scope.dineRewardsSidebar=!1,$scope.dineRewardMobilePodDisplay=!0,$scope.displayRestaurantLocationSidebar=!1,$scope.showPromoCode=$scope.displaySettings.ShowSidebarDiscountEntry&&$scope.featureFlags.displayPromoCode;var dineRewardSidbarDisplayStates=["review"],dineRewardsMobilePodDsiplayStates=["menuItem","review","checkout","confirmation"],displayRestaurantLocationSidebarStates=["category","menuItem","categoryAllMenuItems","editOrderItem"];$scope.$watch(function(){return $state.$current.name},function(newState){containsState.call(dineRewardSidbarDisplayStates,newState)?$scope.dineRewardsSidebar=!0:$scope.dineRewardsSidebar=!1,containsState.call(dineRewardsMobilePodDsiplayStates,newState)?$scope.dineRewardMobilePodDisplay=!1:$scope.dineRewardMobilePodDisplay=!0,containsState.call(displayRestaurantLocationSidebarStates,newState)?$scope.displayRestaurantLocationSidebar=!0:$scope.displayRestaurantLocationSidebar=!1});var containsState=function(state){var findNaN=state!=state;return-1<(!findNaN&&angular.isFunction(Array.prototype.indexOf)?Array.prototype.indexOf:function(state){var i=-1,index=-1;for(i=0;i<this.length;i++){var item=this[i];if(findNaN&&item!=item||item===state){index=i;break}}return index}).call(this,state)};$scope.cancelOrder=function(){cartSvc.cancelOrder(),featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")?_.isObject($window.sessionStorage)&&angular.isDefined($window.sessionStorage.fulfillmentType)&&"Delivery"===$window.sessionStorage.fulfillmentType?($window.sessionStorage.removeItem("currentDeliveryAddress"),$state.go("delivery")):($window.sessionStorage.removeItem("curbsideRestaurant"),$state.go("pickup")):$state.go("home")},$scope.removeDiscount=function(discount){discount.is_loyalty_reward&&($scope.model.dineRewardApplied=null),cartSvc.removeDiscount(discount.coupon_code).then(function(){checkoutSvc.updateCheckoutInfo($scope.model)})},$scope.applyDiscount=function(){if($scope.model.discountCode)return cartSvc.applyDiscount($scope.model.discountCode).then(function(){$scope.model.discountCode=""})},$scope.showCheckout=function(){var cart=cartSvc.viewCart();return cartSvc.setupComplete()&&0<cart.order_items.length&&("orderSetup"!==$state.current.name||orderSetupSvc.submit())},$scope.goToReview=function(source){"orderSetup"===$state.current.name?orderSetupSvc.createOrder().then(function(res){cartSvc.sendCheckoutGAData(source),$state.go("review")}).catch(function(res){}):(cartSvc.sendCheckoutGAData(source),$state.go("review"))}}]),angular.module("ONO-Services").provider("translationSvc",function(){"use strict";this.$get=["$http","$rootScope","$window","sessionManager","$q",function($http,$rootScope,$window,sessionManager,$q){var translations={English:"English",French:"French",Spanish:"Spanish"};function setLocaleLang(lang){$rootScope.localeLang="fr"===lang?"fr-ca":lang,moment.lang($rootScope.localeLang)}var svc={getKeys:function(){return _.keys(translations)},translate:function(key){if(null===key)return null;var values=arguments;if(1===arguments.length&&1<(values=key.split(",")).length)for(var i=1;i<values.length;i++)values[i]=svc.translate(values[i].trim());var translation=translations[values[0]];return translation?translation.replace(/\{(\d+)\}/g,function(match,capture){return values[1*capture+1]}):values[0]},loadTranslations:function(){var useCDN=$window.ReferenceServiceCDNEnabled&&angular.isDefined($window.ReferenceServiceCDNUrl),config={method:"GET",url:useCDN?$window.ReferenceServiceCDNUrl+"OutbackTranslations.json":"/api/translation"};return $http(config).then(function(res){return angular.extend(translations,res.data),translations}).catch(function(error){if(useCDN)return config.url="/api/translation",$http(config).then(function(res){return angular.extend(translations,res.data),translations});throw error})},setLanguage:function(language){var shortLanguage=language.substring(0,2);if(shortLanguage!==$rootScope.shortLanguage)return $rootScope.language=$http.defaults.headers.common["Accept-Language"]=language+";en;q=0.8",setLocaleLang($rootScope.shortLanguage=shortLanguage),svc.loadTranslations().then(function(){});var def=$q.defer();return def.resolve(),def.promise},initialize:function(){var user=sessionManager.user()||{};user.language?($rootScope.language=user.language,$http.defaults.headers.common["Accept-Language"]=user.language):$rootScope.language=$window.navigator.language||$window.navigator.userLanguage,$rootScope.shortLanguage=$rootScope.language.substring(0,2),setLocaleLang($rootScope.shortLanguage),$rootScope.$watch("language",function(lang){(user=sessionManager.user()||{}).language=lang,sessionManager.user(user)})}};return svc.initialize(),svc}]}),angular.module("ONO-Services").factory("valuesSvc",["$http","$q","$window",function($http,$q,$window){"use strict";var resource_getValues=function(){var useCDN=$window.ReferenceServiceCDNEnabled&&angular.isDefined($window.ReferenceServiceCDNUrl),config={method:"GET",url:useCDN?$window.ReferenceServiceCDNUrl+"Values.json":"/api/values"};return $http(config).then(function(response){return response.data}).catch(function(error){if(useCDN)return config.url="/api/values",$http(config).then(function(response){return response.data});throw error})},valuesCache=null;return{getValues:function(){var deferred=$q.defer();return valuesCache?deferred.resolve(valuesCache):resource_getValues().then(function(values){valuesCache=values,deferred.resolve(valuesCache)}),deferred.promise}}}]),angular.module("ONO-Base-UI").controller("loyaltyCtrl",["$scope","loyaltySvc",function($scope,loyaltySvc){$scope.loyaltyCards=[],loyaltySvc.getLoyaltyCards().then(function(loyaltyCards){$scope.loyaltyCards=loyaltyCards}),$scope.removeLoyaltyCard=loyaltySvc.removeLoyaltyCard,$scope.addLoyaltyCard=loyaltySvc.addLoyaltyCard}]),angular.module("ONO-Services").factory("loyaltySvc",["$http","customerSvc","$q",function($http,customerSvc,$q){"use strict";var resource_getLoyaltyCards=function(customerId){return $http({method:"GET",url:"/api/customer/"+customerId+"/loyalty_cards"}).then(function(response){return response.data})},resource_removeLoyaltyCard=function(customerId,cardNumber){return $http({method:"DELETE",url:"/api/customer/"+customerId+"/loyalty_card/"+cardNumber}).then(function(response){return response.data})},resource_addLoyaltyCard=function(customerId,cardNumber){return $http({method:"POST",url:"/api/customer/"+customerId+"/loyalty_card/"+cardNumber}).then(function(response){return response.data})},customerId=customerSvc.customer?customerSvc.customer.id:null;function emptyPromise(val){var empty=$q.defer();return empty.resolve(val),empty.promise}return{getLoyaltyCards:function(){return customerId?resource_getLoyaltyCards(customerId):emptyPromise([])},removeLoyaltyCard:function(cardNumber){return customerId?resource_removeLoyaltyCard(customerId,cardNumber):emptyPromise(null)},addLoyaltyCard:function(cardNumber){return customerId?resource_addLoyaltyCard(customerId,cardNumber):emptyPromise(null)}}}]),angular.module("ONO-Base-UI").controller("categoryCtrl",["$scope","$window","ctrlSettings","category",function($scope,$window,ctrlSettings,category){if(ctrlSettings.truncate)for(i=0;i<category.menu_items.length;i++){var text=category.menu_items[i].description;text&&(category.menu_items[i].description=text.truncate(ctrlSettings.truncate[$scope.shortLanguage]))}_.each(category.menu_items,function(menuItem){menuItem.isStartingFromHidden=angular.isDefined(menuItem.default_pricing["Starting From"])&&menuItem.tags.includes("hideStartingFrom")}),$scope.setCurrentCategory(category)}]),angular.module("ONO-Base-UI").controller("categoryListCtrl",["$scope","$state","cartSvc","categoryList","ctrlSettings","domainEventSvc","featureFlagSvc","$rootScope",function($scope,$state,cartSvc,categoryList,ctrlSettings,domainEventSvc,featureFlagSvc,$rootScope){$scope.categoryList=categoryList;var menu=_.head(categoryList);function resetMenuItem(menuItem){!function resetOptions(item){item.selected&&(item.selected=null);0<item.quantity&&(item.quantity=0);if(item.option_groups)for(var i=0;i<item.option_groups.length;i++)resetOptions(item.option_groups[i]);if(item.options)for(var i=0;i<item.options.length;i++)resetOptions(item.options[i]);if(item.option_items)for(var i=0;i<item.option_items.length;i++)resetOptions(item.option_items[i])}(menuItem),menuItem.quantity=1,menuItem.display_customize=!1}menu&&domainEventSvc.raiseEvent("onMenuLoaded",menu.description),$scope.hoveredCategoryUpdate=function(id){$scope.hoveredCategory=id},$scope.category=null,$scope.currentCategory=null,$scope.displayImageCategoryList=!1,$scope.displayDefaultImageOnCategoryList=!1,featureFlagSvc.getFeatureFlags("status",["layout","displayDefaultImageOnCategoryList"]).then(function(status){$scope.displayDefaultImageOnCategoryList=status}),featureFlagSvc.getFeatureFlags("status",["layout","displayImageCategoryList"]).then(function(status){$scope.displayImageCategoryList=status&&$rootScope.displaySize.isMobile}),$scope.setCurrentCategory=function(category){var categoryEventDetails={categoryName:category.title};domainEventSvc.raiseEvent("onCategoryClicked",categoryEventDetails),$scope.currentCategory=category,$scope.category=category},$scope.displaySize.isMobile?$scope.showCategoryNav=!1:$scope.showCategoryNav=!0,$scope.toggleCategoryNav=function(close){$scope.displaySize.isMobile&&($scope.showCategoryNav=!close&&!$scope.showCategoryNav)},$scope.quickAdd=function(menuItem){cartSvc&&cartSvc.setupComplete()?(!menuItem.category_id&&$scope.category&&(menuItem.category_id=$scope.category.id),!menuItem.category_title&&$scope.category&&(menuItem.category_title=$scope.category.title),cartSvc.upsertItem(menuItem).then(function(){menuItem.is_favorite||resetMenuItem(menuItem)}).catch(function(){})):(cartSvc.temp_item=menuItem,$state.go("orderSetup"))},$scope.quickCustomize=function(item){item.option_groups.length?item.display_customize=!item.display_customize:(!item.category_id&&$scope.category&&(item.category_id=$scope.category.id),!item.category_title&&$scope.category&&(item.category_title=$scope.category.title),$scope.quickAdd(item))},$scope.addToCart=function(menuItem){cartSvc&&cartSvc.setupComplete()?(!menuItem.category_id&&$scope.category&&(menuItem.category_id=$scope.category.id),!menuItem.category_title&&$scope.category&&(menuItem.category_title=$scope.category.title),cartSvc.upsertItem(menuItem).then(function(){resetMenuItem(menuItem)}).catch(function(){})):(cartSvc.temp_item=menuItem,$state.go("orderSetup"))},$scope.categoryItemClick=function(menuItem){!ctrlSettings.categoryItemClick&&$scope.displaySize.isDesktop||(menuItem.show_quick_add||menuItem.is_favorite?menuItem.show_quick_add&&!menuItem.display_customize?$scope.quickCustomize(menuItem):menuItem.is_favorite&&$scope.quickAdd(menuItem):$state.go("menuItem",{menuItemId:menuItem.id}))}}]),angular.module("ONO-Services").factory("MenuItem",["toppingPricingSvc",function(toppingPricingSvc){"use strict";function MenuItem(d,parent){var mi=angular.extend(this,d);mi.$parent=parent;var toppingPricing=mi.pricing&&mi.pricing.topping_pricing_configuration?mi.pricing.topping_pricing_configuration.pricing:[];mi.$pricingEnumerable=Enumerable.From(toppingPricing),mi.option_groups=Enumerable.From(d.option_groups||[]).Select(function(og){return new OptionGroup(og,mi)}).ToArray(),mi.$defaultToppingPricing=mi.$pricingEnumerable.FirstOrDefault(null,function(tp){return!tp.option_item_id}),mi.topping_set&&(mi.topping_set=new Toppings(mi.topping_set,this)),mi.side_dishes=Enumerable.From(d.side_dishes).Select(function(sd){var sdmi=new MenuItem(sd);return sdmi.isSideDish=!0,sdmi.showConfiguration=!1,sdmi}).ToArray(),mi.selections&&(mi.selections=Enumerable.From(mi.selections).Select(function(selection){return new Selection(selection,mi)}).ToArray()),mi.updatePrice()}function OptionGroup(o,menuItem){angular.extend(this,o),this.option_group_id=o.id,this.options=Enumerable.From(o.options).Select(function(option){return new Option(option,menuItem)}).ToArray()}function Option(o,menuItem){var opt=angular.extend(this,o);this.option_id=o.id,this.$menuItem=menuItem;for(var i=0;i<o.option_items.length;i++)opt.option_items[i]=new OptionItem(o.option_items[i],menuItem),"dropdown"===o.display_template&&0<o.option_items[i].quantity&&(opt.selected=o.option_items[i])}function OptionItem(o,menuItem){var oi=angular.extend(this,o);oi.option_item_id=o.id,oi.$menuItem=menuItem,oi.$toppingPricing=menuItem.$pricingEnumerable.FirstOrDefault(null,function(p){return p.option_item_id==oi.id}),oi.options=Enumerable.From(o.options||[]).Select(function(opt){return new Option(opt,menuItem)}).ToArray()}MenuItem.prototype={constructor:MenuItem,toCartItem:function(){var optionGroups=Enumerable.From(this.option_groups).Select(function(og){return og.toOptionGroupCartItem()}).Where(function(ci){return!!ci}).ToArray(),cartItem={id:this.order_item_id,title:this.title,order_item_id:this.order_item_id,menu_item_id:this.id,quantity:this.quantity,comments:this.comments,recipient:this.recipient,nickname:this.nickname,category_id:this.category_id,category_title:this.category_title,is_favorite:this.is_favorite,toppings:this.topping_set?this.topping_set.toToppingCartItem():null,option_groups:optionGroups};return this.selections&&(cartItem.selections=Enumerable.From(this.selections).Where(function(selection){return!!selection.selectedMenuItem}).Select(function(selection){return new Selection(selection,this)}).ToArray()),cartItem},decrement:function(){1<this.quantity&&(this.quantity--,this.updatePrice())},increment:function(){this.max_qty!==this.quantity&&(this.quantity++,this.updatePrice())},updatePrice:function(){if(this.pricing){var price=this.updateMenuItemPrice();angular.forEach(this.selections,function(selection){selection.selectedMenuItem&&(price+=selection.selectedMenuItem.pricing.current_price)}),this.pricing.current_retail_price=this.pricing.current_price=price,this.$parent&&this.$parent.updatePrice()}},updateMenuItemPrice:function(){var price=this.pricing.base_price,toppingPricing=this.$defaultToppingPricing;function setupPrice(optionItem){0<optionItem.quantity&&(price+=optionItem.quantity*optionItem.price,optionItem.$toppingPricing&&(toppingPricing=optionItem.$toppingPricing))}if(this.option_groups)for(var o=0;o<this.option_groups.length;o++)this.option_groups[o].forOptions(setupPrice);return this.$toppingPricing=toppingPricing,this.$toppingPricing&&(price+=toppingPricingSvc.calculateToppingPricing(this)),price},forOptions:function(iterator){if(angular.bind(null,iterator)(this),this.option_groups)for(var i=0;i<this.option_groups.length;i++)this.option_groups[i].forOptions(iterator)},forAllOptions:function(iterator){if(angular.bind(null,iterator)(this),this.option_groups)for(var i=0;i<this.option_groups.length;i++)this.option_groups[i].forAllOptions(iterator)}};var OptionBasePrototype={forOptions:function(delegate){if(delegate(this),this.options)for(var i=0;i<this.options.length;i++)if(this.options[i].option_items)for(var o=0;o<this.options[i].option_items.length;o++)0<this.options[i].option_items[o].quantity&&this.options[i].option_items[o].forOptions(delegate)},forAllOptions:function(delegate){if(delegate(this),this.options)for(var i=0;i<this.options.length;i++)if(this.options[i].option_items)for(var o=0;o<this.options[i].option_items.length;o++)this.options[i].option_items[o].forOptions(delegate)}},OptionGroupPrototype={constructor:OptionGroup,toOptionGroupCartItem:function(){for(var options=[],i=0;i<this.options.length;i++){var optionCartItem=this.options[i].toOptionCartItem();optionCartItem&&options.push(optionCartItem)}return 0<!options.length?null:{option_group_id:this.id,title:this.title,options:options}}},OptionItemPrototype={constructor:OptionItem,toOptionItemCartItem:function(){for(var options=[],i=0;i<this.options.length;i++){var optionCartItem=this.options[i].toOptionCartItem();optionCartItem&&options.push(optionCartItem)}var response={title:this.title,option_item_id:this.id,quantity:this.quantity,options:options};return this.free_text&&(this.text&&""!=this.text?(response.quantity=1,response.text=this.text):response.quantity=0),response},toggleQuantity:function(){this.quantity=this.quantity?this.quantity:0,this.quantity=parseInt(this.quantity,10),this.quantity=1<=this.quantity?0:1,this.$menuItem.updatePrice()},updateprice:function(){this.$menuItem.updatePrice()},decrement:function(){0<this.quantity&&(this.quantity--,this.selected=0<this.quantity,this.$menuItem.updatePrice())},increment:function(){this.max_qty!==this.quantity&&(this.quantity++,this.selected=!0,this.$menuItem.updatePrice())}};function Toppings(topping_set,menuItem){var g,i,l,group;for(this.$menuItem=menuItem,angular.extend(this,topping_set),g=0;g<this.topping_groups.length;g++)for(i=0,l=(group=this.topping_groups[g]).toppings.length;i<l;i++)group.toppings[i]=new Topping(group.toppings[i],menuItem)}function Topping(topping,menuItem){this.$menuItem=menuItem,this.selected=topping.first_half||topping.second_half,angular.extend(this,topping)}function Selection(selection,parent){var sel=angular.extend(this,selection);sel.menu_items=Enumerable.From(selection.menu_items).Select(function(item){var mi=new MenuItem(item,parent);return 1===item.quantity&&(sel.selectedMenuItem=mi),mi}).ToArray(),sel.selectedMenuItem&&sel.selectionChanged()}return angular.extend(OptionGroup.prototype,OptionGroupPrototype,OptionBasePrototype),angular.extend(OptionItem.prototype,OptionItemPrototype,OptionBasePrototype),Option.prototype={constructor:Option,toOptionCartItem:function(){var optionItems=Enumerable.From(this.option_items).Select(function(oi){return oi.toOptionItemCartItem()}).Where(function(oi){return 0<oi.quantity}).ToArray();return 0===optionItems.length?null:{option_id:this.option_id,title:this.title,option_items:optionItems}},select:function(optionItem){for(var wasToppingPricing,i=0,l=this.option_items.length;i<l;i++){var oi=this.option_items[i];0<oi.quantity&&(oi.quantity=0,oi.$prices&&(wasToppingPricing=!0)),optionItem&&optionItem.id===oi.id&&(oi.quantity=1,oi.$prices?this.$menuItem.$toppingPricing=oi.$prices:wasToppingPricing&&(this.$menuItem.$toppingPricing=this.$menuItem.$defaultTierPricing))}this.selected&&(this.selected.quantity=1),this.$menuItem.updatePrice()}},Toppings.prototype={constructor:Toppings,toToppingCartItem:function(){var g,n,i,l,group,array=[];for(g=0;g<this.topping_groups.length;g++)for(i=0,l=(group=this.topping_groups[g]).toppings.length;i<l;i++)(n=group.toppings[i]).selected&&array.push({title:n.title,topping_id:n.id,first_half:n.first_half,second_half:n.second_half,doubled:n.doubled});return array},union:function(target){var dictionary={},array=[];for(var i in this.topping_groups[0].toppings.concat(target).forEach(function(i){dictionary[i.title]?(i.first_half||i.second_half)&&(dictionary[i.title]=i):dictionary[i.title]=i}),dictionary)dictionary.hasOwnProperty(i)&&array.push(dictionary[i]);return this.topping_groups[0].toppings=array,this}},Topping.prototype={constructor:Toppings,selectRight:function(){this.first_half=!1,this.second_half=!0,this.$menuItem.updatePrice()},selectLeft:function(){this.first_half=!0,this.second_half=!1,this.$menuItem.updatePrice()},selectFull:function(){this.first_half=!0,this.second_half=!0,this.$menuItem.updatePrice()},toggleFull:function(){this.first_half||this.second_half?(this.first_half=!1,this.second_half=!1):(this.first_half=!0,this.second_half=!0),this.$menuItem.updatePrice()},toggleDouble:function(){this.doubled=!this.doubled,this.$menuItem.updatePrice()}},Selection.prototype={constructor:Selection,selectionChanged:function(){this.$previousSelection&&(this.$previousSelection.quantity=0),this.selectedMenuItem.quantity=1,this.$previousSelection=this.selectedMenuItem,this.selectedMenuItem.updatePrice()}},MenuItem}]),angular.module("ONO-Base-UI").controller("menuItemCtrl",["$rootScope","$scope","$state","$q","$stateParams","$window","$filter","cartSvc","MenuItem","menuItem","domainEventSvc",function($rootScope,$scope,$state,$q,$stateParams,$window,$filter,cartSvc,MenuItem,menuItem,domainEventSvc){this.handleDestroy=function(){cartSvc.checkInvalidItems()};var stackedItemTag="STACKED";$rootScope.SpecialInstructionMaxLength=$window.SpecialInstructionMaxLength,$scope.menuItem=new MenuItem(menuItem),$scope.ts=$scope.menuItem.topping_set,$scope.stackedItem=function(menuItem){var stacked=_.find(menuItem.tags,function(item){return item===stackedItemTag});return!_.isEmpty(stacked)}(menuItem),$scope.quantity_mask="#?#",$scope.menuItem.showConfiguration=!0,$scope.category||($scope.category={title:"Edit Item"}),!$scope.menuItem.category_id&&$scope.category&&($scope.menuItem.category_id=$scope.category.id),!$scope.menuItem.category_title&&$scope.category&&($scope.menuItem.category_title=$scope.category.title),domainEventSvc.raiseEvent("onMenuItemView",$scope.menuItem),$scope.menuItemSubmit=function(menuItem){var menuItemEventDetails={categoryName:menuItem.category_title,itemName:menuItem.title};if(domainEventSvc.raiseEvent("onMenuItemAdded",menuItemEventDetails),cartSvc.setupComplete()){var promise=cartSvc.upsertItem(menuItem);return promise.then(function(){menuItem.isSideDish?menuItem.showConfiguration=!1:$scope.goBack()}),promise}return cartSvc.temp_item=menuItem,$state.go("orderSetup",{id:$stateParams.restaurantId}),$q.reject("Order setup not complete")},$scope.goBack=function(){$window.history.back()},$scope.$on("$destroy",this.handleDestroy)}]),angular.module("ONO-Services").factory("menuSvc",["$http","$q","MenuItem","translationSvc","$window","globalTelemetrySvc","onoAlert","$injector","$state",function($http,$q,MenuItem,translationSvc,$window,globalTelemetrySvc,onoAlert,$injector,$state){"use strict";var _restaurantId,_menuType,_fulfillmentType,_fulfillmentDate,_categoryList,resource={getCategoryList:function(restaurantId,menuType,fulfillmentType,fulfillmentDate){return $http({url:"/api/menu/"+restaurantId+"/"+menuType+"/"+fulfillmentType,method:"GET",params:{fulfillment_date:fulfillmentDate}}).then(function(response){return response.data})},getCategory:function(restaurantId,menuType,fulfillmentType,fulfillmentDate,categoryId,index){return $http({method:"GET",url:"/api/menu/"+restaurantId+"/"+menuType+"/"+fulfillmentType+"/category/"+categoryId,params:{fulfillment_date:fulfillmentDate}}).then(function(response){return response.data.index=index,response.data.menu_items.map(function(item){if(_.includes(translationSvc.getKeys(),"MenuItem_Label_Append_Override_"+item.id)){var key=_.keys(item.default_pricing)[0];item.default_pricing["MenuItem_Label_Append_Override_"+item.id]=item.default_pricing[key],delete item.default_pricing[key]}}),response.data})},getMenuItem:function(restaurantId,menuType,fulfillmentType,fulfillmentDate,menuItemId){return $http({method:"GET",url:"/api/menu/"+restaurantId+"/"+menuType+"/"+fulfillmentType+"/menu_item/"+menuItemId,params:{fulfillment_date:fulfillmentDate}}).then(function(response){return response.data})},getEndOfOrder:function(restaurantId,menuType,fulfillmentType,fulfillmentDate){return $http({method:"GET",url:"/api/menu/"+restaurantId+"/"+menuType+"/"+fulfillmentType+"/end_of_order",params:{fulfillment_date:fulfillmentDate}}).then(function(response){return response.data})},getCategoryFullMenu:function(restaurantId,menuType,fulfillmentType,fulfillmentDate){return $http({url:"/api/menu/"+restaurantId+"/"+menuType+"/"+fulfillmentType,method:"GET",params:{fulfillment_date:fulfillmentDate}}).then(function(response){var subcategories=response.data[0].subcategories,model=[],promises=[];for(var subcategory in subcategories)promises.push(resource.getCategory(restaurantId,menuType,fulfillmentType,fulfillmentDate,subcategories[subcategory].id,promises.length).then(function(result){var menuItem=result;model.push(menuItem)}));return $q.all(promises).then(function(){return model},function(rejection){var httpResponse,state;globalTelemetrySvc.trackException((state=$state,{"type ":"http error","status ":(httpResponse=rejection).status,"message ":httpResponse.message,"current state":state.$current.name,"query params ":state.params.query,"json ":httpResponse.json,"stack trace ":httpResponse.stack,"data ":httpResponse.data,"config ":angular.isDefined(httpResponse.config)?angular.fromJson(httpResponse.config):null})),(onoAlert=onoAlert||$injector.get("onoAlert")).show({title:"503_Server_Unreachable_Title",message:"503_Server_Unreachable_Message",actions:[dissmissAlert]})})})}},dissmissAlert={name:"Close",action:function(scope){scope.hide()}};function validateMenuContext(){if(!_restaurantId||!_menuType||!_fulfillmentType)throw"Invalid_Menu_Context"}return{isInitialized:function(){return!!(_restaurantId&&_menuType&&_fulfillmentType)},initializeFromCart:function(cart){_restaurantId=cart.order_setup.restaurant_id,_menuType=cart.order_setup.menu_type,_fulfillmentType=cart.order_setup.fulfillment_type,_fulfillmentDate=cart.order_setup.fulfillment_date},getCategoryFullMenu:function(restaurantId,menuType,fulfillmentType,fulfillmentDate,categoryList){return _restaurantId=restaurantId,_menuType=menuType,_fulfillmentType=fulfillmentType,_fulfillmentDate=fulfillmentDate,_categoryList=categoryList,validateMenuContext(),resource.getCategoryFullMenu(_restaurantId,_menuType,_fulfillmentType,_fulfillmentDate,_categoryList)},getCategoryList:function(restaurantId,menuType,fulfillmentType,fulfillmentDate){return _restaurantId=restaurantId,_menuType=menuType,_fulfillmentType=fulfillmentType,_fulfillmentDate=fulfillmentDate,validateMenuContext(),resource.getCategoryList(_restaurantId,_menuType,_fulfillmentType,_fulfillmentDate)},getCategory:function(categoryId){if(validateMenuContext(),!categoryId)throw"categoryId not set";return resource.getCategory(_restaurantId,_menuType,_fulfillmentType,_fulfillmentDate,categoryId).then(function(category){for(var i=0;i<category.menu_items.length;i++)category.menu_items[i]=new MenuItem(category.menu_items[i]);return category})},getMenuItem:function(menuItemId){if(validateMenuContext(),!menuItemId)throw"menuItemId not set";return resource.getMenuItem(_restaurantId,_menuType,_fulfillmentType,_fulfillmentDate,menuItemId)},getEndOfOrder:function(){return validateMenuContext(),resource.getEndOfOrder(_restaurantId,_menuType,_fulfillmentType,_fulfillmentDate).then(function(endOfOrderItems){for(var i=0;i<endOfOrderItems.length;i++)endOfOrderItems[i].isSideDish=!0;return endOfOrderItems})}}}]),angular.module("ONO-Base-UI").directive("onoFieldSet",["$timeout",function($timeout){var nullFormCtrl={$addControl:angular.noop,$removeControl:angular.noop,$setValidity:angular.noop,$setDirty:angular.noop,$setPristine:angular.noop};return{restrict:"A",name:"form",controller:["$element","$attrs","$scope","$animate",function(element,attrs,$scope,$animate){var VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PENDING_CLASS="ng-pending",form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[],SNAKE_CASE_REGEXP=/[A-Z]/g;var getPrototypeOf=Object.getPrototypeOf;function toggleValidCss(isValid,validationErrorKey){$animate.removeClass(element,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey),$animate.addClass(element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}function arrayRemove(array,value){var index=array.indexOf(value);return 0<=index&&array.splice(index,1),index}function forEach(obj,iterator,context){var key,length,value;if(obj)if(angular.isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(angular.isArray(obj)||function(obj){if(null==obj||function(obj){return obj&&obj.window===obj}(obj))return!1;if(angular.isArray(obj)||angular.isString(obj)||jQuery&&obj instanceof jQuery)return!0;var length="length"in Object(obj)&&obj.length;return angular.isNumber(length)&&(0<=length&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}(obj)){var isPrimitive=!angular.isObject(obj);for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(null!==(value=obj)&&angular.isObject(value)&&!getPrototypeOf(value))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}form.$name=$scope.$eval(attrs.onoFieldSet),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$messages=parentForm.$messages.$new(),form.$$success={},form.$pending=void 0,parentForm.$addControl(form),$scope.$watch(function(){return parentForm.$submitted},function($submitted){form.$submitted=$submitted}),$scope.localForm=parentForm[form.$name],$scope[form.$name]=parentForm[form.$name],element.addClass("ng-pristine"),toggleValidCss(!0),form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){for(var i=0;i<controls.length;i++)controls[i].$commitViewValue()},form.$addControl=function(control){controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){for(var i in control.$name&&form[control.$name]===control&&delete form[control.$name],errors)Enumerable.From(errors[i]).ForEach(function(ctrl){ctrl===control&&form.$setValidity(i,!0,control)});controls.splice(controls.indexOf(control),1)},form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid)queue&&(queue.splice(queue.indexOf(control),1),queue.length||(--invalidCount||(toggleValidCss(isValid),form.$valid=!0,form.$invalid=!1),toggleValidCss(!(errors[validationToken]=!1),validationToken),parentForm.$setValidity(validationToken,!0,form)));else{if(invalidCount||toggleValidCss(isValid),queue){if(0<queue.indexOf(control))return}else errors[validationToken]=queue=[],invalidCount++,toggleValidCss(!1,validationToken),parentForm.$setValidity(validationToken,!1,form);queue.push(control),form.$valid=!1,form.$invalid=!0}},form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){!function(name,context){if("hasOwnProperty"===name)throw"badnamehasOwnProperty is not a valid {0} name"}(control.$name),controls.push(control),control.$name&&(form[control.$name]=control),control.$$parentForm=form},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],(form[newName]=control).$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control),control.$$parentForm=nullFormCtrl},function(context){var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,$animate=context.$animate;function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=void 0)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){var separator;validationErrorKey=validationErrorKey?"-"+(separator=(separator="-")||"_",validationErrorKey.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})):"",cachedToggleClass(VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(INVALID_CLASS+validationErrorKey,!1===isValid)}classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=function(validationErrorKey,state,controller){angular.isUndefined(state)?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller);value=state,"boolean"!=typeof value?(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller));var value;ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=void 0,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?void 0:!ctrl.$error[validationErrorKey]&&(!!ctrl.$$success[validationErrorKey]||null);toggleValidationCss(validationErrorKey,combinedState),ctrl.$$parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}}({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];list?-1===list.indexOf(controller)&&list.push(controller):object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,"ng-pristine"),$animate.addClass(element,"ng-dirty"),form.$dirty=!0,form.$pristine=!1,form.$$parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,"ng-pristine","ng-dirty "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})}}],compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue()}),event.preventDefault?event.preventDefault():event.returnValue=!1};$(formElement[0]).on("submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){$(formElement[0]).off("submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,void 0,alias),angular.extend(controller,nullFormCtrl)})}}}}}]),angular.module("ONO-Services").factory("toppingPricingSvc",[function(){"use strict";var calculator={largesthalf:function(menuItem){throw"not_implemented"},halvesmakewholes:function(menuItem){var table=calculator.totalByTier(menuItem),toppingPricingConfiguration=menuItem.$toppingPricing,price=0;for(var tier in table){var tpricing=toppingPricingConfiguration.tier_pricing[tier],entry=table[tier],halfsToMakeWholes=Math.round(entry.half),fullToppings=entry.full+halfsToMakeWholes,halfToppings=Math.round(2*(entry.half-halfsToMakeWholes)),tierCharge=fullToppings*tpricing.full_topping_price+halfToppings*tpricing.half_topping_price;price+=Math.max(0,tierCharge)}return price},halvesmakewholesroundup:function(menuItem){throw"not_implemented"},threshold:function(menuItem){throw"not_implemented"},default:function(menuItem){var table=calculator.totalByTier(menuItem),toppingPricingConfiguration=menuItem.$toppingPricing,price=0;for(var tier in table){var tierCharge=0,tpricing=toppingPricingConfiguration.tier_pricing[tier],entry=table[tier];for(var hw in entry){var mult="half"==hw?2:1;tierCharge+=tpricing[hw+"_topping_price"]*entry[hw]*mult}price+=Math.max(0,tierCharge)}return price},totalByTier:function(menuItem){var table={tier1:{full:0,half:0},tier2:{full:0,half:0},tier3:{full:0,half:0},tier4:{full:0,half:0}},freeSubs=menuItem.topping_set.free_substitutions;Enumerable.From(menuItem.topping_set.topping_groups).SelectMany(function(tg){return tg.toppings}).Where(function(topping){return"free"!==topping.tier}).ForEach(function(t){var halfOrFull=calculator.fullOrHalf(t),startQty=table[t.tier][halfOrFull];table[t.tier][halfOrFull]=startQty+calculator.adjustedQuantity(t,freeSubs)});var freeToppings=menuItem.topping_set.free_toppings,initialFull=table.tier1.full,initialHalf=table.tier1.half,adjustment=Math.min(freeToppings,initialFull);table.tier1.full=initialFull-adjustment;var remainingFree=Math.min(freeToppings-adjustment,initialHalf);return table.tier1.half=initialHalf-remainingFree,table},adjustedQuantity:function(topping,freeSubstitutions){var qty=0;return topping.first_half&&(qty+=.5),topping.second_half&&(qty+=.5),topping.doubled&&(qty*=2),topping.preselected&&(qty-=1),freeSubstitutions||(qty=Math.max(qty,0)),qty},fullOrHalf:function(topping){return topping.first_half!=topping.second_half?"half":"full"}};return{calculateToppingPricing:function(menuItem){return calculator[menuItem.pricing.topping_pricing_configuration.calculation_method](menuItem)}}}]),angular.module("ONO-Base-UI").controller("invoiceCtrl",["$rootScope","$scope","orderHistorySvc","$stateParams","restaurantSvc","translateFilter","momentFilter",function($rootScope,$scope,orderHistorySvc,$stateParams,restaurantSvc,translateFilter,momentFilter){$scope.model={},$rootScope.loggedIn&&orderHistorySvc.viewInvoice($stateParams.order_id).then(function(response){$scope.model.cart=response,$scope.model.cart.date_placed=moment.utc($scope.model.cart.date_placed);var fullfilledOnTraslationKey=moment.utc($scope.model.cart.fulfillment_date)>moment.utc()?"Invoice_Will_FullfilledOn":"Invoice_FullfilledOn";$scope.fullfilledOn=translateFilter(fullfilledOnTraslationKey,momentFilter($scope.model.cart.fulfillment_date,"LL"),momentFilter($scope.model.cart.fulfillment_date,"LT")),restaurantSvc.getRestaurant($scope.model.cart.restaurant_id).then(function(restaurant){$scope.restaurant=restaurant}),$scope.model.showDeliveryAddress="Delivery"===$scope.model.cart.fulfillment_type&&$scope.model.cart.fulfillment_details.delivery_address}),$scope.orderItemClick=function(oi){$scope.displaySize.isMobile&&(oi.hideOrderItemAdditional=!oi.hideOrderItemAdditional)}}]),angular.module("ONO-Base-UI").controller("orderHistoryCtrl",["$scope","orderHistorySvc","cartSvc","onoAlert","$state","sessionManager",function($scope,orderHistorySvc,cartSvc,onoAlert,$state,sessionManager){$scope.loadSavedOrders=function(){var promise=orderHistorySvc.getSavedOrders();return promise.then(function(savedOrders){$scope.savedOrders=savedOrders}),promise},$scope.userId=sessionManager.customer().id,$scope.loadSavedOrders(),orderHistorySvc.getOrderHistory().then(function(orderHistory){$scope.orderHistory=orderHistory}),$scope.repeatOrder=function(order){angular.isDefined(order)&&angular.isDefined(order.id)&&angular.isDefined(order.restaurant_id)&&cartSvc.repeatOrder(order.id,order.restaurant_id)},$scope.removeSavedOrder=function(orderId){orderId&&onoAlert.show({title:"DeleteSavedOrder",message:"DeleteSavedOrder_Message",actions:[{name:"Delete",action:function(scope){orderHistorySvc.deleteSavedOrder(orderId).then(function(){$scope.loadSavedOrders(),scope.hide()})}},{name:"Cancel",action:function(scope){scope.hide()}}]})}}]),angular.module("ONO-Services").factory("orderHistorySvc",["$rootScope","$window","$http","$q","customerSvc","featureFlagSvc",function($rootScope,$window,$http,$q,customerSvc,featureFlagSvc){var savedOrderCache,orderHistoryCache,resource_getOrderHistory=function(customerId){return $http({method:"GET",url:"/api/customer/"+customerId+"/order_history"}).then(function(response){return response.data})},resource_getSavedOrders=function(customerId){return $http({method:"GET",url:"/api/customer/"+customerId+"/saved_orders"}).then(function(response){return response.data})},resource_savePastOrder=function(customerId,orderId,nickname){return $http({method:"POST",url:"/api/customer/"+customerId+"/order/"+orderId,params:{nickName:nickname}}).then(function(response){return response.data},function(response){return response.data})},resource_removePastOrder=function(customerId,orderId){return $http({method:"DELETE",url:"/api/customer/"+customerId+"/order/"+orderId}).then(function(response){return response.data})},resource_getOrderById=function(customerId,orderId){return $http({method:"GET",url:"/api/customer/"+customerId+"/order/"+orderId}).then(function(response){return featureFlagSvc.featureFlagExists($rootScope,"featureFlags","adjustSubtotalDeliveryFee")&&$rootScope.featureFlags.adjustSubtotalDeliveryFee&&response&&"Delivery"===response.data.fulfillment_type&&(response.data.totals.subtotal-=response.data.totals.delivery_fee),response.data})};$rootScope.$on("customer:changed",function(e,customer){customer?customerId!=customer.id&&(customerId=customer.id,orderHistoryCache=savedOrderCache=null):orderHistoryCache=savedOrderCache=customerId=null});var customerId=customerSvc.customer?customerSvc.customer.id:null;function fulfilledPromise(val){var empty=$q.defer();return empty.resolve(val),empty.promise}return{getOrderHistory:function(forceRefresh){return customerId?orderHistoryCache&&!forceRefresh?fulfilledPromise(orderHistoryCache):resource_getOrderHistory(customerId).then(function(orders){return orderHistoryCache=orders}):fulfilledPromise([])},getSavedOrders:function(forceRefresh){return customerId?savedOrderCache&&!forceRefresh?fulfilledPromise(savedOrderCache):resource_getSavedOrders(customerId).then(function(orders){return savedOrderCache=orders}):fulfilledPromise([])},saveOrder:function(orderId,nickname){return orderId&&nickname&&nickname.trim()?resource_savePastOrder(customerId,orderId,nickname.trim()).then(function(response){return savedOrderCache=null,response}):fulfilledPromise(null)},deleteSavedOrder:function(orderId){return resource_removePastOrder(customerId,orderId).then(function(){savedOrderCache=null})},viewInvoice:function(orderId){return resource_getOrderById(customerId,orderId)}}}]),angular.module("ONO-Base-UI").controller("saveOrderCtrl",["$scope","orderHistorySvc","cartSvc",function($scope,orderHistorySvc,cartSvc){$scope.saveOrder={},$scope.saveOrderFormSubmit=function(){$scope.pastOrder&&$scope.pastOrder.id&&orderHistorySvc.saveOrder($scope.pastOrder.id,$scope.saveOrder.nickname).then(function(result){if(result&&result.error)return $scope.$invalid=!0,void $scope.$formErrors.push(result.error);$scope.loadSavedOrders?$scope.loadSavedOrders().then(function(){$scope.handleDialogAction()}):$scope.handleDialogAction()})},$scope.handleDialogAction=function(){$scope.$emit("done"),$scope.$emit("dialogClosed")}}]),angular.module("ONO-Base-UI").controller("orderSetupCtrl",["$scope","$rootScope","$state","$stateParams","$q","$window","restaurantSvc","cartSvc","addressSvc","values","restaurant","$timeout","dateOptions","defaultMenuState","favoriteLocations","customer","sessionManager","domainEventSvc","orderSetupSvc","translationSvc","title","tokenizationFeatureFlagsSvc","featureFlagSvc","userAlertSvc",function($scope,$rootScope,$state,$stateParams,$q,$window,restaurantSvc,cartSvc,addressSvc,values,restaurant,$timeout,dateOptions,defaultMenuState,favoriteLocations,customer,sessionManager,domainEventSvc,orderSetupSvc,translationSvc,title,tokenizationFeatureFlagsSvc,featureFlagSvc,userAlertSvc){var currentServerTime,ctrl=this;$scope.displaySavedDeliveryAddress=!1,angular.isObject($rootScope.featureFlags)&&angular.isObject($rootScope.featureFlags.UserAccount)&&angular.isDefined($rootScope.featureFlags.UserAccount.displaySavedDeliveryAddress)&&($scope.displaySavedDeliveryAddress=$rootScope.featureFlags.UserAccount.displaySavedDeliveryAddress),ctrl.domainEventHandlers={onMenuItemRemove:function(){ctrl.initialize()}},_.isNull(restaurant)&&_.isNull(favoriteLocations)&&$state.go("home"),$scope.changefulfillmentDateType=function(fulfillmentDateType){$scope.orderSetup.fulfillmentDateType=fulfillmentDateType},$scope.changeLocation=function(){angular.isObject($rootScope.featureFlags)&&angular.isObject($rootScope.featureFlags.layout)&&angular.isDefined($rootScope.featureFlags.layout.header)&&$rootScope.featureFlags.layout.header||$state.go("restaurantSearch"),angular.isDefined(sessionStorage.fulfillmentType)&&"Delivery"===sessionStorage.fulfillmentType?$state.go("delivery"):$state.go("pickup")},$scope.restaurant=restaurant,currentServerTime=$scope.restaurant.currentServerTime(),$scope.processingDeliveryAddressChange=!1,$scope.deliveryHoursAvailableForThisLocation=!0;var closingDates=[];if(!$scope.restaurant.taking_orders)return userAlertSvc.show({title:"UserAlert_NotTakingOrders_Title",message:"UserAlert_NotTakingOrders",actions:[userAlertSvc.commonActions.Dismiss]}),!1;if(orderSetupSvc.initialize(restaurant,favoriteLocations,values).then(function(orderSetupSvc){$scope.values=orderSetupSvc.values,$scope.orderSetup=orderSetupSvc.orderSetup,$scope.zipMask=orderSetupSvc.values.countries[0].Value.ZipMask,$scope.phoneMask=orderSetupSvc.values.countries[0].Value.PhoneNumberMask,$scope.orderSetup.loyaltyCardNumber=customer.loyalty_card_number,ctrl.initialize()}),$scope.loggedIn)$scope.firstName=customer.first_name;else{var user=sessionManager.user()||{};$scope.firstName=user.firstName}this.editingAddress=!1,$rootScope.addressIsGeocoded||($rootScope.addressIsGeocoded=!1),$rootScope.isDelivery=function(){return"Delivery"===$window.sessionStorage.fulfillmentType},this.watchHandlers={menuType:function(val){ctrl.updateFulfillmentTypes(),ctrl.updateFulfillmentTimes(),val&&($scope.attempted=!1)},fulfillmentType:function(){if($scope.orderSetup.fulfillmentType){$window.sessionStorage.fulfillmentType=$scope.orderSetup.fulfillmentType,$scope.attempted=!1,ctrl.updateFulfillmentDateTypes(),$scope.orderSetup.fulfillmentDate=null,ctrl.updateFulfillmentTimes();var pageTitle="ADA_Page_Title_Set_Pickup_Time";"Delivery"===$scope.orderSetup.fulfillmentType&&(featureFlagSvc.featureFlagExists($rootScope,"featureFlags","forceTodayForDeliveryOrders")&&$rootScope.featureFlags.forceTodayForDeliveryOrders&&($scope.orderSetup.fulfillmentDate=moment().format("L")),$scope.loggedIn?($scope.attempted=!1,$scope.address={}):$scope.orderSetup.address||!_.isUndefined($window.sessionStorage.currentDeliveryAddress)?$scope.orderSetup.address=$scope.orderSetup.address?$scope.orderSetup.address:angular.fromJson($window.sessionStorage.currentDeliveryAddress):0===$scope.values.addresses.length&&$scope.editAddress("new"),pageTitle="ADA_Page_Title_Set_Delivery_Time"),title.updateTitle(translationSvc.translate(pageTitle))}},fulfillmentDateType:function(){if($scope.restaurant&&$scope.orderSetup.fulfillmentType&&$scope.orderSetup.fulfillmentDateType!==orderSetupSvc.fulfillmentDateType.ASAP&&!$scope.orderSetup.fulfillmentDate){var fulfillmentTypeInfo=orderSetupSvc.getFulfillmentTypeInfo(),earliestOpenTime=orderSetupSvc.getEarliestOpenTime(orderSetupSvc.getEarliestPossibleFulfillmentTime(),fulfillmentTypeInfo);earliestOpenTime&&($scope.orderSetup.fulfillmentDate=earliestOpenTime.format("l"))}$scope.restaurant&&$scope.orderSetup.fulfillmentDateType&&domainEventSvc.raiseEvent("onOrderSetupFulfillmentDateTypeSelected",{fulfillmentDateType:$scope.orderSetup.fulfillmentDateType,leadTime:$scope.orderSetup.leadTime,serviceTimeRangeLower:$scope.orderSetup.serviceTimeRangeLower,serviceTimeRangeUpper:$scope.orderSetup.serviceTimeRangeUpper,storeNumber:$scope.restaurant.store_number}),ctrl.updateFulfillmentTimes()},fulfillmentDate:function(){ctrl.updateFulfillmentTimes()},address:function(){$scope.orderSetup.address&&$scope.orderSetupForm&&$scope.orderSetupForm.addressForm&&!$scope.orderSetupForm.addressForm.$error.required&&ctrl.setDeliveryAddress()},country:function(){if($scope.address){var selectedCountry=$scope.address.country;if(selectedCountry){var c=Enumerable.From($scope.values.countries).FirstOrDefault({},function(country){return country.Key===selectedCountry}).Value;c&&($scope.zipCodeValidation=c.ZipCodeValidation,$scope.zipCodeLength=c.ZipMask.length,$scope.phoneMask=c.PhoneNumberMask,$scope.values.states=c.States)}}}},this.show={loyaltyCardNumber:function(){return $rootScope.loggedIn},menuTypes:function(){return 1<$scope.values.menuTypes.length},fulfillmentTypes:function(){return!!$scope.orderSetup.menuType&&1<$scope.values.fulfillmentTypes.length},address:function(){return"Delivery"===$scope.orderSetup.fulfillmentType},addressList:function(){return!!$scope.values.addresses.length&&!ctrl.editingAddress},addressEdit:function(){return!$scope.values.addresses.length||ctrl.editingAddress},addressCancel:function(){return!!$scope.values.addresses.length},fulfillmentDateType:function(){return!(!$scope.restaurant.taking_orders||!$scope.orderSetup.fulfillmentType||1===$scope.values.fulfillmentDateTypes.length&&"Specific"===$scope.values.fulfillmentDateTypes[0]||ctrl.show.noOrderUntilOpen())&&("Delivery"===$scope.orderSetup.fulfillmentType?(tokenizationFeatureFlagsSvc.setLocationBasedFlags($scope.restaurant),ctrl.addressValid()&&!ctrl.editingAddress):!!$scope.orderSetup.fulfillmentType)},noOrderUntilOpen:function(){return!!$scope.orderSetup.fulfillmentType&&(0===orderSetupSvc.getFulfillmentInfo().advanced_ordering_days&&!orderSetupSvc.isOpenNow())},fulfillmentDate:function(){return!(!$scope.restaurant.taking_orders||!$scope.orderSetup.fulfillmentType||$scope.orderSetup.fulfillmentDateType!==orderSetupSvc.fulfillmentDateType.Specific||ctrl.show.noOrderUntilOpen())&&("Delivery"!==$scope.orderSetup.fulfillmentType||ctrl.addressValid()&&!ctrl.editingAddress)},submit:function(){return("Delivery"!==$scope.orderSetup.fulfillmentType||ctrl.addressValid())&&(null!=$scope.orderSetup.fulfillmentTime||$scope.orderSetup.fulfillmentDateType===orderSetupSvc.fulfillmentDateType.ASAP)}},this.initialize=function(){var setup=cartSvc.editOrderSetup(),setupComplete=cartSvc.setupComplete();$window.sessionStorage.fulfillmentType;if($scope.orderSetup.carType=$scope.orderSetup.carType||setup.fulfillment_details.car_type,$scope.orderSetup.carColor=$scope.orderSetup.carColor||setup.fulfillment_details.car_color,$scope.orderSetup.carDescription=$scope.orderSetup.carDescription||setup.fulfillment_details.car_description,$scope.orderSetup.loyaltyCardNumber=setup.loyalty_card_number,setup.menu_type&&Enumerable.From($scope.values.menuTypes).Contains(setup.menu_type)&&($scope.orderSetup.menuType=setup.menu_type),_.isUndefined($window.sessionStorage.fulfillmentType))setup.fulfillment_type&&($scope.orderSetup.fulfillmentType=setup.fulfillment_type);else if("Delivery"===$window.sessionStorage.fulfillmentType){var delivery=_.find(_.first($scope.restaurant.fulfillment_infos).fulfillment_type_infos,{fulfillment_type:"Delivery"});if(_.isUndefined(delivery))$scope.orderSetup.fulfillmentType="Curbside",$window.sessionStorage.fulfillmentType="Curbside";else{var deliveryHours=_.find(_.first($scope.restaurant.fulfillment_infos).fulfillment_type_infos,{fulfillment_type:"Delivery"}).hours;_.isUndefined(_.find(deliveryHours,{start_day:moment(new Date,"dddd").format("dddd")}))?($scope.orderSetup.fulfillmentType="Curbside",$window.sessionStorage.fulfillmentType="Curbside"):$scope.orderSetup.fulfillmentType=$window.sessionStorage.fulfillmentType}}else $scope.orderSetup.fulfillmentType=$window.sessionStorage.fulfillmentType;if(setup.fulfillment_date){var newFulfillmentDate=orderSetupSvc.momentWithTimeZone(setup.fulfillment_date);$scope.orderSetup.fulfillmentDateType=orderSetupSvc.fulfillmentDateType.Specific,$scope.orderSetup.fulfillmentDate=newFulfillmentDate.format("l"),$scope.orderSetup.fulfillmentTime=newFulfillmentDate}else setupComplete?$scope.orderSetup.fulfillmentDateType=orderSetupSvc.fulfillmentDateType.ASAP:orderSetupSvc.allowASAP()||($scope.orderSetup.fulfillmentDateType=null);if(setup.fulfillment_details.delivery_address&&!$scope.restaurant.delivering_orders)return ctrl.updateFulfillmentTypes(),void ctrl.updateFulfillmentTimes();ctrl.updateFulfillmentDateTypes(),ctrl.updateFulfillmentTypes(),ctrl.updateFulfillmentTimes(),ctrl.getStoreClosingDates(),_.isObject($scope.orderSetup)&&angular.isDefined($scope.orderSetup.fulfillmentType)&&("Curbside"===$scope.orderSetup.fulfillmentType?$window.sessionStorage.curbsideRestaurant=angular.toJson(restaurant):"Delivery"===$scope.orderSetup.fulfillmentType&&angular.isUndefined($window.sessionStorage.currentDeliveryAddress)&&($window.sessionStorage.currentDeliveryAddress=angular.toJson(restaurant.address))),$window.sessionStorage&&$window.sessionStorage.currentDeliveryAddress?$scope.orderSetup.address=angular.fromJson($window.sessionStorage.currentDeliveryAddress):setup.fulfillment_details&&setup.fulfillment_details.delivery_address?$scope.orderSetup.address=setup.fulfillment_details.delivery_address:setup.fulfillment_details&&(_.isUndefined($window.sessionStorage.currentDeliveryAddress)?orderSetupSvc.orderSetup.address=null:$scope.orderSetup.address=angular.fromJson($window.sessionStorage.currentDeliveryAddress)),ctrl.setupWatches(),domainEventSvc.addHandler(ctrl.domainEventHandlers),$scope.$on("$destroy",function(){domainEventSvc.removeHandler(ctrl.domainEventHandlers)})},this.setupWatches=function(){var that=this;$scope.$watch("orderSetup.menuType",function(){that.watchHandlers.menuType.apply(that,arguments)}),$scope.$watch("orderSetup.fulfillmentType",function(){that.watchHandlers.fulfillmentType.apply(that,arguments)}),$scope.$watch("orderSetup.fulfillmentDateType",function(){that.watchHandlers.fulfillmentDateType.apply(that,arguments)}),$scope.$watch("orderSetup.fulfillmentDate",function(){that.watchHandlers.fulfillmentDate.apply(that,arguments)}),$scope.$watch("orderSetup.address",function(){$scope.processingDeliveryAddressChange||that.watchHandlers.address.apply(that,arguments)}),$scope.$watch("address.country",function(){that.watchHandlers.country.apply(that,arguments)})},this.updateAndFormatDeliveryAdress=function(addressString){var addressArray,i=0;if(0<(addressArray=addressString.split(",")).length){$scope.orderSetup.address.address1=addressArray[i++],5===addressArray.length?$scope.orderSetup.address.address2=addressArray[i++]:$scope.orderSetup.address.hasOwnProperty("address2")||($scope.orderSetup.address.address2=""),$scope.orderSetup.address.city=addressArray[i++].trim();var wrongFormattedSection=addressArray[i++].trim(),match=/([a-zA-Z]{2})\s{1}(\d{5}\-\d{4})/g.exec(wrongFormattedSection);null==match&&(match=/([a-zA-Z]{2})\s{1}(\d{5})/g.exec(wrongFormattedSection)),null!=match&&3===match.length?($scope.orderSetup.address.state=match[1].trim(),$scope.orderSetup.address.zip_code=match[2].trim()):($scope.orderSetup.address.state=addressArray[i++],$scope.orderSetup.address.zip_code=addressArray[i++]),$window.sessionStorage.currentDeliveryAddress=angular.toJson($scope.orderSetup.address)}},this.setRestaurant=function(restaurant){var deferred=$q.defer();featureFlagSvc.featureFlagExists($rootScope,"featureFlags","isRackspace")&&!$rootScope.featureFlags.isRackspace&&this.updateAndFormatDeliveryAdress(restaurant.formattedAddress),!restaurant||$scope.restaurant&&restaurant.id===$scope.restaurant.id||(orderSetupSvc.setRestaurant(restaurant),cartSvc.initialize(restaurant),$scope.restaurant=restaurant,$scope.values.menuTypes=Enumerable.From($scope.restaurant.fulfillment_infos).Select(function(fi){return fi.menu_type}).ToArray(),1===$scope.values.menuTypes.length&&($scope.orderSetup.menuType=$scope.values.menuTypes[0]),ctrl.updateFulfillmentDateTypes(),ctrl.updateFulfillmentTypes(),ctrl.updateFulfillmentTimes(),-1===$scope.values.fulfillmentDateTypes.indexOf($scope.orderSetup.fulfillmentDateType)&&($scope.orderSetup.fulfillmentDateType=null)),deferred.resolve(null);var deliveryHours=_.find(_.first($scope.restaurant.fulfillment_infos).fulfillment_type_infos,{fulfillment_type:"Delivery"}).hours,today=_.find(deliveryHours,{start_day:moment(new Date,"dddd").format("dddd")}),currentTime=ctrl.getCurrentTime(),deliveryTurnedOff=_.isUndefined(today)||!(today.start_time<currentTime&&today.end_time>currentTime);return $scope.deliveryHoursAvailableForThisLocation=!deliveryTurnedOff,$scope.processingDeliveryAddressChange=!1,deferred.promise},this.getCurrentTime=function(){var date=new Date;return("0"+date.getHours()).slice(-2)+":"+("0"+date.getMinutes()).slice(-2)+":"+("0"+date.getSeconds()).slice(-2)},this.setDeliveryAddress=function(){"Delivery"!==$scope.orderSetup.fulfillmentType||$scope.processingDeliveryAddressChange||($scope.processingDeliveryAddressChange=!0,restaurantSvc.getDeliveryRestaurant($scope.orderSetup.address).then(function(rest){return addressSvc.upsertDeliveryAddress($scope.orderSetup.address).then(function(addressId){if($rootScope.addressIsGeocoded=!0,ctrl.editingAddress=!1,addressId&&($scope.address.id=addressId,$scope.orderSetup.address.id=addressId),!ctrl.hasMatchingAddresses($scope.orderSetup.address))if($scope.loggedIn)if($scope.orderSetup.address.id&&0<$scope.values.addresses.length){var matchIndex=_.findIndex($scope.values.addresses,{id:$scope.orderSetup.address.id});-1<matchIndex?$scope.values.addresses[matchIndex]=$scope.orderSetup.address:$scope.values.addresses.push($scope.orderSetup.address)}else $scope.values.addresses[0]=$scope.orderSetup.address;else $scope.values.addresses[0]=$scope.orderSetup.address}),$scope.orderSetupForm.addressForm&&$scope.orderSetupForm.addressForm.$formErrors.splice(0,$scope.orderSetupForm.addressForm.$formErrors.length),ctrl.setRestaurant(rest)}).catch(function(res){for(var key in $scope.attempted=!1,ctrl.editingAddress=!0,$rootScope.addressIsGeocoded=!1,res.data.ModelState)-1===$scope.orderSetupForm.addressForm.$formErrors.indexOf(res.data.ModelState[key][0])&&$scope.orderSetupForm.addressForm.$formErrors.push(res.data.ModelState[key][0])}))},this.hasMatchingAddresses=function(newAddress){if(null,!newAddress||!$scope.values.addresses.length)return!1;var matchedAddresses=$scope.values.addresses.map(function(address){newAddress.address2=newAddress.address2||"";var transformedAddress=_.mapObject(address,function(value){return value&&angular.isString(value)?value.toUpperCase():value}),transformedNewAddress=_.mapObject(newAddress,function(value){return value&&angular.isString(value)?value.toUpperCase():value}),isMatch=_.isMatch(_.omit(transformedAddress,["conceptId","country","id","placeChanged"]),_.omit(transformedNewAddress,["country","id","conceptId","placeChanged"]));return isMatch&&address,isMatch?address:_.noop()});return!!_.compact(matchedAddresses).length},this.addressValid=function(){if($scope.displaySavedDeliveryAddress)return!0;var addy=$scope.orderSetupForm.addressForm,valid=!1;return addy.address&&addy.address.$modelValue&&(angular.equals({},addy.address.$modelValue)||(valid=$rootScope.addressIsGeocoded)),valid},this.getAddress=function(addressId){var address=$scope.orderSetup.address;return addressId&&("new"===addressId?(address={},1===$scope.values.countries.length&&(address.country=$scope.values.countries[0].Key)):address=Enumerable.From($scope.values.addresses).FirstOrDefault({},function(a){return a.id===addressId})),address},this.updateFulfillmentTypes=function(){if($scope.restaurant&&$scope.orderSetup.menuType){var fulfillmentTypes=orderSetupSvc.getFulfillmentTypes($scope.orderSetup.menuType);$scope.values.fulfillmentTypes=$scope.restaurant.getTodayAvailableFulfillmentTypes(fulfillmentTypes),orderSetupSvc.updateFulfillmentType($scope.values.fulfillmentTypes)}},this.updateFulfillmentDateTypes=function(){if($scope.restaurant&&$scope.orderSetup.fulfillmentType){var fulfillmentDateTypes=[];orderSetupSvc.allowASAP()&&fulfillmentDateTypes.push(orderSetupSvc.fulfillmentDateType.ASAP),$scope.restaurant.allow_specific_time&&fulfillmentDateTypes.push(orderSetupSvc.fulfillmentDateType.Specific),$scope.values.fulfillmentDateTypes=fulfillmentDateTypes,orderSetupSvc.updateFulfillmentDateType($scope.values.fulfillmentDateTypes)}},this.updateFulfillmentTimes=function(){if($scope.restaurant&&$scope.orderSetup.menuType&&$scope.orderSetup.fulfillmentType){var fulfillmentInfo=orderSetupSvc.getFulfillmentInfo(),defaultDate=moment(this.getDefaultDate($scope.restaurant.currentServerTime().clone()).format("M/D/YY"));null==$scope.orderSetup.fulfillmentDate&&($scope.orderSetup.fulfillmentDate=defaultDate._i);var fulfillmentDate=orderSetupSvc.momentWithTimeZone($scope.orderSetup.fulfillmentDate,!0);$scope.orderSetup.leadTime=orderSetupSvc.calculateCurrentLeadTime(),$scope.orderSetup.serviceTimeRangeLower=orderSetupSvc.getServiceTimeRangeLower(),$scope.orderSetup.serviceTimeRangeUpper=orderSetupSvc.getServiceTimeRangeUpper();var minDate,earliestOpenTime=orderSetupSvc.getEarliestPossibleFulfillmentTime();minDate=earliestOpenTime?earliestOpenTime.startOf("day"):defaultDate,$scope.dateOptions.defaultDate=$scope.orderSetup.fulfillmentDate,$scope.dateOptions.minDate=moment(minDate.format("YYYY-MM-DDTHH:mm:ss")).toDate();var advanceDays=function(fulfillmentInfo,fulfillmentType){var orderingDays=7,fulfillmentTypeInfo=_.findWhere(fulfillmentInfo.fulfillment_type_infos,{fulfillment_type:fulfillmentType});angular.isDefined(fulfillmentTypeInfo)&&(orderingDays=fulfillmentTypeInfo.advanced_ordering_days);return orderingDays}(fulfillmentInfo,$scope.orderSetup.fulfillmentType),maxDate=$scope.restaurant.currentServerTime().clone().add(advanceDays,"d");$scope.dateOptions.maxDate=moment(maxDate.format("YYYY-MM-DDTHH:mm:ss")).toDate(),$scope.values.fulfillmentTimes=orderSetupSvc.getFulfillmentTimes(fulfillmentDate,!1,$scope.orderSetup.leadTime);var fulfillmentTimes=Enumerable.From($scope.values.fulfillmentTimes);orderSetupSvc.updateFulfillmentTime(fulfillmentTimes,fulfillmentDate),$scope.orderSetup.fulfillmentTime||"Specific"!==$scope.orderSetup.fulfillmentDateType||orderSetupSvc.updateFulfillmentTime($scope.values.fulfillmentTimes[0])}},this.getDefaultDate=function(date){var potentialFulfillmentDate=orderSetupSvc.momentWithTimeZone(date);return 0<orderSetupSvc.getFulfillmentTimes(potentialFulfillmentDate,!1).length?date:this.getDefaultDate(date.add(1,"days"))},this.enumerateDaysBetweenDates=function(startDate,endDate,isClosingDates){for(var firstDateCopy,dates=[],firstDate=moment(startDate).startOf("day"),lastDate=moment(endDate).startOf("day");firstDate.add(1,"days").diff(lastDate)<0;)firstDateCopy=firstDate.clone().toDate().toDateString(),isClosingDates?closingDates.push(firstDateCopy):dates.push(firstDateCopy);return dates},this.getStoreClosingDates=function(){var allDayClosingDates=_.filter($scope.restaurant.restaurant_closings,function(day){return day.all_day});_.each(allDayClosingDates,function(day){ctrl.enumerateDaysBetweenDates(moment(day.close_datetime).subtract(1,"d"),day.resume_normal_operating_hours_datetime,!0)})},$scope.dateDisplayFormat=dateOptions.dateDisplayFormat[$rootScope.localeLang],$scope.dateParseFormat=dateOptions.dateParseFormat[$rootScope.localeLang],$scope.dateOptions={changeMonth:!1,closeText:"X",dateFormat:dateOptions.dateDisplayFormat[$rootScope.localeLang],defaultDate:currentServerTime?moment(currentServerTime.format("YYYY-MM-DDTHH:mm:ss")).toDate():0,constrainInput:!0,minDate:currentServerTime?moment(currentServerTime.format("YYYY-MM-DDTHH:mm:ss")).toDate():0,beforeShowDay:function(date){if(date>$scope.dateOptions.maxDate||date<$scope.dateOptions.minDate.getDate())return!1;var advancedOrderingDates=ctrl.enumerateDaysBetweenDates(moment($scope.restaurant.currentServerTime()).subtract(1,"d"),moment($scope.dateOptions.maxDate).add(1,"d"),!1),overlapDates=_.intersection(advancedOrderingDates,closingDates);advancedOrderingDates.length===overlapDates.length&&($scope.values.fulfillmentTimes=null,$scope.orderSetupForm.$invalid=!0);var potentialFulfillmentDate=orderSetupSvc.momentWithTimeZone(date);return[0<orderSetupSvc.getFulfillmentTimes(potentialFulfillmentDate,!1).length,"day"]}},$scope.createOrder=function(){var promise=orderSetupSvc.createOrder();return domainEventSvc.raiseEvent("onOrderSetupStartOrder",{fulfillmentDateType:$scope.orderSetup.fulfillmentDateType,leadTime:$scope.orderSetup.leadTime,serviceTimeRangeLower:$scope.orderSetup.serviceTimeRangeLower,serviceTimeRangeUpper:$scope.orderSetup.serviceTimeRangeUpper,storeNumber:$scope.restaurant.store_number,fulfillmentType:$scope.orderSetup.fulfillmentType}),promise.then(function(res){if(domainEventSvc.raiseEvent("onCreateCart",res.id),$stateParams.gotoState)$state.go($stateParams.gotoState);else{var menuParams={fulfillmentType:res.fulfillment_type,menuType:res.menu_type,restaurantId:res.restaurant_id,fulfillmentDate:res.fulfillment_date};$state.go($scope.defaultMenuState,menuParams)}}).catch(function(fault){domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:fault,cart:$scope.model.cart}),ctrl.initialize()}),promise},$scope.show=function(attr){if(_.isString(attr)&&ctrl.show[attr])return ctrl.show[attr]()},$scope.removeAddress=function(address){$window.sessionStorage.removeItem("currentDeliveryAddress"),addressSvc.removeAddress(address).then(function(){$scope.orderSetup.address=null;var index=$scope.values.addresses.indexOf(address);$scope.values.addresses.splice(index,1),0===$scope.values.addresses.length&&$scope.editAddress("new"),$scope.address&&$scope.address.id===address.id&&($scope.address.id=void 0)})},$scope.saveDeliveryAddress=function(){if($scope.address&&$scope.address.address1){$scope.attempted=!0;var address=angular.copy($scope.address);$scope.processingDeliveryAddressChange=!1,$scope.orderSetup.address=address}},$scope.showFutureDayMessage=function(date){if(!date)return!1;var currentBusinessDay=orderSetupSvc.getCurrentBusinessDay();return null==currentBusinessDay||date.isAfter(currentBusinessDay.last)},$scope.fulfillmentTimeChanged=function(){$scope.orderSetup.fulfillmentDate=$scope.orderSetup.fulfillmentTime.format("l")},$scope.editAddress=function(addressId){$scope.attempted=!1,ctrl.editingAddress=!0,$scope.address=addressId?angular.copy(ctrl.getAddress(addressId)):angular.copy($scope.orderSetup.address)},$scope.cancelEdit=function(){$rootScope.addressIsGeocoded=!0,ctrl.editingAddress=!1,$scope.processingDeliveryAddressChange=!1,$scope.orderSetup.address=angular.fromJson($window.sessionStorage.currentDeliveryAddress)}}]).controller("BP.orderSetupCtrl",["$controller","$scope","$rootScope","$state","$stateParams","$q","$timeout","restaurantSvc","cartSvc","addressSvc","domainEventSvc","orderSetupSvc","values","restaurant","dateOptions","defaultMenuState","favoriteLocations","customer","sessionManager",function($controller,$scope,$rootScope,$state,$stateParams,$q,$timeout,restaurantSvc,cartSvc,addressSvc,domainEventSvc,orderSetupSvc,values,restaurant,dateOptions,defaultMenuState,favoriteLocations,customer,sessionManager){var $base=$controller("orderSetupCtrl",{$scope:$scope,values:values,restaurant:restaurant,dateOptions:dateOptions,defaultMenuState:defaultMenuState,favoriteLocations:favoriteLocations,customer:customer,sessionManager:sessionManager}),bpWatchHandlers={fulfillmentType:function(value){"Pickup"!==value||$scope.restaurant.id||$timeout(function(){$state.go("selectPickupLocation")})},fulfillmentTypes:function(value){0<value.length&&value.indexOf("Delivery")<0&&($scope.values.fulfillmentTypes.push("Delivery"),$scope.editAddress("new"))},fulfillmentTime:function(date){$scope.futureOrderWarning=$scope.showFutureDayMessage(date)},restaurant:function(){$scope.restaurant&&$scope.restaurant.id&&($scope.isRestaurantOpen=orderSetupSvc.isOpenNow())}};$base.show.restaurant=function(){return!!$scope.restaurant.id&&($base.show.fulfillmentDateType()||$base.show.fulfillmentDate())};var originalFulfillmentType=$base.watchHandlers.fulfillmentType;$base.watchHandlers.fulfillmentType=function(value){originalFulfillmentType.call($base,value),bpWatchHandlers.fulfillmentType.call($base,value)};var originalSetDeliveryAddress=$base.setDeliveryAddress;$base.setDeliveryAddress=function(){originalSetDeliveryAddress.call($base),bpWatchHandlers.restaurant.call($base)},$scope.$watch("orderSetup.fulfillmentTime",bpWatchHandlers.fulfillmentTime),$scope.$watch("values.fulfillmentTypes",bpWatchHandlers.fulfillmentTypes),$scope.$watch("orderSetup.restaurant",bpWatchHandlers.restaurant),$stateParams.id&&!$scope.orderSetup.fulfillmentType&&($scope.orderSetup.fulfillmentType="Pickup")}]),angular.module("ONO-Services").factory("orderSetupSvc",["$rootScope","cartSvc","addressSvc","sessionManager","$q",function($rootScope,cartSvc,addressSvc,sessionManager,$q){"use strict";var _restaurant=null,orderSetupSvc={orderSetup:{menuType:null,fulfillmentType:null,fulfillmentDateType:null,fulfillmentDate:null,fulfillmentTime:null,address:{},carType:null,carColor:null,carDescription:null,phone:null,loyaltyCardNumber:null,serviceTimeRangeLower:null,serviceTimeRangeUpper:null},fulfillmentDateType:{Specific:"Specific",ASAP:"ASAP"},values:{menuTypes:[],fulfillmentTypes:[],fulfillmentDateTypes:[],fulfillmentTimes:[],addresses:[],countries:[]},setRestaurant:function(restaurant){_restaurant=restaurant},initialize:function(restaurant,favoriteLocations,values){var deferred=$q.defer();return(_restaurant=restaurant).is_favorite=!1,favoriteLocations&&Enumerable.From(favoriteLocations).ForEach(function(fl){_restaurant.id===fl.id&&(_restaurant.is_favorite=!0)}),orderSetupSvc.values.menuTypes=Enumerable.From(_restaurant.fulfillment_infos).Select(function(fi){return fi.menu_type}).ToArray(),orderSetupSvc.values.countries=Enumerable.From(values.Countries).ToArray(),1===orderSetupSvc.values.countries.length&&(orderSetupSvc.values.states=orderSetupSvc.values.countries[0].Value.States),1===orderSetupSvc.values.menuTypes.length&&(orderSetupSvc.orderSetup.menuType=orderSetupSvc.values.menuTypes[0]),orderSetupSvc.values.addresses=[],addressSvc.getAddresses().then(function(addressesResponse){var enumerableAddresses=Enumerable.From(orderSetupSvc.values.addresses);addressesResponse.forEach(function(x){enumerableAddresses.Any(function(y){return x.id===y.id})||this.push(x)},orderSetupSvc.values.addresses)}),deferred.resolve(orderSetupSvc),deferred.promise},getFulfillmentInfo:function(){return _restaurant.getFulfillmentInfo(orderSetupSvc.orderSetup.menuType)},getFulfillmentTypeInfo:function(){return _restaurant.getFulfillmentTypeInfo(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType)},getCurrentBusinessDay:function(){return _restaurant.getCurrentBusinessDay(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType)},getEarliestPossibleFulfillmentTime:function(){return _restaurant.getEarliestPossibleFulfillmentTime(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType)},getFulfillmentTimes:function(fulfillmentDate,includePastTimes,leadTime){return _restaurant.getFulfillmentTimes(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType,fulfillmentDate,includePastTimes,leadTime)},momentWithTimeZone:function(date,format){return _restaurant.momentWithTimeZone(date,format)},getFulfillmentDate:function(){return orderSetupSvc.orderSetup.fulfillmentDate?moment.utc(moment(orderSetupSvc.orderSetup.fulfillmentDate+" "+(orderSetupSvc.orderSetup.fulfillmentTime?orderSetupSvc.orderSetup.fulfillmentTime._isAMomentObject?orderSetupSvc.orderSetup.fulfillmentTime.format("LT"):orderSetupSvc.orderSetup.fulfillmentTime:"")).format("YYYY-MM-DDTHH:mm:ss")):null},isOpenNow:function(){return _restaurant.isOpenNow(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType)},allowASAP:function(){return orderSetupSvc.orderSetup.menuType&&orderSetupSvc.orderSetup.fulfillmentType&&_restaurant.allowASAP(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType)},getEarliestOpenTime:function(fulfillmentDate){return orderSetupSvc.getFulfillmentTimes(fulfillmentDate,!1)[0]},getFulfillmentTypes:function(menuType){for(var fulfillmentInfo=orderSetupSvc.getFulfillmentInfo(),fulfillmentTypes=Enumerable.From(fulfillmentInfo.fulfillment_type_infos).Select(function(fti){return fti.fulfillment_type}).ToArray(),fulfillmentTypeList=angular.copy(fulfillmentTypes),i=0;i<fulfillmentTypeList.length;i++)_restaurant.getCurrentBusinessDay(orderSetupSvc.orderSetup.menuType,fulfillmentTypeList[i])||(fulfillmentTypes=_.reject(fulfillmentTypes,function(obj){return obj!==fulfillmentTypeList[i]}));return fulfillmentTypes},updateFulfillmentType:function(fulfillmentTypes){if(1===fulfillmentTypes.length)orderSetupSvc.orderSetup.fulfillmentType=fulfillmentTypes[0];else if(!orderSetupSvc.orderSetup.fulfillmentType){var fulfillmentInfo=Enumerable.From(_restaurant.fulfillment_infos).FirstOrDefault(_restaurant.fulfillment_infos[0],function(fi){return!orderSetupSvc.orderSetup.menuType||fi.menu_type===orderSetupSvc.orderSetup.menuType});orderSetupSvc.orderSetup.fulfillmentType=Enumerable.From(fulfillmentTypes).FirstOrDefault(null,function(ft){return ft===fulfillmentInfo.default_fulfillment_type})}},updateFulfillmentDateType:function(fulfillmentDateTypes){if(1===fulfillmentDateTypes.length)orderSetupSvc.orderSetup.fulfillmentDateType=fulfillmentDateTypes[0];else if(!orderSetupSvc.orderSetup.fulfillmentDateType){var fulfillmentInfo=Enumerable.From(_restaurant.fulfillment_infos).FirstOrDefault(_restaurant.fulfillment_infos[0],function(fi){return!orderSetupSvc.orderSetup.menuType||fi.menu_type==orderSetupSvc.orderSetup.menuType});orderSetupSvc.orderSetup.fulfillmentDateType=Enumerable.From(fulfillmentDateTypes).FirstOrDefault(null,function(fdt){return fdt===fulfillmentInfo.default_fulfillment_date_type})}},updateFulfillmentTime:function(fulfillmentTimes,fulfillmentDate){var newFulfillmentTime;newFulfillmentTime=fulfillmentDate?fulfillmentTimes.FirstOrDefault(null,function(x){return orderSetupSvc.orderSetup.fulfillmentTime&&x.isSame(orderSetupSvc.orderSetup.fulfillmentTime)&&fulfillmentDate.dayOfYear()===orderSetupSvc.orderSetup.fulfillmentTime.dayOfYear()}):fulfillmentTimes,orderSetupSvc.orderSetup.fulfillmentTime=newFulfillmentTime},calculateCurrentLeadTime:function(){var leadTime=orderSetupSvc.getFulfillmentTypeInfo().lead_time,cart=cartSvc.viewCart(),cartLeadTime=cart.restaurant&&cart.restaurant.id===_restaurant.id&&cart.order_setup.lead_time||0;return _restaurant.currentLeadTime(Math.max(leadTime,cartLeadTime))},getServiceTimeRangeLower:function(){var serviceTime=orderSetupSvc.getFulfillmentTypeInfo().service_time,serviceTimeLower="",isAsap=orderSetupSvc.orderSetup&&orderSetupSvc.orderSetup.fulfillmentDateType&&"ASAP"==orderSetupSvc.orderSetup.fulfillmentDateType;return serviceTime&&_restaurant.hasDynamicQuote&&isAsap&&(serviceTimeLower=serviceTime.lowerQuote),cartSvc.updateServiceTimeRangeLower(serviceTimeLower),serviceTimeLower},getServiceTimeRangeUpper:function(){var serviceTime=orderSetupSvc.getFulfillmentTypeInfo().service_time,serviceTimeUpper="",isAsap=orderSetupSvc.orderSetup&&orderSetupSvc.orderSetup.fulfillmentDateType&&"ASAP"==orderSetupSvc.orderSetup.fulfillmentDateType;return serviceTime&&_restaurant.hasDynamicQuote&&isAsap&&(serviceTimeUpper=serviceTime.upperQuote),cartSvc.updateServiceTimeRangeUpper(serviceTimeUpper),serviceTimeUpper},createOrder:function(){var customer=sessionManager.dineRewardsAccount(),setup={restaurant_id:_restaurant.id,menu_type:orderSetupSvc.orderSetup.menuType,fulfillment_type:orderSetupSvc.orderSetup.fulfillmentType,fulfillment_date:"ASAP"===orderSetupSvc.orderSetup.fulfillmentDateType?null:orderSetupSvc.orderSetup.fulfillmentTime.format("YYYY-MM-DDTHH:mm:ss"),loyalty_card_number:null==orderSetupSvc.orderSetup.loyaltyCardNumber?null!=customer?customer.printedCardNumber:null:orderSetupSvc.orderSetup.loyaltyCardNumber,latestFulfillmentTime:"ASAP"===orderSetupSvc.orderSetup.fulfillmentDateType?_restaurant.getLatestASAPTime(orderSetupSvc.orderSetup.menuType,orderSetupSvc.orderSetup.fulfillmentType):null,fulfillment_details:{first_name:null,last_name:null,email:null,car_type:orderSetupSvc.orderSetup.carType,car_color:orderSetupSvc.orderSetup.carColor,car_description:orderSetupSvc.orderSetup.carDescription,phone:orderSetupSvc.orderSetup.phone,delivery_address:"Pickup"===orderSetupSvc.orderSetup.fulfillmentType?null:orderSetupSvc.orderSetup.address}};return cartSvc.startOrder(setup)},submit:function(){return("Delivery"!==orderSetupSvc.orderSetup.fulfillmentType||orderSetupSvc.addressValid())&&(null!=orderSetupSvc.orderSetup.fulfillmentTime||orderSetupSvc.orderSetup.fulfillmentDateType===orderSetupSvc.fulfillmentDateType.ASAP)},addressValid:function(){var valid=!1;return orderSetupSvc.orderSetup.address&&(valid=$rootScope.addressIsGeocoded),valid}};return orderSetupSvc}]),angular.module("ONO-Services").service("Restaurant",[function(){var catering="Catering";function Restaurant(rest){var i,info,startParts,endParts;for(rest=function(rest){return _.each(rest.fulfillment_infos,function(info){var fulfillmentTypeInfos;info.fulfillment_type_infos=(fulfillmentTypeInfos=info.fulfillment_type_infos,_.filter(fulfillmentTypeInfos,function(fulfillmentType){return!function(fulfillmentType){return fulfillmentType.includes(catering)}(fulfillmentType.fulfillment_type)}))}),rest}(rest),i=0;i<rest.fulfillment_infos.length;i++)(info=rest.fulfillment_infos[i]).menu_type===rest.default_menu_type&&(rest.menu=info);for(var h=0;h<rest.business_hours.length;h++)_.isString(rest.business_hours[h].end_time)&&_.isString(rest.business_hours[h].start_time)&&(endParts=rest.business_hours[h].end_time.split(":"),startParts=rest.business_hours[h].start_time.split(":"),rest.business_hours[h].start_time=(new Date).setHours(startParts[0],startParts[1],startParts[2]),rest.business_hours[h].end_time=(new Date).setHours(endParts[0],endParts[1],endParts[2]));angular.extend(this,rest),this._serverTime=this.now?moment(this.now).zone(this.now):moment(),this._leadTime=0,this.toString=function(){return"[object Restaurant:"+this.id+"]"}}function isClosedDate(date,fulfillmentType,closings,includeCurbside){return Enumerable.From(closings).Any(function(x){return isInBetween(date,x.close_datetime,x.resume_normal_operating_hours_datetime)&&("Curbside"===fulfillmentType&&!x.delivery_only&&x.all_day&&includeCurbside||"Delivery"===fulfillmentType&&x.all_day)})}function isInBetween(actual,min,max){var dateNoTime=moment(actual).startOf("day");return(dateNoTime.isSame(moment(min).startOf("day"))||dateNoTime.isAfter(moment(min).startOf("day")))&&(dateNoTime.isSame(moment(max).startOf("day"))||dateNoTime.isBefore(moment(max).startOf("day")))}return Restaurant.prototype.storeCurrentlyOpen=!1,Restaurant.prototype.currentLeadTime=function(leadTime){return _.isUndefined(leadTime)||isNaN(leadTime)||(this._leadTime=this.store_opening_fulfillment_requires_lead_time||this.storeCurrentlyOpen?leadTime:0),this._leadTime},Restaurant.prototype.currentServerTime=function(){return this._serverTime.clone()},Restaurant.prototype.getFulfillmentInfo=function(menuType){return Enumerable.From(this.fulfillment_infos).First(function(fi){return fi.menu_type===menuType})},Restaurant.prototype.getFulfillmentTypeInfo=function(menuType,fulfillmentType){var fulfillmentInfo=this.getFulfillmentInfo(menuType);return fulfillmentInfo?1===fulfillmentInfo.fulfillment_type_infos.length?Enumerable.From(fulfillmentInfo.fulfillment_type_infos).First():Enumerable.From(fulfillmentInfo.fulfillment_type_infos).First(function(fti){return fti.fulfillment_type===fulfillmentType}):null},Restaurant.prototype.getEarliestASAPTime=function(menuType,fulfillmentType){var businessDay=this.getCurrentBusinessDay(menuType,fulfillmentType,!0);return businessDay&&businessDay.first&&businessDay.first.clone().subtract(1,"m")},Restaurant.prototype.getLatestASAPTime=function(menuType,fulfillmentType){var businessDay=this.getCurrentBusinessDay(menuType,fulfillmentType);return businessDay&&businessDay.last&&businessDay.last.clone().subtract(this._leadTime,"m")},Restaurant.prototype.getCurrentBusinessDay=function(menuType,fulfillmentType){return this.getBusinessDay(menuType,fulfillmentType,this.currentServerTime())},Restaurant.prototype.getNextBusinessDay=function(menuType,fulfillmentType){for(var calls=0,businessDay=null;null===businessDay&&calls<7;)businessDay=this.getBusinessDay(menuType,fulfillmentType,this.currentServerTime().add(calls+1,"days")),calls++;return businessDay},Restaurant.prototype.getBusinessDay=function(menuType,fulfillmentType,fulfillmentTime){var fulfillmentTypeInfo=this.getFulfillmentTypeInfo(menuType,fulfillmentType),day=fulfillmentTime.day(),startMins=-1,endMins=-1,operatingHours=this.getOperatingHoursForDay(fulfillmentTime,fulfillmentTypeInfo.hours,!1);return 0===operatingHours.length?null:(operatingHours.forEach(function(hourSet){hourSet.startDay===day&&(startMins=-1===startMins?hourSet.startMinutes:Math.min(startMins,hourSet.startMinutes),endMins=hourSet.endDay===day?Math.max(hourSet.endMinutes,endMins):1440+hourSet.endMinutes)}),{first:fulfillmentTime.clone().startOf("day").add(startMins,"minutes"),last:fulfillmentTime.clone().startOf("day").add(endMins,"minutes")})},Restaurant.prototype.getFulfillmentTimes=function(menuType,fulfillmentType,fulfillmentDate,includePastTimes,leadTime){var fulfillmentTypeInfo=this.getFulfillmentTypeInfo(menuType,fulfillmentType),increment=this.fulfillment_time_increment||15;if(!fulfillmentTypeInfo.hours||0===fulfillmentTypeInfo.hours.length)return[];fulfillmentTypeInfo.$hours_by_date||(fulfillmentTypeInfo.$hours_by_date={});var dateString=fulfillmentDate.format("YYYYMMDD");fulfillmentTypeInfo.$hours_by_date[dateString]&&0!==fulfillmentTypeInfo.$hours_by_date[dateString].length||(fulfillmentTypeInfo.$hours_by_date[dateString]=this.buildFulfillmentTimesArray(fulfillmentDate,fulfillmentTypeInfo,leadTime));var fulfillmentTimes=fulfillmentTypeInfo.$hours_by_date[dateString];if(includePastTimes||!fulfillmentTimes||0===fulfillmentTimes.length)return fulfillmentTimes;var earliest=this.getEarliestPossibleFulfillmentTime(menuType,fulfillmentType);return earliest?(earliest.subtract(increment,"minutes"),earliest.isBefore(this.currentServerTime().add("minutes",increment))&&(this.storeCurrentlyOpen=!0,earliest.add(increment,"minutes")),Enumerable.From(fulfillmentTimes).Where(function(x){return x.isAfter(earliest)}).ToArray()):fulfillmentTimes},Restaurant.prototype.getEarliestPossibleFulfillmentTime=function(menuType,fulfillmentType){var businessDay=this.getCurrentBusinessDay(menuType,fulfillmentType);if(null!=businessDay){if(this.currentServerTime().isBefore(businessDay.first)&&!isClosedDate(businessDay.first,fulfillmentType,this.restaurant_closings,!0))return businessDay.first.add(this.currentLeadTime(),"minutes");for(var currentTimeWithLeadTime=this.currentServerTime().add(this.currentLeadTime(),"minutes");currentTimeWithLeadTime.isAfter(businessDay.last)&&isClosedDate(currentTimeWithLeadTime,fulfillmentType,this.restaurant_closings,!0);)currentTimeWithLeadTime=this.getNextBusinessDay(menuType,fulfillmentType).first;return currentTimeWithLeadTime}},Restaurant.prototype.getTodayAvailableFulfillmentTypes=function(fulfillmentTypes){var today=moment(),closings=this.restaurant_closings,restaurant=this;return fulfillmentTypes.filter(function(x){return!restaurant.isWithinRestaurantClosing(today,x,closings,!1)})},Restaurant.prototype.isWithinRestaurantClosing=function(time,fulfillmentType,closings,includeCurbside){return Enumerable.From(closings).Any(function(x){var isAllDay=x.all_day&&isInBetween(time,x.close_datetime,x.resume_normal_operating_hours_datetime),closeDateTime=this.momentWithTimeZone(x.close_datetime),resumeNormalOperatingHours=this.momentWithTimeZone(x.resume_normal_operating_hours_datetime),isResumeNormalOperatingHours=time.isBefore(resumeNormalOperatingHours)||time.isSame(resumeNormalOperatingHours),isAfterCloseTime=time.isAfter(closeDateTime)&&isResumeNormalOperatingHours,isAllDayOrAfterCloseTime=isAllDay||isAfterCloseTime,isDelivery="Delivery"===fulfillmentType;return includeCurbside&&"Curbside"===fulfillmentType&&!x.delivery_only&&isAllDayOrAfterCloseTime||isDelivery&&isAllDayOrAfterCloseTime}.bind(this))},Restaurant.prototype.momentWithTimeZone=function(date,format){var timeZone=this.currentServerTime().format("Z");return format?moment(moment(date,moment.langData()._longDateFormat.l).format("YYYY-MM-DDTHH:mm:ss")+timeZone).zone(timeZone):moment(moment(date).format("YYYY-MM-DDTHH:mm:ss")+timeZone).zone(timeZone)},Restaurant.prototype.parseTimestampToNumber=function(timeString){var arr=timeString.split(":");return 60*parseInt(arr[0])+parseInt(arr[1])},Restaurant.prototype.getLeadTimeForDay=function(fulfillmentDate,storeOpen,dayLeadTime){var serverTimePlusLeadTime=this.currentServerTime().add(this.currentLeadTime(),"minutes");if(storeOpen.isAfter(serverTimePlusLeadTime))return dayLeadTime;var leadTimeDiff=serverTimePlusLeadTime.diff(storeOpen,"minutes");return Math.max(dayLeadTime,leadTimeDiff)},Restaurant.prototype.getOperatingHoursForDay=function(fulfillmentDate,hoursArr,openRequiresLeadTime){var day=fulfillmentDate.day(),days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],result=[];if(!hoursArr||0===hoursArr.length)return[{startMinutes:0,endMinutes:1440,startDay:day,endDay:day}];for(var i=0;i<hoursArr.length;i++){var hours=hoursArr[i],startDay=days.indexOf(hours.start_day),endDay=days.indexOf(hours.end_day);if(day===startDay||day===endDay||startDay<day&&day<endDay||endDay<startDay&&(startDay<day||day<endDay)){var startMinutes=this.parseTimestampToNumber(hours.start_time),endMinutes=this.parseTimestampToNumber(hours.end_time);openRequiresLeadTime&&(startMinutes+=hours.lead_time||0),result.push({startDay:startDay,startMinutes:startMinutes,endDay:endDay,endMinutes:endMinutes})}}return result},Restaurant.prototype.buildFulfillmentTimesArray=function(fulfillmentDate,fulfillmentTypeInfo,leadTime){var increment=this.fulfillment_time_increment||15,fd=fulfillmentDate.clone(),day=fd.day(),applicableHours=this.getOperatingHoursForDay(fulfillmentDate,fulfillmentTypeInfo.hours,this.store_opening_fulfillment_requires_lead_time),times=[],closings=this.restaurant_closings;return Enumerable.From(applicableHours).ForEach(function(hourSet){var minutes=hourSet.startDay===day?hourSet.startMinutes:0,startTime=fd.clone().startOf("day").add("minutes",minutes),currentTimePlusLeadTime=this.currentServerTime().add("minutes",leadTime);for(startTime.isBefore(currentTimePlusLeadTime)&&(startTime=currentTimePlusLeadTime.startOf("hour"));startTime.isBefore(this.currentServerTime().add("minutes",leadTime));)startTime.add("minutes",increment);var dayDiff=hourSet.endDay-startTime.day();dayDiff<0&&(dayDiff+=7);for(var endTime=1<dayDiff?startTime.clone().endOf("day"):startTime.clone().startOf("day").add("minutes",hourSet.endMinutes);startTime.isBefore(endTime)||startTime.isSame(endTime);)this.isWithinRestaurantClosing(startTime,fulfillmentTypeInfo.fulfillment_type,closings,!0)||times.push(startTime.clone()),startTime=startTime.add("minutes",increment)}.bind(this)),times.sort(function(date1,date2){return date2<date1?1:date1<date2?-1:0})},Restaurant.prototype.isOpenNow=function(menuType,fulfillmentType){var earliestAsapTime=this.getEarliestASAPTime(menuType,fulfillmentType),latestAsapTime=this.getLatestASAPTime(menuType,fulfillmentType);return!(!earliestAsapTime&&!latestAsapTime)&&(this.currentServerTime().isAfter(earliestAsapTime)&&this.currentServerTime().isBefore(latestAsapTime)&&!this.isWithinRestaurantClosing(this.currentServerTime(),fulfillmentType,this.restaurant_closings,!0))},Restaurant.prototype.allowASAP=function(menuType,fulfillmentType){return this.allow_asap&&this.isOpenNow(menuType,fulfillmentType)},Restaurant.transformArray=function(res){var rests=_.isArray(angular.fromJson(res))?angular.fromJson(res):[];return _.each(rests,function(val,i){rests[i]=new Restaurant(rests[i])}),rests},Restaurant.transform=function(json,headers,status){var rest;return angular.isUndefined(status)&&angular.isFunction(headers)&&(status=isNaN(parseInt(headers().status))?null:parseInt(headers().status)),angular.isNumber(status)&&200===status&&(rest=angular.fromJson(json)),rest?new Restaurant(rest):null},Restaurant}]),angular.module("ONO-Base-UI").controller("restaurantSearchCtrl",["$scope","$state","$http","restaurantSvc","cartSvc","onoLocation","onoAlert","values","favoriteLocations","recentLocations","tokenizationFeatureFlagsSvc","$window","$rootScope","featureFlagSvc",function($scope,$state,$http,restaurantSvc,cartSvc,onoLocation,onoAlert,values,favoriteLocations,recentLocations,tokenizationFeatureFlagsSvc,$window,$rootScope,featureFlagSvc){var ctrl=this,geolocationSearchRadius={value:$scope.displaySettings.GeolocationSearchRadius};$scope.googleLocationSearch=!1,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","googleLocationSearch")&&($scope.googleLocationSearch=$rootScope.featureFlags.googleLocationSearch),$scope.restaurants=[],$scope.favorites=favoriteLocations,$scope.recent=recentLocations,$scope.citySearch=angular.extend($scope.$new(!0),$scope.citySearch),$scope.zipSearch=angular.extend($scope.$new(!0),$scope.zipSearch),$scope.distances=[{value:"20"},{value:"30"},{value:"40"}],$scope.zipSearch.search_distance=geolocationSearchRadius,$scope.search={text:"",search_distance:geolocationSearchRadius};var countriesEnumerable=Enumerable.From(values.Countries);$scope.countries=countriesEnumerable.ToArray(),1==countriesEnumerable.Count()&&($scope.citySearch.country=countriesEnumerable.First(),$scope.zipSearch.country=countriesEnumerable.First()),ctrl.parseSearchString=function(str){for(var abbr in values.Countries){var country=values.Countries[abbr];if(country.ZipCodeValidation)if(new RegExp(country.ZipCodeValidation).test(str))return void $state.go("restaurantsByZipCode",{zip_code:str,country:abbr,search_distance:$scope.search.search_distance.value})}var splitChar=-1<str.indexOf(",")?",":" ",parts=str.split(splitChar).map(function(x){return x.trim()});$state.go("restaurantsByCityStateGeolocation",{city:parts[0],state:parts[1],country:parts[2]||(1===countriesEnumerable.Count()?countriesEnumerable.First().Key:""),geocode:!0,search_distance:$scope.search.search_distance.value})},$scope.zipSearch.$watch("country",function(){var countryCode=$scope.zipSearch.country?$scope.zipSearch.country.Key:null,c=countriesEnumerable.FirstOrDefault({},function(country){return null==countryCode||country.Key===countryCode}).Value;c&&($scope.zipCodeValidation=c.ZipCodeValidation,$scope.zipCodeLength=c.ZipMask.length)}),$scope.citySearch.$watch("country",function(newValue,oldValue){var countryCode=$scope.citySearch.country?$scope.citySearch.country.Key:null;newValue===oldValue&&$scope.states||($scope.citySearch.country.Value.States?$scope.states=$scope.citySearch.country.Value.States:countryCode&&restaurantSvc.getStates(countryCode).then(function(states){$scope.states=states}))}),$scope.zipSearchFormSubmit=function(){$state.go("restaurantsByZipCode",{zip_code:$scope.zipSearch.zip_code,country:$scope.zipSearch.country.Key,search_distance:$scope.zipSearch.search_distance.value})},$scope.citySearchFormSubmit=function(){$state.go("restaurantsByCityState",{country:$scope.citySearch.country.Key,city:$scope.citySearch.city.name,state:$scope.citySearch.state.name})},$scope.searchFormSubmit=function(){var searchInputValue=$scope.search.text;ctrl.parseSearchString(searchInputValue)},$scope.uiAutocomplete={minLength:3,source:function(request,response){var term=encodeURIComponent(request.term.trim());return $http({method:"GET",url:"/api/autocomplete/cities?partialQuery="+term}).then(function(data){response(data.data||[])})},select:function(e,ui){$scope.search.text=ui.item.value}},$scope.getByLocation=function(){onoLocation.getLocation().then(function(coords){coords?$state.go("restaurantsByLocation",{latitude:coords.latitude,longitude:coords.longitude,search_distance:geolocationSearchRadius.value}):onoAlert.show({title:"Geo Location Is Disabled",message:"You have disabled geo location.",actions:[{name:"done",action:function(scope){scope.hide()}}]})})},$scope.selectLocation=function(restaurant){var locationEventDetails={unitId:restaurant.locationCode,fulfillmentDateType:restaurant.fulfillment_infos[0].default_fulfillment_date_type};domainEventSvc.raiseEvent("onSelectOLOLocation",locationEventDetails),$window.sessionStorage.curbsideRestaurant=angular.toJson(restaurant),tokenizationFeatureFlagsSvc.setLocationBasedFlags(restaurant),$state.go("orderSetup",{id:restaurant.id})},$scope.viewMenu=function(restaurant,menu){cartSvc.initialize(restaurant,menu),$state.go($scope.defaultMenuState,{restaurantId:restaurant.id,menuType:menu.menu_type,fulfillmentType:""===menu.default_fulfillment_type?menu.fulfillment_type_infos[0].fulfillment_type:menu.default_fulfillment_type})},$scope.citySearch.$watch("state",function(){$scope.citySearch.state&&restaurantSvc.getCities($scope.citySearch.state.name).then(function(cities){$scope.cities=cities})}),$scope.$on("form:submitted",function(e){e.stopPropagation()})}]),angular.module("ONO-Base-UI").controller("restaurantSearchResultsCtrl",["$scope","$state","$q","cartSvc","searchResults","favoriteLocations","onoAlert","translationSvc","$window","restaurantSvc","tokenizationFeatureFlagsSvc","domainEventSvc",function($scope,$state,$q,cartSvc,searchResults,favoriteLocations,onoAlert,translationSvc,$window,restaurantSvc,tokenizationFeatureFlagsSvc,domainEventSvc){var ctrl=this;function hasInvalidOrderSetupModalState(reasons){if(angular.isArray(reasons)&&0<reasons.length){var invalidReasons=reasons.find(function(reason){return"fulfillment_date_NotValid"===reason||"delivery_address_NotInDeliveryZone"===reason});return angular.isDefined(invalidReasons)}return!1}return ctrl.setFavoriteLocations=function(favorites,results){if(favorites){var favoriteLocationIds=Enumerable.From(favorites).Select(function(fl){return fl.id});Enumerable.From(results).ForEach(function(sr){sr.is_favorite=-1<favoriteLocationIds.IndexOf(sr.id)})}},ctrl.gotoOrderSetup=function(restaurantId){$state.go("orderSetup",{id:restaurantId})},ctrl.gotoMenu=function(restaurant){cartSvc.initialize(restaurant),$scope.gotoMenu()},ctrl.invalidateOrderSetup=function(restaurantId){cartSvc.invalidateOrderSetup(),ctrl.gotoOrderSetup(restaurantId)},ctrl.tryChangeOrderSetupRestaurant=function(invalidItems,orderSetup,restaurant){var i=0,len=invalidItems.length,loopPromise=function(){if(i<len){var item=invalidItems[i];return i++,"ProductNotFound"===item.reason?cartSvc.removeItem(item.id).then(loopPromise):$q.when(!0).then(loopPromise)}return $q.when(!0)};return loopPromise().then(function(){return cartSvc.startOrder(orderSetup).then(function(){ctrl.gotoMenu(restaurant)}).catch(function(){ctrl.invalidateOrderSetup(restaurant.id)})})},ctrl.handleUpdateOrderSetupError=function(response,restaurantId){if(domainEventSvc.raiseEvent("onUpdateOrderSetup",{fault:response,cart:$scope.model.cart}),400===response.status&&response.data.ModelState)for(var p in response.data.ModelState){hasInvalidOrderSetupModalState(response.data.ModelState[p]||[])&&ctrl.invalidateOrderSetup(restaurantId)}},ctrl.checkForInvalidItemsOnRestaurantChange=function(oldRestaurantId,restaurant,expressToNonExpress){var orderSetup=cartSvc.editOrderSetup();return orderSetup.restaurant_id=restaurant.id,orderSetup.fulfillment_details={},sessionStorage.removeItem("currentDeliveryAddress"),cartSvc.updateOrderSetup(orderSetup).then(function(cartSummary){return cartSummary.invalid_menu_items&&0<cartSummary.invalid_menu_items.length?(ctrl.showRestaurantChangedAlert(cartSummary.invalid_menu_items,oldRestaurantId,restaurant,orderSetup,expressToNonExpress),!0):cartSvc.getCartDetails().then(function(){if(!restaurant.delivering_orders)return orderSetup.fulfillment_type="Curbside",ctrl.gotoOrderSetup(restaurant.id),null;ctrl.gotoOrderSetup(restaurant.id)})}).catch(function(response){ctrl.handleUpdateOrderSetupError(response,restaurant.id)})},ctrl.showRestaurantChangedAlert=function(invalidItems,oldRestaurantId,restaurant,orderSetup,expressToNonExpress){onoAlert.show({dialogTemplateUrl:'"/web/app/dialog/dialogAlert.changeLocation.html"',title:"UserAlert_ChangeLocation_Title",invalidItems:invalidItems,expressToNonExpress:expressToNonExpress,actions:[{name:"UserAlert_ChangeLocation_Action",action:function(scope){return ctrl.tryChangeOrderSetupRestaurant(invalidItems,orderSetup,restaurant).finally(function(){return scope.hide(),!0})}},{name:"Cancel",action:function(scope){return cartSvc.cancelOrder().then(function(){angular.isDefined(sessionStorage.fulfillmentType)&&"Delivery"===sessionStorage.fulfillmentType?(sessionStorage.removeItem("currentDeliveryAddress"),$state.go("delivery")):(sessionStorage.removeItem("curbsideRestaurant"),$state.go("pickup"))})}}]})},$scope.restaurants=searchResults,$scope.selectLocation=function(restaurant){var locationEventDetails={unitId:restaurant.locationCode,fulfillmentDateType:restaurant.fulfillment_infos[0].default_fulfillment_date_type};domainEventSvc.raiseEvent("onSelectOLOLocation",locationEventDetails),sessionStorage.curbsideRestaurant=angular.toJson(restaurant),tokenizationFeatureFlagsSvc.setLocationBasedFlags(restaurant);var cart=cartSvc.viewCart(),os=cartSvc.viewOrderSetup(),oldRestaurantId=cart.order_setup.restaurant_id;if(cart.restaurant&&cart.restaurant.id!==restaurant.id){var expressToNonExpress=cart.restaurant.isExpress!=restaurant.isExpress;if(!os.fulfillment_date&&!restaurant.allowASAP(os.menu_type,os.fulfillment_type)){var fulfillmentTypeInfo=restaurant.getFulfillmentTypeInfo(os.menu_type,os.fulfillment_type),currentLeadTime=Math.max(os.lead_time,fulfillmentTypeInfo.lead_time);restaurant.currentLeadTime(currentLeadTime);var fulfillmentDate=restaurant.getEarliestPossibleFulfillmentTime(os.menu_type,os.fulfillment_type);if(fulfillmentDate){var results=restaurant.getFulfillmentTimes(os.menu_type,os.fulfillment_type,fulfillmentDate,!1);results&&0<results.length&&(os.fulfillment_date=results[0].format("YYYY-MM-DDTHH:mm:ss"))}}if(restaurant.delivering_orders||(restaurant.fulfillment_type="Curbside",cartSvc.initialize(restaurant),ctrl.gotoOrderSetup(restaurant.id)),0<cart.order_items.length)return ctrl.checkForInvalidItemsOnRestaurantChange(oldRestaurantId,restaurant,expressToNonExpress)}return ctrl.clearDeliveryAddress(cart),cartSvc.initialize(restaurant),ctrl.gotoOrderSetup(restaurant.id),null},$scope.viewMenu=function(restaurant,menu){cartSvc.initialize(restaurant,menu),$state.go($scope.defaultMenuState,{restaurantId:restaurant.id,menuType:menu.menu_type,fulfillmentType:""===menu.default_fulfillment_type?menu.fulfillment_type_infos[0].fulfillment_type:menu.default_fulfillment_type})},ctrl.clearDeliveryAddress=function(cart){null!=cart.order_setup&&(cart.order_setup.address=null)!=cart.order_setup.fulfillment_details&&(cart.order_setup.fulfillment_details.delivery_address=null),sessionStorage.removeItem("currentDeliveryAddress")},ctrl.setFavoriteLocations(favoriteLocations,searchResults),ctrl}]),angular.module("ONO-Services").factory("restaurantSvc",["$q","$http","Restaurant","$rootScope",function($q,$http,Restaurant,$rootScope){"use strict";var resource_get=function(restaurantId){var config={url:"/api/restaurant/"+restaurantId,method:"GET",transformResponse:Restaurant.transform};return $http(config).then(function(response){return response.data})},resource_search=function(postData){var config={url:"/api/restaurant/search",method:"POST",transformResponse:Restaurant.transformArray,data:postData};return $http(config).then(function(response){return response.data})},resource_postGetDeliveryRestaurant=function(postData){var config={url:$rootScope.featureFlags.layout.header?"/api/restaurant/v2/delivery_restaurant":"/api/restaurant/delivery_restaurant",method:"POST",data:postData};return $http(config).then(function(response){return Restaurant.transform(response.data,response.headers,response.status)})},resource_getStates=function(country){return $http({url:"/api/restaurant/"+country+"/states",method:"GET",transformResponse:function(data){for(var transformed=[],res=angular.fromJson(data),i=0;i<res.length;i++)transformed.push({name:res[i]});return transformed}}).then(function(response){return response.data})},resource_getCities=function(state){return $http({url:"/api/restaurant/"+state+"/cities",method:"GET",transformResponse:function(data){for(var transformed=[],res=angular.fromJson(data),i=0;i<res.length;i++)transformed.push({name:res[i]});return transformed}}).then(function(response){return response.data})},resource_getRestaurantTime=function(restaurantId){return $http({url:"/api/restaurant/"+restaurantId+"/time",method:"GET",transformResponse:function(data){return angular.fromJson(data)}}).then(function(response){return response.data})};return{getRestaurant:function(restaurantId){if(!restaurantId)throw"No_restaurant_id_provided";return resource_get(restaurantId)},search:function(searchData){return resource_search(searchData)},searchByZip:function(zipCode,country,searchDistance){return resource_search({zip_code:zipCode,country:country,search_distance:searchDistance})},searchByCity:function(city,state,country,geocode,searchDistance){return resource_search({city:city,state:state,country:country,geocode:!!geocode,search_distance:geocode?searchDistance:0})},searchByLocation:function(latitude,longitude,searchDistance){return resource_search({latitude:latitude,longitude:longitude,search_distance:searchDistance})},getDeliveryRestaurant:function(deliveryAddress){return resource_postGetDeliveryRestaurant(deliveryAddress)},getStates:function(country){return resource_getStates(country)},getCities:function(state){return resource_getCities(state)},getTime:function(restaurantId){return resource_getRestaurantTime(restaurantId)},getPdfMenus:function(storeNumber){return $http({url:"/Home/GetPdfMenus?unitId="+storeNumber,method:"GET"}).then(function(response){return 200===response.status?response.data:$q.reject(response)},function(error){return $q.reject(error)})}}}]),angular.module("ONO-Base-UI").directive("adaAriaDescribedby",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){$timeout(function(){$(element).attr("aria-describedby",attrs.adaAriaDescribedby)},1e3)}}}]),angular.module("ONO-Base-UI").directive("allowPattern",[function(){return{restrict:"A",compile:function(tElement,tAttrs){return function(scope,element,attrs){element.bind("keypress",function(event){if(0===event.charCode)return!0;var keyCode=event.which||event.keyCode;return String.fromCharCode(keyCode).match(new RegExp(attrs.allowPattern,"i"))||8===keyCode||9===keyCode?void 0:(event.preventDefault(),!1)})}}}}]),angular.module("ONO-Base-UI").directive("aurusContainer",["aurusSvc","domainEventSvc",function(aurusSvc,domainEventSvc){return{restrict:"A",link:function(scope,element,attrs){function handleAurusSuccessResponse(response){angular.isDefined(attrs.oneTimePayment)?scope.setCardDetails(response):scope.saveCreditCard(response)}function handleAurusErrorResponse(response){switch(response.code){case aurusSvc.aurusErrorCodes.invalidSession:return void scope.refreshAurusToken();case aurusSvc.aurusErrorCodes.invalidCardNotSupported:scope.refreshAurusToken()}scope.$invalid=!0,response.text=function(response){var errorCodes=[{id:aurusSvc.aurusErrorCodes.invalidCardNumber,name:aurusSvc.aurusErrorText.invalidCardNumber},{id:aurusSvc.aurusErrorCodes.invalidZip,name:aurusSvc.aurusErrorText.invalidZip},{id:aurusSvc.aurusErrorCodes.invalidCardHolderName,name:aurusSvc.aurusErrorText.invalidCardHolderName},{id:aurusSvc.aurusErrorCodes.invalidCardType,name:aurusSvc.aurusErrorText.invalidCardType},{id:aurusSvc.aurusErrorCodes.invalidExpiryDate,name:aurusSvc.aurusErrorText.invalidExpiryDate},{id:aurusSvc.aurusErrorCodes.invalidCardNotSupported,name:aurusSvc.aurusErrorText.invalidCardNotSupported}],errorCode=_.find(errorCodes,function(item){return item.id===response.code});return errorCode?errorCode.name:response.text}(response),angular.isUndefined(_.find(scope.$formErrors,function(item){return item===response.text}))&&scope.$formErrors.push(response.text)}domainEventSvc.addHandler({onAurusSuccessResponse:handleAurusSuccessResponse}),domainEventSvc.addHandler({onAurusErrorResponse:handleAurusErrorResponse}),scope.$on("$destroy",function(){domainEventSvc.removeHandler({onAurusSuccessResponse:handleAurusSuccessResponse}),domainEventSvc.removeHandler({onAurusErrorResponse:handleAurusErrorResponse})}),scope.$watch("aurusSession",function(newValue){newValue&&aurusSvc.initialize(scope.aurusSession.aurusUrl)})}}}]),angular.module("ONO-Base-UI").directive("bypassHtmlValidation",[function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$validators[attrs.type]=function(){return!0}}}}]),angular.module("ONO-Base-UI").directive("debounceInput",["$timeout",function($timeout){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){if("radio"!==attrs.type&&"checkbox"!==attrs.type){element.unbind("input");var debounceThrottled=_.debounce(function(){scope.$apply(function(){ctrl.$setViewValue(element.val())})},1e3);element.bind("input",debounceThrottled),element.bind("blur",function(){scope.$apply(function(){ctrl.$setViewValue(element.val())})})}}}}]),angular.module("ONO-Base-UI").directive("downloadMenu",["restaurantSvc","$rootScope","$window","domainEventSvc","$log","$state",function(restaurantSvc,$rootScope,$window,domainEventSvc,$log,$state){return{restrict:"E",scope:{store:"=",buttonstyle:"@"},templateUrl:"web/app/_directives/downloadMenu.html",link:function(s,e,a){"link"===s.buttonstyle&&e.css("width","100%")},controller:["$scope",function($scope){$scope.openDownloadMenuModal=function(){restaurantSvc.getPdfMenus($scope.store).then(function(result){$scope.menus=result,$scope.selectedMenu=$scope.menus[0],$rootScope.showDialog("menu.download",$scope)})},$scope.trackDownload=function(menu){domainEventSvc.raiseEvent("onMenuPdfDownload",menu)},$scope.menuDownloadSubmit=function(selectedMenu){$window.open(selectedMenu.Url,"_bbi")},$scope.menuDownloadSelectionChanged=function(){$log.info("Download Selection Changed!")},$scope.openPreview=function(menu){var url;if($rootScope.displaySize.isDesktop){var previewUrl=$state.href("previewMenu")+"?src="+encodeURI(menu.Url)+"&title="+encodeURI(menu.Name);url=location.origin.toLowerCase()+"/"+previewUrl}else url=encodeURI(menu.Url);$window.open(url,"_blank")}}]}}]).directive("previewMenu",["title","$sce","$window",function(title,$sce,$window){return{restrict:"A",link:function(s,e,a){var queryStringParams=function(){var queryString="";-1<$window.location.href.indexOf("?")&&(queryString=$window.location.href.split("?")[1]);var queries,temp,i,l,params={};for(queries=queryString.split("&"),i=0,l=queries.length;i<l;i++)temp=queries[i].split("="),params[temp[0]]=temp[1];return params}();queryStringParams&&(s.src=$sce.trustAsResourceUrl(decodeURIComponent(queryStringParams.src)),title.updateTitle(decodeURIComponent(queryStringParams.title)))}}}]),angular.module("ONO-Base-UI").directive("floatingLabel",["$interpolate","$interval","$window",function($interpolate,$interval,$window){return{restrict:"A",link:function(scope,element,attrs){var labelElement=$(element).parent().prev();function showLabel(){labelElement.addClass("visibleLabel"),labelElement.attr("main-content")&&labelElement.text($interpolate(labelElement.attr("main-content")))}function hideLabel(){labelElement.removeClass("visibleLabel"),labelElement.attr("alt-content")&&labelElement.text($interpolate(labelElement.attr("alt-content")))}!function(){function pollForAutofill(interval){($window.chrome&&0<$("#"+$(element).attr("id")+":-webkit-autofill").length||0<$(element).val().length)&&(showLabel(),$interval.cancel(interval))}labelElement.addClass("floatingLabel"),"password"===attrs.type&&$interval(pollForAutofill,300,3),"email"===attrs.type&&$interval(pollForAutofill,300,3),function(){for(var propertyPathArray=attrs.ngModel.split("."),value=scope[propertyPathArray[0]],i=1;i<propertyPathArray.length;i++)value&&(value=value[propertyPathArray[i]]);return value}()?showLabel():hideLabel()}(),scope.$watch(attrs.ngModel,function(newValue){value=newValue,angular.isDefined(value)&&""!==value?showLabel():hideLabel();var value}),$(element).on("input paste blur change",function(){""!==$(element).val()?showLabel():hideLabel()}),$(element).on("focus",function(){showLabel()}),$(element).on("focusout",function(){""===$(element).val()&&hideLabel()})}}}]),angular.module("ONO-Base-UI").directive("focusMain",["$document",function($document){return{restrict:"A",link:function(scope,element,attrs){element.bind("click",function(){$document[0].getElementById("main").focus()})}}}]),angular.module("ONO-Base-UI").directive("focusSelectedContent",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){scope.shouldFocusNextStep&&$timeout(function(){element.focus()},500)}}}]),angular.module("ONO-Base-UI").directive("highlightParentOnFocus",[function(){return{restrict:"A",link:function(scope,element,attrs){var parent=$(element).parent().parent();$(element).focusin(function(){parent.addClass("highlightOnFocus")}),$(element).focusout(function(){parent.removeClass("highlightOnFocus")})}}}]),angular.module("ONO-Base-UI").directive("kountDataCollector",["$window","$document",function($window,$document){return{restrict:"A",link:function(scope,element,attrs){if(scope.featureFlags.payment.fraudPreventionEnabled&&angular.isDefined($window.sessionStorage.FraudPreventionEnabledForSelectedLocation)&&"1"==$window.sessionStorage.FraudPreventionEnabledForSelectedLocation){scope.fraudPreventionDataCollectionInProgress=!0;var formattedCartId=scope.model.cart.id.replace(/-/g,""),scriptUrl=KountBaseUrl+"/collect/sdk?m="+KountMerchantId+"&s="+formattedCartId,imageUrl=KountBaseUrl+"/logo.gif?m="+KountMerchantId+"&s="+formattedCartId;!function(element,scriptUrl,attachToAurusEvents){var scriptElement=angular.element($document[0].createElement("script"));scriptElement.attr("charset","utf-8"),scriptElement.attr("id","kountScript"),element.append(scriptElement),scriptElement.on("load",attachToAurusEvents),scriptElement.attr("src",scriptUrl)}(element,scriptUrl,function(){var client=new ka.ClientSDK;client.setupCallback({"collect-end":function(params){scope.fraudPreventionDataCollectionInProgress=!1,scope.$apply()},"collect-begin":function(params){var input=angular.element($document[0].createElement("input"));input.attr("type","hidden"),input.attr("name","kaId"),input.attr("value",formattedCartId),element.append(input)}}),client.autoLoadEvents()}),function(element,imageUrl){var imageElement=angular.element($document[0].createElement("img"));imageElement.attr("src",imageUrl),imageElement.attr("width","1"),imageElement.attr("height","1"),imageElement.attr("id","kountImage"),element.append(imageElement)}(element,imageUrl)}else{var scriptElement=$("#kountScript");scriptElement&&scriptElement.remove();var imageElement=$("#kountImage");imageElement&&imageElement.remove(),$window.ka&&($window.ka=void 0)}}}}]),angular.module("ONO-Base-UI").directive("onoMenuItem",["cartSvc","$state","$q",function(cartSvc,$state,$q){var cart=cartSvc.viewCart();return{controller:["$scope",function($scope){$scope.gotoMenuItem=function(item){$state.go("editOrderItem",{restaurantId:cart.order_setup.restaurant_id,menuType:cart.order_setup.menu_type,fulfillmentType:cart.order_setup.fulfillment_type,orderItemId:item.id,fulfillmentDate:cart.order_setup.fulfillment_date}),$scope.$emit("done")},$scope.removeMenuItem=function(orderItem){1==cart.order_items.length&&cart.totals&&cart.totals.discounts?removeDRDiscountsFromCart().then(function(res){cartSvc.removeItem(orderItem.id)}).catch(function(res){cartSvc.removeItem(orderItem.id)}):cartSvc.removeItem(orderItem.id)};var removeDRDiscountsFromCart=function(){var promises=[];return cart.totals.discounts.forEach(function(item){item.is_loyalty_reward&&promises.push(cartSvc.removeDiscount(item.coupon_code))}),$scope&&$scope.model&&$scope.model.dineRewardApplied&&($scope.model.dineRewardApplied=null),$q.all(promises)}}]}}]),angular.module("ONO-Base-UI").directive("numbersOnly",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var num=0,focus=!1;attrs.decimals&&(num=parseInt(attrs.decimals)||-1);var maskValue=function(value){if(!value)return value;var scrubbed=scrubValue(value),maskedValue=scrubbed;if(attrs.mask){var chars=scrubbed.split("");maskedValue=attrs.mask,angular.forEach(chars,function(chr,i){maskedValue=maskedValue.replace(/#/,chr)})}return maskedValue},validityTimeoutRef=-1,validity=!1,keyUpHandler=function(e){clearTimeout(validityTimeoutRef),validityTimeoutRef=$timeout(function(){var isValid=-1===maskValue(element.val()).indexOf("#");modelCtrl.$setValidity("ADA_Invalid_Format",isValid),validity!==isValid&&(validity=isValid,$timeout(function(){modelCtrl.$render()}))},100)},blurHandler=function(e){focus=!1,modelCtrl.$viewValue=maskValue(element.val()),modelCtrl.$render(),keyUpHandler()};element.on("focus",function(e){focus=!0,modelCtrl.$setViewValue(element.val())}),attrs.$observe("mask",blurHandler),element.on("blur",blurHandler),element.on("keyup",keyUpHandler);var scrubValue=function(inputValue){if(angular.isUndefined(inputValue)||null===inputValue)return"";var transformedInput="",split=[];0==num?split.push(inputValue.toString()):split=inputValue.toString().split(".",2);for(var i=0;i<split.length;i++){var cleaned=split[i].replace(/[^0-9]/g,"");if(0===i&&attrs.mask){var len=(attrs.mask.match(/#/g)||[]).length;cleaned.length>len&&(cleaned=cleaned.substr(0,len))}else 1==i&&(transformedInput+=".",-1!=num&&(cleaned=cleaned.substr(0,num)));transformedInput+=cleaned}return transformedInput!=inputValue&&focus&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput};modelCtrl.$parsers.push(scrubValue),modelCtrl.$formatters.push(function(modelValue){return maskValue(modelValue)})}}}]),angular.module("ONO-Base-UI").directive("numericBinding",[function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return angular.isString(value)?parseFloat(value):value}),ngModel.$formatters.push(function(value){return angular.isString(value)?parseFloat(value):value})}}}]),angular.module("ONO-Base-UI").directive("onoAttempt",function(){"use strict";return{restrict:"A",controller:["$scope",function($scope){$scope.attempted=!1,this.setAttempted=function(){$scope.attempted=!0}}],compile:function(){return{pre:function(scope,el,attributes,attemptController){scope.ono=scope.ono||{},scope.ono[attributes.name]=attemptController},post:function(scope,formElement,attr,attemptController){formElement.bind("submit",function(){attemptController.setAttempted(),scope.$$phase||scope.$apply()})}}}}}),angular.module("ONO-Base-UI").directive("onoClass",function(){"use strict";return{restrict:"A",link:function(scope,element,attr){var oldVal;function flattenArrayClasses(classVal){if(angular.isArray(classVal)){var i,c=[];for(i=0;i<classVal.length;i++){var classes=flattenClasses(classVal[i]||"");classes&&c.push(classes)}return c.join(" ")}}function flattenClasses(classVal){if(angular.isArray(classVal))return classVal.join(" ");if(angular.isObject(classVal)){var classes=[];return angular.forEach(classVal,function(v,k){v&&classes.push(k)}),classes.join(" ")}return classVal}scope.$watch(attr.onoClass,function(newVal){{var newClasses=flattenArrayClasses(newVal);oldVal?angular.equals(newVal,oldVal)||attr.$updateClass(newClasses,flattenArrayClasses(oldVal)):attr.$addClass(newClasses)}oldVal=angular.copy(newVal)},!0)}}}),angular.module("ONO-Base-UI").directive("onoConfirm",["onoAlert",function(onoAlert){"use strict";return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$element.on("click",function(e){onoAlert.show({title:$attrs.onoConfirmTitle,message:$attrs.onoConfirmMessage,actions:[{name:"Ok",action:function(alertScope){$scope.$eval($attrs.onoConfirm),alertScope.hide()}},{name:"Cancel",action:function(alertScope){alertScope.hide()}}]})})}]}}]),angular.module("ONO-Base-UI").factory("onoHooks",function(){"use strict";var ids={};function hook(id){return ids[id]}return hook.add=function(name,el){ids[name]=el},hook.remove=function(name){delete ids[name]},hook}).directive("id",["onoHooks",function(onoHooks){"use strict";return{restrict:"A",link:function(scope,el,attrs){onoHooks.add(attrs.id,el),scope.$on("destroy",function(){onoHooks.remove(attrs.id)})}}}]),angular.module("ONO-Base-UI").directive("onoMatch",["$timeout",function($timeout){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){function matchValues(){var error="password_EqualError";$scope.$eval($attrs.ngModel)!==$scope.$eval($attrs.onoMatch)?$scope.$eval($attrs.formInput).$setValidity(error,!1):$scope.$eval($attrs.formInput).$setValidity(error,!0)}$scope.$watch($attrs.ngModel,matchValues),$scope.$watch($attrs.onoMatch,matchValues)}]}}]),angular.module("ONO-Base-UI").directive("onoMax",function(){return{restrict:"A",require:"ngModel",link:function($scope,$element,$attrs,modelCtrl){var max=$scope.$eval($attrs.onoMax);$scope.$watch($attrs.ngModel,function(val){modelCtrl.$setValidity("over_maximum",!val||1*val<=1*max)})}}}).directive("onoMin",function(){return{restrict:"A",require:"ngModel",link:function($scope,$element,$attrs,modelCtrl){var min=$scope.$eval($attrs.onoMin);$scope.$watch($attrs.ngModel,function(val){modelCtrl.$setValidity("under_minimum",0!==val&&!val||1*min<1*val)})}}}),angular.module("ONO-Base-UI").directive("onoMinQty",["$compile","$timeout","$log",function($compile,$timeout,$log){"use strict";return{restrict:"A",require:["ngModel","^form"],link:function(scope,el,attrs,ctrl){var model=scope.$eval(attrs.onoMinQty.split(".")[0]),formCtrl=ctrl[1],elementName=(ctrl[0],"");function isGroup(){return"radio"===attrs.type||"checkbox"===attrs.type}if(isGroup()){var title=attrs.groupTitle;title&&(elementName=0<title.trim().length?" from "+title:"")}if(formCtrl.$validators||(formCtrl.$validators={}),formCtrl.$validate||(formCtrl.$validate=function(){for(var i in formCtrl.$validators)formCtrl.$setValidity(i,formCtrl.$validators[i](),formCtrl)}),!model.min_qty||model.max_qty||formCtrl.$validators.Summation_Validation_AtLeast||(formCtrl.$validators.Summation_Validation_AtLeast=function(value){for(var items=model.option_items,quantity=0,i=0;i<items.length;i++)quantity+=0<items[i].quantity?1:0;var result=quantity>=model.min_qty;return 1==result?result:"Summation_Validation_AtLeast,"+elementName+","+model.min_qty+","+quantity+",min"}),!model.max_qty||model.min_qty||formCtrl.$validators.Summation_Validation_UpTo||(formCtrl.$validators.Summation_Validation_UpTo=function(value){for(var items=model.option_items,quantity=0,i=0;i<items.length;i++)quantity+=0<items[i].quantity?1:0;var result=quantity<=model.max_qty;return 1==result?result:"Summation_Validation_UpTo,"+model.max_qty+","+elementName+","+quantity+",max"}),model.min_qty&&model.max_qty&&model.min_qty==model.max_qty&&!formCtrl.$validators.Summation_Validation_MustEqual&&(formCtrl.$validators.Summation_Validation_MustEqual=function(value){for(var items=model.option_items,quantity=0,i=0;i<items.length;i++)quantity+=0<items[i].quantity?1:0;var result=quantity==model.min_qty;return 1==result?result:"Summation_Validation_MustEqual,"+model.min_qty+","+elementName+","+quantity+",min"}),model.min_qty&&model.max_qty&&model.min_qty!=model.max_qty&&!formCtrl.$validators.Summation_Validation_UpTo&&(formCtrl.$validators.Summation_Validation_UpTo=function(value){for(var items=model.option_items,quantity=0,i=0;i<items.length;i++)quantity+=0<items[i].quantity?1:0;var result=quantity<=model.max_qty;return 1==result?result:"Summation_Validation_UpTo,"+model.max_qty+","+elementName+","+quantity+",max"}),model.min_qty&&model.max_qty&&model.min_qty!=model.max_qty&&!formCtrl.$validators.Summation_Validation_AtLeast&&(formCtrl.$validators.Summation_Validation_AtLeast=function(value){for(var items=model.option_items,quantity=0,i=0;i<items.length;i++)quantity+=0<items[i].quantity?1:0;var result=quantity>=model.min_qty;return 1==result?result:"Summation_Validation_AtLeast,"+elementName+","+model.min_qty+","+quantity+",min"}),scope.$watch(attrs.ngModel,formCtrl.$validate),isGroup()){if(!attrs.groupId)return;formCtrl&&scope.$watch(function(){return formCtrl.$invalid&&formCtrl.$submitted},function(val){val?$timeout(function(){el.attr("aria-describedby","error_option_group_"+attrs.groupId)},100):el.removeAttr("aria-describedby")})}}}}]),angular.module("ONO-Base-UI").directive("onoNavigationWarning",["$window",function($window){"use strict";return{restrict:"A",controller:["$scope",function($scope){$scope.$on("$destroy",function(){$window.onbeforeunload=void 0}),$window.onbeforeunload=function(event){var message="You will lose all of your unsaved changes.";return angular.isUndefined(event)&&(event=$window.event),event&&(event.returnValue=message),message}}]}}]),angular.module("ONO-Base-UI").directive("onoRequiredInput",function(){return{restrict:"A",require:"ngModel",link:function($scope,$element,$attrs,modelCtrl){$scope.$eval($attrs.onoRequiredInput)&&$scope.$watch($attrs.ngModel,function(val){modelCtrl.$setValidity("required",!!val)})}}}),angular.module("ONO-Base-UI").directive("onoSelect",["$timeout","$document",function($timeout,$document){"use strict";return{restrict:"E",transclude:!0,templateUrl:"web/app/_directives/onoSelect.payment.html",link:function($scope,el,attrs){var cancel;function hide(){$scope.show=!1,$scope.$$phase||$scope.$apply(),$document.off("click.ono"),cancel(),cancel=null}$scope.show=!1,$scope.title=attrs.title,$scope.$watch(attrs.onoOptions,function(o){$scope.options=o}),$scope.open=function($event){$scope.show=!$scope.show,$event.stopPropagation(),$scope.show&&!cancel?($document.one("click.ono",hide),$timeout(function(){cancel=$scope.$on("userInteraction",hide)},1)):$scope.show||hide()},$(el).keydown(function(event){var Keyboard={Enter:13,Space:32,DownArrow:40,UpArrow:38,Escape:27};if(event.which==Keyboard.Escape&&hide(),$scope.show){if(event.which===Keyboard.DownArrow)if($($document[0].activeElement).is(el))$(el).find("ul").children().first().find("a").focus();else{var next=$($document[0].activeElement).parent().next().find("a");next&&0<next.length&&next.focus()}if(event.which===Keyboard.UpArrow&&!$($document[0].activeElement).is(el)){var previous=$($document[0].activeElement).parent().prev().find("a");previous&&0<previous.length?previous.focus():($(el).focus(),hide())}}else event.which!==Keyboard.Enter&&event.which!==Keyboard.Space||$scope.open(event)})}}}]),angular.module("ONO-Base-UI").directive("onoTemplate",["$http","$templateCache","$compile","$interpolate",function($http,$templateCache,$compile,$interpolate){"use strict";return{priority:400,link:function(scope,element,attr){var exp,i,func=$interpolate(attr.onoTemplate.replace(/'/g,""));function getTemplate(){$http.get(func(scope),{cache:$templateCache}).success(function(response){element.html(response),$compile(element.contents())(scope)})}if(func.parts)for(i=0;func.parts.length>i;i++)angular.isFunction(func.parts[i])&&(exp=func.parts[i].exp);exp?scope.$watch(exp,function(s){s&&getTemplate()}):getTemplate()}}}]),angular.module("ONO-Base-UI").directive("onoTooltip",["$timeout",function($timeout){"use strict";return{restrict:"E",transclude:!0,template:'<div ng-show="show" ng-transclude></div>',link:function($scope,$el,attrs){var cancel,target;function hide(){$scope.show=!1,$scope.$$phase||$scope.$apply(),cancel(),cancel=null}$scope.show=!1,attrs.for&&(target=$el.parent().find('[name="'+attrs.for+'"]')),target&&"click"===attrs.on?target.on(attrs.on,function($event){$scope.show=!$scope.show,$event.stopPropagation(),$scope.show&&!cancel?$timeout(function(){cancel=$scope.$on("userInteraction",hide)},1):$scope.show||(cancel(),cancel=null)}):target&&"hover"===attrs.on&&(target.on("mouseenter",function(){$scope.show=!0,$scope.$$phase||$scope.$apply()}),target.on("mouseleave",function(){$scope.show=!1,$scope.$$phase||$scope.$apply()}))}}}]),angular.module("ONO-Base-UI").directive("preventRedirect",[function(){return{restrict:"A",link:function(scope,element,attrs){$(element).click(function(event){event.preventDefault(),event.stopPropagation()})}}}]),angular.module("ONO-Base-UI").directive("raiseDialogClosed",[function(){return{restrict:"A",link:function(scope,element,attrs){$(element).click(function(){scope.$emit("dialogClosed")})}}}]),angular.module("ONO-Base-UI").directive("safeText",["$document",function($document){return{restrict:"A",link:function(scope,element,attr){element.on("paste",handlePaste),element.on("keypress",handleKeyPress),scope.$on("$destroy",function(){element.off("paste",handlePaste),element.off("keypress",handleKeyPress)});var emojisregex=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function handlePaste(event){event.preventDefault();var regexText=function(string){if(angular.isUndefined(attr.safeText))return string;var re=new RegExp(attr.safeText,"g");if(angular.isUndefined(string))return"";var replacedstring=string.replace(re,"");return replacedstring=replacedstring.replace(emojisregex,"")}(event.originalEvent.clipboardData.getData("text/plain"));return $document[0].execCommand("inserttext",!1,regexText),!1}function handleKeyPress(event){if(event.key.match(emojisregex))return event.preventDefault(),!1;var keyCode=event.which||event.keyCode;return String.fromCharCode(keyCode).match(new RegExp(attr.safeText,"i"))&&8!==keyCode?(event.preventDefault(),!1):void 0}}}}]),angular.module("ONO-Base-UI").directive("selectDefaultOption",[function(){return{restrict:"A",link:function(scope,element,attr){0<scope.option.min_qty&&scope.option.option_items.length<=1&&(scope.option.selected=scope.option.option_items[0],scope.option.select(scope.option.option_items[0]))}}}]),angular.module("ONO-Base-UI").directive("subOptionFocus",["$document","$timeout",function($document,$timeout){return{restrict:"A",link:function(scope,element,attrs){var previousControl=$document[0].activeElement;-1<$(previousControl).attr("id").indexOf("option_dropdown")&&$timeout(function(){element.find("input").first().focus()},500)}}}]),angular.module("ui.autocomplete",[]).directive("uiAutocomplete",function(){"use strict";var defaults={source:["test","data"],renderItem:function(ul,item){return $("<li />").data("item.autocomplete",item).append("<a>"+item.value+"</a>").appendTo(ul)}};return{require:"?ngModel",scope:{uiAutocomplete:"="},link:function(scope,element,attrs,controller){var opts=angular.extend({},defaults,scope.$eval(attrs.uiAutocomplete));element.autocomplete(opts).data("uiAutocomplete")._renderItem=opts.renderItem,controller&&controller.$render()}}}),angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig",function(uiDateConfig){"use strict";var options;return options={},angular.extend(options,uiDateConfig),{require:"?ngModel",link:function(scope,element,attrs,controller){var getOptions=function(){return angular.extend({},uiDateConfig,scope.$eval(attrs.uiDate))},datePickerButton=element.parents(".formElements").find(".addToCalenderSearchField");scope.$watch(getOptions,function(){var showing=!1,opts=getOptions(),_body=element.parents("body"),_isTouchDevice=!1,_shouldCallHide=!0;if(controller){var _onSelect=opts.onSelect||angular.noop;opts.showOn="none",opts.onSelect=function(value,picker){scope.$apply(function(){showing=!0,controller.$setViewValue(element.datepicker("getDate")),_onSelect(value,picker),_shouldCallHide=!0,element.blur(),datePickerButton.focus()})},opts.beforeShow=function(){_shouldCallHide=showing=!0,_body.off("touchstart.uiDatePicker").on("touchstart.uiDatePicker",function(e){_isTouchDevice=!0,0<jQuery(e.target).parents(".ui-datepicker").length&&(_shouldCallHide=!1)}),setTimeout(function(){makeDatePickerAccessible()},0)},opts.onClose=function(value,picker){showing=!1,_body.off("touchstart.uiDatePicker")},element.off("blur").on("blur",function(e){showing?_isTouchDevice&&_shouldCallHide&&element.datepicker("hide"):scope.$apply(function(){element.datepicker("setDate",element.datepicker("getDate")),controller.$setViewValue(element.datepicker("getDate"))})}),element.datepicker().click(function(){$(this).datepicker("show")}),datePickerButton.click(function(){element.datepicker("show")}),datePickerButton.keydown(function(e){13==e.keyCode&&(e.preventDefault(),element.datepicker("show"))}),controller.$render=function(){var date=controller.$viewValue;if(angular.isDefined(date)&&null!==date&&("string"==typeof date&&(date=new Date(date)),!angular.isDate(date)))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof date+" - use ui-date-format to convert it from a string");element.datepicker("setDate",date)}}element.datepicker("destroy");var currentDateLanguage=attrs.uiDateLanguage||"en",localizedOptions=angular.extend({},$.datepicker.regional[currentDateLanguage],opts);element.datepicker(localizedOptions),element.datepicker("widget").appendTo($(".datepickerContainer")),jQuery.datepicker.setDefaults(localizedOptions),controller&&controller.$render()},!0);var makeDatePickerAccessible=function(){var today=$(".ui-datepicker-today a");today&&0!=today.length||(today=$(".ui-state-active")[0]||$(".ui-state-default")[0]),angular.isDefined(today)&&today.focus();var container=document.getElementById("ui-datepicker-div");if(container&&element){container.setAttribute("role","application"),container.setAttribute("aria-label","Calendar view date-picker");var prev=$(".ui-datepicker-prev",container)[0],next=$(".ui-datepicker-next",container)[0];next.href="javascript:void(0)",prev.href="javascript:void(0)",next.setAttribute("role","button"),next.removeAttribute("title"),prev.setAttribute("role","button"),prev.removeAttribute("title"),appendOffscreenMonthText(next),appendOffscreenMonthText(prev),$(next).on("click",handleNextClicks),$(prev).on("click",handlePrevClicks),monthDayYearText(),$(container).off("keydown").on("keydown",function(keyVent){CalenderContainerKeyPressHandler(keyVent,container,next,prev)})}},CalenderContainerKeyPressHandler=function(keyVent,container,next,prev){var activeDate,which=keyVent.which,target=keyVent.target,dateCurrent=getCurrentDate(container);if(dateCurrent||setHighlightState(dateCurrent=$("a.ui-state-default")[0],container),27===which)return keyVent.stopPropagation(),closeCalendar();if(9===which&&keyVent.shiftKey)keyVent.preventDefault(),$(target).hasClass("ui-state-default")?$(".ui-datepicker-next")[0].focus():$(target).hasClass("ui-datepicker-next")?$(".ui-datepicker-prev")[0].focus():$(target).hasClass("ui-datepicker-prev")&&(activeDate=$(".ui-state-highlight")||$(".ui-state-active")[0])&&activeDate.focus();else if(9===which)keyVent.preventDefault(),$(target).hasClass("ui-state-default")?$(".ui-datepicker-next")[0].focus():$(target).hasClass("ui-datepicker-next")?$(".ui-datepicker-prev")[0].focus():$(target).hasClass("ui-datepicker-prev")&&(activeDate=$(".ui-state-highlight")||$(".ui-state-active")[0])&&activeDate.focus();else if(37===which)$(target).hasClass("ui-state-default")&&(keyVent.preventDefault(),function(dateLink){var container=document.getElementById("ui-datepicker-div");if(!dateLink)return;var td=$(dateLink).closest("td");if(!td)return;var prevTd=$(td).prev(),prevDateLink=$("a.ui-state-default",prevTd)[0];prevTd&&prevDateLink?(setHighlightState(prevDateLink,container),prevDateLink.focus()):function(target){var container=document.getElementById("ui-datepicker-div");if(!target)return;var currentRow=$(target).closest("tr");if(!currentRow)return;var previousRow=$(currentRow).prev();if(previousRow&&0!==previousRow.length){var prevRowDates=$("td a.ui-state-default",previousRow),prevRowDate=prevRowDates[prevRowDates.length-1];prevRowDate&&setTimeout(function(){setHighlightState(prevRowDate,container),prevRowDate.focus()},0)}else!function(){var prevLink=$(".ui-datepicker-prev")[0],container=document.getElementById("ui-datepicker-div");prevLink.click(),setTimeout(function(){var trs=$("tr",container),lastRowTdLinks=$("td a.ui-state-default",trs[trs.length-1]),lastDate=lastRowTdLinks[lastRowTdLinks.length-1];updateHeaderElements(),setHighlightState(lastDate,container),lastDate.focus()},0)}()}(dateLink)}(target));else if(39===which)$(target).hasClass("ui-state-default")&&(keyVent.preventDefault(),function(dateLink){var container=document.getElementById("ui-datepicker-div");if(!dateLink)return;var td=$(dateLink).closest("td");if(!td)return;var nextTd=$(td).next(),nextDateLink=$("a.ui-state-default",nextTd)[0];nextTd&&nextDateLink?(setHighlightState(nextDateLink,container),nextDateLink.focus()):function(target){var container=document.getElementById("ui-datepicker-div");if(!target)return;var currentRow=$(target).closest("tr"),nextRow=$(currentRow).next();if(nextRow&&0!==nextRow.length){var nextRowFirstDate=$("a.ui-state-default",nextRow)[0];nextRowFirstDate&&(setHighlightState(nextRowFirstDate,container),nextRowFirstDate.focus())}else!function(){var nextMon=$(".ui-datepicker-next")[0],container=document.getElementById("ui-datepicker-div");nextMon.click(),setTimeout(function(){updateHeaderElements();var firstDate=$("a.ui-state-default",container)[0];setHighlightState(firstDate,container),firstDate.focus()},0)}()}(dateLink)}(target));else if(38===which)$(target).hasClass("ui-state-default")&&(keyVent.preventDefault(),function(target,cont,prevLink){prevLink=$(".ui-datepicker-prev")[0];var rowContext=$(target).closest("tr");if(!rowContext)return;var rowTds=$("td",rowContext),rowLinks=$(".ui-state-default",rowContext),targetIndex=$.inArray(target,rowLinks),prevRow=$(rowContext).prev(),parallel=$("td",prevRow)[targetIndex],linkCheck=$("a.ui-state-default",parallel)[0];prevRow&&parallel&&linkCheck?(setHighlightState(linkCheck,cont),linkCheck.focus()):$(prevLink).is(".ui-state-disabled")||(prevLink.click(),setTimeout(function(){updateHeaderElements();var newRows=$("tr",cont),lastRow=newRows[newRows.length-1],lastRowTds=$("td",lastRow),tdParallelIndex=$.inArray(target.parentNode,rowTds),newParallel=lastRowTds[tdParallelIndex],newCheck=$("a.ui-state-default",newParallel)[0],firstActiveDateOfLastRow=$("a.ui-state-default",lastRowTds)[0];if(lastRow&&newParallel&&newCheck)setHighlightState(newCheck,cont),newCheck.focus();else{var secondLastRow=newRows[newRows.length-2],secondTds=$("td",secondLastRow),targetTd=secondTds[tdParallelIndex],linkCheck=$("a.ui-state-default",targetTd)[0];linkCheck?(setHighlightState(linkCheck,cont),linkCheck.focus()):firstActiveDateOfLastRow&&(setHighlightState(firstActiveDateOfLastRow,cont),firstActiveDateOfLastRow.focus())}},0))}(target,container,prev));else if(40===which)$(target).hasClass("ui-state-default")&&(keyVent.preventDefault(),function(target,cont,nextLink){nextLink=$(".ui-datepicker-next")[0];var targetRow=$(target).closest("tr");if(!targetRow)return;var targetCells=$("td",targetRow),cellIndex=$.inArray(target.parentNode,targetCells),nextRow=$(targetRow).next(),nextWeekTd=$("td",nextRow)[cellIndex],nextWeekCheck=$("a.ui-state-default",nextWeekTd)[0];nextRow&&nextWeekTd&&nextWeekCheck?(setHighlightState(nextWeekCheck,cont),nextWeekCheck.focus()):$(nextLink).is(".ui-state-disabled")||(nextLink.click(),setTimeout(function(){updateHeaderElements();var nextMonthTrs=$("tbody tr",cont),firstTds=$("td",nextMonthTrs[0]),firstParallel=firstTds[cellIndex],firstCheck=$("a.ui-state-default",firstParallel)[0],firstActiveDateOfMonth=$("a.ui-state-default",firstTds)[0];if(firstParallel&&firstCheck)setHighlightState(firstCheck,cont),firstCheck.focus();else{var secondRow=nextMonthTrs[1],secondTds=$("td",secondRow),secondRowTd=secondTds[cellIndex],secondCheck=$("a.ui-state-default",secondRowTd)[0];secondRow&&secondCheck?(setHighlightState(secondCheck,cont),secondCheck.focus()):firstActiveDateOfMonth&&(setHighlightState(firstActiveDateOfMonth,cont),firstActiveDateOfMonth.focus())}},0))}(target,container,next));else if(13===which)$(target).hasClass("ui-state-default")?setTimeout(function(){closeCalendar()},100):$(target).hasClass("ui-datepicker-prev")?handlePrevClicks():$(target).hasClass("ui-datepicker-next")&&handleNextClicks();else if(32===which)($(target).hasClass("ui-datepicker-prev")||$(target).hasClass("ui-datepicker-next"))&&target.click();else if(33===which)keyVent.preventDefault(),moveOneMonth(target,"prev");else if(34===which)keyVent.preventDefault(),moveOneMonth(target,"next");else if(36===which){keyVent.preventDefault();var firstOfMonth=$(target).closest("tbody").find("td:not(.ui-state-disabled)").find(".ui-state-default")[0];firstOfMonth&&(firstOfMonth.focus(),setHighlightState(firstOfMonth,$("#ui-datepicker-div")[0]))}else if(35===which){keyVent.preventDefault();var $daysOfMonth=$(target).closest("tbody").find("td:not(.ui-state-disabled)").find(".ui-state-default"),lastDay=$daysOfMonth[$daysOfMonth.length-1];lastDay&&(lastDay.focus(),setHighlightState(lastDay,$("#ui-datepicker-div")[0]))}$(".ui-datepicker-current").hide()};function closeCalendar(){var container=$("#ui-datepicker-div");$(container).off("keydown"),$(element).datepicker("hide"),datePickerButton.focus()}function moveOneMonth(currentDate,dir){var button="next"===dir?$(".ui-datepicker-next")[0]:$(".ui-datepicker-prev")[0];if(button){var ENABLED_SELECTOR="#ui-datepicker-div tbody td:not(.ui-state-disabled)",$currentCells=$(ENABLED_SELECTOR),currentIdx=$.inArray(currentDate.parentNode,$currentCells);button.click(),setTimeout(function(){updateHeaderElements();for(var $newCells=$(ENABLED_SELECTOR),newTd=$newCells[currentIdx],newAnchor=newTd&&$(newTd).find("a")[0];!newAnchor;)newAnchor=(newTd=$newCells[--currentIdx])&&$(newTd).find("a")[0];setHighlightState(newAnchor,$("#ui-datepicker-div")[0]),newAnchor.focus()},0)}}function handleNextClicks(){setTimeout(function(){updateHeaderElements(),prepHighlightState(),$(".ui-datepicker-next").focus(),$(".ui-datepicker-current").hide()},0)}function handlePrevClicks(){setTimeout(function(){updateHeaderElements(),prepHighlightState(),$(".ui-datepicker-prev").focus(),$(".ui-datepicker-current").hide()},0)}function monthDayYearText(){var datePickDiv=document.getElementById("ui-datepicker-div");if(datePickDiv){var dates=$("a.ui-state-default",datePickDiv);$(dates).attr("role","button").on("keydown",function(e){32===e.which&&(e.preventDefault(),e.target.click(),setTimeout(function(){closeCalendar()},100))}),$(dates).each(function(index,date){var currentRow=$(date).closest("tr"),currentTds=$("td",currentRow),currentIndex=$.inArray(date.parentNode,currentTds),dayIndex=$("thead tr th",datePickDiv)[currentIndex],daySpan=$("span",dayIndex)[0],monthName=$(".ui-datepicker-month",datePickDiv)[0].innerHTML,year=$(".ui-datepicker-year",datePickDiv)[0].innerHTML,number=date.innerHTML;if(daySpan&&monthName&&number&&year){var dateText=monthName+" "+date.innerHTML+" "+year+" "+daySpan.title;date.setAttribute("aria-label",dateText);var dayHeaders=$("thead tr th",datePickDiv);$(dayHeaders).each(function(index,header){header.setAttribute("scope","col")})}})}}function updateHeaderElements(){var context=document.getElementById("ui-datepicker-div");if(context){var prev=$(".ui-datepicker-prev",context)[0],next=$(".ui-datepicker-next",context)[0];next.href="javascript:void(0)",prev.href="javascript:void(0)",next.setAttribute("role","button"),prev.setAttribute("role","button"),appendOffscreenMonthText(next),appendOffscreenMonthText(prev),$(next).on("click",handleNextClicks),$(prev).on("click",handlePrevClicks),monthDayYearText()}}function prepHighlightState(){var highlight,cage=document.getElementById("ui-datepicker-div"),allowedDates=$("tbody td:not(.ui-state-disabled)",cage);(highlight=$(".ui-state-highlight",allowedDates)[0]||$(".ui-state-default",allowedDates)[0])&&cage&&setHighlightState(highlight,cage)}function setHighlightState(newHighlight,container){var prevHighlight=getCurrentDate(container);$(prevHighlight).removeClass("ui-state-highlight"),$(newHighlight).addClass("ui-state-highlight")}function getCurrentDate(container){return $(".ui-state-highlight",container)[0]}function appendOffscreenMonthText(button){var buttonText,isNext=$(button).hasClass("ui-datepicker-next"),months=["january","february","march","april","may","june","july","august","september","october","november","december"],currentMonth=$(".ui-datepicker-title .ui-datepicker-month").text().toLowerCase(),monthIndex=$.inArray(currentMonth.toLowerCase(),months),currentYear=$(".ui-datepicker-title .ui-datepicker-year").text().toLowerCase(),adjacentIndex=isNext?monthIndex+1:monthIndex-1;isNext&&"december"===currentMonth?(currentYear=parseInt(currentYear,10)+1,adjacentIndex=0):isNext||"january"!==currentMonth||(currentYear=parseInt(currentYear,10)-1,adjacentIndex=months.length-1),buttonText=isNext?"Next Month, "+firstToCap(months[adjacentIndex])+" "+currentYear:"Previous Month, "+firstToCap(months[adjacentIndex])+" "+currentYear,$(button).find(".ui-icon").html(buttonText)}function firstToCap(s){if(angular.isDefined(s))return s.charAt(0).toUpperCase()+s.slice(1)}}}}]).directive("uiDateDisplayFormat",[function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var dateDiplayFormat=attrs.uiDateDisplayFormat,dateParseFormat=attrs.uiDateParseFormat;dateDiplayFormat&&dateParseFormat?(modelCtrl.$formatters.push(function(value){return angular.isString(value)?jQuery.datepicker.parseDate(dateParseFormat,value):null}),modelCtrl.$parsers.push(function(value){return value?jQuery.datepicker.formatDate(dateParseFormat,value):null})):(modelCtrl.$formatters.push(function(value){return angular.isString(value)?new Date(value):null}),modelCtrl.$parsers.push(function(value){return value?value.toISOString():null}))}}}]),angular.module("ONO-Base-UI").directive("validatePattern",function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var validatePattern=function(value){var regex=attrs.validatePattern;if(regex){var valid=new RegExp(regex).test(value);modelCtrl.$setValidity("invalid_Pattern",valid)}},validator=function(value){return validatePattern(value),value},blurHandler=function(){validatePattern(element.val())};element.on("blur",blurHandler),attrs.$observe("validatePattern",blurHandler),modelCtrl.$parsers.push(validator),modelCtrl.$formatters.push(validator)}}}),angular.module("ONO-Base-UI").filter("alphanumeric",function(){return function(str){return str?str.trim().replace(/\W/g,""):""}}),angular.module("ONO-Base-UI").filter("array",function(){"use strict";return function(items){var filtered=[];return angular.forEach(items,function(item){filtered.push(item)}),filtered}}),angular.module("ONO-Base-UI").filter("has",["$filter",function($filter){"use strict";var filter=$filter("filter");return function(items,expression,comparator){var list=filter(items,expression,comparator);return!!list&&0<list.length}}]),angular.module("ONO-Base-UI").filter("moment",function(){"use strict";return function(input,formatString){return moment(input).format(formatString)}}),angular.module("ONO-Base-UI").filter("money",["$rootScope",function($rootScope){"use strict";return function(number){if(null===number||!isFinite(number))return"";var language=$rootScope.language.substring(0,$rootScope.language.indexOf(";")).toLowerCase(),i=parseInt(number=Math.abs(+number||0).toFixed(2))+"",j=3<(j=i.length)?j%3:0;return-1!=language.indexOf("fr")?(j?i.substr(0,j)+" ":"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1 ")+","+Math.abs(number-i).toFixed(2).slice(2)+"$":"$"+(j?i.substr(0,j)+",":"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1,")+"."+Math.abs(number-i).toFixed(2).slice(2)}}]),angular.module("ONO-Base-UI").filter("monthName",function(){"use strict";return function(monthNumber,fullMonth){return(fullMonth?["January","February","March","April","May","June","July","August","September","October","November","December"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"])[monthNumber-1]}}),angular.module("ONO-Base-UI").filter("orderItemTotal",["$filter",function($filter){return function(orderItems){for(var total=0,i=0;i<orderItems.length;i++)total+=parseInt(orderItems[i].quantity);return total}}]),angular.module("ONO-Base-UI").filter("phone",function(){return function(tel){if(!tel)return"";var value=tel.toString().trim().replace(/^\+/,""),city=value.slice(0,3),number=value.slice(3);return(" ("+city+") "+(number=number.slice(0,3)+"-"+number.slice(3))).trim()}}),angular.module("ONO-Base-UI").filter("shouldDisplay",function(){"use strict";return function(items,$scope){var list=[];return angular.forEach(items,function(item){item.data&&angular.isFunction(item.data.visible)&&!item.data.visible($scope)||list.push(item)}),list}}),angular.module("ONO-Base-UI").filter("stringClean",function(){return function(str){return str?str.trim().replace(/\s/g,"%20"):""}}),angular.module("ONO-Base-UI").filter("test",function(){"use strict";return function(input,re){return new RegExp(re).test(input)}}),angular.module("ONO-Base-UI").filter("toppings",function(){"use strict";return function(toppings,$scope){var list=[];return angular.forEach(toppings,function(topping){topping&&list.push(topping)}),list}}),angular.module("ONO-Base-UI").filter("translate",["translationSvc",function(translationSvc){return function(){return translationSvc.translate.apply(null,arguments)}}]),angular.module("ONO-Base-UI").service("addScript",["$document",function($document){return function(url){var script=$document[0].createElement("script"),scripts=$document[0].getElementsByTagName("script")[0];script.type="text/javascript",script.src=url,scripts.parentNode.insertBefore(script,scripts)}}]),angular.module("ONO-Services").factory("aurusSessionTimer",["$interval","$timeout","onoAlert","$log","domainEventSvc","$window","$state",function($interval,$timeout,onoAlert,$log,domainEventSvc,$window,$state){"use strict";var timer,waitingTime=0,waitingTimeLimit=$window.AurusSessionTimeoutLimit,interval=1,warningThreshold=$window.AurusSessionTimeoutWarning,timerInterval=60*interval*1e3;function timerTick(){return waitingTimeLimit<=(waitingTime+=interval)?(onoAlert.hide("aurusSessionTimeout"),onoAlert.hide("aurusSessionTimeoutWarning"),void $timeout(function(){stopTimer(),onoAlert.show({name:"aurusSessionTimeout",title:"Alert_PaymentSessionTimeOut_Title",message:"Alert_PaymentSessionTimeOut_Message",actions:[{name:"OK",action:function(scope){"editCreditCards"===$state.current.name&&domainEventSvc.raiseEvent("onAurusSessionTimeOut"),scope.hide()}}]})},100)):waitingTime===warningThreshold?(onoAlert.hide("aurusSessionTimeoutWarning"),void onoAlert.show({name:"aurusSessionTimeoutWarning",title:"Alert_PaymentSessionTimeOutWarning_Title",message:"Alert_PaymentSessionTimeOutWarning_Message",actions:[{name:"Ok",action:function(scope){scope.hide()}}]})):void 0}function stopTimer(){$interval.cancel(timer),timer=void 0}return{initTimer:function(){waitingTime=0,angular.isUndefined(timer)&&(timer=$interval(timerTick,timerInterval))},stopTimer:function(){stopTimer()}}}]),angular.module("ONO-Services").factory("aurusSvc",["$window","domainEventSvc","$document","translationSvc",function($window,domainEventSvc,$document,translationSvc){"use strict";var aurusErrorText={invalidCardNumber:translationSvc.translate("Invalid_Card_Number"),invalidZip:translationSvc.translate("Invalid_Zip"),invalidCardHolderName:translationSvc.translate("Invalid_Card_Holder_Name"),invalidCardType:translationSvc.translate("Invalid_Card_Type"),invalidExpiryDate:translationSvc.translate("Invalid_Expiry_Date"),invalidCardNotSupported:translationSvc.translate("Invalid_Card_Number")},isInitialized=!1;return{initialize:function(aurusUrl){isInitialized||$window.addEventListener("message",function(event){var dateString,data=event.data;if(event.origin===aurusUrl&&angular.isString(data)&&0==data.indexOf("response")){var dataArray=data.split("="),jsonValue=angular.fromJson(dataArray[1]),response={code:jsonValue.response_code,text:jsonValue.response_text,creditCard:{card_number:jsonValue.masked_card_num,name_on_card:jsonValue.card_holder_name,card_type:jsonValue.card_type,expiration_month:(dateString=jsonValue.card_expiry_date,dateString&&4===dateString.length?dateString.substring(0,2):"0"),expiration_year:function(dateString){var firstTwoDigitsOfYear=(new Date).getFullYear().toString().substring(0,2);return dateString&&4===dateString.length?firstTwoDigitsOfYear+dateString.substring(2):"0"}(jsonValue.card_expiry_date),verification_zip_code:jsonValue.zip,country:"US",one_time_token:jsonValue.one_time_token}};!function(response){return 0<response.code}(response)?domainEventSvc.raiseEvent("onAurusSuccessResponse",response):domainEventSvc.raiseEvent("onAurusErrorResponse",response)}}),isInitialized=!0},getCardToken:function(aurusUrl){$document[0].getElementById("frame_carddetails").contentWindow.postMessage("aurus-token",aurusUrl)},aurusErrorCodes:{invalidSession:"71999",invalidCardNumber:"71019",invalidZip:"71025",invalidCardHolderName:"71023",invalidCardType:"71024",invalidExpiryDate:"71020",invalidCardNotSupported:"10021"},aurusErrorText:aurusErrorText}}]),angular.module("ONO-Services").service("bbiTagManagerSvc",["$window","translationSvc",function($window,translationSvc){var bbiTagManagerSvc={sendData:function(data){$window.dataLayer&&$window.dataLayer.push(data)},onOrderSetupFulfillmentDateTypeSelected:function(fulfillmentInfo){if($window.dataLayer&&isActiveTrack("OrderSetupFulfillmentDateTypeSelected")){var waitTime="ASAP"===fulfillmentInfo.fulfillmentDateType?fulfillmentInfo.leadTime:"specifictime";bbiTagManagerSvc.sendData({event:"restaurantSetupEvent",restaurantSetup:fulfillmentInfo.storeNumber,restaurantSetupWait:waitTime})}},onMenuPdfDownload:function(menu){$window.dataLayer&&isActiveTrack("MenuPdfDownload")&&bbiTagManagerSvc.sendData({event:"trackedLinks",eventAction:"downloadMenuPDF-OLO",eventLabel:menu.Name})},onOrderSetupStartOrder:function(fulfillmentInfo){if($window.dataLayer&&isActiveTrack("OrderSetupStartOrder")){var waitTime="ASAP"===fulfillmentInfo.fulfillmentDateType?fulfillmentInfo.leadTime:"specifictime";bbiTagManagerSvc.sendData({event:"restaurantBuildEvent",restaurantBuild:fulfillmentInfo.storeNumber,restaurantBuildWait:waitTime,fulfillmentType:fulfillmentInfo.fulfillmentType})}},onValidationErrors:function(validationErrors){if($window.dataLayer&&isActiveTrack("ValidationErrors")){for(var errors=new Array,i=0;i<validationErrors.length;i++){var errorText=translationSvc.translate(validationErrors[i].message),form=validationErrors[i].formName;errors.push(errorText+"-"+validationErrors[i].fieldName)}var message=errors.join("|");bbiTagManagerSvc.sendData({event:"validationMessage",oloValidationMessage:message,formName:form})}},onUseCouponSelected:function(useCoupon){if($window.dataLayer&&isActiveTrack("UseCouponSelected")){var couponSelection=!0===useCoupon?"coupon-yes":"coupon-no";bbiTagManagerSvc.sendData({event:"checkoutOption",ecommerce:{checkout_option:{actionField:{step:2,option:couponSelection}}}})}},onPayAtRestaurantSelected:function(){$window.dataLayer&&isActiveTrack("PayAtRestaurantSelected")&&bbiTagManagerSvc.sendData({event:"checkoutOption",ecommerce:{checkout_option:{actionField:{step:3,option:"pay-at-restaurant"}}}})},onPayOnlineSelected:function(){$window.dataLayer&&isActiveTrack("PayOnlineSelected")&&bbiTagManagerSvc.sendData({event:"checkoutOption",ecommerce:{checkout_option:{actionField:{step:3,option:"pay-online"}}}})},onPaymentTypeSelected:function(paymentType){$window.dataLayer&&isActiveTrack("PaymentTypeSelected")&&("POD"===paymentType&&(paymentType="pay-at-restaurant"),bbiTagManagerSvc.sendData({event:"checkoutOption",ecommerce:{checkout_option:{actionField:{step:3,option:paymentType}}}}))},onDRAccountCreated:function(){$window.dataLayer&&isActiveTrack("DRAccountCreated")&&bbiTagManagerSvc.sendData({event:"Dine OLO Signup Modal Account Creation",eventLabel:""})},onDRAccountCreatedAndLinked:function(){$window.dataLayer&&isActiveTrack("DRAccountCreatedAndLinked")&&bbiTagManagerSvc.sendData({event:"Dine Rewards Account Link",eventLabel:"Signup Modal"})},onDRAccountCreationFailed:function(fieldsFailed){$window.dataLayer&&isActiveTrack("DRAccountCreatedAndLinked")&&bbiTagManagerSvc.sendData({event:"Dine OLO Signup Modal Submission Failure",eventLabel:fieldsFailed})},onDRAccountSignupModalCancel:function(fieldsFailed){$window.dataLayer&&isActiveTrack("DRAccountSignupModalCancel")&&bbiTagManagerSvc.sendData({event:"Dine OLO Signup Modal Cancel",eventLabel:fieldsFailed})},onDRSignupModalDisplay:function(origin){if($window.dataLayer&&isActiveTrack("DRAccountSignupModalDisplay")){var eventLabel="";eventLabel="verify"==origin?"Verify Modal":"linkSubmission"==origin?"OLO Link Submission":"",bbiTagManagerSvc.sendData({event:"Dine OLO Signup Modal Displayed",eventLabel:eventLabel})}},onDRAccountLinkedOnVerifyModal:function(){$window.dataLayer&&isActiveTrack("DRAccountLinkedOnVerifyModal")&&bbiTagManagerSvc.sendData({event:"Dine Rewards Account Link",eventLabel:"Verify Modal"})},onDRAccountVerifyModalSubmissionFailed:function(fieldsFailed){$window.dataLayer&&isActiveTrack("DRAccountLinkedOnVerifyModal")&&bbiTagManagerSvc.sendData({event:"Dine OLO Verify Modal Submission Failure",eventLabel:fieldsFailed})},onDRAccountVerifyModalCancel:function(fieldsFailed){$window.dataLayer&&isActiveTrack("DRAccountVerifyModalCancel")&&bbiTagManagerSvc.sendData({event:"Dine OLO Verify Modal Cancel",eventLabel:fieldsFailed})},onDRVerifyModalDisplay:function(){$window.dataLayer&&isActiveTrack("DRAccountVerifyModalDisplay")&&bbiTagManagerSvc.sendData({event:"Dine OLO Verify Modal Displayed",eventLabel:""})},onDRAccountLinkedOnReviewOrder:function(){$window.dataLayer&&isActiveTrack("DRAccountLinkedOnReviewOrder")&&bbiTagManagerSvc.sendData({event:"Dine Rewards Account Link",eventLabel:""})},onDROLOLinkSubmit:function(){$window.dataLayer&&isActiveTrack("DRAccountLinkedOnReviewOrder")&&bbiTagManagerSvc.sendData({event:"Dine OLO Link Submit",eventLabel:"Successful"})},onDROLOLinkSubmitNoMatch:function(){$window.dataLayer&&isActiveTrack("DRAccountLinkedOnReviewOrder")&&bbiTagManagerSvc.sendData({event:"Dine OLO Link Submit",eventLabel:"Review Order Screen"})},onDRAccountUnlink:function(){$window.dataLayer&&isActiveTrack("DRAccountUnlink")&&bbiTagManagerSvc.sendData({event:"Dine Rewards Account Unlink",eventLabel:"Review Order Screen"})},onDRAccountRewardApplied:function(offerCode){$window.dataLayer&&isActiveTrack("DRAccountRewardApplied")&&bbiTagManagerSvc.sendData({event:"Dine Rewards Offer Applied",eventLabel:offerCode})},onDRAccountRewardRemoved:function(offerCode){$window.dataLayer&&isActiveTrack("DRAccountRewardRemoved")&&bbiTagManagerSvc.sendData({event:"Dine Rewards Offer Removed",eventLabel:offerCode})}};function isActiveTrack(tag){return 0<$window.BBITagManagerTrackKeys.indexOf(tag)}return bbiTagManagerSvc}]),angular.module("ONO-Services").service("cartEventsSvc",["cartSvc",function(cartSvc){return{onClearCart:function(data){cartSvc.clearOrder()}}}]),angular.module("ONO-Services").service("cartExpiredEventHandler",["$rootScope","onoAlert","$window","$state","featureFlagSvc","cartSvc","sessionManager",function($rootScope,onoAlert,$window,$state,featureFlagSvc,cartSvc,sessionManager){return{onCartExpired:function(){cartSvc.cancelOrder(),sessionManager.remove("order"),angular.isObject($state.params)&&angular.isUndefined($state.params.id)&&(featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")?$window.sessionStorage&&"Delivery"===$window.sessionStorage.getItem("fulfillmentType")?$state.go("delivery"):$state.go("pickup"):$state.go("restaurantSearch"))}}}]),app.factory("cryptoService",["$q","$http","$log","$timeout",function($q,$http,$log,$timeout){$log.info("Initializing CryptoService");var rsa=new RSAKey,isReady=!1,isEncryptionRequired=!0,self={currentLocationCode:null};return self.encrypt=function(message){if($log.info("Encrypting message"),!isEncryptionRequired)return message;if(isReady)return hex2b64(rsa.encrypt(message));throw"Encryption Service is not yet ready.  You must first set a location."},self.setLocation=function(locationCode){if($log.info("Setting location: "+locationCode),self.currentLocationCode===locationCode&&isReady){$log.info("Nevermind, location is already set");var deferred=$q.defer();return $timeout(function(){deferred.resolve()}),deferred.promise}return isReady=!1,self.currentLocationCode=locationCode,function(locationCode){var logMessage="Fetching encryption key",url="/api/restaurant/paymentencryptionkey";return angular.isDefined(locationCode)&&(logMessage=logMessage+" for location "+locationCode,url="/api/restaurant/"+locationCode+"/paymentencryptionkey"),$log.info(logMessage),$http({url:url,method:"GET"})}().then(function(result){var publicKey=result.data;if($log.info("Encryption key received..."),1024<=8*b64toBA(publicKey.modulus).length)$log.info("...and it was valid!"),function(modulus,exponent){$log.info("Setting public key"),rsa.setPublic(b64tohex(modulus),b64tohex(exponent))}(publicKey.modulus,publicKey.exponent),isReady=!0;else{if(!function(value){try{var date=new Date(value);return!isNaN(date.getTime())}catch(error){return!1}}(publicKey.modulus))throw $log.info("...but it was too short"),"Public key length too short";$log.info("...but it was just a date"),isEncryptionRequired=!(isReady=!0)}})},self}]),angular.module("ONO-Services").service("dinerewardsSvc",["customerSvc","$http","$q","$log",function(customerSvc,$http,$q,$log){return{register:function(registration){var drRegistration={email:registration.email,firstName:registration.first_name,lastName:registration.last_name,phone:registration.phone,source:"OBS_OLO"};return $http({method:"POST",service:"apim",url:"loyalty/users",data:drRegistration}).then(function(response){return response.data&&"string"==typeof response.data&&'"'==response.data[0]&&'"'==response.data[response.data.length-1]&&(response.data=response.data.substring(1,response.data.length-1)),$log.info("DR: DR Account created along with new OLO Registration."),response.data},function(response){throw $log.error("DR: An error occurred when creating DR Account along with new OLO Registration."),response})},linkAccount:function(customer){if(customer)return this.getUser(customer.phone,customer.email).then(function(data){customer.loyalty_card_number=data.printedCardNumber,customerSvc.updateCustomer(customer),$log.info("DR: Account Connected ["+customer.loyalty_card_number.substring(customer.loyalty_card_number.length-3)+"]")})},unlinkAccount:function(customer){customer&&(delete customer.loyalty_card_number,customerSvc.updateCustomer(customer))},getUser:function(phoneNumber,email,loyaltyNumber){var config={method:"GET",service:"apim",url:"loyalty/users?source="+encodeURIComponent("OBS_OLO")};return phoneNumber&&(config.url+="&phoneNumber="+encodeURIComponent(phoneNumber)),email&&(config.url+="&emailAddress="+encodeURIComponent(email)),loyaltyNumber&&(config.url+="&loyaltyNumber="+encodeURIComponent(loyaltyNumber)),$http(config).then(function(response){return response.data.accountRewards.visitsUntilReward=response.data.accountRewards.visitsUntilReward||3,response.data},function(error){throw error})},sendCheck:function(checkNumber,fulfillmentDate,restaurantId,loyaltyNumber){return $http({method:"POST",service:"apim",url:"loyalty/checks",data:{checkNumber:checkNumber,fulfillmentDate:fulfillmentDate,restaurantId:restaurantId,loyaltyNumber:loyaltyNumber,source:"OBS_OLO"}}).then(function(data){return $log.info("DR: check #"+checkNumber+" was sent for QV tracking."),data},function(response){throw $log.error("DR: Error submitting check #"+checkNumber+" for QA tracking."),response})}}}]),angular.module("ONO-Services").service("domainEventSvc",[function(){var eventHandlers={};return{raiseEvent:function(event,args){for(var prop in eventHandlers)if(prop==event){for(var handler in eventHandlers[prop])eventHandlers[prop][handler].call(void 0,args);return}},addHandler:function(handler){for(var prop in handler)angular.isFunction(handler[prop])&&(eventHandlers.hasOwnProperty(prop)||(eventHandlers[prop]=new Array),eventHandlers[prop].push(handler[prop]))},removeHandler:function(handler){for(var prop in handler)if(angular.isFunction(handler[prop])&&eventHandlers.hasOwnProperty(prop))for(var i=0;i<eventHandlers[prop].length;i++)if(eventHandlers[prop][i]==handler[prop]){eventHandlers[prop].splice(i,1);break}}}}]),angular.module("ONO-Base-UI").provider("dynamicTemplate",function(){function normalizeUrl(url){var s=url.toLowerCase();return 0!==s.indexOf("/")&&(s="/"+s),s}var provider={context:"desktop",overrides:{mobile:{},desktop:{}},getTemplateUrl:function(originalUrl){var url=normalizeUrl(originalUrl);return provider.overrides[provider.context][url]?provider.overrides[provider.context][url]:originalUrl}};this.overrideViews=function(overrides){for(var c in overrides)for(var o in overrides[c])provider.overrides[c][normalizeUrl(o)]=overrides[c][o]},this.$get=[function(){return provider}]}).config(["$provide",function($provide){$provide.decorator("$templateCache",["$delegate","$http","dynamicTemplate","$rootScope",function($delegate,$http,dynamicTemplate,$rootScope){var orig=$delegate.get;return $delegate.get=function(url){var newUrl=dynamicTemplate.getTemplateUrl(url),val=orig(newUrl);return angular.isUndefined(val)&&(val=$http.get(newUrl),$delegate.put(newUrl,val)),val},$delegate}])}]),angular.module("ONO-Base-UI").service("externalLink",["$location","$window","$state",function($location,$window,$state){return function(toUrl,redirectUrlParam){if(toUrl){var params=redirectUrlParam?"?"+redirectUrlParam+"="+encodeURIComponent($location.$$absUrl):"";$state.includes("confirmation")||(params="?"+redirectUrlParam+"="+encodeURIComponent($window.location.origin+"/"+$state.href("history"))),$window.location=toUrl+params}}}]),angular.module("ONO-Services").service("featureFlagSvc",["$http","$window",function($http,$window){var useCDN=$window.ReferenceServiceCDNEnabled&&angular.isDefined($window.ReferenceServiceCDNUrl),featureFlagEndPoint=useCDN?$window.ReferenceServiceCDNUrl+"OBS_FeatureFlags.json":"api/featureflag/obs";return{getFeatureFlagData:function(){var config={method:"GET",cache:!0,url:featureFlagEndPoint};return $http(config).then(function(response){return response.data},function(error){if(useCDN)return config.url="api/featureflag/obs",$http(config).then(function(response){return response.data},function(error){throw error});throw error})},getFeatureFlags:function(returnType,flagArray){var that=this;return this.getFeatureFlagData().then(function(data){return"full"===returnType?that.featureFlagFull(data,flagArray):"root"===returnType?that.featureFlagRoot(data,flagArray):that.featureFlagStatus(data,flagArray)})},featureFlagStatus:function(flagObject,flagArray){var result=_.last(this.recursiveFlagSearch(flagObject,flagArray,0,[])).active;return!!angular.isDefined(result)&&result},featureFlagFull:function(flagObject,flagArray){return this.recursiveFlagSearch(flagObject,flagArray,0,[])},featureFlagRoot:function(flagObject,flagArray){var that=this,flags={};return _.each(flagArray,function(obj,parentIndex){!function(featureFlags,obj,parentIndex){_.each(obj,function(item,index){featureFlags=index===obj.length-1?featureFlags[item]=that.featureFlagStatus(flagObject,obj):featureFlags[flagArray[parentIndex][index]]=featureFlags[flagArray[parentIndex][index]]||{}})}(flags,obj,parentIndex)}),flags},recursiveFlagSearch:function(collection,flagArray,traverseDepth,rtnFlags){var that=this;return _.each(collection,function(obj){_.includes(flagArray,obj.type.trim())&&(obj.depth=traverseDepth++,rtnFlags.push(obj),0<obj.flags.length&&that.recursiveFlagSearch(obj.flags,flagArray,traverseDepth,rtnFlags))}),rtnFlags},featureFlagExists:function(parentObject){for(var i=1;i<arguments.length;i++){if(!parentObject.hasOwnProperty(arguments[i]))return!1;parentObject=parentObject[arguments[i]]}return!0}}}]),angular.module("ONO-Base-UI").factory("formValidation",["$timeout",function($timeout){function watchForm($scope,form,propertyName,err,modelName){form.$setValidity(err[0],!1),-1!=propertyName.indexOf("_")&&(propertyName=propertyName.substring(propertyName.indexOf("_")+1)),$timeout(function(){var unwatch=$scope.$watch(propertyName,function(){form.$setValidity(err[0],!0),unwatch()})},5,!1)}function watchInput(input,i,err,model){var unwatch,init=!1;input.$setValidity(err[0],!1),unwatch=model.$watch(i,function(){init?(input.$setValidity(err[0],!0),unwatch()):init=!0},!0)}return{watchInput:watchInput,watchForm:watchForm,setupServerError:function setupServerError(i,err,$scope,form,model){var input,trimRE=/\.[a-z0-9_]{1,}$/;(input=$scope.$eval(i,form))?watchInput(input,i,err,model):trimRE.test(i)?setupServerError(i.replace(trimRE,""),err,$scope,form,model):watchForm($scope,form,i,err)}}}]),angular.module("ONO-Services").service("fulfillmentDateEventHandler",["$state","$window","onoAlert","customerSvc","userAlertSvc","featureFlagSvc","cartSvc",function($state,$window,onoAlert,customerSvc,userAlertSvc,featureFlagSvc,cartSvc){var options={canHandleTimeException:!1};function updateFulfillmentType(args){$window.sessionStorage.setItem("fulfillmentType","Curbside"),args.cart.order_setup.fulfillment_type="Curbside",cartSvc.updateOrderSetup(args.cart.order_setup)}return featureFlagSvc.getFeatureFlags("status",["handleFulfillmentTimeException"]).then(function(status){options.canHandleTimeException=angular.isDefined(status)&&!!status}),{onCartToASAP:function(args){args&&!1===args.showAlert||onoAlert.show({title:"UserAlert_FulfillmentDateToASAP_Title",message:"UserAlert_FulfillmentDateToASAP",actions:[{name:"UserAlert_FulfillmentDateToASAP_Close",action:function(scope){scope.hide()}}]})},onUpdateOrderSetup:function(args){var fault,cart;angular.isObject(args)&&(cart=args.cart,angular.isObject(cart)&&angular.isObject(cart.order_setup)&&angular.isDefined(cart.order_setup.fulfillment_type))&&(fault=args.fault,angular.isObject(fault)&&angular.isDefined(fault.data)&&angular.isDefined(fault.data.ModelState)&&angular.isDefined(fault.data.ModelState.fulfillment_date))&&(options.canHandleTimeException?(function(fault){return 0<fault.data.ModelState.fulfillment_date.length&&"UserAlert_FulfillmentDateExpired_TryCurbside"===fault.data.ModelState.fulfillment_date[0]}(args.fault)&&(updateFulfillmentType(args),userAlertSvc.show({title:"UserAlert_FulfillmentDateExpired_TryCurbside",message:"UserAlert_FulfillmentDateExpired_TryCurbside",actions:[userAlertSvc.commonActions.Dismiss]})),function(fault){return 0<fault.data.ModelState.fulfillment_date.length&&"UserAlert_FulfillmentDateExpired_TryFuture"===fault.data.ModelState.fulfillment_date[0]}(args.fault)&&(updateFulfillmentType(args),$state.go("orderSetup"),userAlertSvc.show({title:"UserAlert_FulfillmentDateExpired_TryFuture",message:"UserAlert_FulfillmentDateExpired_TryFuture",actions:[userAlertSvc.commonActions.Dismiss]}))):onoAlert.show({title:"Server_Exception_Title",message:"Server_Exception_Message",actions:[{name:"Close",action:function(scope){scope.hide()}}]}))},onRestaurantClosed:function(args){if(onoAlert.show({title:"UserAlert_RestaurantClosed_Title",message:"UserAlert_RestaurantClosed",actions:[{name:"UserAlert_RestaurantClosed_Close",action:function(scope){scope.hide(),scope.gotoOrder()}}]}),""!=$state.current.name)throw"error"},onFulfillmentDateExpired:function(args){onoAlert.show({title:"UserAlert_FulfillmentDateExpired_Title",message:"UserAlert_FulfillmentDateExpired",actions:[{name:"UserAlert_FulfillmentDateExpired_Close",action:function(scope){scope.hide()}}]})}}}]).service("bp_FulfillmentDateEventHandler",["$state","onoAlert","customerSvc",function($state,onoAlert,customerSvc){return{onCartToASAP:function(args){onoAlert.show({dialogTemplateUrl:'"/web/app/dialog/FulfillmentDateToASAP.html"',actions:[{name:"UserAlert_FulfillmentDateToASAP_Close",action:function(scope){scope.hide()}}]})},onRestaurantClosed:function(args){if(onoAlert.show({dialogTemplateUrl:'"/web/app/dialog/FulfillmentDateToSpecificTime.html"',actions:[{name:"fulfillment_date_NotAvailable_FindLocation",action:function(scope){scope.hide(),$state.go("selectPickupLocation")}}]}),""!=$state.current.name)throw"error"},onFulfillmentDateExpired:function(args){onoAlert.show({dialogTemplateUrl:'"/web/app/dialog/FulfillmentDateToSpecificTime.html"',actions:[{name:"fulfillment_date_NotAvailable_FindLocation",action:function(scope){scope.hide(),$state.go("selectPickupLocation")}}]})}}}]),angular.module("ONO-Base-UI").config(["$httpProvider",function($httpProvider){var interceptor=["httpErrorHandler","$q",function(httpErrorHandler,$q){return{responseError:function(rejection){return rejection.config&&(rejection.config.responseTimestamp=(new Date).getTime(),_.isObject(rejection.config.data)&&angular.isDefined(rejection.config.data.password)&&(rejection.config.data.password=rejection.config.data.password.replace(/./g,"*"))),httpErrorHandler.handleError(rejection),$q.reject(rejection)},request:function(config){return config.requestTimestamp=(new Date).getTime(),config},response:function(response){return response.config&&(response.config.responseTimestamp=(new Date).getTime()),response.config.responseTimestamp=(new Date).getTime(),response}}}];$httpProvider.interceptors.push(interceptor)}]).factory("httpErrorHandler",[function(){var handlers=[];return{addErrorHandler:function(errorHandler){handlers.push(errorHandler)},removeErrorHandler:function(errorHandler){var index=handlers.indexOf(errorHandler);-1<index&&handlers.splice(index,1)},handleError:function(response){try{response.json=angular.fromJson(response.data)}catch(e){response.json=null}for(var i=handlers.length-1;0<=i&&!handlers[i](response);i--);return response}}}]).run(["httpErrorHandler","onoAlert","userAlertSvc","$state","accountSvc","globalTelemetrySvc",function(httpErrorHandler,onoAlert,userAlertSvc,$state,accountSvc,globalTelemetrySvc){var onoAlertClose={name:"Close",action:function(scope){scope.hide()}};httpErrorHandler.addErrorHandler(function(response){globalTelemetrySvc.trackException(buildExceptionObject(response,$state)),500===response.status&&onoAlert.show({title:"Server_Exception_Title",message:"Server_Exception_Message",actions:[onoAlertClose]})});httpErrorHandler.addErrorHandler(function(response){globalTelemetrySvc.trackException(buildExceptionObject(response,$state)),401===response.status&&accountSvc.logout()});httpErrorHandler.addErrorHandler(function(response){globalTelemetrySvc.trackException(buildExceptionObject(response,$state)),404!==response.status||response.handled||(response.handled=!0,(onoAlert=onoAlert||$injector.get("onoAlert")).show({title:"Server_PageNotFound_Title",message:"Server_PageNotFound_Message",actions:[onoAlertClose]}))});httpErrorHandler.addErrorHandler(function(response){if(globalTelemetrySvc.trackException(buildExceptionObject(response,$state)),angular.isDefined(response.config)&&"apim"===response.config.service)return response.handled=!0});function buildExceptionObject(httpResponse,state){return{"type ":"http error","status ":httpResponse.status,"message ":httpResponse.message,"current state":state.$current.name,"query params ":state.params.query,"json ":httpResponse.json,"stack trace ":httpResponse.stack,"data ":httpResponse.data,"config ":angular.isDefined(httpResponse.config)?angular.fromJson(httpResponse.config):null}}httpErrorHandler.addErrorHandler(function(response){504!==response.status&&408!==response.status||(globalTelemetrySvc.trackException(buildExceptionObject(response,$state)),onoAlert.show({title:"Server_Exception_Title",message:"Server_Exception_Message",actions:[onoAlertClose]}))})}]),angular.module("ONO-Services").service("invalidCartEventHandler",["onoAlert",function(onoAlert){return{onTriedCheckoutWithEmptyCart:function(args){(onoAlert=onoAlert||$injector.get("onoAlert")).show({title:"UserAlert_TriedCheckoutWithEmptyCart_Title",message:"UserAlert_TriedCheckoutWithEmptyCart",actions:[{name:"UserAlert_TriedCheckoutWithEmptyCart_Close",action:function(scope){scope.hide()}}]})}}}]),angular.module("ONO-Services").service("invalidMenuHandler",["userAlertSvc",function(userAlertSvc){return{onInvalidMenu:function(errorInfo){$state.go(errorInfo.state),userAlertSvc.show({title:errorInfo.message,message:errorInfo.message,actions:[userAlertSvc.commonActions.Dismiss]})}}}]).service("bp_InvalidMenuHandler",["$state","userAlertSvc","onoAlert","invalidMenuHandler",function($state,userAlertSvc,onoAlert,invalidMenuHandler){return{onInvalidMenu:function(errorInfo){if("menu.fulfillment_date"==errorInfo.error){if((onoAlert=onoAlert||$injector.get("onoAlert")).show({dialogTemplateUrl:'"/web/app/dialog/restaurantClosed.html"',title:errorInfo.message+"_Title",classes:"bpDialog fulfillmentDateNotAvailable dialog dialogAlert",actions:[{name:"fulfillment_date_NotAvailable_FindLocation",action:function(scope){scope.hide(),$state.go("selectPickupLocation")}}]}),""!=$state.current.name)throw"error"}else invalidMenuHandler.onInvalidMenu(errorInfo)}}}]),angular.module("ONO-Services").service("leadTimeChangedEventHandler",["$rootScope","$q","$state","$timeout","userAlertSvc","restaurantSvc","cartSvc",function($rootScope,$q,$state,$timeout,userAlertSvc,restaurantSvc,cartSvc){var leadTimeChangedEventHandler={currentFulfillmentDateIsAfter:function(cart,potentialFulfillmentTime){return!!cart.order_setup.fulfillment_date&&moment(cart.order_setup.fulfillment_date).isAfter(potentialFulfillmentTime)},eventHandlers:{onLeadTimeChanged:function(cart){var currentLeadTime=cart.order_setup.lead_time,fulfillmentTime=cart.restaurant.currentServerTime().add(currentLeadTime,"minutes"),latestAsapTime=cart.restaurant.getLatestASAPTime(cart.menu_type,cart.fulfillment_type_info.fulfillment_type),orderItems=cart.order_items;return leadTimeChangedEventHandler.currentFulfillmentDateIsAfter(cart,fulfillmentTime)?null:fulfillmentTime.isAfter(latestAsapTime)?(cartSvc.viewOrderSetup().fulfillment_date=fulfillmentTime.format("YYYY-MM-DDTHH:mm:ss"),angular.isArray(orderItems)&&0<orderItems.length&&userAlertSvc.show({title:"UserAlert_LeadTimeChangedNextDay_Title",message:"UserAlert_LeadTimeChangedNextDay, "+$rootScope.humanizeMinutes(currentLeadTime),actions:[userAlertSvc.commonActions.Dismiss]}),0<cart.order_items.length&&"Delivery"===cart.fulfillment_type_info.fulfillment_type&&cart.itemWithLeadTimeId&&cartSvc.removeItem(cart.itemWithLeadTimeId),$timeout(function(){return $state.go("orderSetup",{id:cart.restaurant.id}),null})):null}}};return leadTimeChangedEventHandler}]),angular.module("ONO-Services").service("menuErrorHandler",["httpErrorHandler","$stateParams","userAlertSvc","$state","translationSvc",function(httpErrorHandler,$stateParams,userAlertSvc,$state,translationSvc){var options={reload:!0,inherit:!0,notify:!0,location:!0},stateParams=$stateParams,errorMap={menu_restaurant_id:"restaurantSearch",menu_fulfillment_type:"orderSetup",menu_menu_type:"orderSetup",menu_fulfillment_date:"orderSetup",menu_menu:"orderSetup",menu_menu_item:{toState:"category"},menu_category:{toState:"category",stateParams:function(){return stateParams.categoryId=null,stateParams}},geolocation_city_state_failed:"restaurantSearch"};return function(response){if(400===response.status&&angular.isObject(response.data)&&angular.isDefined(response.data.ModelState))for(var key in errorMap)if(errorMap.hasOwnProperty(key)){var reason=response.data.ModelState[key];if(!reason)continue;var val=errorMap[key];if("string"==typeof val)$state.go(val);else{var params=val.hasOwnProperty("stateParams")?val.stateParams():stateParams;$state.go(val.toState,params,options)}userAlertSvc.show({message:"400_"+key+", "+translationSvc.translate(reason[0]),actions:[userAlertSvc.commonActions.Dismiss]});break}}}]).run(["httpErrorHandler","menuErrorHandler",function(httpErrorHandler,menuErrorHandler){httpErrorHandler.addErrorHandler(menuErrorHandler)}]),angular.module("ONO-Base-UI").service("onoNavList",[function(){var collection=[];return{addNav:function(list){for(var i=0;i<list.length;i++)collection.indexOf(list[i])||collection.push(list[i]);collection.sort(function(a,b){return a=a.weight||1,(b=b.weight||1)<a||void 0===a?1:a<b||void 0===b?-1:0})},removeNav:function(list){for(var i=0;i<list.length;i++)for(var n=0;n<collection.length;n++)list[i]===collection[n]&&collection.splice(n,1)},collection:collection}}]),angular.module("ONO-Base-UI").provider("onoAlert",function(){this.$get=["$compile","$controller","$q","$http","$sce","$templateCache","DialogPrototype",function($compile,$controller,$q,$http,$sce,$templateCache,DialogPrototype){var defaultTemplate=$sce.parseAsResourceUrl('"/web/app/dialog/dialogAlert.html"')(),parentSet=$q.defer(),parent={},list=[];function Alert(obj){var dialog=this,templateUrl=obj.dialogTemplateUrl?$sce.parseAsResourceUrl(obj.dialogTemplateUrl)():defaultTemplate,templatePromise=$http.get(templateUrl,{cache:$templateCache});this.ready=$q.all([templatePromise,parentSet.promise]).then(function(res){dialog.tmpl=res[0].data}),this.prototypeScope=obj}return Alert.prototype={constructor:Alert,parent:parent,setupScope:DialogPrototype.setupScope,show:function(){this.$scope.$emit("dialogClosed"),this.$scope.$emit("alertShown"),DialogPrototype.show.apply(this)},compile:DialogPrototype.compile},{show:function(settings){var alert=new Alert(settings);alert.ready.then(function(){list.push(alert),alert.setupScope(),alert.show()})},setParent:function(el,scope){el&&(parent.$element=el),scope&&(parent.$scope=scope),parentSet.resolve()},find:function(name){for(var i=0;i<list.length;i++)if(list[i].$scope&&list[i].$scope.name===name)return list[i];return{}},hide:function(name){for(var i=0;i<list.length;i++)if(list[i].$scope.name===name&&list[i].shown)return list[i].$scope.hide(),list[i].$scope.$emit("alertClosed"),void list.splice(list.indexOf(list[i]),1)},actions:{close:{name:"Close",action:function(scope){scope.hide()}}}}}]}),angular.module("ONO-Services").service("onoCookieSvc",["$cookies","$document",function($cookies,$document){return{setCookie:function(name,cookieValue,domain,expDays){var dt,expires;(dt=new Date).setTime(dt.getTime()+24*expDays*60*60*1e3),expires="; expires="+dt.toGMTString(),$document[0].cookie=name+"="+cookieValue+expires+"; domain="+domain},getCookie:function(name){return $cookies.get(name)}}}]),angular.module("ONO-Base-UI").provider("onoDialog",function(){var list=[],templates=[];this.create=function(object){list.push(object)},this.$get=["$compile","$controller","$q","$http","$sce","$templateCache","DialogPrototype",function($compile,$controller,$q,$http,$sce,$templateCache,DialogPrototype){var dialogTmplPromise=$http.get($sce.parseAsResourceUrl('"/web/app/dialog/dialog.html"')(),{cache:$templateCache}),parentSet=$q.defer(),parent={};function Dialog(obj){var tmplProm,dialog=this;obj.templateUrl&&(tmplProm=$http.get($sce.parseAsResourceUrl(obj.templateUrl)(),{cache:$templateCache}),templates.push(tmplProm)),this.ready=$q.all([tmplProm,dialogTmplPromise,parentSet.promise]).then(function(res){var parts=res[1].data.split(/={3,}/);dialog.tmpl=parts[0]+res[0].data+parts[1]}),angular.extend(this,obj)}templates.push(dialogTmplPromise),Dialog.prototype={constructor:Dialog,parent:parent,extend:DialogPrototype.extend,hide:DialogPrototype.hide,setupScope:DialogPrototype.setupScope,show:function(){var self=this;DialogPrototype.show.call(this,function(){self.$scope.$emit("dialogClosed"),self.$scope.$emit("dialogShown")})},compile:DialogPrototype.compile};for(var i=0;i<list.length;i++)list[i]=new Dialog(list[i]);return{find:function(name){for(var i=0;i<list.length;i++)if(list[i].name===name)return list[i];return{}},setParent:function(el,scope){el&&(parent.$element=el),scope&&(parent.$scope=scope),parentSet.resolve()}}}]}).service("DialogPrototype",["$controller","$compile","tagManagerSvc","title","translationSvc",function($controller,$compile,tagManagerSvc,title,translationSvc){var els=[];return{show:function(callback){var dialog=this;return this.ready.then(function(e){dialog.compile(),tagManagerSvc.onDialogOpen(dialog.$scope.title),dialog.$scope.parentTitle=title.getTitle(),dialog.$scope.title?title.updateTitle(translationSvc.translate(dialog.$scope.title)):title.updateTitle(translationSvc.translate("ADA_Page_Title_Home")),callback&&callback()}),this},setupScope:function(scope){var dialog=this;return this.$scope=angular.extend(scope||this.parent.$scope.$new(),this.prototypeScope,{hide:function(){dialog.$el.remove(),els.splice(els.indexOf(dialog.$el),1),dialog.shown=!1}}),dialog.$scope.$on("done",function(e){e&&(e.stopPropagation(),tagManagerSvc.onDialogClose(e),dialog.$scope.parentTitle&&title.updateTitle(dialog.$scope.parentTitle)),dialog.$scope.hide()}),dialog.$scope.$on("cancel",function(e){e&&e.stopPropagation(),dialog.$scope.hide()}),this},hide:function(){return this.$scope.hide(),this},extend:function(key,value){return key&&(this[key]=angular.extend(this[key]||{},value)),this},compile:function(){return this.$el=angular.element(this.tmpl),this.shown||(this.ctrl&&($controller(this.ctrl,angular.extend(this.dependencies||{},{$template:this.tmpl,$scope:this.$scope})),this.$el.data("$ngControllerController",this.ctrl),this.$el.children().data("$ngControllerController",this.ctrl)),this.parent.$element.append(this.$el),$compile(this.$el)(this.$scope),els.push(this.$el),this.shown=!0),this}}}]),angular.module("ONO-Base-UI").config(["$httpProvider",function($httpProvider){var $http,interceptor=["$q","$injector","onoLoading",function($q,$injector,onoLoading){return{request:function(config){return $http=$http||$injector.get("$http"),config.hideLoader?delete config.hideLoader:onoLoading.show(),config||$q.when(config)},requestError:function(rejection){return($http=$http||$injector.get("$http")).pendingRequests.length<1&&onoLoading.hide(),$q.reject(rejection)},response:function(response){return($http=$http||$injector.get("$http")).pendingRequests.length<1&&onoLoading.hide(),response||$q.when(response)},responseError:function(rejection){return($http=$http||$injector.get("$http")).pendingRequests.length<1&&onoLoading.hide(),$q.reject(rejection)}}}];$httpProvider.interceptors.push(interceptor)}]).value("onoSpinnerOptions",{}).factory("onoLoading",["onoHooks","$timeout","onoSpinnerOptions",function(onoHooks,$timeout,onoSpinnerOptions){var promise,spinner=new Spinner(angular.extend({lines:15,length:5,width:2,radius:15,corners:0,rotate:0,direction:1,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:1001},onoSpinnerOptions));return{show:function(){promise||(promise=$timeout(function(){var overlay=onoHooks("loadingOverlay");overlay&&(overlay.removeClass("ng-hide"),spinner.spin(overlay[0]))},500))},hide:function(){promise&&($timeout.cancel(promise),promise=null);var overlay=onoHooks("loadingOverlay");overlay&&(overlay.addClass("ng-hide"),spinner.stop())}}}]),angular.module("ONO-SiteMap",[]).provider("onoSiteMap",["$stateProvider",function($stateProvider){function StateMap(){this.values={mainLayout:{url:"",abstract:!0,templateUrl:"/web/app/layout/main.html",controller:"mainCtrl",resolve:{values:["valuesSvc",function(valuesSvc){return valuesSvc.getValues()}],translations:["translationSvc",function(translationSvc){return translationSvc.loadTranslations()}],favoriteLocations:["customerSvc",function(customerSvc){return customerSvc.getFavoriteRestaurants()}],recentLocations:["customerSvc",function(customerSvc){return customerSvc.getRecentRestaurants()}],cart:["cartSvc",function(cartSvc){return cartSvc.getCartDetails()}],firstName:["$rootScope","localStorageService","customerSvc",function($rootScope,localStorageService,customerSvc){if($rootScope.loggedIn)return customerSvc.customer?customerSvc.customer.first_name:null;var recentUserInfo=localStorageService.get("recentUserInfo");return recentUserInfo&&recentUserInfo.firstName?recentUserInfo.firstName:null}],ctrlSettings:function(){return{categoryItemClick:!1,prePaymentQuestion:!1,truncate:!1}}}},main:{parent:"mainLayout",abstract:!0,url:"",views:{"":{template:'<div ui-view autoscroll="false" />'},header:{templateUrl:"/web/app/_2.0/_components/header/header2View.html",controller:function($scope,$controller,$rootScope){$controller("header2Ctrl",{$scope:$scope})}},footer:{templateUrl:"web/app/layout/footer.html"},orderPath:{templateUrl:"web/app/layout/orderPath.html",controller:"orderPathCtrl"},drawer:{templateUrl:"/web/app/layout/drawer.html",controller:"drawerCtrl"}}},sidebarLayout:{parent:"main",abstract:!0,url:"",templateUrl:"web/app/layout/content.html",controller:"sidebarCtrl"},sidebar:{parent:"sidebarLayout",abstract:!0,url:"",views:{"":{template:'<div ui-view autoscroll="true" />'},checkoutButtonOnly:{templateUrl:"/web/app/cart/checkoutButtonOnly.html"},fulfillmentTime:{templateUrl:"/web/app/cart/fulfillmentTime.html",controller:"fulfillmentTimeCtrl"},fulfillmentLocation:{templateUrl:"/web/app/cart/fulfillmentLocation.html",controller:"fulfillmentLocationCtrl"},fulfillmentAddress:{templateUrl:"/web/app/cart/fulfillmentAddress.html",controller:"fulfillmentAddressCtrl"},orderDetails:{templateUrl:"/web/app/cart/cartItems.sidebar.html"},orderTotals:{templateUrl:"/web/app/cart/orderTotals.applyCoupon.html"},orderPathActions:{templateUrl:"/web/app/cart/orderPathActions.html"},dineRewardsReviewInput:{templateUrl:"/web/app/dineRewards/pod/dineRewardsPod.html",controller:"dineRewardsGlobalCtrl"},dineRewardsReview:{templateUrl:"/web/app/dineRewards/review/dineRewardsReview.html"},dineRewardsMobilePod:{templateUrl:"/web/app/dineRewards/pod/dineRewardsMobilePod.html",controller:"dineRewardsGlobalCtrl"}}},noSidebar:{parent:"main",abstract:!0,url:"",templateUrl:"web/app/layout/content.noSideBar.html"},homeLayout:{parent:"sidebar",abstract:!0,url:"",templateUrl:"/web/app/layout/home.split.html",controller:"homeCtrl"},home:{parent:"homeLayout",url:"/",title:"Home_Title",views:{login:{templateUrl:"/web/app/account/login.html"},accountLinks:{templateUrl:"/web/app/account/accountLinks.html"},desktopContent:{templateUrl:"/web/app/restaurant/restaurantSearch.html",controller:"restaurantSearchCtrl"}},data:{pageTitle:"ADA_Page_Title_Home"}},homeContent:{parent:"home",url:"",abstract:!0,views:{"@homeLayout":{template:'<div ui-view autoscroll="false" />'}}},register:{parent:"sidebar",url:"^/register?orderId",templateUrl:"/web/app/account/register.html",data:{pageTitle:"ADA_Page_Title_Register"}},forgotPassword:{parent:"sidebar",url:"^/forgotPassword",templateUrl:"/web/app/account/forgotPassword.html",data:{pageTitle:"ADA_Page_Title_Forgot_Password"}},resetPassword:{parent:"sidebar",url:"^/resetpassword/:key",templateUrl:"/web/app/account/resetPassword.html",controller:"resetPasswordCtrl"},restaurantSearch:{parent:"homeContent",title:"RestaurantSearch",url:"^/restaurantSearch",templateUrl:"/web/app/restaurant/restaurantSearch.html",controller:"restaurantSearchCtrl",data:{pageTitle:"ADA_Page_Title_Change_Location"}},restaurantsByZipCode:{parent:"restaurantSearch",title:"RestaurantSearch",url:"/byZip/:country/:zip_code/:search_distance",templateUrl:"/web/app/restaurant/restaurantSearchResults.html",controller:"restaurantSearchResultsCtrl",resolve:{searchResults:["$stateParams","restaurantSvc",function($stateParams,restaurantSvc){return restaurantSvc.searchByZip($stateParams.zip_code,$stateParams.country,$stateParams.search_distance)}]},data:{pageTitle:"ADA_Page_Choose_a_Location"}},restaurantsByCityState:{parent:"restaurantSearch",title:"RestaurantSearch",url:"/byCity/:country/:state/:city",templateUrl:"/web/app/restaurant/restaurantSearchResults.html",controller:"restaurantSearchResultsCtrl",resolve:{searchResults:["$stateParams","restaurantSvc",function($stateParams,restaurantSvc){return restaurantSvc.searchByCity($stateParams.city,$stateParams.state,$stateParams.country)}]}},restaurantsByLocation:{parent:"restaurantSearch",title:"RestaurantSearch",url:"/byLocation/:latitude/:longitude/:search_distance",templateUrl:"/web/app/restaurant/restaurantSearchResults.html",controller:"restaurantSearchResultsCtrl",resolve:{searchResults:["$stateParams","restaurantSvc",function($stateParams,restaurantSvc){return restaurantSvc.searchByLocation($stateParams.latitude,$stateParams.longitude,$stateParams.search_distance)}]}},restaurantsByCityStateGeolocation:{parent:"restaurantSearch",title:"RestaurantSearch",url:"/byCity/:country/:state/:city/:search_distance",templateUrl:"/web/app/restaurant/restaurantSearchResults.html",controller:"restaurantSearchResultsCtrl",resolve:{searchResults:["$stateParams","restaurantSvc",function($stateParams,restaurantSvc){return restaurantSvc.searchByCity($stateParams.city,$stateParams.state,$stateParams.country,!0,$stateParams.search_distance)}]}},account:{parent:"homeContent",abstract:!0,url:"^/account",template:'<div ui-view autoscroll="false" />',data:{visible:function($scope){return $scope.loggedIn},navigate:function($scope){return{redirect:!$scope.loggedIn,to:"home"}}}},orderHistory:{parent:"account",title:"RecentSavedOrders",url:"/orders",templateUrl:"/web/app/orderHistory/orderHistory.html",controller:"orderHistoryCtrl",data:{pageTitle:"ADA_Page_Title_Recent_Saved_Orders"}},invoice:{parent:"orderHistory",title:"OrderInvoice",url:"/invoice/:order_id",templateUrl:"/web/app/orderHistory/invoice.html",data:{visible:function(){return!1},pageTitle:"ADA_Page_Title_Order_Invoice"}},editAccount:{parent:"account",title:"AccountInfo",url:"/edit",templateUrl:"/web/app/customer/customer.edit.html",controller:"customerEditCtrl",resolve:{customer:["customerSvc",function(customerSvc){return customerSvc.getCustomer()}]},data:{pageTitle:"ADA_Page_Title_Account_Info"}},addresses:{parent:"account",title:"Addresses",url:"/addresses",templateUrl:"/web/app/address/address.list.html"},editAddress:{parent:"addresses",title:"Addresses",url:"/edit/:id",templateUrl:"/web/app/address/address.edit.html",controller:"addressEditCtrl",resolve:{address:["$stateParams","addressSvc",function($stateParams,addressSvc){return $stateParams.id?addressSvc.getAddress($stateParams.id):{}}]}},creditCards:{parent:"account",title:"CreditCards",url:"/creditCards",templateUrl:"/web/app/creditcard/credit_card.list.html",controller:"creditCardListCtrl",resolve:{creditCards:["creditCardSvc",function(creditCardSvc){return creditCardSvc.getCreditCards()}]},data:{pageTitle:"ADA_Page_Title_Saved_Credit_Cards"}},editCreditCards:{parent:"creditCards",title:"CreditCards",url:"/edit/:id",templateUrl:"/web/app/creditcard/credit_card.edit.html",controller:"creditCardEditCtrl",resolve:{addresses:["addressSvc",function(addressSvc){return addressSvc.getAddresses()}],creditCard:["$stateParams","creditCardSvc",function($stateParams,creditCardSvc){return $stateParams.id?(this.data.pageTitle="ADA_Page_Title_Edit_Credit_Card",creditCardSvc.getCreditCard($stateParams.id)):(this.data.pageTitle="ADA_Page_Title_Add_Credit_Card",{billing_address:null})}]},onExit:["aurusSessionTimer",function(aurusSessionTimer){aurusSessionTimer.stopTimer()}],data:{pageTitle:"ADA_Page_Title_Add_Credit_Card"}},editLoyalty:{parent:"loyalty",title:"Loyalty",url:"/edit/:id",templateUrl:"/web/app/loyalty/loyalty.edit.html",controller:"loyaltyCtrl",resolve:{address:["$stateParams","loyaltySvc",function($stateParams,loyaltySvc){return $stateParams.id?loyaltySvc.getLoyaltyCards($stateParams.id):{}}]}},houseAccounts:{parent:"account",title:"HouseAccounts",url:"/houseAccounts",templateUrl:"/web/app/houseAccount/house_accounts.html"},changePassword:{parent:"account",title:"ChangePassword",url:"/changePassword",templateUrl:"/web/app/account/changePassword.html",data:{pageTitle:"ADA_Page_Title_Change_Password"}},orderSetupLayout:{url:"/orderSetup/:id?(gotoState)",parent:"sidebar",abstract:!0,templateUrl:"/web/app/orderSetup/orderSetup.html",controller:"orderSetupCtrl",resolve:{dateOptions:function(){return{dateDisplayFormat:{en:"m/d/yy","fr-ca":"yy/m/d"},dateParseFormat:{en:"m/d/yy","fr-ca":"yy-m-d"}}},restaurant:["$stateParams","restaurantSvc","cartSvc","$document","$window","$state",function($stateParams,restaurantSvc,cartSvc,$document,$window,$state){return-1<$document[0].referrer.indexOf("outback.com")&&angular.isUndefined($window.sessionStorage.fulfillmentType)&&($window.sessionStorage.fulfillmentType="Curbside"),$stateParams.id?restaurantSvc.getRestaurant($stateParams.id).catch(function(){$state.go("pickup")}):cartSvc.getRestaurant()}],customer:["customerSvc",function(customerSvc){return customerSvc.getCustomer()}]}},orderSetup:{parent:"orderSetupLayout",url:"",params:{id:"",fulfillmentType:""},views:{osMenuType:{templateUrl:"/web/app/orderSetup/os.menuType.html"},osFulfillmentType:{templateUrl:"/web/app/orderSetup/os.fulfillmentType.html"},osDeliveryAddress:{templateUrl:"/web/app/orderSetup/os.deliveryAddress.html"},osFulfillmentDateType:{templateUrl:"/web/app/orderSetup/os.fulfillmentDateType.html"},osFulfillmentDate:{templateUrl:"/web/app/orderSetup/os.fulfillmentDate.html"},osLocationDisplay:{templateUrl:"/web/app/orderSetup/os.locationDisplay.html"},osPreviousSavedOrders:{templateUrl:"/web/app/orderSetup/os.previousSavedOrders.html"},osVehicleInfo:{templateUrl:"/web/app/orderSetup/os.vehicleInfo.html"}}},menuLayout:{parent:"sidebar",abstract:!0,url:"/menu/:restaurantId/:menuType/:fulfillmentType?fulfillmentDate",templateUrl:"/web/app/menu/menu.html",controller:"categoryListCtrl",resolve:{categoryList:["$stateParams","menuSvc",function($stateParams,menuSvc){return menuSvc.getCategoryList($stateParams.restaurantId,$stateParams.menuType,$stateParams.fulfillmentType,$stateParams.fulfillmentDate)}]}},menu:{parent:"menuLayout",url:"",views:{"":{template:'<div ui-view autoscroll="false" />'},categoryNav:{templateUrl:"/web/app/menu/categoryNav.html"},footnotes:{templateUrl:"/web/app/menu/footnotes.html"},"footnotes@menu":{templateUrl:"/web/app/menu/footnotes.html"}}},categoryAllMenuItems:{parent:"menu",url:"/all/:categoryId",templateUrl:"/web/app/menu/categoryViewAll.html",controller:"categoryCtrl",resolve:{category:["$state","$stateParams","menuSvc","categoryList",function($state,$stateParams,menuSvc,categoryList){return menuSvc.getCategoryFullMenu($stateParams.restaurantId,$stateParams.menuType,$stateParams.fulfillmentType,$stateParams.fulfillmentDate,categoryList)}],setPageTitleData:["categoryList",function(categoryList){var first=categoryList[0];this.data.pageTitleData=[first.title]}]},data:{pageTitle:"ADA_Page_Title_All_Menu_Categories",interpolated:!0}},categorySearchFilter:{parent:"menu",url:"/search/:query",templateUrl:"/web/app/menu/categorySearchFilter.html",controller:"categoryCtrl",resolve:{category:["$state","$stateParams","menuSvc","categoryList",function($state,$stateParams,menuSvc,categoryList){return menuSvc.getCategoryFullMenu($stateParams.restaurantId,$stateParams.menuType,$stateParams.fulfillmentType,$stateParams.fulfillmentDate,categoryList)}]}},category:{parent:"menu",url:"/category/:categoryId",templateUrl:"/web/app/menu/category.html",controller:"categoryCtrl",resolve:{category:["$state","$stateParams","menuSvc","categoryList",function($state,$stateParams,menuSvc,categoryList){var categoryId=$stateParams.categoryId;if(!categoryId||""==categoryId){var first=categoryList[0];0==first.subcategories.length?$stateParams.categoryId=first.id:$stateParams.categoryId=first.subcategories[0].id}return menuSvc.getCategory($stateParams.categoryId)}],setPageTitleData:["category","categoryList",function(category,categoryList){if(0<categoryList.length&&category){var first=categoryList[0];this.data.pageTitleData=[first.title,category.title]}}]},data:{pageTitle:"ADA_Page_Title_Menu_Category",interpolated:!0}},menuItem:{parent:"category",url:"/item/:menuItemId",templateUrl:"/web/app/menu/menuItem.html",controller:"menuItemCtrl",resolve:{menuItem:["$state","$stateParams","menuSvc",function($state,$stateParams,menuSvc){return menuSvc.getMenuItem($stateParams.menuItemId)}],setPageTitle:["menuItem",function(menuItem){menuItem&&(this.data.pageTitleData=[menuItem.title])}]},data:{pageTitle:"ADA_Page_Title_Menu_Item",interpolated:!0}},editOrderItem:{parent:"menu",url:"/editOrderItem/:orderItemId",templateUrl:"/web/app/menu/menuItem.html",controller:"menuItemCtrl",resolve:{menuItem:["$stateParams","cartSvc",function($stateParams,cartSvc){return cartSvc.getItem($stateParams.orderItemId)}]},data:{pageTitle:"ADA_Page_Title_Edit_Order_Item",interpolated:!1}},menuViaStoreNumber:{url:"/menu/:storeNumber",template:"<ui-view/>",controller:["$state","$stateParams","cartSvc",function($state,$stateParams,cartSvc){$stateParams.storeNumber?cartSvc.getRestaurant($stateParams.storeNumber).then(function(rest){var orderSetup=cartSvc.viewOrderSetup();$state.go("menu",{restaurantId:rest.id,menuType:orderSetup.menu_type,fulfillmentType:orderSetup.fulfillment_type})}):$state.go("orderSetup")}]},menuItemViaStoreNumber:{parent:"menuViaStoreNumber",url:"/:menuItemId",template:"<ui-view/>",controller:["$state","$stateParams","cartSvc",function($state,$stateParams,cartSvc){$stateParams.storeNumber?cartSvc.getRestaurant($stateParams.storeNumber).then(function(rest){var orderSetup=cartSvc.viewOrderSetup();$stateParams.menuItemId?$state.go("menuItem",{restaurantId:rest.id,menuType:orderSetup.menu_type,fulfillmentType:orderSetup.fulfillment_type,menuItemId:$stateParams.menuItemId}):$state.go("menu",{restaurantId:rest.id,menuType:orderSetup.menu_type,fulfillmentType:orderSetup.fulfillment_type})}):$state.go("home.order.setup")}]},previewMenu:{parent:"",url:"^/previewMenu",templateUrl:"/web/app/menu/previewMenu.html"},order:{parent:"noSidebar",abstract:!0,url:"/order",templateUrl:"/web/app/checkout/orderCheckout.html",controller:"orderCtrl",resolve:{cart:["cartSvc",function(cartSvc){return cartSvc.getCartDetails()}]}},orderEditAddress:{parent:"order",url:"/address/:id",templateUrl:"/web/app/address/address.edit.html"},confirmationLayout:{parent:"order",abstract:!0,url:"",templateUrl:"/web/app/confirmation/confirmation.html",controller:"orderConfirmationCtrl",resolve:{stateRedirect:function(){return"home"}}},confirmation:{parent:"confirmationLayout",url:"/confirmation",views:{cartItems:{templateUrl:"/web/app/cart/cartItems.html"},fulfillmentInfo:{templateUrl:"/web/app/confirmation/fulfillmentInfo.html"},orderTotals:{templateUrl:"/web/app/cart/orderTotals.html"},restaurantInfo:{templateUrl:"/web/app/cart/restaurantInfo.html"},deliveryInfo:{templateUrl:"/web/app/cart/deliveryInfo.html"}},data:{pageTitle:"ADA_Page_Title_Order_Confirmation"}},reviewLayout:{parent:"order",abstract:!0,url:"/review?abondonedCartId",templateUrl:"/web/app/cart/cartReview.html",controller:"cartReviewCtrl",resolve:{abandonedCart:["cartSvc","$stateParams","featureFlagSvc",function(cartSvc,$stateParams,featureFlagSvc){return $stateParams.abondonedCartId?featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","enableAbandonedCart"]).then(function(enabled){return enabled?cartSvc.loadCart($stateParams.abondonedCartId).then(function(cart){return cart}):null}):null}],endOfOrder:["menuSvc","cart","MenuItem",function(menuSvc,cart,MenuItem){return menuSvc.isInitialized()||menuSvc.initializeFromCart(cart),menuSvc.getEndOfOrder().then(function(endOfOrderItems){return Enumerable.From(endOfOrderItems).Select(function(item){return new MenuItem(item)}).ToArray()})}]},data:{pageTitle:"ADA_Page_Title_Review_Order"}},review:{parent:"reviewLayout",url:"",views:{fulfillmentInfo:{templateUrl:"/web/app/cart/fulfillmentInfo.html"},restaurantInfo:{templateUrl:"/web/app/cart/restaurantInfo.html"},deliveryInfo:{templateUrl:"/web/app/cart/deliveryInfo.html"},orderComments:{templateUrl:"/web/app/cart/orderComments.html"},cartItems:{templateUrl:"/web/app/cart/cartItems.html"},complimentaryItems:{templateUrl:"/web/app/cart/endOfOrderItems.complimentary.html"},endOfOrder:{templateUrl:"/web/app/cart/endOfOrderItems.priced.html"},discountEntry:{templateUrl:"/web/app/cart/discountEntry.html"},orderGeneralActions:{templateUrl:"/web/app/cart/orderGeneralActions.html"},orderTotals:{templateUrl:"/web/app/cart/orderTotals.html"},orderPayment:{templateUrl:"/web/app/cart/orderPayment.choose.html"},orderPaymentAreYouUsing:{templateUrl:"/web/app/cart/orderPayment.areYouUsing.html"},orderPaymentChoose:{templateUrl:"/web/app/cart/orderPayment.choose.html"},dineRewardsReview:{templateUrl:"/web/app/dineRewards/review/dineRewardsReview.html"},dineRewardsBucket:{templateUrl:"/web/app/dineRewards/bucket/dineRewardsBucket.html"}}},checkoutLayout:{parent:"order",url:"/checkout/:paymentLocation",abstract:!0,templateUrl:"/web/app/checkout/checkout.html",controller:"checkoutCtrl",resolve:{creditCards:["creditCardSvc",function(creditCardSvc){return creditCardSvc.getCreditCards()}]},data:{pageTitle:"ADA_Page_Title_Checkout"}},checkout:{parent:"checkoutLayout",url:"",views:{"":{templateUrl:"/web/app/checkout/payment.html"},fulfillmentInfo:{templateUrl:"/web/app/cart/fulfillmentInfo.html"},restaurantInfo:{templateUrl:"/web/app/cart/restaurantInfo.html"},deliveryInfo:{templateUrl:"/web/app/cart/deliveryInfo.html"},orderComments:{templateUrl:"/web/app/cart/orderComments.html"},orderGeneralActions:{templateUrl:"/web/app/cart/orderGeneralActions.html"},orderTotals:{templateUrl:"/web/app/cart/orderTotals.html"},contactInfo:{templateUrl:"/web/app/checkout/contactInfo.html"},dineRewardsBucket:{templateUrl:"/web/app/dineRewards/bucket/dineRewardsBucket.html"}}},creditCardLayout:{parent:"checkout",url:"/creditCard/:id",abstract:!0,templateUrl:"/web/app/checkout/payment.creditCard.html",controller:"paymentCreditCardCtrl",resolve:{addresses:["addressSvc",function(addressSvc){return addressSvc.getAddresses()}]},onExit:["aurusSessionTimer",function(aurusSessionTimer){aurusSessionTimer.stopTimer()}]},CreditCard:{parent:"creditCardLayout",url:"",views:{tip:{templateUrl:"/web/app/checkout/payment.tip.html"}}},Check:{parent:"checkout",url:"/check/:id",templateUrl:"/web/app/checkout/payment.check.html",controller:"paymentCheckCtrl"},giftCardLayout:{parent:"checkout",abstract:!0,url:"/giftCard/:id",templateUrl:"/web/app/checkout/payment.giftCard.html",controller:"paymentGiftCardCtrl"},GiftCard:{parent:"giftCardLayout",url:"",views:{tip:{templateUrl:"/web/app/checkout/payment.tip.html"}}},HouseAccount:{parent:"checkout",url:"/houseAccount/:id",templateUrl:"/web/app/checkout/payment.houseAccount.html",controller:"paymentHouseAccountCtrl"},Other:{parent:"checkout",url:"/other/:id",templateUrl:"/web/app/checkout/payment.other.html",controller:"paymentOtherCtrl"},POD:{parent:"checkout",url:"/pod/:id",templateUrl:"/web/app/checkout/payment.pod.html",controller:"paymentPODCtrl"},delivery:{parent:"homeLayout",title:"Nav_Delivery",url:"/delivery/:id?(gotoState)",templateUrl:"/web/app/_2.0/_components/delivery/delivery2View.html",controller:"delivery2Ctrl",resolve:{customer:["customerSvc",function(customerSvc){return customerSvc.getCustomer()}]},data:{pageTitle:"ADA_Page_Title_Delivery_Order"}},pickup:{parent:"homeLayout",title:"pickup",url:"/pickup?couponCode&orderId&restaurantId&customerId",templateUrl:"/web/app/_2.0/_components/pickup/pickup2View.html",controller:"pickup2Ctrl",resolve:{reorder:["featureFlagSvc","$stateParams","cartSvc","$rootScope","$window",function(featureFlagSvc,$stateParams,cartSvc,$rootScope,$window){return angular.isString($stateParams.orderId)&&angular.isString($stateParams.restaurantId)?featureFlagSvc.getFeatureFlags("status",["enableReorder"]).then(function(enabled){if(!enabled)return null;var reorderConfig={orderId:$stateParams.orderId,restaurantId:$stateParams.restaurantId,prompted:!1,forceSetUpComplete:!0};return $window.sessionStorage.setItem("reorderConfig",angular.toJson(reorderConfig)),angular.isString($stateParams.customerId)&&""!==$stateParams.customerId&&$rootScope.loggedIn?cartSvc.reorder($stateParams.orderId,$stateParams.restaurantId).then(function(cart){return cart}):null}):null}],offers:["$stateParams","sessionManager","featureFlagSvc",function($stateParams,sessionManager,featureFlagSvc){return featureFlagSvc.getFeatureFlags("status",["promotionURL"]).then(function(status){var canExecute=status&&!_.isEmpty($stateParams.couponCode);return canExecute&&sessionManager.firstTimePromoCode($stateParams.couponCode),canExecute})}]},data:{pageTitle:"ADA_Page_Title_PickUp_Order"}},pastOrders:{parent:"menuLayout",title:"RecentSavedOrders",url:"/pastorders",templateUrl:"/web/app/_2.0/_components/pastOrders/pastOrders2View.html",controller:"pastOrders2Ctrl",data:{pageTitle:"ADA_Page_Title_Past_Orders"}}},this.relationships={},this.parents={},this.setupRelationships(),this.buildParents()}StateMap.prototype={constructor:StateMap,buildParents:function(){for(var i in this.parents={},this.relationships)this.parents[this.relationships[i]]=(this.parents[this.relationships[i]]||[]).concat([this.values[i]])},setupRelationships:function(){for(var i in this.relationships={},this.values)this.values[i].parent?this.values.hasOwnProperty(this.values[i].parent)&&(this.relationships[i]=this.values[i].parent):this.relationships[i]=""},getPath:function(node){for(var path=[node],parent=this.relationships[node];parent;)path.splice(0,0,parent),parent=this.relationships[parent];return path},getUrl:function(ancestryList){for(var url="",i=0;i<ancestryList.length;i++)url+=this.values[ancestryList[i]]?this.values[ancestryList[i]].url:"";return url},move:function(child,parent){var previousParent;for(var i in this.parents)if(0<=this.parents[i].indexOf(child)){(previousParent=this.parents[i]).splice(previousParent.indexOf(child),1);break}this.relationships[child]=parent,this.parents[parent]=(this.parents[parent]||[]).concat([child])},getState:function(name){return angular.extend(this.values[name],{url:this.values[name].url,name:this.getPath(name).join(".")})},extendDeep:function extendDeep(dst){return angular.forEach(arguments,function(obj){obj!==dst&&angular.forEach(obj,function(value,key){dst[key]&&dst[key].constructor&&dst[key].constructor===Object?extendDeep(dst[key],value):dst[key]=value})}),dst}};var list=new StateMap;this.update=function(updates){var update;for(var i in updates)list.values[i]?list.extendDeep(list.values[i],updates[i]):((update={})[i]=updates[i],list.extendDeep(list.values,update));return list.setupRelationships(),list.buildParents(),this},this.remove=function(removeList){for(var i=0;i<removeList.length;i++)list.values.hasOwnProperty(removeList[i])&&delete list.values[removeList[i]];return list.setupRelationships(),list.buildParents(),this},this.setupRoutes=function(){for(var i in list.relationships)$stateProvider.state(i,list.getState(i));return list},this.$get=function(){return list}}]).filter("siteMap",["onoSiteMap",function(onoSiteMap){return function(name,attribute){return onoSiteMap.values[name][attribute]}}]),angular.module("ONO-Services").service("queryStringParserSvc",["$window",function($window){function parseParameters(){var queryString="";-1<$window.location.href.indexOf("?")&&(queryString=$window.location.href.split("?")[1]);var queries,temp,i,l,params={};for(i=0,l=(queries=queryString.split("&")).length;i<l;i++)params[(temp=queries[i].split("="))[0]]=temp[1];return params}return{parseParameter:function(name){var params=parseParameters();return params?params[name]:void 0},parseParameters:parseParameters}}]),angular.module("ONO-Services").factory("sessionManager",["localStorageService",function(localStorageService){"use strict";function getOrStore(key,object){return object?(localStorageService.set(key,object),object):localStorageService.get(key)}return{clear:function(){localStorageService.clearAll()},remove:function(key){localStorageService.remove(key)},order:function(order){var storedOrder=localStorageService.get("order");return angular.isObject(storedOrder)?angular.isObject(order)?(order.created_time=storedOrder.created_time,localStorageService.set("order",order),order):storedOrder:angular.isObject(order)?(order.created_time=moment(),localStorageService.set("order",order),order):null},user:function(user){!!user&&Boolean(user.access_token);return getOrStore("user",user)},dineRewardsAccount:function(data){return getOrStore("dineRewardsAccount",data)},customer:function(customer){return getOrStore("customer",customer)},cart:function(cart){return getOrStore("cart",cart)},systemTime:function(systemTime){return getOrStore("SystemTime",systemTime)},getOrdersSentForAnalytics:function(){return localStorageService.get("ordersSentForAnalytics")},addToOrdersSentForAnalytics:function(orderId){var orderIds=localStorageService.get("ordersSentForAnalytics");_.isArray(orderIds)?orderIds.push(orderId):orderIds=[orderId],localStorageService.set("ordersSentForAnalytics",orderIds)},firstTimePromoCode:function(firstTimePromoCode){return getOrStore("firstTimePromoCode",firstTimePromoCode)}}}]),angular.module("ONO-Services").factory("sessionTimer",["$interval","$timeout","$state","$rootScope","onoAlert","accountSvc","cartSvc","domainEventSvc","featureFlagSvc","$log","$window","sessionManager","localStorageService",function($interval,$timeout,$state,$rootScope,onoAlert,accountSvc,cartSvc,domainEventSvc,featureFlagSvc,$log,$window,sessionManager,localStorageService){"use strict";var timer,inactivity=0,inactivityLimit=$window.SessionTimeoutLimit,interval=1,warningThreshold=$window.SessionTimeoutWarning,timerInterval=60*interval*1e3,isTimedOut=!1;function sessionTimeout(){isTimedOut=!0,onoAlert.hide("sessionTimeout"),onoAlert.hide("sessionTimeoutWarning"),$rootScope.loggedIn?(domainEventSvc.raiseEvent("onSessionTimeout"),cartSvc.cancelOrder().then(function(){accountSvc.logout().then(function(){$timeout(function(){$interval.cancel(timer),timer=void 0,$rootScope.$broadcast("sessionTimedOut",{}),onoAlert.show({name:"sessionTimeout",title:"Alert_SessionTimeout_Title",message:"Alert_SessionTimeout_Message",actions:[{name:"Ok",action:function(scope){isTimedOut=!1,startTimer(),scope.hide()}}]}),featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")?$window.sessionStorage&&"Delivery"===$window.sessionStorage.getItem("fulfillmentType")?$state.go("delivery"):$state.go("pickup"):$state.go("restaurantSearch")},100)})})):domainEventSvc.raiseEvent("onCartExpired")}function timerTick(){if(!isTimedOut){if(inactivityLimit<=(inactivity+=interval))return $log.log("Session Timeout @ ["+inactivity+"] minutes of inactivity."),void sessionTimeout();if(warningThreshold<=inactivity)return $log.log("Warning @ ["+inactivity+"] minutes of inactivity."),void($rootScope.loggedIn&&(onoAlert.hide("sessionTimeoutWarning"),onoAlert.show({name:"sessionTimeoutWarning",title:"Alert_SessionTimeoutWarning_Title",message:"Alert_SessionTimeoutWarning_Message",actions:[{name:"Cancel",action:function(scope){localStorageService.set("sessionExpiresOn",moment().minutes(moment().minutes()+$window.SessionTimeoutLimit)),startTimer(),scope.hide()}}]})))}}function startTimer(){inactivity=0,angular.isUndefined(timer)&&(timer=$interval(timerTick,timerInterval))}return{onActivity:function(){startTimer()}}}]),angular.module("ONO-Services").service("tagManagerSvc",["$window","sessionManager",function($window,sessionManager){var tagManagerSvc={sendData:function(data){$window.dataLayer&&$window.dataLayer.push(data)},login:function(eventAction){$window.dataLayer&&tagManagerSvc.sendData({event:"User Login",eventAction:eventAction,eventLabel:""})},cookiedLogin:function(){$window.dataLayer&&tagManagerSvc.sendData({event:"User Login",eventAction:"Cookied",eventLabel:""})},loginErrors:function(errorString,category){var errors=errorString.replace(/[_]/g," ");$window.dataLayer&&tagManagerSvc.sendData({event:"User Login Errors",eventAction:category,eventLabel:errors})},logout:function(eventAction){$window.dataLayer&&tagManagerSvc.sendData({event:"User Logout",eventAction:$window.location.hash.split("/")[1],eventLabel:""})},registration:function(){$window.dataLayer&&tagManagerSvc.sendData({event:"User Registration",eventAction:"Registration Dialog"})},registrationErrors:function(errorString){var errors=errorString.replace(/[_]/g," ");$window.dataLayer&&tagManagerSvc.sendData({event:"User Registration Errors",eventLabel:errors})},onDialogOpen:function(e){title=e.replace(/[_]/g," "),$window.dataLayer&&tagManagerSvc.sendData({event:title+" Modal Displayed"})},onDialogClose:function(e){var errorData=angular.element(".dialog .form").error().data();if(errorData&&errorData.$formController){var isPristine=angular.element(".dialog .form").error().data().$formController.$pristine,errors=angular.element(".dialog .form").error().data().$formController.$error.required,errorNames=[],errorsFormated=null,errorString=null;for(var key in errors)errorNames.push(errors[key].$name);errorString=errorNames.join("|"),errorsFormated=isPristine?"No Interaction":errorString.replace(/[_]/g," ")}gtmTitle=e.currentScope.title.replace(/[_]/g," "),$window.dataLayer&&errorsFormated&&tagManagerSvc.sendData({event:gtmTitle+" Modal Closed",eventLabel:errorsFormated})},onMenuItemView:function(menuItem){$window.dataLayer&&tagManagerSvc.sendData({event:"productDetailView",ecommerce:{detail:{products:[{id:menuItem.id,name:menuItem.title,price:menuItem.pricing.current_price,category:menuItem.category_title}]}}})},onMenuItemAdd:function(menuItem){$window.dataLayer&&tagManagerSvc.sendData({event:"addToCart",ecommerce:{currencyCode:"USD",add:{products:[{id:menuItem.id,name:menuItem.title,price:menuItem.pricing.current_price,category:menuItem.category_title,quantity:menuItem.quantity}]}}})},onMenuItemRemove:function(orderItem){$window.dataLayer&&tagManagerSvc.sendData({event:"removeFromCart",ecommerce:{remove:{products:[{id:orderItem.menu_item_id,name:orderItem.title,price:orderItem.price,category:orderItem.category_title,quantity:orderItem.quantity}]}}})},onCartReview:function(checkoutInfo){if($window.dataLayer){var cartItems=new Array;checkoutInfo.cart.order_items.forEach(function(orderItem){cartItems.push({id:orderItem.menu_item_id,name:orderItem.title,price:orderItem.price,category:orderItem.category_title,quantity:orderItem.quantity})}),tagManagerSvc.sendData({event:"checkout",ecommerce:{checkout:{actionField:{step:1},products:cartItems}},eventLabel:checkoutInfo.source})}},onOrderPlaced:function(confirmation){if(_.isObject($window.dataLayer)&&(orderIds=sessionManager.getOrdersSentForAnalytics(),!_.isArray(orderIds)||-1===orderIds.indexOf(confirmation.order_id))){var orderItems=new Array;confirmation.order_details.order_items.forEach(function(orderItem){orderItems.push({id:orderItem.menu_item_id,name:orderItem.title,price:orderItem.price,category:orderItem.category_title,quantity:orderItem.quantity})});var coupons=new Array;confirmation.order_details.totals.discounts.forEach(function(discount){coupons.push(discount.coupon_code)});var loggedInStatus="Unlinked";confirmation.order_details.username&&(loggedInStatus="Linked"),tagManagerSvc.sendData({event:"orderConfirmation",ecommerce:{orderId:confirmation.order_id,purchase:{actionField:{sitecoreId:confirmation.order_id,id:confirmation.order_number,revenue:confirmation.order_details.totals.grand_total,tax:confirmation.order_details.totals.total_taxes,coupon:coupons},products:orderItems}},fulfilmentType:confirmation.fulfillment_type,loggedInStatus:loggedInStatus,dineRewardsStatus:confirmation.dineRewardsStatus}),sessionManager.addToOrdersSentForAnalytics(confirmation.order_id)}var orderIds}};return tagManagerSvc}]),angular.module("ONO-Services").service("tokenizationFeatureFlagsSvc",["$window","$rootScope","domainEventSvc",function($window,$rootScope,domainEventSvc){function isTokenizationPilotOn(){if(parseInt($window.sessionStorage.TokenizationPilotEnabledForUser))return!0;var queryStringParams=function(){var queryString="";-1<$window.location.href.indexOf("?")&&(queryString=$window.location.href.split("?")[1]);var queries,temp,i,l,params={};for(queries=queryString.split("&"),i=0,l=queries.length;i<l;i++)temp=queries[i].split("="),params[temp[0]]=temp[1];return params}();return!($rootScope.featureFlags.payment.restrictTokenizationPilotWithQueryParameter&&(!queryStringParams.pilotOn||"true"!==queryStringParams.pilotOn))&&($window.sessionStorage.TokenizationPilotEnabledForUser=1,!0)}return{setLocationBasedFlags:function(restaurant){angular.isDefined(restaurant.isSaveCardsEnabled)&&($window.sessionStorage.SaveCardEnabledForSelectedLocation=Number(restaurant.isSaveCardsEnabled)),angular.isDefined(restaurant.isPayWithSavedCardsEnabled)&&($window.sessionStorage.PayWithSavedCardsEnabledForSelectedLocation=Number(restaurant.isPayWithSavedCardsEnabled)),angular.isDefined(restaurant.isFraudPreventionEnabled)&&($window.sessionStorage.FraudPreventionEnabledForSelectedLocation=Number(restaurant.isFraudPreventionEnabled)),angular.isDefined(restaurant.isTokenizedOneTimePaymentEnabled)&&($window.sessionStorage.TokenizedOneTimePaymentEnabledForSelectedLocation=Number(restaurant.isTokenizedOneTimePaymentEnabled)),domainEventSvc.raiseEvent("onRestaurantChanged")},resetLocationBasedFlags:function(){angular.isDefined($window.sessionStorage.SaveCardEnabledForSelectedLocation)&&($window.sessionStorage.SaveCardEnabledForSelectedLocation=0),angular.isDefined($window.sessionStorage.PayWithSavedCardsEnabledForSelectedLocation)&&($window.sessionStorage.PayWithSavedCardsEnabledForSelectedLocation=0),angular.isDefined($window.sessionStorage.FraudPreventionEnabledForSelectedLocation)&&($window.sessionStorage.FraudPreventionEnabledForSelectedLocation=0),angular.isDefined($window.sessionStorage.TokenizedOneTimePaymentEnabledForSelectedLocation)&&($window.sessionStorage.TokenizedOneTimePaymentEnabledForSelectedLocation=0),angular.isDefined($window.sessionStorage.TokenizationPilotEnabledForUser)&&($window.sessionStorage.TokenizationPilotEnabledForUser=0)},savingCreditCardsEnabled:function(){var savingCreditCardsFlag=!1;try{isTokenizationPilotOn()&&$rootScope.featureFlags.payment.savingCreditCards&&$window.sessionStorage.SaveCardEnabledForSelectedLocation&&parseInt($window.sessionStorage.SaveCardEnabledForSelectedLocation)&&(savingCreditCardsFlag=!0)}finally{return savingCreditCardsFlag}},isOneTimeTokenizedPaymentsEnabled:function(){var isOneTimeTokenizedPaymentsFlag=!1;try{isTokenizationPilotOn()&&$rootScope.featureFlags.payment.tokenizedOneTimePayment&&$window.sessionStorage.TokenizedOneTimePaymentEnabledForSelectedLocation&&parseInt($window.sessionStorage.TokenizedOneTimePaymentEnabledForSelectedLocation)&&(isOneTimeTokenizedPaymentsFlag=!0)}finally{return isOneTimeTokenizedPaymentsFlag}},payWithTokenizedCardsEnabled:function(){var payWithTokenizedCardsFlag=!1;try{isTokenizationPilotOn()&&$rootScope.featureFlags.payment.payWithSavedCards&&$window.sessionStorage.PayWithSavedCardsEnabledForSelectedLocation&&parseInt($window.sessionStorage.PayWithSavedCardsEnabledForSelectedLocation)&&(payWithTokenizedCardsFlag=!0)}finally{return payWithTokenizedCardsFlag}}}}]),angular.module("ONO-Base-UI").service("userAlertSvc",["$state",function($state){var list=[];return{show:function(alert){alert.dismiss=function(){!function(alert){list.splice(list.indexOf(alert),1)}(alert)},list.push(alert)},commonActions:{Dismiss:{name:"Dismiss",action:function(alert){alert.dismiss()}},RedirectToReview:{name:"Dismiss",action:function(alert){alert.dismiss(),$state.go("review")}},RedirectToCheckout:{name:"Dismiss",action:function(alert){alert.dismiss(),$state.go("checkout")}}},list:list}}]),angular.module("ONO-Base-UI").filter("calorieCount",["$filter","translationSvc",function($filter,translationSvc){"use strict";var calorieCountLable=translationSvc.translate("Calorie_Count"),$textConcat=$filter("textConcat"),$money=$filter("money");return function(input){var itemPrice=input.price?$money(input.price):"",calorieCount=input.calorie_count?$textConcat("({0} {1})",input.calorie_count,calorieCountLable):"";return""===calorieCount?$textConcat("{0} {1}",input.title,itemPrice):$textConcat("{0} {1} {2}",input.title,itemPrice,calorieCount)}}]),angular.module("ONO-Base-UI").filter("textConcat",[function(){return function(input){var str,len=arguments.length;if(1<len){str=input;for(var index=1;index<len;index++){var pattern=new RegExp("\\{"+(index-1)+"\\}","gm");str=str.replace(pattern,arguments[index])}return str}return input}}]),angular.module("ONO-Services").service("gaSvc",["$q",function($q){return{getGAID:function(){var deferred=$q.defer();try{ga(function(tracker){var gaid,list;angular.isUndefined(tracker)&&(list=ga.getAll(),_.isEmpty(list)||(gaid=_.first(list).get("clientId"))),angular.isDefined(tracker)&&(gaid=tracker.get("clientId")),angular.isString(gaid)?deferred.resolve(gaid):deferred.resolve(null)})}catch(ex){deferred.resolve(null)}return deferred.promise}}}]),angular.module("ONO-Services").service("gdprEmailExtensionsSvc",["$http",function($http){var extensions;return{getGdprEmailExtensions:function(){return $http({method:"GET",url:"api/gdpr_email_extensions"}).then(function(response){return extensions||(extensions=_.map(response.data,function(item){return item.toLowerCase()})),extensions},function(error){throw error})}}}]),angular.module("ONO-Services").service("globalTelemetrySvc",["$window",function($window){return{trackException:function(errorObj){_.isObject(errorObj)&&$window.appInsights.trackException("Client Exception: "+angular.toJson(errorObj),errorObj)},trackEvent:function(eventObj){_.isObject(eventObj)&&$window.appInsights.trackEvent("Client Event: "+angular.toJson(eventObj))}}}]),angular.module("ONO-Services").service("profanitySvc",["$http","onoAlert",function($http,onoAlert){return{sanitize:function(name){return $http({method:"GET",url:"api/issan?name="+name}).then(function(response){return response.data.first},function(){var onoAlertClose={name:"Close",action:function(scope){$scope.$emit("done"),scope.hide(),$scope.$emit("dialogClosed")}};onoAlert.show({title:"Server_Exception_Title",message:"Server_Exception_Message",actions:[onoAlertClose]})})}}}]),angular.module("ONO-Services").service("pushEventHandler",["pushSvc",function(pushSvc){return{onCreateCart:function(id){var cartEventProperties={cartId:id};pushSvc.logCustomEvent("CartCreated",cartEventProperties),pushSvc.user.setCustomUserAttribute("cartId",id)},onOrderReview:function(orderReviewDetails){pushSvc.logCustomEvent("OrderReviewed",orderReviewDetails)},onPlaceOrder:function(orderDetails){pushSvc.logCustomEvent("OrderPlaced",orderDetails),pushSvc.user.setFirstName(orderDetails.firstName),pushSvc.user.setLastName(orderDetails.lastName),pushSvc.user.setEmail(orderDetails.email),pushSvc.user.setPhone(orderDetails.phone),pushSvc.user.setCustomUserAttribute("orderId",orderDetails.orderId),pushSvc.user.setCustomUserAttribute("orderNumber",orderDetails.orderNumber),pushSvc.user.setCustomUserAttribute("orderDateTime",orderDetails.orderDateTime),pushSvc.user.setCustomUserAttribute("orderSubTotal",orderDetails.orderSubTotal),pushSvc.user.setCustomUserAttribute("orderType",orderDetails.orderType),pushSvc.user.setCustomUserAttribute("paymentType",orderDetails.paymentType),pushSvc.user.setCustomUserAttribute("restaurantId",orderDetails.restaurantId),pushSvc.user.setCustomUserAttribute("restaurantName",orderDetails.restaurantName),pushSvc.user.setCustomUserAttribute("customerId",orderDetails.customerId),pushSvc.user.setCustomUserAttribute("phoneOLOorder",orderDetails.phone)},onConceptDetermined:function(conceptId){pushSvc.user.setCustomUserAttribute("concept",conceptId)},onLandedFromReferrerURL:function(isReferrer){pushSvc.user.setCustomUserAttribute("fromReferrerURL ",isReferrer)},onSignedIntoAccount:function(accountDetails){pushSvc.logCustomEvent("SignedIntoAccount",accountDetails),pushSvc.user.setCustomUserAttribute("oloAccountEmail",accountDetails.email),pushSvc.user.setCustomUserAttribute("oloAccountPhone",accountDetails.phone),pushSvc.user.setCustomUserAttribute("oloAccountFirstName",accountDetails.firstName),pushSvc.user.setCustomUserAttribute("oloAccountLastName",accountDetails.lastName)},onSignedIntoDRAccount:function(accountDetails){pushSvc.logCustomEvent("SignedIntoDRAccount",accountDetails),pushSvc.user.setCustomUserAttribute("drEmail",accountDetails.email),pushSvc.user.setCustomUserAttribute("drPhone",accountDetails.phone)},onDRAccountLinked:function(accountRewards){pushSvc.logCustomEvent("LinkedIntoDRAccount",accountRewards),pushSvc.user.setCustomUserAttribute("drPhone",accountRewards.phone),pushSvc.user.setCustomUserAttribute("drAvailableReward",accountRewards.availableReward),pushSvc.user.setCustomUserAttribute("drAvailableRewardExpires",accountRewards.availableRewardExpires),pushSvc.user.setCustomUserAttribute("drVisitCount",accountRewards.visitsUntilReward)},onCategoryClicked:function(categoryEventDetails){pushSvc.user.setCustomUserAttribute("categoryName",categoryEventDetails.categoryName),pushSvc.logCustomEvent("CategoryClicked",categoryEventDetails)},onMenuItemAdded:function(menuItemEventDetails){pushSvc.user.setCustomUserAttribute("categoryName",menuItemEventDetails.categoryName),pushSvc.user.setCustomUserAttribute("itemName",menuItemEventDetails.itemName),pushSvc.logCustomEvent("MenuItemAdded",menuItemEventDetails)},onSelectOLOLocation:function(locationEventDetails){pushSvc.user.setCustomUserAttribute("fulfillmentDateType",locationEventDetails.fulfillmentDateType),pushSvc.user.setCustomUserAttribute("unitId",locationEventDetails.unitId),pushSvc.logCustomEvent("SelectOLOLocation",locationEventDetails)}}}]),angular.module("ONO-Services").service("pushSvc",["$rootScope","$log","$window","$state","globalTelemetrySvc","featureFlagSvc","$timeout","$document","domainEventSvc",function($rootScope,$log,$window,$state,globalTelemetrySvc,featureFlagSvc,$timeout,$document,domainEventSvc){var shouldLog,$logNullo,$logEx=(shouldLog=featureFlagSvc.featureFlagExists($rootScope,"featureFlags","logging","logConsoleErrors")&&$rootScope.featureFlags.logging.logConsoleErrors,$logNullo=angular.extend({},$log,{error:angular.noop}),shouldLog?$log:$logNullo);function changeUser(){try{ga(function(tracker){if(angular.isDefined(tracker))$window.appboy.changeUser(tracker.get("clientId"));else{var list=ga.getAll();if(!(angular.isArray(list)&&0<list.length))throw"Google Analytics : Client ID Not Found!";$window.appboy.changeUser(list[0].get("clientId"))}})}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.user.changeUser"))}}function subscribeInAppPush(inAppMessages){var firstButton,message=_.first(inAppMessages);return _.isNull(message)?[]:(message instanceof $window.appboy.ab.InAppMessage&&"push-primer"===message.extras["msg-id"]&&(firstButton=_.first(message.buttons),_.isNull(firstButton)||firstButton.subscribeToClickedEvent(function(){$window.appboy.registerAppboyPushMessages()})),$window.appboy.display.showInAppMessage(message),_.rest(inAppMessages))}function configureNotifications(){try{featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","softPushNotification"]).then(function(status){if(!angular.isObject($window.appboy))throw"Web notification platform not found !";status?($window.appboy.subscribeToNewInAppMessages(subscribeInAppPush),$window.appboy.logCustomEvent("prime-for-push")):($window.appboy.registerAppboyPushMessages(),$window.appboy.automaticallyShowNewInAppMessages())})}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"showPushMessage"))}}function buildExceptionObject(error,method){return{"type ":"braze push exception","method ":method,"message ":error,"current state":$state.$current.name}}return $timeout(function(){featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","pushNotification"]).then(function(status){if(status){changeUser(),configureNotifications();var referrerValue=_.first($document).referrer.indexOf("outback.com");domainEventSvc.raiseEvent("onConceptDetermined",1),domainEventSvc.raiseEvent("onLandedFromReferrerURL",-1<referrerValue)}})},3e3,!1),angular.isObject($window.appboy)||$logEx.error("Appboy SDK Not Found !"),{logCustomEvent:function(eventName,eventProperties){try{featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","customEvent"]).then(function(status){if(!angular.isObject($window.appboy))throw"Web notification platform not found !";status&&$window.appboy.logCustomEvent(eventName,eventProperties)})}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.logCustomEvent"))}},user:{changeUser:changeUser,setFirstName:function(firstName){try{if(!angular.isObject($window.appboy))throw"Web notification platform not found !";$window.appboy.getUser().setFirstName(firstName)}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.user.setFirstName"))}},setLastName:function(lastName){try{if(!angular.isObject($window.appboy))throw"Web notification platform not found !";$window.appboy.getUser().setLastName(lastName)}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.user.setLastName"))}},setEmail:function(email){try{if(!angular.isObject($window.appboy))throw"Web notification platform not found !";$window.appboy.getUser().setEmail(email)}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.user.setEmail"))}},setPhone:function(phone){try{if(!angular.isObject($window.appboy))throw"Web notification platform not found !";$window.appboy.getUser().setPhone(phone)}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.user.setPhone"))}},addToCustomAttributeArray:function(attributeName,attributeValue){try{featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","customEvent"]).then(function(status){if(!angular.isObject($window.appboy))throw"Web notification platform not found !";status&&$window.appboy.getUser().addToCustomAttributeArray(attributeName,attributeValue)})}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.getUser.addToCustomAttributeArray"))}},setCustomUserAttribute:function(attributeName,attributeValue){try{featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","customEvent"]).then(function(status){if(!angular.isObject($window.appboy))throw"Web notification platform not found !";status&&$window.appboy.getUser().setCustomUserAttribute(attributeName,attributeValue)})}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.getUser.setCustomUserAttribute"))}},removeFromCustomAttributeArray:function(attributeName,attributeValue){try{featureFlagSvc.getFeatureFlags("status",["webNotificationPlatform","customEvent"]).then(function(status){if(!angular.isObject($window.appboy))throw"Web notification platform not found !";status&&$window.appboy.getUser().removeFromCustomAttributeArray(attributeName,attributeValue)})}catch(e){$logEx.error("Appboy SDK Error : "+e),globalTelemetrySvc.trackException(buildExceptionObject(e,"appboy.getUser.removeFromCustomAttributeArray"))}},configureNotifications:configureNotifications}}}]),angular.module("ONO-Services").service("shoppingBagSvc",["$rootScope","accountSvc","orderSetupSvc","valuesSvc","customerSvc","restaurantSvc","cartSvc","$state","$window",function($rootScope,accountSvc,orderSetupSvc,valuesSvc,customerSvc,restaurantSvc,cartSvc,$state,$window){var self=this;return self.getCustomerFavouriteLocations=function(){customerSvc.getFavoriteRestaurants().then(function(favoriteRestaurants){self.favoriteRestaurants=favoriteRestaurants})},self.getValues=function(){valuesSvc.getValues().then(function(values){self.values=values})},self.getCustomer=function(){customerSvc.getCustomer().then(function(customer){self.customer=customer})},$rootScope.$watch(function(){return $rootScope.loggedIn},function(newValue){newValue&&(self.getCustomerFavouriteLocations(),self.getCustomer(),self.getValues(),self.getCustomer())}),self.shoppingBagSvc={goToMenu:function(menuParams){$state.go("category",menuParams)},asapOrder:function(){accountSvc.getAccount().then(function(account){var restaurantId=account&&account.previous_Outback_Restaurants&&0<account.previous_Outback_Restaurants.length?account.previous_Outback_Restaurants[0]:null;restaurantId&&restaurantSvc.getRestaurant(restaurantId).then(function(restaurant){$window.sessionStorage.curbsideRestaurant=angular.toJson(restaurant),orderSetupSvc.initialize(restaurant,self.favoriteRestaurants,self.values).then(function(setup){self.restaurant=restaurant,self.cartPayload={restaurant_id:restaurant.id,menu_type:"ToGo",fulfillment_type:"Curbside",fulfillment_date:null,loyalty_card_number:null,latestFulfillmentTime:restaurant.getLatestASAPTime("ToGo","Curbside"),fulfillment_details:{first_name:account.first_name,last_name:account.last_name,email:account.email,phone:account.phone,delivery_address:null}},cartSvc.startOrder(self.cartPayload).then(function(cart){var menuParams={fulfillmentType:cart.fulfillment_type,menuType:cart.menu_type,restaurantId:cart.restaurant_id,fulfillmentDate:null};$state.go("category",menuParams)})})})})}},self.shoppingBagSvc}]),angular.module("ONO-Base-UI").directive("menuSearch",[function(){return{restrict:"E",templateUrl:"/web/app/_components/menuSearch/menuSearch.html",controllerAs:"ctrl",controller:["$scope","$window","$state","$timeout","$log","featureFlagSvc",function($scope,$window,$state,$timeout,$log,featureFlagSvc){var timeout;$ctrl=this,featureFlagSvc.getFeatureFlags("status",["menu","enableSearchMenu"]).then(function(data){$ctrl.searchMenuEnabled=data});var scp=this;this.searchText=$state.params.query;var currentState=function(){return $state.current.url.split("/")[1]};this.onChange=function(){timeout&&$timeout.cancel(timeout),timeout=$timeout(function(){scp.searchText?($log.error("Filter: ",scp.searchText," State: ",currentState()),$state.go("categorySearchFilter",{query:scp.searchText},{notify:"search"!==currentState()})):$log.error("go back"),timeout=null},500)}}]}}]),angular.module("ONO-Base-UI").directive("dineRewardsModal",["$document","$timeout",function($document,$timeout){return{restrict:"E",transclude:!0,templateUrl:"/web/app/_directives/dineRewardsModal/dineRewardsModal.html",link:function(scope,element){var disabledHandle,focusedElementBeforeDialogOpened;scope.$on("dialogShown",function(){focusedElementBeforeDialogOpened=$document[0].activeElement,$timeout(function(){var tabbable,firstFocusable,firstInput,lastInput;disabledHandle=ally.maintain.disabled({filter:".dineRewardsModalContainer, .dialogAlertContainer"}),tabbable=$(":tabbable",$(element)),firstFocusable=$(":tabbable",$(element).find("form")).first(),firstInput=tabbable.first(),lastInput=tabbable.last(),firstFocusable.focus(),lastInput.on("keydown",function(e){9!=e.which||e.shiftKey||(e.preventDefault(),firstInput.focus())}),firstInput.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),lastInput.focus())})},300)}),scope.$on("dialogClosed",function(){disabledHandle&&disabledHandle.disengage(),focusedElementBeforeDialogOpened&&(focusedElementBeforeDialogOpened.focus(),focusedElementBeforeDialogOpened=null)})}}}]),angular.module("ONO-Base-UI").directive("onoFormErrors",["$animate",function($animate){return{restrict:"A",templateUrl:"/web/app/_directives/validate/formErrors.html",require:"^form",transclude:"element",replace:!0,link:function($scope,$element,$attrs,ctrl,$transclude){var childScope,block;$scope.$watch(function(){return ctrl.$submitted&&ctrl.$invalid},function(val){val?childScope||(childScope=$scope.$new(),$transclude(childScope,function(clone){})):(childScope&&(childScope.$destroy(),childScope=null),block&&($animate.leave(function(block){if(block.startNode===block.endNode)return angular.element(block.startNode);var element=block.startNode,elements=[element];do{if(!(element=element.nextSibling))break;elements.push(element)}while(element!==block.endNode);return angular.element(elements)}(block.clone)),block=null))})}}}]),angular.module("ONO-Base-UI").directive("onoErrors",function(){return{restrict:"A",templateUrl:"/web/app/_directives/validate/errors.html",scope:!0,require:"^form",link:function($scope,el,$attrs,ctrl){var $inputContainer=el.closest(".inputContainer");$scope.$watch(function(){return ctrl.$submitted},function(submitted){$scope.$submitted=submitted,$inputContainer.addClass("errorInputContainer")}),$scope.$on("$destroy",function(){$inputContainer.removeClass("errorInputContainer")})},controller:["$scope","$attrs",function($scope,$attrs){$scope.$watch($attrs.onoErrors,function(val){$scope.errors=val})}]}}),angular.module("ONO-Base-UI").service("errorMessages",["$rootScope",function($rootScope){var messagesScope=$rootScope.$new(!0);return angular.extend(messagesScope,{}),messagesScope.find=function(key){return this[key]&&angular.isFunction(this[key])?this[key](this.name,this.value,this.attr,this.model,this.attrs):this[key]||key},messagesScope}]),function(app){"use strict";function factory(element){return["$timeout","$parse","errorMessages","$location","$anchorScroll","$window","domainEventSvc",function($timeout,$parse,errorMessages,$location,$anchorScroll,$window,domainEventSvc){function setupServerError(propertyName,err,$scope,formName,modelName){var form=$scope.$eval(formName),input=$scope.$eval(propertyName,form),trimRE=/\.[a-z0-9_\[\]]{1,}$/;if(!input)$("form").each(function(){var childFormName=$(this).attr("name");if(input=$scope.$eval(propertyName,form[childFormName]))return modelName=$('input[name="'+input.$name+'"]').attr("ng-model").replace("."+input.$name,""),!1});input?function($scope,input,err,modelName){var errorKey=err[0].split(",")[0];input.$setValidity(errorKey,!1),$timeout(function(){var unwatch=$scope.$watch(modelName+"."+input.$name,function(newValue,oldValue){newValue!==oldValue&&(input.$setValidity(errorKey,!0),unwatch())},!0)},0)}($scope,input,err,modelName):trimRE.test(propertyName)?setupServerError(propertyName.replace(trimRE,""),err,$scope,formName,modelName):function($scope,form,err){form.$formErrors.push(err[0])}(0,form,err)}function handleBadRequest($scope,response,formName,modelName){if(!function(response){var data=angular.fromJson(response.data);return angular.isDefined(data.ModelState)&&angular.isDefined(data.ModelState.fulfillment_date)}(response)&&400===response.status){var propertyError,error=angular.fromJson(response.data),modelState=error.ModelState||(error.id&&error.id.ModelState?error.id.ModelState:null);if(modelState)for(propertyError in modelState)modelState.hasOwnProperty(propertyError)&&setupServerError(propertyError,modelState[propertyError],$scope,formName,modelName);else setupServerError(null,[error.error],$scope,formName,modelName)}}return{restrict:element?"E":"A",require:"form",compile:function(){return{pre:function($scope,$element,$attrs,formCtrl){var parentCtrl=$element.parent().controller("form");parentCtrl&&$scope.$watch(function(){return parentCtrl.$submitted},function(submitted){submitted&&(formCtrl.$submitted=submitted)}),formCtrl.$messages=errorMessages.$new(),formCtrl.$formErrors=[],formCtrl.$handle=handleBadRequest,formCtrl.$submitted=!1,formCtrl.$submitting=!1,$scope.$messages=formCtrl.$messages,$scope.$formErrors=formCtrl.$formErrors},post:function($scope,$element,$attrs,formCtrl){$scope.$watch(function(){return formCtrl.$submitted},function(submitted){$scope.$submitted=submitted}),$scope.$watch(function(){return formCtrl.$invalid},function(invalid){$scope.$invalid=invalid}),$element.on("keyup",function(e){13!==e.keyCode||"textarea"===e.target.type||$(e.target).is("a")||"button"===e.target.type||"submit"===e.target.type||$(e.target).is(".addToCalenderSearchField")||$(e.target).is(".hasDatepicker")||(e.stopPropagation(),formCtrl.$submit())}),formCtrl.$validate||(formCtrl.$validate=function(){var ignore=["$error"];for(var i in formCtrl)try{ignore.indexOf(i)<0&&formCtrl.hasOwnProperty(i)&&formCtrl[i].$validators&&formCtrl[i].$validate()}catch(err){}for(var i in formCtrl.$validators){var valid=formCtrl.$validators[i]();!0===valid?formCtrl.$setValidity(i,valid,formCtrl):(formCtrl.$setValidity(i,!1,formCtrl),formCtrl.$messages[i]=valid)}return formCtrl}),formCtrl.$submit=function(){if(!formCtrl.$submitting){var promise;formCtrl.$submitting=!0,$scope.$broadcast("form:submitting");for(var ctrlSubmit=$scope.$eval(formCtrl.$name+"Submit"),i=0;i<formCtrl.$formErrors.length;i++)formCtrl.$setValidity(formCtrl.$formErrors[i],!0);return formCtrl.$formErrors.splice(0,formCtrl.$formErrors.length),formCtrl.$validate(),formCtrl.$valid?(ctrlSubmit?(promise=ctrlSubmit())&&promise.then(function(){$scope.$emit("form:submitted",{formName:formCtrl.$name})}):promise=$scope.$eval($attrs.ngSubmit),promise?promise.catch(function(res){var modelName=$attrs.ngModel||formCtrl.$name.replace("Form","");res.data&&formCtrl.$handle($scope,res,formCtrl.$name,modelName),$scope.$emit("form:rejected",{formName:formCtrl.$name}),$timeout(function(){formCtrl.scrollToTopError()}),formCtrl.$submitted=!0}).then(function(){formCtrl.$submitted=!1}).finally(function(){formCtrl.$submitting=!1}):formCtrl.$submitting=!1):(!function(form){var validationErrors=new Array;for(var errorType in form.$error)for(var x in form.$error[errorType])validationErrors.push({message:errorType,fieldName:form.$error[errorType][x].$name,form:form.$name});domainEventSvc.raiseEvent("onValidationErrors",validationErrors)}(formCtrl),formCtrl.$submitted=!0,formCtrl.$submitting=!1,$scope.$$phase||$scope.$apply(),$timeout(function(){formCtrl.scrollToTopError()})),promise||void 0}},$element.on("submit",formCtrl.$submit),$scope.$on("submit",formCtrl.$submit),formCtrl.scrollToTopError=function(){var $highestError,highestOffset,offset;if($element.find(".error").each(function(i,el){if(!$highestError)return $highestError=$(el),void(highestOffset=$highestError.offset());var $error=$(el),errorOffset=$error.offset();errorOffset.top<highestOffset.top&&errorOffset.left<highestOffset.left&&($highestError=$error,highestOffset=errorOffset)}),$highestError){offset=$highestError.parents("[ng-form], form").first().offset(),$window.scrollTo(0,offset.top-20);var focusElem=$highestError.parent().prev("span").children(":focusable");if(focusElem.length<=0){var errorContainerId=$highestError.attr("id")||$highestError.parent().attr("id");focusElem=$highestError.closest(".contentContainer").find("[aria-describedby="+errorContainerId+"]").first()}focusElem.focus()}}}}}}}]}angular.module("ONO-Base-UI").directive("form",factory(!0)).directive("ngForm",factory())}(),function(){var inputDirective=["$compile","errorMessages","$timeout","translationSvc","$log",function($compile,errorMessages,$timeout,translationSvc,$log){return{restrict:"E",require:["?ngModel","?^form"],link:function(scope,element,attrs,ctrls){var el,formCtrl=ctrls[1],modelCtrl=ctrls[0],errorScope=(angular.isString(attrs.ngModel)&&attrs.ngModel.split(".")[0],scope.$new());if(!formCtrl||-1===["complimentaryForm"].indexOf(formCtrl.$name))if("radio"===attrs.type){if(!attrs.radioGroupName||!attrs.required)return;setValidators();var groupName=attrs.radioGroupName.replace(/\s/g,"");formCtrl&&(attrs.name?(scope.$watch(function(){return formCtrl.$submitted},function(submitted){errorScope.$submitted=submitted}),$timeout(function(){scope.$watch('["'+formCtrl.$name+'"]["'+attrs.name+'"].$error',function(val){if(val=getErrors()){var radioGroup=element.closest("[data-radio-group]");if(!radioGroup.attr("errorsAttached")){var errorContainer=element.closest(".contentContainer").find(".formErrorContainer"),el=angular.element("<span class='errorContainer error' ng-if='$invalid && $submitted'  id='error_group_"+groupName+"'>  {{'Error : "+groupName+" ' + ('SelectionRequired' | translate)}} </span>");errorContainer.append(el),radioGroup.attr("errorsAttached",!0),errorScope.modelErrors=val,$compile(el)(errorScope)}}})})):$log.error("no name attribute found on input.")),modelCtrl&&formCtrl&&scope.$watch(function(){return modelCtrl.$invalid&&formCtrl.$submitted},function(val){if(val){var groupName=attrs.radioGroupName.replace(/\s/g,"");element.attr("aria-describedby","error_group_"+groupName)}else element.removeAttr("aria-describedby")}),errorScope.$on("$destroy",function(){element.closest(".contentContainer").find(".formErrorContainer").html("")})}else setValidators(),formCtrl&&(errorScope.$messages=formCtrl.$messages.$new(),errorScope.$messages.required="ADA_Required",errorScope.$messages.email="ADA_Email_Required",element[0]&&"email"===element[0].type&&(errorScope.$messages.pattern="ADA_Email_Required"),attrs.name?(scope.$watch(function(){return formCtrl.$submitted},function(submitted){errorScope.$submitted=submitted}),$timeout(function(){errorScope.$messages.minlength=translationSvc.translate("ADA_Min_Length",getErrorLabel(),element.attr("minlength")),scope.$watch('["'+formCtrl.$name+'"]["'+attrs.name+'"].$error',function(val){(val=getErrors())&&(element.attr("errorsAttached")||(el=angular.element('<span class="errorContainer inlineErrorContainer" ng-if="$invalid && $submitted" ono-errors="modelErrors" id="error_'+element.attr("id")+'"></span>'),element.closest(".inputContainer").append(el)),element.attr("errorsAttached",!0),errorScope.modelErrors=val,$compile(el)(errorScope))})})):$log.error("no name attribute found on input.")),modelCtrl&&formCtrl&&scope.$watch(function(){return modelCtrl.$invalid&&formCtrl.$submitted},function(val){val?element.attr("aria-describedby","error_"+element.attr("id")):element.removeAttr("aria-describedby")});function setValidators(){modelCtrl&&(modelCtrl.$validators||(modelCtrl.$validators={}),modelCtrl.$validate||(modelCtrl.$validate=function(){for(var i in modelCtrl.$validators){var valid=modelCtrl.$validators[i](model);!0===valid?modelCtrl.$setValidity(i,valid,formCtrl):(modelCtrl.$setValidity(i,!1,formCtrl),modelCtrl.$messages[i]=valid)}}),scope.$watch(function(){return modelCtrl.$invalid},function(val){errorScope.$invalid=val}))}function getErrorLabel(){var labelControl=$(element).parent().prev(),labelText=labelControl.attr("main-content")?labelControl.attr("main-content"):labelControl.text();return labelText=labelText.replace(translationSvc.translate("ADA_Required_Label"),""),$(element).is("select")?attrs.fieldLabel:labelText}function getErrors(){if(formCtrl.$name&&attrs.name&&scope[formCtrl.$name]&&scope[formCtrl.$name][attrs.name])return{error:scope[formCtrl.$name][attrs.name].$error,errorField:getErrorLabel()}}}}}];app.directive("input",inputDirective).directive("select",inputDirective).directive("textarea",inputDirective)}(angular.module("ONO-Base-UI")),function(){"use strict";app.directive("passwordRequirements",function(){return{restrict:"A",require:"ngModel",link:function($scope,el,attrs,ctrl){var minLength=parseInt(attrs.minlength),maxLength=parseInt(attrs.maxlength);ctrl.$parsers.unshift(function(value){if(isNaN(minLength)||isNaN(maxLength))throw new Error("Either minlength or maxlength is not assigned to a number.");var valid=!0;return value&&(valid=value.length>=minLength&&value.length<=maxLength),ctrl.$setValidity("Password_Reqs",valid),value})}}})}(),angular.module("ONO-Base-UI").directive("previewMenu",["title","$sce","$window","queryStringParserSvc",function(title,$sce,$window,queryStringParserSvc){return{restrict:"A",link:function(scope,element,attrs){var params=queryStringParserSvc.parseParameters();params&&(scope.src=$sce.trustAsResourceUrl(decodeURIComponent(params.src)),title.updateTitle(decodeURIComponent(params.title)))}}}]),angular.module("ONO-Base-UI").directive("addressAutoComplete2",["featureFlagSvc","$filter",function(featureFlagSvc,$filter){return{replace:!0,scope:{disableSave:"=",showCancel:"=",values:"=",address:"=",save:"&onSave",cancel:"&onCancel"},template:'<ng-include src="templateUrl"/>',controller:["$scope",function($scope){$scope.$parent.$watch("address.placeChanged",function(newValue){newValue&&($scope.$parent.$formErrors=[])}),$scope.handleClick=function(){angular.isUndefined($scope.$parent.address.full_address)||!$scope.$parent.address.placeChanged?angular.isUndefined(_.find($scope.$parent.$formErrors,function(error){return error===$filter("translate")("error_invalid_address_provided")}))&&-1===$scope.$parent.$formErrors.indexOf("error_invalid_address_provided")&&$scope.$parent.$formErrors.push("error_invalid_address_provided"):$scope.save()}}],link:function(scope){var autoCompleteTemplateUrl="web/app/_2.0/_directives/addressAutoComplete/addressAutoComplete2View.html";function initialize(event,src){if(src===autoCompleteTemplateUrl){var autocomplete=new google.maps.places.Autocomplete($("#address_auto_complete")[0],{types:["geocode"],componentRestrictions:{country:"us"}});autocomplete.addListener("place_changed",function(){scope.$apply(function(){var components=autocomplete.getPlace().address_components;var formattedComponents=_.indexBy(components,function(item){return item.types[0]});scope.address.full_address=(formattedComponents.street_number?formattedComponents.street_number.short_name+" ":"")+(formattedComponents.route?formattedComponents.route.short_name+", ":"")+(formattedComponents.locality?formattedComponents.locality.short_name+", ":"")+(formattedComponents.administrative_area_level_1?formattedComponents.administrative_area_level_1.short_name+", ":"")+(formattedComponents.postal_code?formattedComponents.postal_code.short_name:""),scope.address.address1=(formattedComponents.street_number?formattedComponents.street_number.short_name+" ":"")+(formattedComponents.route?formattedComponents.route.short_name:""),scope.address.city=formattedComponents.locality?formattedComponents.locality.short_name:"",scope.address.state=formattedComponents.administrative_area_level_1?formattedComponents.administrative_area_level_1.short_name:"",scope.address.zip_code=formattedComponents.postal_code?formattedComponents.postal_code.short_name:"",scope.address.placeChanged=!0,(angular.isUndefined(formattedComponents.locality)||""===formattedComponents.locality)&&(angular.isDefined(formattedComponents.administrative_area_level_1)&&angular.isDefined(formattedComponents.administrative_area_level_3)&&angular.isString(formattedComponents.administrative_area_level_3.long_name)&&(scope.address.city=formattedComponents.administrative_area_level_3.long_name),scope.address.city.length<1&&angular.isDefined(formattedComponents.sublocality_level_1)&&angular.isString(formattedComponents.sublocality_level_1.long_name)&&(scope.address.city=formattedComponents.sublocality_level_1.long_name))})}),scope.address&&scope.address.address1&&(scope.address.full_address=scope.address.address1+", "+scope.address.city+", "+scope.address.state+", "+scope.address.zip_code)}}scope.templateUrl="web/app/_2.0/_directives/addressAutoComplete/multiLineAddressView.html",featureFlagSvc.getFeatureFlags("status",["addressAutoComplete"]).then(function(addressAutoComplete){addressAutoComplete&&(scope.templateUrl=autoCompleteTemplateUrl,scope.$on("$includeContentLoaded",initialize))})}}}]),angular.module("ONO-Base-UI").directive("deliveryAddressList",["$document","accountSvc","$rootScope","restaurantSvc","$window","addressSvc","$filter","$state","tokenizationFeatureFlagsSvc",function($document,accountSvc,$rootScope,restaurantSvc,$window,addressSvc,$filter,$state,tokenizationFeatureFlagsSvc){return{restrict:"A",templateUrl:"web/app/_2.0/_directives/deliveryAddressList/deliveryAddressListView.html",link:function(scope,element,attrs){function goToOrderSetup(restaurantId,fulfillmentType){$state.go("orderSetup",{id:restaurantId,fulfillmentType:fulfillmentType})}scope.deliveryAddresses=[],scope.selectedAddress="",scope.displaySavedAddresses=!1,scope.obsConceptCode="1",scope.upsellRestaurant=null,scope.initialize=function(){$rootScope.loggedIn&&accountSvc.getAccount().then(function(account){var addressFilteredByConceptCode=_.filter(account.delivery_address,function(address){return address.conceptId===scope.obsConceptCode});angular.forEach(addressFilteredByConceptCode,function(value,key){scope.displaySavedAddresses=!0;var concatenatedAddress=function(address){if(address){return address.address1+", "+(address.address2?address.address2+", ":"")+address.city+", "+address.state+", "+address.zip_code}return""}(value),addressObj=angular.copy(value);addressObj.displayValue=concatenatedAddress,scope.deliveryAddresses.push(addressObj)}),scope.deliveryAddresses=_.uniq(scope.deliveryAddresses,"displayValue")})},scope.initialize(),scope.useDeliveryAddress=function(addressId){if(addressId){var tempAddress=angular.copy(scope.deliveryAddresses);scope.selectedAddress=_.filter(tempAddress,{id:addressId})[0]}scope.selectedAddress&&(delete scope.selectedAddress.displayValue,restaurantSvc.getDeliveryRestaurant(scope.selectedAddress).then(function(rest){rest.isWithinTradeArea?(tokenizationFeatureFlagsSvc.setLocationBasedFlags(rest),addressSvc.upsertDeliveryAddress(scope.selectedAddress).then(function(){var addressObj,sessionAddress,sessionFields;$rootScope.addressIsGeocoded=!0,$window.sessionStorage.currentDeliveryAddress=angular.toJson((addressObj=scope.selectedAddress,sessionAddress={},sessionFields=["address1","address2","city","country","state","zip_code"],_.each(addressObj,function(value,key){_.includes(sessionFields,key)&&(sessionAddress[key]=value)}),sessionAddress)),goToOrderSetup(rest.id,"Delivery")}),scope.savedAddressListForm&&scope.savedAddressListForm.$formErrors.splice(0,scope.savedAddressListForm.$formErrors.length)):(scope.upsellRestaurant=rest,scope.showDialog("delivery.upsell"))}).catch(function(res){for(var key in $rootScope.addressIsGeocoded=!1,res.data.ModelState)-1===scope.savedAddressListForm.$formErrors.indexOf(res.data.ModelState[key][0])&&scope.savedAddressListForm.$formErrors.push(res.data.ModelState[key][0])}))},scope.upsell=function(){_.isObject(scope.upsellRestaurant)&&(tokenizationFeatureFlagsSvc.setLocationBasedFlags(scope.upsellRestaurant),scope.$emit("done"),scope.$emit("dialogClosed"),$window.sessionStorage.setItem("fulfillmentType","Curbside"),goToOrderSetup(scope.upsellRestaurant.id))},scope.removeAddress=function(address){addressSvc.removeAddress(address).then(function(){scope.deliveryAddresses=_.filter(scope.deliveryAddresses,function(obj){return obj.id!==address.id}),_.isEmpty(scope.deliveryAddresses)&&(scope.displaySavedAddresses=!1)})}}}}]),angular.module("ONO-Base-UI").directive("radiogroupvalidation",["$compile","$timeout",function($compile,$timeout){return{require:["^form"],link:function(scope,element,attrs,formCtrl){var groupName=attrs.radioGroupName.replace(/\s/g,""),el=angular.element("<span class='errorContainer error' ng-if='$invalid && $submitted'  id='{{errorGroupName}}'>  {{'Error : "+groupName+" ' + ('SelectionRequired' | translate)}} </span>");scope.errorContainer=element.closest(".contentContainer").find(".formErrorContainer"),scope.formCtrl=formCtrl[0],scope.radioButtonContainer=angular.element(element[0].children),scope.errorGroupName="error_group_"+groupName,scope.validate=function(){$timeout(function(){scope.$submitted=scope.formCtrl.$submitted,scope.$invalid=!scope.radioButtonContainer.hasClass("active")})},scope.$on("$destroy",function(){scope.errorContainer.empty()}),scope.errorContainer.append(el),$compile(el)(scope),angular.forEach(scope.radioButtonContainer.find('input[type="radio"]'),function(item){angular.element(item)[0].onchange=function(){scope.validate()}}),scope.$on("form:submitting",function(){scope.validate()}),scope.formCtrl.$submitted&&scope.validate()}}}]),angular.module("ONO-Base-UI").directive("sanitize",["gdprEmailExtensionsSvc",function(gdprEmailExtensionsSvc){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var gdprEmailExtensions=[],sanitizeTypes=attrs.sanitize.split(" ");gdprEmailExtensionsSvc.getGdprEmailExtensions().then(function(data){gdprEmailExtensions=data},function(){return!0}),-1!==sanitizeTypes.indexOf("gdpr")&&(ctrl.$validators.sanitize_gdpr=function(modelValue){if(ctrl.$isEmpty(modelValue))return!0;var extensionStart=modelValue.lastIndexOf(".");return-1===extensionStart||-1===gdprEmailExtensions.indexOf(modelValue.slice(extensionStart).toLowerCase())})}}}]),angular.module("ONO-Base-UI").directive("locationSearch2",["$document",function($document){return{restrict:"A",templateUrl:"web/app/_2.0/_directives/locationSearch/locationSearch2View.html",link:function($scope){var searchField=angular.element("#restaurant_search_single_field_search_text"),autocomplete=new google.maps.places.Autocomplete(searchField[0],{types:["geocode"],componentRestrictions:{country:"us"}});$document[0].addEventListener("DOMNodeInserted",function(event){var target=$(event.target);target.hasClass("pac-item")&&target.html(target.html().replace(/, USA<\/span>$/,"</span>").replace(/ USA<\/span>$/,"</span>"))}),autocomplete.addListener("place_changed",function(){$scope.$apply(function(){var string,place=autocomplete.getPlace();angular.isDefined(place)&&angular.isUndefined(place.address_components)||($scope.search.text=(string=place.formatted_address,_.isString?string.replace(", USA","").replace("USA",""):string))})})}}}]),angular.module("ONO-Base-UI").directive("orderItemDetailsContent",function(){return{restrict:"E",scope:{oi:"=",isCombo:"="},templateUrl:"/web/app/cart/order_item.details.content.html"}}),angular.module("ONO-Base-UI").directive("registerTeaser",["$rootScope",function($rootScope){return{restrict:"A",templateUrl:"web/app/_2.0/_directives/registerTeaser/registerTeaser.html"}}]),angular.module("ONO-Base-UI").directive("stickyCheckoutButton",["featureFlagSvc","$state",function(featureFlagSvc,$state){return{restrict:"E",templateUrl:"web/app/_2.0/_directives/stickyCheckoutButton/stickyCheckoutButton.html",controller:["$scope",function($scope){$scope.showStickyCheckoutButton=!1,featureFlagSvc.getFeatureFlags("status",["showStickyCheckoutButton"]).then(function(data){$scope.showStickyCheckoutButton=data}),$scope.showCheckout=function(){return $scope.showStickyCheckoutButton&&$scope.displaySize.isMobile&&angular.isDefined($scope.model.cart)&&angular.isDefined($scope.model.cart.order_items)&&0<$scope.model.cart.order_items.length},$scope.proceedToCheckout=function(){$state.go("review")}}]}}]),angular.module("ONO-Base-UI").directive("telephoneNumber",["$document","$window",function($document,$window){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var formatter=function(modelValue){if(angular.isDefined(modelValue)&&!_.isNull(modelValue)){var transformedInput=modelValue.replace(/^[0|1]+/g,"");return modelCtrl.$setViewValue(transformedInput),modelCtrl.$render(),transformedInput}};element.on("blur",function(e){formatter(element.val())}),element.on("keypress select",function(e){var number;number=($window.getSelection()||$document.getSelection()||$document.selection.createRange()).toString().trim(),(0===element.val().length||0<number.length)&&(48!==e.keyCode&&49!==e.keyCode||e.preventDefault())}),modelCtrl.$formatters.push(formatter)}}}]),angular.module("ONO-Base-UI").directive("toppingSet",function(){return{restrict:"E",scope:{ts:"="},templateUrl:"/web/app/menu/topping_set.html"}}),angular.module("ONO-Base-UI").directive("validateProfanity",["profanitySvc",function(profanitySvc){return{restrict:"A",scope:{formReference:"=",profanityValue:"="},link:function(scope,element,attrs){element.bind("blur",function(event){profanitySvc.sanitize(scope.profanityValue).then(function(validity){validity?scope.formReference.$setValidity("sanitize_profanity",!0):scope.formReference.$setValidity("sanitize_profanity",!1)})})}}}]),angular.module("ONO-Base-UI").controller("delivery2Ctrl",["$scope","$rootScope","$controller","$window","$state","restaurantSvc","addressSvc","tokenizationFeatureFlagsSvc","featureFlagSvc",function($scope,$rootScope,$controller,$window,$state,restaurantSvc,addressSvc,tokenizationFeatureFlagsSvc,featureFlagSvc){function goToOrderSetup(restaurantId,fulfillmentType){$state.go("orderSetup",{id:restaurantId,fulfillmentType:fulfillmentType})}$scope.address={},$scope.deliveryHoursAvailableForThisLocation=!0,$scope.address.search_distance=50,$scope.address.max_results=1,$scope.address.country="US",$scope.loggedIn=$rootScope.loggedIn,$scope.upsellRestaurant=null,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","UserAccount","displaySavedDeliveryAddress")&&($scope.displaySavedDeliveryAddress=$rootScope.featureFlags.UserAccount.displaySavedDeliveryAddress),featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&($window.sessionStorage.fulfillmentType="Delivery"),$rootScope.$on("sessionTimedOut",function(){$scope.loggedIn=!1}),$scope.getPickupClosingTime=function(){if($scope.upsellRestaurant&&$scope.upsellRestaurant.fulfillment_infos){var fullfilmentTypeInfos=_.find($scope.upsellRestaurant.fulfillment_infos,function(i){return"ToGo"===i.menu_type});if(fullfilmentTypeInfos&&fullfilmentTypeInfos.fulfillment_type_infos){var fullfilmentTypeInfo=_.find(fullfilmentTypeInfos.fulfillment_type_infos,function(i){return"Curbside"===i.fulfillment_type});if(fullfilmentTypeInfo&&fullfilmentTypeInfo.hours){var hours=_.find(fullfilmentTypeInfo.hours,function(i){return i.start_day===moment().format("dddd")});if(angular.isDefined(hours)&&angular.isDefined(hours.end_time))return moment(hours.end_time,"hh:mm").format("hh:mm")}}}return""},$scope.saveDeliveryAddress=function(){$scope.address&&$scope.address.address1&&restaurantSvc.getDeliveryRestaurant($scope.address).then(function(rest){rest.isWithinTradeArea?(tokenizationFeatureFlagsSvc.setLocationBasedFlags(rest),addressSvc.upsertDeliveryAddress($scope.address).then(function(){var addressObj,sessionAddress,sessionFields;$rootScope.addressIsGeocoded=!0,$window.sessionStorage.currentDeliveryAddress=angular.toJson((addressObj=$scope.address,sessionAddress={},sessionFields=["address1","address2","city","country","state","zip_code"],_.each(addressObj,function(value,key){_.includes(sessionFields,key)&&(sessionAddress[key]=value)}),sessionAddress)),$window.sessionStorage.deliveryRestaurant=angular.toJson(rest),goToOrderSetup(rest.id,"Delivery")}),$scope.addressForm&&$scope.addressForm.$formErrors.splice(0,$scope.addressForm.$formErrors.length)):($scope.upsellRestaurant=rest,$scope.showDialog("delivery.upsell"))}).catch(function(response){for(var key in $rootScope.addressIsGeocoded=!1,response.data.ModelState)-1===$scope.$formErrors.indexOf(_.first(response.data.ModelState[key]))&&$scope.$formErrors.push(_.first(response.data.ModelState[key]))})},$scope.createAccount=function(){$scope.handleDialogUserAction(),$scope.showDialog("account.register")},$scope.handleDialogUserAction=function(){$scope.$emit("done"),$scope.$emit("dialogClosed")},$scope.upsell=function(){tokenizationFeatureFlagsSvc.setLocationBasedFlags($scope.upsellRestaurant),$scope.$emit("done"),$scope.$emit("dialogClosed"),$window.sessionStorage.fulfillmentType="Curbside",goToOrderSetup($scope.upsellRestaurant.id)},this.initialize=function(){$window.sessionStorage.fulfillmentType="Delivery"},this.initialize()}]),angular.module("ONO-Base-UI").directive("fulfillmentTime2",[function(){return{scope:{fulfillmentType:"=",fulfillmentDateType:"=",serviceTime:"=",datePlaced:"=",dateExpected:"=",showActualTime:"="},restrict:"A",templateUrl:"web/app/_2.0/_components/fulfillmentTime/fulfillmentTime2View.html",controller:["$scope","fulfillmentTimeMessageSvc2",function($scope,fulfillmentTimeMessageSvc2){function refreshMessage(){$scope.fulfillmentTimeMessage=fulfillmentTimeMessageSvc2.getMessage({fulfillmentType:$scope.fulfillmentType,fulfillmentDateType:$scope.fulfillmentDateType,serviceTime:$scope.serviceTime,datePlaced:$scope.datePlaced,dateExpected:$scope.dateExpected,showActualTime:$scope.showActualTime})}$scope.$watch("serviceTime.leadTime",refreshMessage),refreshMessage()}]}}]),angular.module("ONO-Services").service("fulfillmentTimeMessageSvc2",["$rootScope","featureFlagSvc","dateFilter",function($rootScope,featureFlagSvc,dateFilter){function humanizeMinutes(mins){if(60<=mins){var duration=moment.duration(mins,"minutes"),hours=duration.hours()+(1===duration.hours()?" hour":" hours"),minutes=duration.minutes()+(1===duration.minutes()?" minute":" minutes");return hours+(0<duration.minutes()?" and "+minutes:"")}return mins+(1===mins?" minute":" minutes")}function shouldApplyLeadTime(lowerMinutesToHumanize,upperMinutesToHumanize,options){var middle=(lowerMinutesToHumanize+upperMinutesToHumanize)/2;return!(featureFlagSvc.featureFlagExists($rootScope,"featureFlags","serviceTime")&&$rootScope.featureFlags.serviceTime)||0===lowerMinutesToHumanize||angular.isDefined(options.serviceTime)&&angular.isDefined(options.serviceTime.leadTime)&&angular.isNumber(options.serviceTime.leadTime)&&(!angular.isDefined(options.dateExpected)||!angular.isDate(options.dateExpected)||moment().add(options.serviceTime.leadTime,"m")>moment(options.dateExpected))&&("Delivery"===options.fulfillmentType&&options.serviceTime.leadTime>middle||"Delivery"!==options.fulfillmentType&&options.serviceTime.leadTime>lowerMinutesToHumanize)}function formatFulfillmentDate(lowerMinutesToHumanize,upperMinutesToHumanize,options,isUpper){var fulfillmentDate=angular.isDefined(options.dateExpected)?moment(options.dateExpected).format("h:mm a"):moment().format("h:mm a");return 0!==upperMinutesToHumanize&&0!==lowerMinutesToHumanize&&angular.isDefined(options.datePlaced)&&(fulfillmentDate=moment(options.datePlaced).add(isUpper?upperMinutesToHumanize:lowerMinutesToHumanize,"m").format("h:mm a")),fulfillmentDate}function getFulfillmentTypeBasedMessage(options){return angular.isDefined(options.fulfillmentType)&&"Delivery"===options.fulfillmentType?"Your order will be delivered ":"Your order will be ready "}return{getMessage:function(options){var lowerMinutesToHumanize=function(options){return angular.isDefined(options.serviceTime)&&angular.isDefined(options.serviceTime.serviceTimeRangeLower)&&angular.isNumber(options.serviceTime.serviceTimeRangeLower)?options.serviceTime.serviceTimeRangeLower:0}(options),upperMinutesToHumanize=function(options){return angular.isDefined(options.serviceTime)&&angular.isDefined(options.serviceTime.serviceTimeRangeUpper)&&angular.isNumber(options.serviceTime.serviceTimeRangeUpper)?options.serviceTime.serviceTimeRangeUpper:0}(options);return shouldApplyLeadTime(lowerMinutesToHumanize,upperMinutesToHumanize,options)&&(lowerMinutesToHumanize=options.serviceTime.leadTime,upperMinutesToHumanize=options.serviceTime.leadTime),angular.isDefined(options.showActualTime)&&options.showActualTime||angular.isDefined(options.fulfillmentDateType)&&"Specific"===options.fulfillmentDateType?function(lowerMinutesToHumanize,upperMinutesToHumanize,options){var specificDate=angular.isDefined(options.dateExpected)?"<b>"+dateFilter(options.dateExpected,"MMMM d")+"</b>":new Date,fulfillmentDateUpper=formatFulfillmentDate(lowerMinutesToHumanize,upperMinutesToHumanize,options,!0),fulfillmentDateLower=formatFulfillmentDate(lowerMinutesToHumanize,upperMinutesToHumanize,options,!1),messageSuffix=" at <b>"+fulfillmentDateLower+"</b> ";return fulfillmentDateUpper!==fulfillmentDateLower&&(messageSuffix=" between <b>"+fulfillmentDateLower+" and "+fulfillmentDateUpper+"</b>"),getFulfillmentTypeBasedMessage(options).concat(" on ",specificDate,messageSuffix)}(lowerMinutesToHumanize,upperMinutesToHumanize,options):function(lowerMinutesToHumanize,upperMinutesToHumanize,options){var humanizedLowerMinutes=humanizeMinutes(lowerMinutesToHumanize),humanizedUpperMinutes=humanizeMinutes(upperMinutesToHumanize),formattedMinutes="<b>"+humanizedLowerMinutes+(humanizedUpperMinutes!==humanizedLowerMinutes?" to "+humanizedUpperMinutes:"")+"</b> ";return getFulfillmentTypeBasedMessage(options).concat(formattedMinutes,"after your order is placed.")}(lowerMinutesToHumanize,upperMinutesToHumanize,options)}}}]),angular.module("ONO-Base-UI").controller("header2Ctrl",["$scope","$rootScope","$controller","$state","$location","onoSiteMap","tokenizationFeatureFlagsSvc","$timeout","cartSvc","$window","$document","orderSetupSvc","restaurantSvc","shoppingBagSvc","domainEventSvc","featureFlagSvc",function($scope,$rootScope,$controller,$state,$location,onoSiteMap,tokenizationFeatureFlagsSvc,$timeout,cartSvc,$window,$document,orderSetupSvc,restaurantSvc,shoppingBagSvc,domainEventSvc,featureFlagSvc){angular.extend(this,$controller("headerCtrl",{$scope:$scope}));var doNotShowCheckoutIconStates=["checkout","review","confirmation","GiftCard","CreditCard","POD"],showMenuOnlyHeaderLinks=["menu","category","menuItem","pastOrders","review","checkout","confirmation"],showDiningHeaderLinks=["menu","category","menuItem","pastOrders"],doNotShowFulfilmentLocationsStates=(cartSvc.viewCart(),["confirmation"]);function enableCheckoutLinkOnAccountDropDown(){featureFlagSvc.featureFlagExists($rootScope,"featureFlags","UserAccount","displayCheckoutOnAccountDropDown")&&(_.isObject($scope.cart)&&angular.isDefined($scope.cart.order_items)&&0<$scope.cart.order_items.length&&!_.includes(doNotShowCheckoutIconStates,$state.$current.name)?_.find($scope.sections,function(obj){return"review"===obj.name})||$scope.sections.splice(0,0,{parent:"account",title:"Account_Dropdown_Checkout_Text",url:"",name:"review"}):_.reject($scope.sections,function(obj){return"review"===obj.name}))}function setSections(){var sections;sections=featureFlagSvc.featureFlagExists($rootScope,"featureFlags","isRackspace")&&$rootScope.featureFlags.isRackspace?onoSiteMap.parents.account:onoSiteMap.parents.account.filter(function(item){return featureFlagSvc.featureFlagExists($rootScope,"featureFlags","hideSaveOrder")&&$rootScope.featureFlags.hideSaveOrder&&(item.title="RecentSavedOrders"===item.title?"RecentOrders":item.title,$scope.title=item.title),!("creditCards"===item.name&&!tokenizationFeatureFlagsSvc.savingCreditCardsEnabled())&&item}),$scope.sections=sections,enableCheckoutLinkOnAccountDropDown()}$scope.cart=cartSvc.viewCart(),$scope.order=orderSetupSvc.orderSetup,$scope.menuOpened=!1,$scope.inAccountDropDown=!1,$scope.orderItemsTotal=0,$scope.displayBagIcon=!0,$scope.displayOrderTotal=!1,$scope.displayMenuOnlyLinks=!1,$scope.displayDiningMenuOnlyLinks=!1,$scope.customerDeliveryLocation=null,$scope.restaurantLocation="",$scope.restaurantDisplayName="",$scope.fulfillmentType=$window.sessionStorage.fulfillmentType,$scope.displayFulfillmentLocation=!1,$scope.displayLunchMenuItem=!1,$scope.displayDinnerMenuItem=!1,$scope.inPastOrders=!1,$scope.currentState=null,$scope.hideDelivery=!1,domainEventSvc.addHandler({onMenuLoaded:function(menu){$scope.displayLunchMenuItem="Lunch"===menu.trim(),$scope.displayDinnerMenuItem="Dinner"===menu.trim()}}),$scope.getCurrentFulfillmentnState=function(){angular.isDefined($scope.fulfillmentType)?"Curbside"===$scope.fulfillmentType?$scope.currentState="pickup":$scope.currentState="delivery":$scope.currentState=$state.$current.name},$scope.updateFulfillmentVisibility=function(){return $scope.displayFulfillmentLocation&&("Curbside"===$scope.fulfillmentType&&$scope.restarantDeliveryLocation||"Curbside"!==$scope.fulfillmentType&&$scope.customerDeliveryLocation)},$scope.cleanUpPreviousOrderInformation=function(newState,oldState){"confirmation"===oldState&&(_.isObject($scope.model)&&_.isObject($scope.model.cart)&&angular.isDefined($scope.model.cart.order_items)&&($scope.model.cart.order_items=[]),$window.sessionStorage.removeItem("currentDeliveryAddress"),$window.sessionStorage.removeItem("curbsideRestaurant"),$state.reload()),"pickup"===newState&&($scope.hideDelivery=!1),$scope.currentState=newState,$scope.inPastOrders="pastOrders"===newState},$scope.$watch(function(){return $state.$current.name},function(newState,oldState){$scope.cleanUpPreviousOrderInformation(newState,oldState),$scope.updateFulfillmentLocation(),$scope.getCurrentFulfillmentnState(),enableCheckoutLinkOnAccountDropDown(),_.includes(doNotShowCheckoutIconStates,newState)?$scope.displayBagIcon=!1:$scope.displayBagIcon=!0,_.includes(showMenuOnlyHeaderLinks,newState)?$scope.displayMenuOnlyLinks=!1:$scope.displayMenuOnlyLinks=!0,_.includes(showDiningHeaderLinks,newState)?$scope.displayDiningMenuOnlyLinks=!1:$scope.displayDiningMenuOnlyLinks=!0,_.includes(doNotShowFulfilmentLocationsStates,newState)?$scope.displayFulfillmentLocation=!1:$scope.displayFulfillmentLocation=!0}),$scope.$watch(function(){return $scope.cart.order_items.length},function(orderTotal){$scope.orderItemsTotal=orderTotal,$scope.displayOrderTotal=0<orderTotal,enableCheckoutLinkOnAccountDropDown()}),$scope.$watch(function(){return $window.sessionStorage.currentDeliveryAddress},function(newValue,oldValue){$scope.getRestaurant(),$scope.concatenateAddress(angular.fromJson(newValue),!0)}),$scope.$watch(function(){return $rootScope.loggedIn},function(newValue){newValue&&setSections(),$scope.updateFulfillmentLocation($scope.fulfillmentType)}),$scope.$watch(function(){return $window.sessionStorage.curbsideRestaurant},function(newValue,oldValue){$scope.getRestaurant()}),$scope.$watch(function(){return $window.sessionStorage.fulfillmentType},function(newValue){$scope.fulfillmentType=newValue,$scope.updateFulfillmentLocation(newValue),$scope.getCurrentFulfillmentnState()}),$scope.goToDelivery=function(){$state.go("delivery")},$scope.goToPickup=function(){$state.go("pickup")},$scope.goToCheckout=function(){0<$scope.orderItemsTotal?(cartSvc.sendCheckoutGAData("ShoppingBag"),$state.go("review")):$scope.goToCategory()},$scope.goToHome=function(){featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")?$window.sessionStorage&&"Delivery"===$window.sessionStorage.fulfillmentType?$scope.goToDelivery():$scope.goToPickup():$state.go("restaurantSearch")},$scope.goToCategory=function(){if($scope.cart&&$scope.cart.id&&$scope.cart.order_setup&&$scope.cart.restaurant){var menuParams={fulfillmentType:$scope.cart.order_setup.fulfillment_type,menuType:$scope.cart.menu_type,restaurantId:$scope.cart.restaurant.id,fulfillmentDate:$scope.cart.order_setup.fulfillment_date};$window.sessionStorage.curbsideRestaurant=angular.toJson($scope.cart.restaurant),shoppingBagSvc.goToMenu(menuParams)}else shoppingBagSvc.asapOrder()},$scope.goToPastOrders=function(){$state.go("pastOrders")},setSections(),$scope.disposeDropDown=function(){$scope.menuOpened=!1,$scope.inAccountDropDown=!1,$scope.$$phase||$scope.$apply()},$scope.toggleAccountDropDown=function(realm){"account"===realm?($scope.menuOpened=!$scope.menuOpened,$scope.inAccountDropDown=!$scope.inAccountDropDown):("logout"===realm&&$scope.logout(),$scope.inAccountDropDown=!1,$scope.disposeDropDown()),$scope.inAccountDropDown&&$timeout($scope.focusOnAccountInfo,1e3)},$scope.focusOnAccountInfo=function(){var drawer=angular.element($document.find(".menuDropdownRight"));drawer&&drawer.focus()},$scope.toggleMenu=function(event){$scope.inAccountDropDown=!$scope.inAccountDropDown,$scope.menuOpened=!$scope.menuOpened,event.stopPropagation()},$window.onclick=function(){$scope.disposeDropDown()},$scope.changeLocation=function(){"Curbside"===$scope.fulfillmentType?$scope.goToPickup():$scope.goToDelivery()},$scope.updateFulfillmentLocation=function(type){"Curbside"===type?(delete $window.sessionStorage.currentDeliveryAddress,delete $window.sessionStorage.deliveryRestaurant,$scope.customerDeliveryLocation="",$scope.getRestaurant(),$scope.displayFulfillmentLocation=!0):"Delivery"===type?(delete $window.sessionStorage.curbsideRestaurant,$scope.customerDeliveryLocation?$scope.displayFulfillmentLocation=!0:$scope.displayFulfillmentLocation=!1):$scope.displayFulfillmentLocation=!1},$scope.concatenateAddress=function(address,isDeliveryAddress){address&&(isDeliveryAddress?$scope.customerDeliveryLocation=address.address1+", "+address.city+", "+address.state+", "+address.zip_code:$scope.restarantDeliveryLocation=address.address1+", "+address.city+", "+address.state+", "+address.zip_code)},$scope.getRestaurant=function(){if($window.sessionStorage.curbsideRestaurant){var curbsideRestaurant=angular.fromJson($window.sessionStorage.curbsideRestaurant);$scope.restaurantLocation=curbsideRestaurant.address,$scope.restaurantDisplayName=curbsideRestaurant.name,$scope.concatenateAddress($scope.restaurantLocation,!1),"orderSetup"===$state.$current.name&&-1<$document[0].referrer.indexOf("outback.com")&&!curbsideRestaurant.delivering_orders?$scope.hideDelivery=!0:$scope.hideDelivery=!1}setSections()}}]),angular.module("ONO-Base-UI").controller("pastOrders2Ctrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("orderHistoryCtrl",{$scope:$scope}))}]),angular.module("ONO-Base-UI").controller("pickup2Ctrl",["$scope","$state","$http","restaurantSvc","cartSvc","onoLocation","onoAlert","values","favoriteLocations","recentLocations","tokenizationFeatureFlagsSvc","$rootScope","$window","featureFlagSvc","offers","toaster","translationSvc",function($scope,$state,$http,restaurantSvc,cartSvc,onoLocation,onoAlert,values,favoriteLocations,recentLocations,tokenizationFeatureFlagsSvc,$rootScope,$window,featureFlagSvc,offers,toaster,translationSvc){var ctrl=this,geolocationSearchRadius={value:$scope.displaySettings.GeolocationSearchRadius};if($scope.googleLocationSearch=!1,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","googleLocationSearch")&&($scope.googleLocationSearch=$rootScope.featureFlags.googleLocationSearch),$scope.restaurants=[],$scope.favorites=favoriteLocations,$scope.recent=recentLocations,featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","header")&&($window.sessionStorage.fulfillmentType="Curbside"),offers){featureFlagSvc.featureFlagExists($rootScope,"featureFlags","layout","toasterEnabled")&&$rootScope.featureFlags.layout.toasterEnabled&&toaster.success({title:translationSvc.translate("FirstTime_Promo_Title"),body:translationSvc.translate("FirstTime_Promo_Body")})}$scope.citySearch=angular.extend($scope.$new(!0),$scope.citySearch),$scope.zipSearch=angular.extend($scope.$new(!0),$scope.zipSearch),$scope.distances=[{value:"20"},{value:"30"},{value:"40"}],$scope.zipSearch.search_distance=geolocationSearchRadius,$scope.search={text:"",search_distance:geolocationSearchRadius};var countriesEnumerable=Enumerable.From(values.Countries);$scope.countries=countriesEnumerable.ToArray(),1==countriesEnumerable.Count()&&($scope.citySearch.country=countriesEnumerable.First(),$scope.zipSearch.country=countriesEnumerable.First()),ctrl.parseSearchString=function(str){for(var abbr in values.Countries){var country=values.Countries[abbr];if(country.ZipCodeValidation)if(new RegExp(country.ZipCodeValidation).test(str))return void $state.go("restaurantsByZipCode",{zip_code:str,country:abbr,search_distance:$scope.search.search_distance.value})}var splitChar=-1<str.indexOf(",")?",":" ",parts=str.split(splitChar).map(function(x){return x.trim()});$state.go("restaurantsByCityStateGeolocation",{city:parts[0],state:parts[1],country:parts[2]||(1===countriesEnumerable.Count()?countriesEnumerable.First().Key:""),geocode:!0,search_distance:$scope.search.search_distance.value})},$scope.zipSearch.$watch("country",function(){var countryCode=$scope.zipSearch.country?$scope.zipSearch.country.Key:null,c=countriesEnumerable.FirstOrDefault({},function(country){return null==countryCode||country.Key===countryCode}).Value;c&&($scope.zipCodeValidation=c.ZipCodeValidation,$scope.zipCodeLength=c.ZipMask.length)}),$scope.citySearch.$watch("country",function(newValue,oldValue){var countryCode=$scope.citySearch.country?$scope.citySearch.country.Key:null;newValue===oldValue&&$scope.states||($scope.citySearch.country.Value.States?$scope.states=$scope.citySearch.country.Value.States:countryCode&&restaurantSvc.getStates(countryCode).then(function(states){$scope.states=states}))}),$scope.zipSearchFormSubmit=function(){$state.go("restaurantsByZipCode",{zip_code:$scope.zipSearch.zip_code,country:$scope.zipSearch.country.Key,search_distance:$scope.zipSearch.search_distance.value})},$scope.citySearchFormSubmit=function(){$state.go("restaurantsByCityState",{country:$scope.citySearch.country.Key,city:$scope.citySearch.city.name,state:$scope.citySearch.state.name})},$scope.searchFormSubmit=function(){var searchInputValue=$scope.search.text;ctrl.parseSearchString(searchInputValue)},$scope.uiAutocomplete={minLength:3,source:function(request,response){var term=encodeURIComponent(request.term.trim());return $http({method:"GET",url:"/api/autocomplete/cities?partialQuery="+term}).then(function(data){response(data.data||[])})},select:function(e,ui){$scope.search.text=ui.item.value}},$scope.getByLocation=function(){onoLocation.getLocation().then(function(coords){coords?$state.go("restaurantsByLocation",{latitude:coords.latitude,longitude:coords.longitude,search_distance:geolocationSearchRadius.value}):onoAlert.show({title:"Geo Location Is Disabled",message:"You have disabled geo location.",actions:[{name:"done",action:function(scope){scope.hide()}}]})})},$scope.selectLocation=function(restaurant){$window.sessionStorage.curbsideRestaurant=angular.toJson(restaurant),tokenizationFeatureFlagsSvc.setLocationBasedFlags(restaurant),$state.go("orderSetup",{id:restaurant.id})},$scope.viewMenu=function(restaurant,menu){cartSvc.initialize(restaurant,menu),$state.go($scope.defaultMenuState,{restaurantId:restaurant.id,menuType:menu.menu_type,fulfillmentType:""===menu.default_fulfillment_type?menu.fulfillment_type_infos[0].fulfillment_type:menu.default_fulfillment_type})},$scope.citySearch.$watch("state",function(){$scope.citySearch.state&&restaurantSvc.getCities($scope.citySearch.state.name).then(function(cities){$scope.cities=cities})}),$scope.$on("form:submitted",function(e){e.stopPropagation()}),$scope.createAccount=function(){$scope.handleDialogUserAction(),$scope.showDialog("account.register")},$scope.handleDialogUserAction=function(){$scope.$emit("done"),$scope.$emit("dialogClosed")},$scope.repeatOrder=function(){var reorderConfig=$window.sessionStorage.getItem("reorderConfig");angular.isString(reorderConfig)&&""!==reorderConfig&&!$rootScope.loggedIn&&((reorderConfig=angular.fromJson(reorderConfig)).prompted||($rootScope.showDialog("account.login",$scope),reorderConfig.prompted=!0,$window.sessionStorage.setItem("reorderConfig",angular.toJson(reorderConfig))))},$scope.repeatOrder()}]),angular.module("ONO-Base-UI").controller("restaurantSearch2Ctrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("restaurantSearchCtrl",{$scope:$scope}))}]),function(t,e){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"close-html":'<button class="toast-close-button" type="button">&times;</button>',"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(t,e){function o(t){return function(e,o,s,i,a,n,r,c,l){angular.isString(e)?this.pop(t,e,o,s,i,a,n,r,c,l):this.pop(angular.extend(e,{type:t}))}}for(var s in this.pop=function(e,o,s,i,a,n,r,c,l,u){if(angular.isObject(e)){var d=e;this.toast={type:d.type,title:d.title,body:d.body,timeout:d.timeout,bodyOutputType:d.bodyOutputType,clickHandler:d.clickHandler,showCloseButton:d.showCloseButton,closeHtml:d.closeHtml,uid:d.toastId,onShowCallback:d.onShowCallback,onHideCallback:d.onHideCallback,directiveData:d.directiveData},l=d.toastId,r=d.toasterId}else this.toast={type:e,title:o,body:s,timeout:i,bodyOutputType:a,clickHandler:n,showCloseButton:c,uid:l,onHideCallback:u};t.$emit("toaster-newToast",r,l)},this.clear=function(e,o){t.$emit("toaster-clearToasts",e,o)},e["icon-classes"])this[s]=o(s)}]).factory("toasterEventRegistry",["$rootScope",function(t){var e,o=null,s=null,i=[],a=[];return{setup:(e={setup:function(){o||(o=t.$on("toaster-newToast",function(t,e,o){for(var s=0,a=i.length;s<a;s++)i[s](t,e,o)})),s||(s=t.$on("toaster-clearToasts",function(t,e,o){for(var s=0,i=a.length;s<i;s++)a[s](t,e,o)}))},subscribeToNewToastEvent:function(t){i.push(t)},subscribeToClearToastsEvent:function(t){a.push(t)},unsubscribeToNewToastEvent:function(t){var e=i.indexOf(t);0<=e&&i.splice(e,1),0===i.length&&(o(),o=null)},unsubscribeToClearToastsEvent:function(t){var e=a.indexOf(t);0<=e&&a.splice(e,1),0===a.length&&(s(),s=null)}}).setup,subscribeToNewToastEvent:e.subscribeToNewToastEvent,subscribeToClearToastsEvent:e.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:e.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:e.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function(t,e){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(o,s,i){o.$watch("directiveName",function(a){if(angular.isUndefined(a)||a.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");if(!e.has(i.$normalize(a)+"Directive"))throw new Error(a+" could not be found.");o.directiveData&&(o.directiveData=angular.fromJson(o.directiveData));var r=t("<div "+a+"></div>")(o);s.append(r)})}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(t,e,o,s,i,a,n){return{replace:!0,restrict:"EA",scope:!0,link:function(e,r,c){function l(t,s){t.timeoutPromise=o(function(){e.removeToast(t.id)},s,1)}function u(o,i){if(o.type=v["icon-classes"][o.type],o.type||(o.type=v["icon-class"]),!0===v["prevent-duplicates"])if(p(i)){if(0<e.toasters.length&&e.toasters[e.toasters.length-1].body===o.body)return}else{var a,n;for(a=0,n=e.toasters.length;a<n;a++)e.toasters[a].uid===i&&(d(a),a--,n=e.toasters.length)}o.id=++f,p(i)||(o.uid=i);var r=v["close-button"];if("boolean"==typeof o.showCloseButton);else if("boolean"==typeof r)o.showCloseButton=r;else if("object"==typeof r){var c=r[o.type];null!=c&&(o.showCloseButton=c)}else o.showCloseButton=!1;switch(o.showCloseButton&&(o.closeHtml=s.trustAsHtml(o.closeHtml||e.config.closeHtml)),o.bodyOutputType=o.bodyOutputType||v["body-output-type"],o.bodyOutputType){case"trustedHtml":o.html=s.trustAsHtml(o.body);break;case"template":o.bodyTemplate=o.body||v["body-template"];break;case"templateWithData":var u=t(o.body||v["body-template"])(e);o.bodyTemplate=u.template,o.data=u.data;break;case"directive":o.html=o.body}e.configureTimer(o),!0===v["newest-on-top"]?(e.toasters.unshift(o),0<v.limit&&e.toasters.length>v.limit&&e.toasters.pop()):(e.toasters.push(o),0<v.limit&&e.toasters.length>v.limit&&e.toasters.shift()),angular.isFunction(o.onShowCallback)&&o.onShowCallback()}function d(t){var s=e.toasters[t];s.timeoutPromise&&o.cancel(s.timeoutPromise),e.toasters.splice(t,1),angular.isFunction(s.onHideCallback)&&s.onHideCallback()}function p(t){return angular.isUndefined(t)||null===t}var v,f=0;v=angular.extend({},i,e.$eval(c.toasterOptions)),e.config={toasterId:v["toaster-id"],position:v["position-class"],title:v["title-class"],message:v["message-class"],tap:v["tap-to-dismiss"],closeButton:v["close-button"],closeHtml:v["close-html"],animation:v["animation-class"],mouseoverTimer:v["mouseover-timer-stop"]},e.$on("$destroy",function(){n.unsubscribeToNewToastEvent(e._onNewToast),n.unsubscribeToClearToastsEvent(e._onClearToasts)}),e.configureTimer=function(t){var e=angular.isNumber(t.timeout)?t.timeout:v["time-out"];"object"==typeof e&&(e=e[t.type]),0<e&&l(t,e)},e.removeToast=function(t){var o,s;for(o=0,s=e.toasters.length;o<s;o++)if(e.toasters[o].id===t){d(o);break}},e.toasters=[],e._onNewToast=function(t,o,s){(p(e.config.toasterId)&&p(o)||!p(e.config.toasterId)&&!p(o)&&e.config.toasterId==o)&&u(a.toast,s)},e._onClearToasts=function(t,o,s){("*"==o||p(e.config.toasterId)&&p(o)||!p(e.config.toasterId)&&!p(o)&&e.config.toasterId==o)&&function(t){for(var o=e.toasters.length-1;0<=o;o--)p(t)?d(o):e.toasters[o].uid==t&&d(o)}(s)},n.setup(),n.subscribeToNewToastEvent(e._onNewToast),n.subscribeToClearToastsEvent(e._onClearToasts)},controller:["$scope","$element","$attrs",function(t,e,s){t.stopTimer=function(e){!0===t.config.mouseoverTimer&&e.timeoutPromise&&(o.cancel(e.timeoutPromise),e.timeoutPromise=null)},t.restartTimer=function(e){!0===t.config.mouseoverTimer?e.timeoutPromise||t.configureTimer(e):null===e.timeoutPromise&&t.removeToast(e.id)},t.click=function(e,o){if(!0===t.config.tap||!0===e.showCloseButton&&!0===o){var s=!0;e.clickHandler&&(angular.isFunction(e.clickHandler)?s=e.clickHandler(e,o):angular.isFunction(t.$parent.$eval(e.clickHandler))?s=t.$parent.$eval(e.clickHandler)(e,o):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),s&&t.removeToast(e.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><div ng-if="toaster.showCloseButton" ng-click="click(toaster, true)" ng-bind-html="toaster.closeHtml"></div><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),angular.module("ONO-Base-UI").run(["$templateCache",function($templateCache){$templateCache.put("/web/app/account/accountLinks.html",'<div class="accountLinks">\r\n\t<ul class="accountLinksList">\r\n        <li class="accountLinksListItem accountLinksStartOrder" ui-sref-active="active" ng-if="displaySize.isDesktop">\r\n            <a ui-sref="home">\r\n                <span>{{\'StartOrder\' | translate}}</span>\r\n            </a>\r\n        </li>\r\n\t\t<li class="accountLinksListItem accountLinksActions" ng-repeat="page in sections | shouldDisplay:this" ui-sref-active="active">\r\n\t\t\t<a ui-sref="{{page.name}}">\r\n\t\t\t\t<span>{{page.title | translate}}</span>\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t<li class="accountLinksListItem accountLinksLogout">\r\n\t\t\t<a href="#logout" tabindex="0" ng-click="logout()" prevent-redirect>\r\n\t\t\t\t<span>{{\'LogOut\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t</ul>\r\n</div>'),$templateCache.put("/web/app/account/changePassword.html",'<div class="form changePasswordForm" ng-controller="changePasswordCtrl" ng-form="changePasswordForm">\r\n\r\n\t<div class="titleContainer formTitleContainer changePasswordTitleContainer">\r\n\t\t<h2 class="title formTitle changePasswordTitle">{{\'ChangePassword\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer changePasswordContentContainer">\r\n\r\n\t\t<div class="errorContainer formErrorContainer changePasswordFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements currentPasswordFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer currentPasswordInputContainer">\r\n                <label for="change_password_old_password" class="inputText">\r\n                    {{\'CurrentPassword\' | translate}} (Required)\r\n                </label>\r\n\t\t\t\t<span class="input textInput currentPasswordInput">\r\n\t\t\t\t\t<input type="password" name="oldPassword" minlength="8" maxlength="30" id="change_password_old_password" ng-model="changePassword.oldPassword" required floating-label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="descriptionContainer formDescriptionContainer changePasswordDescriptionContainer">\r\n\t\t\t<h2 class="description formDescription changePasswordDescription">{{\'NewPassword_Message\' | translate}}</h2>\r\n\t\t</div>\r\n\r\n\t\t<div class="formElements newPasswordFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer newPasswordInputContainer">\r\n                <label for="change_password_new_password" class="inputText">\r\n                    {{\'NewPassword\' | translate}} (Required)\r\n                </label>\r\n\t\t\t\t<span class="input textInput newPasswordInput">\r\n\t\t\t\t\t<input type="password" name="newPassword" minlength="8" maxlength="30" id="change_password_new_password" ng-model="changePassword.newPassword" required floating-label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer textInputContainer confirmPasswordInputContainer">\r\n                <label for="change_password_confirm_password" class="inputText">\r\n                    {{\'ConfirmPassword\' | translate}} (Required)\r\n                </label>\r\n\t\t\t\t<span class="input textInput confirmPasswordInput">\r\n\t\t\t\t\t<input type="password" name="confirmPassword" minlength="8" maxlength="30" id="change_password_confirm_password" ng-model="changePassword.confirmPassword" ono-match="changePassword.newPassword" form-input="changePasswordForm.confirmPassword" required floating-label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer formActionsContainer changePasswordFormActionsContainer">\r\n\t\t\t<button class="submitAction changePasswordAction" name="accountSave" type="submit" ng-click="changePasswordForm.$submit()">\r\n\t\t\t\t<span>{{\'Save\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="backAction changePasswordBackAction" ui-sref="home" ng-if="displaySize.isMobile">\r\n\t\t\t\t<span>{{\'Back\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("/web/app/account/dualLogin.html",'<div class="dualLogin">\r\n\t<div class="loginContainer" ng-include="\'/web/app/account/login.html\'"></div>\r\n\r\n\t<div class="dualLoginRegisterContainer" ng-controller="loginCtrl">\r\n\t\t<div class="titleContainer dualLoginRegisterTitleContainer">\r\n\t\t\t<h2 class="title dualLoginRegisterTitle">{{\'CreateAnAccount\' | translate}}</h2>\r\n\t\t</div>\r\n\r\n\t\t<div class="contentContainer dualLoginRegisterContentContainer">\r\n\t\t\t<div class="descriptionContainer dualLoginRegisterDescriptionContainer">\r\n\t\t\t\t<p class="description">{{\'CreateAnAccountTextP1\' | translate}}</p>\r\n\t\t\t\t<p class="description">{{\'CreateAnAccountTextP2\' | translate}}</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="actionsContainer dualLoginRegisterActionsContainer">\r\n\t\t\t\t<button class="dualLoginSignUpAction" ng-click="handleSignUp()">\r\n\t\t\t\t\t<span>{{\'SignUpNow\' | translate}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/account/firstTimeLogin.html",'<div class="form forgotPasswordForm" ng-form="forgotPasswordForm" ng-controller="forgotPasswordCtrl">\r\n    \r\n    <h1 class="title">We\'ve simplified your ordering experience!</h1>\r\n\r\n    <section>\r\n        <p>{{\'First_TimeLogin_P1\' | translate}}</p>\r\n        <p>{{\'First_TimeLogin_P2\' | translate}}</p>\r\n        <p>{{\'First_TimeLogin_P3\' | translate}}</p>\r\n    </section>\r\n\r\n    <div class="contentContainer forgotPasswordContentContainer">\r\n\r\n        <div class="errorContainer formErrorContainer forgotPasswordFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="formElements forgotPasswordFormElements">\r\n            <div class="inputContainer textInputContainer emailInputContainer">\r\n                <label for="password_reset_email" class="inputText">\r\n                    {{\'Email\' | translate}} (Required)\r\n                </label>\r\n                <span class="input textInputContainer emailInput">\r\n                    <input type="email" floating-label id="password_reset_email" name="email" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" maxlength="56" autocomplete="email" ng-model="email" required sanitize="gdpr">\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <p>{{\'First_TimeLogin_P4\' | translate}}</p>\r\n\r\n        <div class="actionsContainer formActionsContainer forgotPasswordFormActionsContainer">\r\n            <button name="forgotPassword" type="submit" class="submitAction forgotPasswordSubmitAction" ng-click="forgotPasswordForm.$submit()">\r\n                <span>{{\'ResetPassword\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/account/forgotPassword.html",'<div class="form forgotPasswordForm" ng-form="forgotPasswordForm" ng-controller="forgotPasswordCtrl">\r\n\t<div class="titleContainer formTitleContainer forgotPasswordFormTitleContainer">\r\n\t\t<h2 class="title">{{\'ForgotPassword\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer forgotPasswordContentContainer">\r\n\t\t<div class="descriptionContainer formDescriptionContainer forgotPasswordFormDescriptionContainer">\r\n\t\t\t<p class="description formDescription forgotPasswordFormDescription">{{\'ForgotPassword_Message\' | translate}}</p>\r\n\t\t</div>\r\n\r\n        <div class="errorContainer formErrorContainer forgotPasswordFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements forgotPasswordFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer emailInputContainer">\r\n                <label for="forgot_password_email" class="inputText">\r\n                    {{\'Email\' | translate}} (Required)\r\n                </label>\r\n\t\t\t\t<span class="input textInputContainer emailInput">\r\n\t\t\t\t\t<input type="email" floating-label name="email" id="forgot_password_email" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" maxlength="56" ng-model="email" required sanitize="gdpr">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer formActionsContainer forgotPasswordFormActionsContainer">\r\n\t\t\t<button name="forgotPassword" type="submit" class="submitAction forgotPasswordSubmitAction" ng-click="forgotPasswordForm.$submit()">\r\n\t\t\t\t<span>{{\'ResetPassword\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/account/login.html",'<form class="form loginForm" name="loginForm" ng-controller="loginCtrl" ng-submit="login()">\r\n\r\n    <div class="titleContainer formTitleContainer loginFormTitleContainer">\r\n        <h2 class="title formTitle loginFormTitle">{{\'Login\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer loginContentContainer">\r\n        <div class="descriptionContainer loginDescriptionContainer">\r\n            <p class="description loginDescription">{{\'LogInMessage\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="errorContainer formErrorContainer loginFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="formElements loginFormElements">\r\n            <div class="inputContainer textInputContainer emailInputContainer">\r\n                <label for="login_username_{{$id}}" class="inputText" main-content="{{\'Email\' | translate}} (Required)" alt-content="{{\'Email\' | translate}} (Required)">\r\n                </label>\r\n                <span class="input textInput emailInput">\r\n                    <input type="email" floating-label name="username" id="login_username_{{$id}}" ng-model="session.username" autocomplete="email" maxlength="{{maxUserNameChar}}" required>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer passwordInputContainer">\r\n                <label for="login_password_{{$id}}" class="inputText">\r\n                    {{\'Password\' | translate}} (Required)\r\n                </label>\r\n                <span class="input textInput passwordInput">\r\n                    <input type="password" floating-label name="password" id="login_password_{{$id}}" ng-model="session.password" maxlength="{{maxUserPasswordChar}}" required>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer checkboxContainer rememberMeCheckboxContainer" ng-class="{active: rememberMe}">\r\n                <label for="login_remember_me_{{$id}}">\r\n                    <span class="inputText" ng-class="{selected: rememberMe}" id="rememberMeLabel_{{$id}}">\r\n                        {{\'RememberMe\' | translate}}\r\n                    </span>\r\n                </label>\r\n                <span class="input checkbox rememberMeCheckbox">\r\n                    <input type="checkbox" name="rememberMe" id="login_remember_me_{{$id}}" ng-vlaue="true" ng-model="rememberMe" highlight-parent-on-focus>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer formActionsContainer loginFormActionsContainer">\r\n            <button type="button" class="submitAction loginFormSubmitAction trk-login" ng-click="loginForm.$submit();trackErrors()">\r\n                <span>{{\'LogIn\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n\r\n\r\n    </div>\r\n    <forgot-password-modal>\r\n\r\n    <div class="formLinks loginFormLinks">\r\n        <a class="forgotPasswordLink" ui-sref="forgotPassword" ng-click="handleDialogUserAction();">\r\n            <span>{{\'Nav_ForgotPassword\' | translate}}</span>\r\n        </a>\r\n        <a href="#register" tabindex="0" class="registerLink" ng-click="register()" prevent-redirect aria-label="Register - Opens Dialog">\r\n            <span>{{\'Nav_Register\' | translate}}</span>\r\n        </a>\r\n    </div>\r\n\r\n</form>\r\n\r\n'),$templateCache.put("/web/app/account/register.html",'<form class="form registrationForm" ng-controller="accountRegisterCtrl" name="registrationForm" novalidate>\r\n\r\n\t<div class="titleContainer formTitleContainer registrationFormTitleContainer">\r\n\t\t<h2 class="title formTitle registrationFormTitle">{{\'Register\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer loginContentContainer">\r\n\t\t<div class="descriptionContainer registrationDescriptionContainer">\r\n\t\t\t<p class="description registrationDescription">{{\'RegisterMessage\' | translate}}</p>\r\n\t\t</div>\r\n\r\n\t\t<div class="errorContainer formErrorContainer registrationFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElementsContainer registrationFormElementsContainer">\r\n\t\t\t<div class="titleContainer registrationTitleContainer">\r\n\t\t\t\t<h3 class="title registrationTitle">{{\'Register_YourInfo\' | translate}}</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="formElements registrationFormElements">\r\n\t\t\t\t<div class="inputContainer textInputContainer firstNameInputContainer">\r\n                    <label for="register_first_name" class="inputText">{{\'FirstName\' | translate}} (Required)</label>\r\n\t\t\t\t\t<span class="input textInput firstNameInput">\r\n\t\t\t\t\t\t<input type="text" floating-label name="first_name" id="register_first_name" maxlength="30" ng-model="registration.first_name" validate-profanity form-reference="registrationForm.first_name" profanity-value="registration.first_name" allow-pattern="([0-9]|[A-Z]|\\s)" autocomplete="given-name" required>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="inputContainer textInputContainer lastNameInputContainer">\r\n                    <label for="register_last_name" class="inputText">{{\'LastName\' | translate}} (Required)</label>\r\n\t\t\t\t\t<span class="input textInput lastNameInput">\r\n\t\t\t\t\t\t<input type="text" floating-label name="last_name" id="register_last_name" maxlength="30" ng-model="registration.last_name" allow-pattern="([0-9]|[A-Z]|\\s)" autocomplete="last-name" required>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="inputContainer textInputContainer emailInputContainer">\r\n                    <label for="register_email" class="inputText">{{\'Email\' | translate}} (Required)</label>\r\n\t\t\t\t\t<span class="input textInput emailInput">\r\n\t\t\t\t\t\t<input type="email" floating-label name="email" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" id="register_email" ng-model="registration.email" maxlength="56" autocomplete="email" required sanitize="gdpr">\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<label class="inputContainer selectContainer countryInputContainer" ng-if="values.countries.length > 1" for="register_country">\r\n\t\t\t\t\t<span class="inputText">{{\'Country\' | translate}}</span>\r\n\t\t\t\t\t<span class="input select countrySelect">\r\n\t\t\t\t\t\t<select required ng-options="country.Key for country in values.countries" ng-model="registration.country" autocomplete="country" name="country" id="register_country" field-label="{{\'Country\' | translate}}">\r\n                        </select>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<div class="inputContainer textInputContainer phoneInputContainer">\r\n                    <label for="register_phone" class="inputText">{{\'Phone\' | translate}} (Required)</label>\r\n\t\t\t\t\t<span class="input textInput phoneInput">\r\n\t\t\t\t\t\t<input type="tel" floating-label name="phone" id="register_phone" ng-model="registration.phone" numbers-only telephone-number required autocomplete="tel" mask="{{phoneMask}}">\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="formElementsContainer marketingFormElementsContainer">\r\n\t\t\t\r\n\t\t\t<div class="formElements marketingFormElements">\r\n                <div class="inputContainer textInputContainer passwordInputContainer">\r\n                    <label for="register_password" class="inputText">{{\'Password\' | translate}} (Required)</label>\r\n                    <span class="input textInput passwordInput">\r\n                        <input type="password" floating-label name="password" id="register_password" ada-aria-describedby="passwordRequirementsLabel" ng-model="registration.password" autocomplete="new-password" maxlength="30" minlength="8" required>\r\n                    </span>\r\n                </div>\r\n                <label class="inputDescriptionContainer">\r\n                    <span id="passwordRequirementsLabel" class="inputDescription">{{\'Password_Reqs\' | translate}}</span>\r\n                </label>\r\n                <div class="inputContainer textInputContainer passwordConfirmInputContainer">\r\n                    <label for="register_password_confirm" class="inputText">{{\'PasswordConfirm\' | translate}} (Required)</label>\r\n                    <span class="input textInput passwordConfirmInput">\r\n                        <input type="password" floating-label name="password_confirm" id="register_password_confirm" ng-model="registration.password_confirm" form-input="registrationForm.password_confirm" ono-match="registration.password" autocomplete="new-password" maxlength="30" minlength="8" required>\r\n                    </span>\r\n                </div>\r\n               \r\n                <div class="titleContainer marketingTitleContainer">\r\n                    <h3 class="title marketingTitle">{{\'Register_Marketing\' | translate}}</h3>\r\n                </div>\r\n                <div class="formElements verifyAgeFormElements">\r\n                    <div class="inputContainer checkboxContainer newsletterContainer" ng-class="{active: registration.age_check_newsletter_subscription}">\r\n                        <label for="register_get_news_letters" id="getNewsLettersCheckboxLabel">\r\n                            <span class="inputText" ng-class="{selected: registration.age_check_newsletter_subscription}" ng-bind-html="(\'Register_AgeCheckAndNewsLetterSubscription\' | translate) + \' (Required)\'">\r\n                            </span>\r\n                        </label>\r\n                        <span class="input checkbox newsletterCheckbox">\r\n                            <input type="checkbox" name="getNewsLetters" required id="register_get_news_letters" ng-model="registration.age_check_newsletter_subscription" highlight-parent-on-focus>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="inputContainer checkboxContainer textMessageOptionContainer" ng-class="{active: registration.allow_sms}">\r\n                    <label class="inputText" ng-class="{selected: registration.allow_sms}" for="register_allow_sms" id="registerAllowSMSLabel">\r\n                        {{\'Register_TextMessages\' | translate}}\r\n                    </label>\r\n                    <span class="input checkbox textMessageOption">\r\n                        <input type="checkbox" id="register_allow_sms" name="allowSms" ng-model="registration.allow_sms" highlight-parent-on-focus>\r\n                    </span>\r\n                </div>\r\n\r\n                <div class="formElementsContainer verifyAgeFormElementsContainer">\r\n                    <div class="titleContainer verifyAgeTitleContainer">\r\n                        <h3 class="title verifyAgeTitle">{{\'AreYouAtLeast13\' | translate}}</h3>\r\n                    </div>\r\n                    <div class="formElements verifyAgeFormElements">\r\n                        <div class="inputContainer checkboxContainer verifyAgeContainer" ng-class="{active: registration.single_signon_acceptance}">\r\n                            <label for="register_over_thirteen" id="overThirteenLabel">\r\n                                <span class="inputText" ng-class="{selected: registration.single_signon_acceptance}" ng-bind-html="(\'Register_SingleSignonAcceptance\' | translate) + \' (Required)\'">\r\n                                </span>\r\n                            </label>\r\n                            <span class="input checkbox verifyAgeCheckbox">\r\n                                <input type="checkbox" name="overThirteen" id="register_over_thirteen" required ng-model="registration.single_signon_acceptance" highlight-parent-on-focus>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer formActionsContainer registrationFormActionsContainer">\r\n\t\t\t<button class="submitAction registerAction" type="submit" ng-click="registrationForm.$submit();trackErrors()">\r\n\t\t\t\t<span>{{\'Register_Button\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</form>\r\n'),$templateCache.put("/web/app/account/resetPassword.html",'<div class="form resetPasswordForm" ng-form="resetPasswordForm">\r\n    <div class="titleContainer formTitleContainer resetPasswordTitleContainer">\r\n        <h2 class="title formTitleContainer resetPasswordTitle">{{\'ResetPassword\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer resetPasswordContentContainer">\r\n        <div class="errorContainer formErrorContainer resetPasswordFormErrorContainer" ono-form-errors="resetPasswordForm" ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="formElements newPasswordFormElements">\r\n            <div class="inputContainer newPasswordInputContainer">\r\n                <label class="inputText" for="reset_newPassword_{{$id}}">{{\'Password\' | translate}}</label>\r\n                <span class="input textInput newPasswordInput">\r\n                    <input type="password" id="reset_newPassword_{{$id}}" name="newPassword" ng-model="resetPassword.newPassword" minlength="8" maxlength="30" required floating-label>\r\n                </span>\r\n            </div>\r\n\r\n            <div class="inputContainer confirmPasswordInputContainer">\r\n                <label class="inputText" for="reset_confPassword_{{$id}}">{{\'ConfirmPassword\' | translate}}</label>\r\n                <span class="input textInput confirmPasswordInput">\r\n                    <input type="password" id="reset_confPassword_{{$id}}" name="confirmPassword" ng-model="resetPassword.confirmPassword" ono-match="resetPassword.newPassword" form-input="resetPasswordForm.confirmPassword" required floating-label>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer formActionsContainer resetPasswordActionsContainer">\r\n            <button class="submitAction resetPasswordSubmitAction" name="accountResetPassword" type="submit" ng-click="resetPasswordForm.$submit()">\r\n                <span>{{\'Continue\' | translate}}</span>\r\n            </button>\r\n            <button class="backAction resetBackAction" ui-sref="home" ng-if="displaySize.isMobile">\r\n                <span>{{\'Back\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/address/address.display.html",'<span class="address">\r\n\t<span class="name" ng-if="address.first_name || address.last_name">{{address.first_name}} {{address.last_name}}</span>\r\n\t<span class="name" ng-if="address.name">{{address.name}}</span>\r\n\t<span class="company" ng-if="address.company">{{address.company}}</span>\r\n\t<span class="address1">{{address.address1}}</span>\r\n\t<span class="address2" ng-if="address.address2">{{address.address2}}</span>\r\n\t<span class="city state zip">{{address.city}}, {{address.state}} {{address.zip_code}}</span>\r\n\t\x3c!--<span class="phoneContainer">\r\n\t\t<span class="phone" ng-if="!displaySize.isMobile">{{address.phone | phone}}</span>\r\n\t\t<a ng-href="tel:{{address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t<span>{{address.phone | phone}}</span>\r\n\t\t</a>\r\n\t</span>--\x3e\r\n\t<span class="fax" ng-if="address.fax">{{\'Fax\' | translate}} {{address.fax | phone}}</span>\r\n</span>'),$templateCache.put("/web/app/address/address.edit.fields.html",'<form novalidate>\r\n    <div class="formElements addressEditFieldsFormElements">\r\n        <div class="inputContainer textInputContainer address1InputContainer">\r\n            <label for="address_edit_address1" class="inputText">{{\'Address\' | translate}} (Required)</label>\r\n            <span class="input textInput address1Input">\r\n                <input type="text" floating-label name="address1" maxlength="75" id="address_edit_address1" ng-model="address.address1" autocomplete="address-line1" required>\r\n            </span>\r\n        </div>\r\n        <div class="inputContainer textInputContainer address2InputContainer">\r\n            <label for="address_edit_address2" class="inputText">{{\'Address2\' | translate}}</label>\r\n            <span class="input textInput address2Input">\r\n                <input type="text" floating-label name="address2" id="address_edit_address2" maxlength="75" ng-model="address.address2" autocomplete="address-line2">\r\n            </span>\r\n        </div>\r\n        <div class="inputContainer textInputContainer cityInputContainer">\r\n            <label for="address_edit_city" class="inputText">{{\'City\' | translate}} (Required)</label>\r\n            <span class="input textInput cityInput">\r\n                <input type="text" floating-label name="city" id="address_edit_city" maxlength="75" ng-model="address.city" autocomplete="address-level2" required>\r\n            </span>\r\n        </div>\r\n        <div class="inputContainer selectContainer stateSelectContainer">\r\n            <label class="inputText" for="address_edit_state">{{\'State\' | translate}} (Required)</label>\r\n            <span class="input select stateSelect">\r\n                <select ng-options="state for state in values.states" ng-model="address.state" name="state" id="address_edit_state" autocomplete="address-level1" required></select>\r\n            </span>\r\n        </div>\r\n        <div class="inputContainer textInputContainer zipCodeInputContainer">\r\n            <label for="address_edit_zip_code" class="inputText">{{\'ZipCode\' | translate}} (Required)</label>\r\n            <span class="input textInput zipCodeInput">\r\n                <input name="zip_code" floating-label id="address_edit_zip_code" ng-model="address.zip_code" type="tel" numbers-only maxlength="5" ng-pattern="/^(\\d{5})$/" autocomplete="postal-code" required>\r\n            </span>\r\n        </div>\r\n        <div class="inputContainer selectContainer countrySelectContainer" ng-if="values.countries.length > 1">\r\n            <label class="inputText" for="address_edit_country">{{\'Country\' | translate}} (Required)</label>\r\n            <span class="input select countrySelect">\r\n                <select required ng-options="country.Key for country in values.countries track by country.Key" ng-model="address.country" autocomplete="country" name="country" id="address_edit_country"></select>\r\n            </span>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("/web/app/address/address.edit.html",'<div class="form addressForm" ng-form="addressForm">\r\n\t<div class="titleContainer formTitleContainer addressFormTitleContainer">\r\n\t\t<h2 class="title" ng-hide="address.id">{{\'AddAddress\' | translate}}</h2>\r\n\t\t<h2 class="title" ng-hide="!address.id">{{\'EditAddress\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer addressEditContentContainer">\r\n        <div class="errorContainer formErrorContainer addressFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="addressEditFieldsContainer" ng-include="\'/web/app/address/address.edit.fields.html\'"></div>\r\n\r\n\t\t<div class="actionsContainer formActionsContainer addressFormActionsContainer">\r\n\t\t\t<button class="saveAction saveAddressAction" type="submit" ng-click="addressForm.$submit()">\r\n\t\t\t\t<span>{{\'Save\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction cancelAddressAction" ng-click="$emit(\'cancel\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/address/address.list.html",'<div class="accountList addressList" ng-controller="addressListCtrl" autoscroll="false" ui-view>\r\n    <div class="titleContainer addressListTitleContainer">\r\n        <h2 class="title addressListTitle">{{\'SavedAddresses\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer addressListContentContainer">\r\n        <div class="messageContainer addressListMessageContainer" ng-if="!addresses.length">\r\n            <p class="message addressMessage">{{\'SavedAddressesEmpty\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="addressListDisplayContainer" ng-if="addresses.length">\r\n            <ul class="addressDisplayList">\r\n                <li class="addressDisplayListItem" ng-repeat="address in addresses">\r\n                    <div class="addressDisplayContainer" ng-include="\'/web/app/address/address.display.html\'"></div>\r\n                    <div class="actionsContainer listItemActionsContainer addressListItemActionsContainer">\r\n                        <button class="editAction editAddressAction" title="{{\'EditAddress\' | translate}}" ui-sref="editAddress({id:address.id})">\r\n                            <span>{{\'Edit\' | translate}}</span>\r\n                        </button>\r\n                        <button class="deleteAction deleteAddressAction" title="{{\'DeleteAddress\' | translate}}" ono-confirm="removeAddress(address)" ono-confirm-title="{{\'RemoveAddress_ConfirmTitle\' | translate}}" ono-confirm-message="{{\'RemoveAddress_ConfirmMessage\' | translate}}">\r\n                            <span>{{\'Delete\' | translate}}</span>\r\n                        </button>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class="actionsContainer newAddressActionsContainer">\r\n            <button class="addAction newAddressAddAction" ui-sref="editAddress">\r\n                <span>{{\'NewAddress\' | translate}}</span>\r\n            </button>\r\n\t\t\t<button class="backAction newAddressBackAction" ui-sref="home" ng-if="displaySize.isMobile">\r\n\t\t\t\t<span>{{\'Back\' | translate}}</span>\r\n\t\t\t</button>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/applyCoupon.html",'<div class="applyCoupon">\r\n\t<div class="formElements applyCouponFormElements">\r\n\t\t<div class="inputContainer textInputContainer applyCouponInputContainer">\r\n            <label for="apply_coupon_discount_code_{{$id}}" main-content="{{\'EnterCodeLabel\' | translate}}" alt-content="{{\'EnterCode\' | translate}}">{{\'EnterCode\' | translate}}</label>\r\n            <span class="input textInput applyCouponInput">\r\n\t\t\t\t<input required type="text" ng-model="model.discountCode" name="discountCode" maxlength="50" id="apply_coupon_discount_code_{{$id}}" floating-label>\r\n\t\t\t</span>\r\n            <div class="errorContainer formErrorContainer applyCouponFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0">\r\n            </div>\r\n\t\t</div>\r\n       \r\n\t</div>\r\n\r\n\t<div class="actionsContainer formActionsContainer applyCouponActionsContainer">\r\n\t\t<button type="button" class="submitAction applyCouponSubmitAction" ng-click="discountForm.$submit()">\r\n\t\t\t<span>{{\'Apply\' | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/cartItems.editItemInDialog.html",'<div class="cartItems">\r\n\t<div class="titleContainer cartItemsTitleContainer">\r\n\t\t<h2 class="title cartItemsTitle">{{\'YourCart\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<ul class="cartItemListContainer">\r\n\t\t<li class="orderItemContainer cartItemOrderItemContainer" ng-if="displaySize.isDesktop" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'" ono-edit-menu-in-dialog></li>\r\n\t\t<li class="orderItemContainer cartItemOrderItemContainer" ng-if="displaySize.isMobile" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'" ono-menu-item></li>\r\n\t</ul>\r\n</div>'),$templateCache.put("/web/app/cart/cartItems.html",'<div class="cartItems">\r\n    <div class="titleContainer cartItemsTitleContainer">\r\n        <h2 class="title cartItemsTitle">{{\'YourCart\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer cartItemsContentContainer" ng-if="model.cart.order_items.length">\r\n        <ul class="cartItemListContainer">\r\n            <li class="orderItemContainer cartItemOrderItemContainer" ng-class="oi.tags" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'" ng-if="!oi.hideInCart" ono-menu-item></li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="messageContainer emptyCartMessageContainer" ng-if="!model.cart.order_items.length">\r\n        <p class="message emptyCartMessage">{{\'CartEmpty\' | translate}}</p>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/cartItems.sidebar.editItemInDialog.html",'<div class="orderDetails">\r\n\t<div class="titleContainer orderDetailsTitleContainer">\r\n\t\t<h3 class="title orderDetailsTitle">{{\'OrderDetails\' | translate}}</h3>\r\n\t</div>\r\n\r\n\t<div class="contentContainer orderDetailsContentContainer">\r\n\t\t<div class="orderDetailsContent">\r\n\t\t\t<ul class="detailsContentList">\r\n\t\t\t\t<li class="orderItemContainer orderDetailsOrderItemContainer" ng-if="displaySize.isDesktop" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'" ono-edit-menu-in-dialog></li>\r\n\t\t\t\t<li class="orderItemContainer orderDetailsOrderItemContainer" ng-if="displaySize.isMobile" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'" ono-menu-item></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/cartItems.sidebar.html",'<div class="orderDetails">\r\n\t<div class="titleContainer orderDetailsTitleContainer">\r\n\t\t<h3 class="title orderDetailsTitle">{{\'OrderDetails\' | translate}}</h3>\r\n\t</div>\r\n\r\n\t<div class="contentContainer orderDetailsContentContainer">\r\n\t\t<div class="orderDetailsContent">\r\n\t\t\t<ul class="detailsContentList">\r\n                <li class="orderItemContainer orderDetailsOrderItemContainer" ng-class="oi.tags" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'" ng-if="!oi.hideInCart" ono-menu-item></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/cartReview.html",'<div class="form cartReviewForm" ng-form="checkoutDetailsForm">\r\n    <div class="cartReview">\r\n        <div class="titleContainer cartReviewTitleContainer">\r\n            <h1 class="title cartReviewTitle">{{\'OrderReview\' | translate}}</h1>\r\n        </div>\r\n\r\n        <div class="cartReviewContent">\r\n            <div class="cartReviewSection orderDetailsContainer" ui-view="fulfillmentInfo"></div>\r\n\r\n            <div class="cartReviewSection locationDetailsContainer" ui-view="restaurantInfo"></div>\r\n\r\n            <div class="cartReviewSection orderCommentContainer" ui-view="orderComments"></div>\r\n\r\n            <div class="cartReviewSection orderCartContainer" ui-view="cartItems"></div>\r\n\r\n            <div class="cartReviewSection eoComplimentaryContainer" ui-view="complimentaryItems" ng-if="model.cart.complimentary_items.length"></div>\r\n\r\n            <div class="cartReviewSection eoPricedContainer" ui-view="endOfOrder" ng-if="endOfOrder.length"></div>\r\n\r\n            <div class="cartReviewSection discountsLoyaltyContainer" ui-view="discountEntry"></div>\r\n\r\n            <div class="cartReviewSection orderTotalsContainer" ui-view="orderTotals"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="orderPaymentContainer" ng-if="showPaymentOptions()" ui-view="orderPayment"></div>\r\n\r\n    <div class="cartReviewGeneralActionsContainer" ui-view="orderGeneralActions"></div>\r\n</div>'),$templateCache.put("/web/app/cart/cartReview.sections.html",'<div class="form cartReviewForm cartReviewFormSections">\r\n    <div class="cartReview">\r\n        <div class="titleContainer cartReviewTitleContainer">\r\n            <h1 class="title cartReviewTitle">{{\'OrderReview\' | translate}}</h1>\r\n        </div>\r\n\r\n        <div class="cartReviewContent hasCartContainer" ng-form="checkoutDetailsForm">\r\n            <div class="checkoutSection orderInfoSection">\r\n\r\n                <div class="orderDetailsContainer" ui-view="fulfillmentInfo"></div>\r\n            </div>\r\n\r\n            <div class="checkoutSection locationDetailsSection">\r\n                <div class="locationDetailsContainer" ui-view="restaurantInfo"></div>\r\n            </div>\r\n\r\n            <div class="checkoutSection deliveryDetailsSection" ng-if="model.cart.order_setup.fulfillment_type == \'Delivery\'">\r\n                <div class="deliveryDetailsContainer" ui-view="deliveryInfo"></div>\r\n            </div>\r\n\r\n            <div class="dineRewardsBucketSection dineRewardsReviewContainer" ng-if="$root.featureFlags.dineRewards.allowDineRewardsReviewAccountLink && model.dineRewardsAccount">\r\n                <div class="dineRewardsBucketContainer" ui-view="dineRewardsBucket"></div>\r\n            </div>\r\n\r\n            <div class="cartReviewSection cartItemsSection">\r\n                <div class="cartItemsContainer" ui-view="cartItems"></div>\r\n            </div>\r\n\r\n            <div class="cartReviewSection eoComplimentarySection" ng-if="model.cart.complimentary_items.length">\r\n                <div class="eoComplimentaryContainer" ui-view="complimentaryItems"></div>\r\n            </div>\r\n\r\n            <div class="cartReviewSection eoPricedContainer" ng-if="showSuggestions" ui-view="endOfOrder"></div>\r\n\r\n        </div>\r\n        <div class="cartReviewSection orderTotalsSection">\r\n            <div ng-if="$root.featureFlags.dineRewards.allowDineRewardsReviewAccountLink" class="dineRewardsReviewContainer" ui-view="dineRewardsReview"></div>\r\n            <div class="discountsLoyaltyContainer" ui-view="discountEntry"></div>\r\n            <div class="orderTotalsContainer" ui-view="orderTotals"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="orderPaymentContainer" ng-show="model.cart.setup_complete && model.cart.order_items.length > 0">\r\n        <div class="orderPayment areYouUsingOrderPaymentContainer" ng-show="showCouponQuestion()" ui-view="orderPaymentAreYouUsing"></div>\r\n        <div class="orderPayment chooseOrderPaymentContainer" ng-if="!prePaymentQuestion || !isToday" ui-view="orderPaymentChoose"></div>\r\n        <div class="cartReviewGeneralActionsContainer" ui-view="orderGeneralActions"></div>\r\n    </div>\r\n\r\n</div>'),$templateCache.put("/web/app/cart/checkoutButtonOnly.html",'<div class="orderPathsActions">\r\n    <div class="actionsContainer orderPathsActionsContainer">\r\n        <button ng-if="showCheckout()" class="checkoutAction orderPathCheckoutAction trk-sidebarcheckout" ng-click="goToReview(\'top\')">\r\n            <span>{{\'Checkout\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/deliveryInfo.html",'<div class="restaurantInfo">\r\n\t<div class="titleContainer restaurantInfoTitleContainer">\r\n\t    <h2 class="title restaurantInfoTitle">{{\'DeliveryLocation\' | translate}}</h2>\r\n\t    <a prevent-redirect ng-click="deliveryNavigation()" href="#" class="changeAction changeLocationAction fulfillmentLocationChangeLocationAction" ng-if="model.cart.order_setup.fulfillment_details.delivery_address">\r\n\t        <span>{{\'Change\' | translate}}</span>\r\n\t    </a>\r\n\t</div>\r\n\r\n\t<div class="contentContainer restaurantInfoContentContainer">\r\n\t\t<div class="addressContainer">\r\n\t\t\t<span class="address">\r\n\t\t\t\t<span class="name">{{model.cart.order_setup.fulfillment_details.delivery_address.name}}</span>\r\n\t\t\t\t<span class="address1">{{model.cart.order_setup.fulfillment_details.delivery_address.address1}}</span>\r\n\t\t\t\t<span class="address2" ng-show="model.cart.order_setup.fulfillment_details.delivery_address.address2">{{model.cart.order_setup.fulfillment_details.delivery_address.address2}}</span>\r\n\t\t\t\t<span class="city state zip">{{model.cart.order_setup.fulfillment_details.delivery_address.city}}, {{model.cart.order_setup.fulfillment_details.delivery_address.state}} {{model.cart.order_setup.fulfillment_details.delivery_address.zip_code}}</span>\r\n\t\t\t\t<span class="phoneContainer">\r\n\t\t\t\t\t<span class="phone" ng-if="!displaySize.isMobile">{{model.cart.order_setup.fulfillment_details.delivery_address.phone | phone}}</span>\r\n\t\t\t\t\t<a ng-href="tel:{{model.cart.order_setup.fulfillment_details.delivery_address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t\t\t\t<span>{{model.cart.order_setup.fulfillment_details.delivery_address.phone | phone}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer restaurantInfoActionsContainer">\r\n\t\t\t<a class="editAction editOrderAction restaurantInfoEditOrderAction" ui-sref="orderSetup({id: model.cart.restaurant.id})" ng-click="$emit(\'done\')">\r\n\t\t\t\t<span>{{\'EditOrderDetails\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t\t<a class="continueAction goToMapAction" ng-href="https://maps.google.com/maps?daddr={{model.cart.order_setup.fulfillment_details.delivery_address.address1}}+{{model.cart.order_setup.fulfillment_details.delivery_address.city}}+{{model.cart.order_setup.fulfillment_details.delivery_address.state}}+{{model.cart.order_setup.fulfillment_details.delivery_address.zip_code}}" target="_blank">\r\n\t\t\t\t<span>{{\'Map\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/discountEntry.html",'<div class="discountsEntry">\r\n    <div class="contentContainer discountsContentContainer">\r\n        <div class="form discountsForm" ng-if="showDiscountForm && !model.cart.restaurant.isExpress" ng-form="discountForm" ng-submit="applyDiscount()">\r\n            <div class="titleContainer discountsTitleContainer">\r\n                <h2 class="title discountsTitle">{{\'Discounts_Title\' | translate}}</h2>\r\n            </div>\r\n            <div class="descriptionContainer discountsDescriptionContainer">\r\n                <p class="description discountsDescription">{{\'Discounts_Message\' | translate}}</p>\r\n            </div>\r\n\r\n            <div class="applyCouponContainer" ng-include="\'/web/app/cart/applyCoupon.html\'"></div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/endOfOrderItems.complimentary.html",'<div class="form eooiComplimentaryForm" ng-form="complimentaryForm">\r\n    <div class="titleContainer formTitleContainer eooiComplimentaryFormTitleContainer">\r\n        <h2 class="title formTitle complimentaryFormTitle">{{\'ComplimentaryItemsLabel\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer eooiComplimentaryContentContainer">\r\n        <div class="formErrorContainer eooiComplimentaryFormErrorContainer"></div>\r\n        <div class="eooiComplimentaryContent">\r\n            <div class="complimentaryItem" ng-repeat="item in model.cart.complimentary_items">\r\n                <div class="titleContainer complimentaryItemTitleContainer" id="complimentaryItemTitle_{{$index}}">\r\n                    <h4 class="title complimentaryItemTitle">{{item.title | translate}} (Required)</h4>\r\n                </div>\r\n                <div class="complimentaryItemFormElements">\r\n                    <fieldset class="fieldset" radiogroupvalidation data-radio-group data-radio-group-name="{{item.title}}">\r\n                        <div class="inputContainer radioContainer trk-complimentaryitemyes" ng-class="{active: item.quantity > 0}">\r\n                            <label for="approve_complimentary_yes_{{$index}}">\r\n                                <span class="inputText" ng-class="{selected: item.quantity > 0}">\r\n                                    {{\'Yes\' | translate}}\r\n                                </span>\r\n                            </label>\r\n                            <span class="input radio yesRadio">\r\n                                <input type="radio" ng-model="item.quantity" value="1" id="approve_complimentary_yes_{{$index}}" name="{{\'approve_complimentary_\' + $index}}" ng-change="updateComplimentaryItem(item)" data-radio-group-name="{{item.title}}" highlight-parent-on-focus required>\r\n                            </span>\r\n                        </div>\r\n                        <div class="inputContainer radioContainer trk-complimentaryitemno" ng-class="{active: item.quantity == 0}">\r\n                            <label for="approve_complimentary_no_{{$index}}">\r\n                                <span class="inputText" ng-class="{selected: item.quantity == 0}">\r\n                                    {{\'No\' | translate}}\r\n                                </span>\r\n                            </label>\r\n                            <span class="input radio noRadio">\r\n                                <input type="radio" ng-model="item.quantity" value="0" id="approve_complimentary_no_{{$index}}" name="{{\'approve_complimentary_\' + $index}}" ng-change="updateComplimentaryItem(item)" data-radio-group-name="{{item.title}}" highlight-parent-on-focus required>\r\n                            </span>\r\n                        </div>\r\n                    </fieldset>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/endOfOrderItems.priced.html",'<div class="addOn eooiPriced">\r\n\t<div class="titleContainer addOnTitleContainer eooiPricedTitleContainer">\r\n\t\t<h2 class="title addOnTitle eooiPricedTitle">{{\'MayWeSuggest\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="addOnItemContentContainer eooiContentContainer">\r\n\t\t<ul class="addOnItemList eooItemList">\r\n\t\t\t<li class="addOnItemListItem eooItemListItem" ng-class="{active: menuItem.showConfiguration}" ng-repeat="menuItem in endOfOrder | filter:doesntContain" ng-include="\'/web/app/menu/menuItem.html\'" ng-controller="endOfOrderCtrl"></li>\r\n\t\t</ul>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/fulfillmentAddress.html",'\r\n    <div class="fulfillmentAddress" ng-if="model.cart.order_setup.fulfillment_type == \'Delivery\'">\r\n        <div class="titleContainer fulfillmentAddressTitleContainer">\r\n            <h3 class="title fulfillmentAddressTitle">{{\'DeliveryLocation\' | translate}}</h3>\r\n            <a ng-if="model.cart.setup_complete" class="changeAction changeTimeAction fulfillmentTimeChangeTimeAction" ng-click="goToDelivery()" href="#changeDelivery" prevent-redirect>\r\n                <span>{{\'Change\' | translate}}</span>\r\n            </a>\r\n        </div>\r\n\r\n        <div class="contentContainer fulfillmentAddressContentContainer">\r\n            <div class="fulfillmentAddressContent" ng-if="deliveryAddress()">\r\n                <div class="addressContainer">\r\n                    <span class="address">\r\n                        <span>{{deliveryAddress().address1}}</span>\r\n                        <span>{{deliveryAddress().address2}}</span>\r\n                        <span>{{deliveryAddress().city}}, {{deliveryAddress().state}} {{deliveryAddress().zip_code}}</span>\r\n                        <span>\r\n                            <span class="phone" ng-if="!displaySize.isMobile">{{deliveryAddress().phone | phone}}</span>\r\n                            <a ng-href="tel:{{deliveryAddress().phone}}" class="phone" ng-if="displaySize.isMobile">\r\n                                <span>{{deliveryAddress().phone | phone}}</span>\r\n                            </a>\r\n                        </span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="actionsContainer fulfillmentAddressActionsContainer">\r\n            </div>\r\n            <div class="notSet" ng-if="!deliveryAddress()">Not Set</div>\r\n        </div>\r\n    </div>\r\n'),$templateCache.put("/web/app/cart/fulfillmentInfo.html",'<div class="fulfillmentInfo">\r\n    <div class="titleContainer fullfilmentInfoTitleContainer">\r\n        <h2 class="title fullfilmentInfoTitle">{{\'OrderDetails\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer fulfillmentInfoContentContainer">\r\n        <div class="fulfillmentContent fulfillmentInfoDateTime">\r\n            <div class="messageContainer fulfillmentTypeDeliveryMessageContainer">\r\n\r\n                <div fulfillment-time-2 fulfillment-type="model.cart.order_setup.fulfillment_type" fulfillment-date-type="model.cart.isAsap ? \'ASAP\' : \'Specific\'" show-actual-time="false" service-time="{ serviceTimeRangeLower : model.cart.order_setup.serviceTimeRangeLower, serviceTimeRangeUpper : model.cart.order_setup.serviceTimeRangeUpper, leadTime : model.cart.order_setup.lead_time } " date-placed="" date-expected="model.cart.order_setup.fulfillment_date"></div>\r\n\r\n                <div class="deliveryAddress addressContainer info" ng-if="model.cart.order_setup.fulfillment_type == \'Delivery\'">\r\n                    <span>To:</span>\r\n                    <span class="address">\r\n                        <span class="address1">{{model.cart.order_setup.fulfillment_details.delivery_address.address1}}</span>\r\n                        <span class="address2" ng-show="model.cart.order_setup.fulfillment_details.delivery_address.address2">{{model.cart.order_setup.fulfillment_details.delivery_address.address2 }}</span>\r\n                        <span class="city state zip">{{model.cart.order_setup.fulfillment_details.delivery_address.city }}, {{model.cart.order_setup.fulfillment_details.delivery_address.state }} {{model.cart.order_setup.fulfillment_details.delivery_address.zip_code }}</span>\r\n                    </span>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer fulfillmentInfoActionsContainer">\r\n            <a class="editAction fulfillmentInfoEditAction" ui-sref="orderSetup({id: model.cart.restaurant.id})" ng-click="$emit(\'done\')">\r\n                <span>{{\'EditOrderDetails\' | translate}}</span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/fulfillmentLocation.html",'<div class="fulfillmentLocation">\r\n\t<div class="titleContainer fulfillmentLocationTitleContainer">\r\n\t    <h3 class="title fulfillmentLocationTitle">{{ (isDelivery() ? \'RestaurantLocation\' : \'PickUpLocation\') | translate}}</h3>\r\n        <a prevent-redirect ng-click="changeLocation()" href="#" class="changeAction changeLocationAction fulfillmentLocationChangeLocationAction" ng-if="model.cart.restaurant && !displayCallPopup">\r\n\t\t\t\t<span>{{\'ChangeLocation\' | translate}}</span>\r\n\t\t</a>\r\n        <a prevent-redirect class="restaurant-number fulfillmentLocationChangeLocationAction" ng-click="showDialog(\'restaurant.number\')" tabindex="0" ng-if="model.cart.restaurant && displayCallPopup">\r\n            <span>{{ \'Header_View_Number\' | translate}} </span>\r\n        </a>\r\n        <a prevent-redirect ng-click="changeLocation()" href="#" class="selectAction selectLocationAction fulfillmentLocationSelectLocationAction" ng-if="!model.cart.restaurant">\r\n            <span>{{\'SelectLocation\' | translate}}</span>            \r\n        </a>\r\n        \r\n\t</div>\r\n\r\n\t<div class="contentContainer fulfillmentLocationContentContainer">\r\n\t\t<div class="fulfillmentLocationContent" ng-if="model.cart.restaurant">\r\n            <div class="addressContainer">\r\n                <span class="address">\r\n                    <span>{{model.cart.restaurant.address.address1}}</span>\r\n                    <span>{{model.cart.restaurant.address.city}}, {{model.cart.restaurant.address.state}} {{model.cart.restaurant.address.zip_code}}</span>\r\n                    <span>\r\n                        <span class="phone" ng-if="!displaySize.isMobile">{{model.cart.restaurant.address.phone | phone}}</span>\r\n                        <a ng-href="tel:{{model.cart.restaurant.address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n                            <span>{{model.cart.restaurant.address.phone | phone}}</span>\r\n                        </a>\r\n                    </span>\r\n                </span>\r\n            </div>\r\n\t\t</div>\r\n        <div ng-if="model.cart.restaurant.isPickUpOnly">\r\n            <strong>\r\n                {{\'PickUp_Only\'|translate}}\r\n            </strong>\r\n        </div>\r\n\t\t<div class="actionsContainer fulfillmentLocationActionsContainer">\t\t\t\r\n\t\t</div>\r\n        <div class="notSet" ng-if="!model.cart.restaurant">Not Set</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/fulfillmentTime.html",'<div class="fulfillmentTime">\r\n    <div class="titleContainer fulfillmentTimeTitleContainer">\r\n        \r\n        <h3 class="title fulfillmentTimeTitle">{{ (isDelivery() ? \'DeliveryTime\' : \'PickUpTime\') | translate}}</h3>\r\n        <a class="changeAction changeTimeAction fulfillmentTimeChangeTimeAction" ui-sref="orderSetup({id: model.cart.restaurant.id})" ng-if="model.cart.setup_complete">\r\n            <span>{{\'ChangeTime\' | translate}}</span>\r\n        </a>\r\n        <a class="selectAction selectTimeAction fulfillmentTimeSelectTimeAction" ui-sref="home" ng-if="!model.cart.setup_complete">\r\n            <span>{{\'ChangeTime\' | translate}}</span>\r\n        </a>\r\n\r\n    </div>\r\n\r\n\t<div class="contentContainer fulfillmentTimeContentContainer">\r\n\t    <div class="fulfillmentTimeContent" ng-if="model.cart.setup_complete">\r\n\t        <div fulfillment-time-2 fulfillment-type="model.cart.order_setup.fulfillment_type" fulfillment-date-type="model.cart.isAsap ? \'ASAP\' : \'Specific\'" show-actual-time="false" service-time="{ serviceTimeRangeLower : model.cart.order_setup.serviceTimeRangeLower, serviceTimeRangeUpper : model.cart.order_setup.serviceTimeRangeUpper, leadTime : model.cart.order_setup.lead_time } " date-placed="" date-expected="model.cart.order_setup.fulfillment_date">\r\n\t        </div>\r\n\t    </div>\r\n\r\n\t    <div class="actionsContainer fulfillmentTimeActionsContainer">\t\t\r\n\t\t</div>\r\n        <div class="notSet" ng-if="!model.cart.setup_complete">Not Set</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/microCart.html",'<div class="microcart">\r\n\t<div class="microcartContent">\r\n\t\t<p class="microcartSummary">\r\n\t\t\t<span class="itemCount">{{model.cart.order_items | orderItemTotal}}</span>\r\n\t\t\t<span class="items">{{\'MicroCart_Items\' | translate}}</span>\r\n\t\t\t<span class="total">{{model.cart.totals.subtotal | money}}</span>\r\n\t\t</p>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer microcartActionsContainer">\r\n\t\t<button class="checkoutAction microcartCheckoutAction" ui-sref="review" ng-click="sendCheckoutGAData(\'top\');" ng-disabled="!model.cart.order_items.length">\r\n\t\t\t<span>{{\'Nav_Checkout\' | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/orderComments.html",'<div class="orderComments">\r\n\t<div class="titleContainer orderCommentsTitleContainer">\r\n\t\t<h2 class="title orderCommentsTitle">{{\'OrderInstructions\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="formElements orderCommentsFormElements">\r\n\t\t<label class="inputContainer textareaContainer orderCommentsTextareaContainer">\r\n\t\t\t<span class="input textarea orderCommentsTextarea">\r\n\t\t\t\t<textarea class="orderComments" name="order_comments" placeholder="{{\'OrderInstructions_Message\' | translate}}" ng-model="model.cart.order_setup.fulfillment_details.order_comments"></textarea>\r\n\t\t\t</span>\r\n\t\t</label>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/orderGeneralActions.html",'<div class="actionsContainer orderGeneralActionsContainer">\r\n    <button class="addAction orderGeneralAddAction" ng-click="gotoMenu()">\r\n\t\t<span>{{\'Cart_AddMoreItems\' | translate}}</span>\r\n\t</button>\r\n\t<button class="saveAction orderGeneralSaveAction" ng-click="showDialog(\'order.save\')" ng-if="loggedIn && model.cart.order_items.length > 0" ng-show="hideSavedOrder">\r\n\t\t<span>{{\'Cart_SaveOrder\' | translate}}</span>\r\n\t</button>\r\n\t\r\n</div>'),$templateCache.put("/web/app/cart/orderPathActions.html",'<div class="orderPathsActions">\r\n\t<div class="actionsContainer orderPathsActionsContainer">\r\n            <button ng-if="showCheckout()" class="checkoutAction orderPathCheckoutAction trk-sidebarcheckout" ng-click="goToReview(\'bottom\')">\r\n                <span>{{\'Checkout\' | translate}}</span>\r\n            </button>\r\n\t\t<button class="cancelAction orderPathCancelAction" ono-confirm="cancelOrder()" ono-confirm-title="{{ \'CancelOrder_ConfirmTitle\' | translate }}" ono-confirm-message="{{ \'CancelOrder_ConfirmMessage\' | translate }}">\r\n\t\t\t<span>{{\'Cancel Order & Start Over\' | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/orderPayment.areYouUsing.html",'<div class="orderPaymentAreYouUsing">\r\n\t<div class="titleContainer areYouUsingTitleContainer">\r\n\t\t<h2 class="title orderPaymentTitle areYouUsingTitle">{{\'AreYouUsingCoupon\' | translate}}</h2>\r\n\t</div>\r\n\t<div class="actionsContainer orderPaymentActionsContainer areYouUsingActionsContainer">\r\n        <button class="yesAction areYouUsingYesAction trk-couponyes" ng-click="useCouponOrBonusCard(true)">\r\n            <span>{{\'Yes\' | translate}}</span>\r\n        </button>\r\n\t\t<span class="or">{{\'Or\' | translate}}</span>\r\n        <button class="noAction areYouUsingNoAction trk-couponno" ng-click="useCouponOrBonusCard(false)">\r\n            <span>{{\'No\' | translate}}</span>\r\n        </button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/orderPayment.choose.html",'<div class="orderPaymentChoose">\r\n    <div class="titleContainer orderPaymentTitleContainer chooseOrderPaymentTitleContainer">\r\n        <h2 class="title orderPaymentTitle chooseOrderPaymentTitle">{{\'ChoosePaymentMethod\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="actionsContainer orderPaymentActionsContainer chooseOrderPaymentActionsContainer">\r\n\r\n        <button class="payOnlineAction chooseOrderPaymentPayOnlineAction trk-checkoutpayonline" focus-selected-content ng-click="payOnline()" ng-if="showPayOnline">\r\n            <span>{{\'Payment_PayOnline\' | translate}}</span>\r\n        </button>\r\n\r\n        <span class="or" ng-if="showPayOnline">{{\'Or\' | translate}}</span>\r\n\r\n        <button class="payAtRestaurantAction chooseOrderPaymentPayAtRestaurantAction trk-checkoutpayatrestaurant" ng-click="payAtRestaurant()" ng-if="showPayAtRestaurant">\r\n            <span ng-if="model.cart.order_setup.fulfillment_type != \'Delivery\'">{{\'Payment_PayAtRestaurant\' | translate}}</span>\r\n            <span ng-if="model.cart.order_setup.fulfillment_type == \'Delivery\'">{{\'Payment_PayOnDelivery\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/orderTotals.applyCoupon.html",'<div class="orderTotals orderTotalsApplyCoupon">\r\n    <div class="titleContainer orderTotalsTitleContainer">\r\n        <h3 class="title orderTotalsTitle">{{\'OrderTotal\' | translate}}</h3>\r\n    </div>\r\n\r\n    <div class="contentContainer orderTotalsContentContainer">\r\n        <div class="orderTotalsContent">\r\n            <div class="orderTotalsLineContainer" ng-include="\'/web/app/cart/order_totals.line_items.html\'"></div>\r\n\r\n            <div class="form applyCouponForm" ng-if="showPromoCode && !model.cart.restaurant.isExpress" ng-form="discountForm" ng-submit="applyDiscount()">\r\n                <div class="applyCouponContainer" ng-include="\'/web/app/cart/applyCoupon.html\'"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/orderTotals.html",'<div class="orderTotals">\r\n\t<div class="titleContainer orderTotalsTitleContainer">\r\n\t\t<h2 class="title orderTotalsTitle">{{\'OrderTotal\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="orderTotalsContent">\r\n\t\t<div class="orderTotalsLineContainer" ng-include="\'/web/app/cart/order_totals.line_items.html\'"></div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/cart/order_item.details.content.html",'<span class="oiTitleContainer oiComboSelectionTitleContainer" ng-if="isCombo && oi.title">\r\n    <span class="oiTitle oiComboSelectionTitle">{{oi.title}}</span>\r\n</span>\r\n\r\n<span class="optionGroupContainer" ng-if="oi.option_groups">\r\n    <span class="oiog" ng-repeat="og in oi.option_groups" ng-if="og.options.length">\r\n        <span class="oio" ng-if="o.option_items.length" ng-repeat="o in og.options" ng-include="\'/web/app/cart/order_item.options.html\'"></span>\r\n    </span>\r\n</span>\r\n\r\n<span class="toppingsContainer" ng-if="oi.toppings.length">\r\n    <span class="titleContainer toppingsTitleContainer">\r\n        <span class="title toppingsTitle">{{\'Toppings\' | translate}}:</span>\r\n    </span>\r\n    <span class="contentContainer toppingsContentContainer">\r\n        <span class="oits" ng-show="full.length > 0">\r\n            <span class="titleContainer oitTitleContainer" ng-if="firstHalf.length > 0 || secondHalf.length > 0">\r\n                <span class="oitTitle">{{\'Topping_Full\' | translate}}:</span>\r\n            </span>\r\n            <span class="contentContainer oitContentContainer">\r\n                <span class="oit" ng-repeat="t in full = (oi.toppings | filter:{first_half:true, second_half:true})">\r\n                    {{t.title}}<span class="double" ng-if="t.doubled">({{\'Topping_Double\' | translate}})</span><span class="comma">,</span>\r\n                </span>\r\n            </span>\r\n        </span>\r\n\r\n        <span class="oits oitsHalf firstHalf" ng-if="firstHalf.length > 0">\r\n            <span class="titleContainer oitTitleContainer">\r\n                <span class="title oitTitle">{{\'Topping_FirstHalf\' | translate}}:</span>\r\n            </span>\r\n            <span class="contentContainer oitContentContainer">\r\n                <span class="oit" ng-repeat="t in firstHalf = (oi.toppings | filter:{first_half:true, second_half:false})">\r\n                    {{t.title}}<span class="double" ng-if="t.doubled">({{\'Topping_Double\' | translate}})</span><span class="comma">,</span>\r\n                </span>\r\n            </span>\r\n        </span>\r\n\r\n        <span class="oits oitsHalf secondHalf" ng-show="secondHalf.length > 0">\r\n            <span class="titleContainer oitTitleContainer">\r\n                <span class="title oitTitle">{{\'Topping_SecondHalf\' | translate}}:</span>\r\n            </span>\r\n            <span class="contentContainer oitContentContainer">\r\n                <span class="oit" ng-repeat="t in secondHalf = (oi.toppings | filter:{first_half:false, second_half:true})">\r\n                    {{t.title}}<span class="double" ng-if="t.doubled">({{\'Topping_Double\' | translate}})</span><span class="comma">,</span>\r\n                </span>\r\n            </span>\r\n        </span>\r\n    </span>\r\n</span>'),$templateCache.put("/web/app/cart/order_item.details.html",'<div class="orderItemDetails">\r\n    <span class="orderItemGroupContainer" ng-if="oi.recipient || oi.comments">\r\n        <span class="oiUserInput recipient" ng-if="oi.recipient">\r\n            <span class="oiTitle oiRecipientTitle">{{\'Recipient\' | translate}}:</span>\r\n            <span class="oiText oiRecipientText">{{oi.recipient}}</span>\r\n        </span>\r\n        <span class="oiUserInput comments" ng-if="oi.comments">\r\n            <span class="oiTitle oiCommentsTitle">{{\'Comments\' | translate}}:</span>\r\n            <span class="oiText oiCommentsText">{{oi.comments}}</span>\r\n        </span>\r\n    </span>\r\n\r\n    <span class="oiContentContainer">\r\n        <span class="oiContent" ng-if="!oi.selections"><order-item-details-content oi="oi" is-combo="false"></order-item-details-content></span>\r\n        <span class="oiContent" ng-if="oi.selections" ng-repeat="selection in oi.selections"><order-item-details-content oi="oi" is-combo="true"></order-item-details-content></span>\r\n    </span>\r\n</div>'),$templateCache.put("/web/app/cart/order_item.html",'<div class="orderItem" ng-class="{noOptions: oi.option_groups.length == 0}" ng-if="displaySize.isDesktop">\r\n    <div class="orderItemMainInfoContainer">\r\n        <div class="oiMainInfo name">\r\n            <a href="#gotoMenuItem" tabindex="0" ng-bind-html="oi.title" ng-click="gotoMenuItem(oi)" prevent-redirect></a>\r\n            <span ng-if="oi.nickname" ng-bind-html="\'(\' + oi.nickname + \')\'"></span>\r\n        </div>\r\n\r\n        <div class="oiMainInfo quantity">\r\n            <span class="text">{{\'Qty\' | translate}}:</span>\r\n            <span class="number">{{oi.quantity}}</span>\r\n        </div>\r\n\r\n        <div class="oiMainInfo price" ng-class="{discounted: oi.discount > 0}">\r\n            <span class="priceOrig">{{oi.price * oi.quantity | money}}</span>\r\n            <span class="priceNew" ng-if="oi.discount">{{(oi.price * oi.quantity) - oi.discount | money}}</span>\r\n        </div>\r\n\r\n        <div class="actionsContainer listItemActionsContainer orderItemActionsContainer">\r\n            <button class="editAction orderItemEditAction" ng-click="gotoMenuItem(oi)" prevent-redirect aria-label="{{\'Edit item - \'+ oi.title}}">\r\n                <span>{{\'Edit\' | translate}}</span>\r\n            </button>\r\n            <button class="deleteAction orderItemDeleteAction" ono-confirm="removeMenuItem(oi)" ono-confirm-title="{{\'RemoveMenuItem_ConfirmTitle\' | translate}}" ono-confirm-message="{{\'RemoveMenuItem_ConfirmMessage\' | translate}}" aria-label="{{\'Remove item - \'+ oi.title}}">\r\n                <span>{{\'Delete\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="oiOptions" ng-if="oi.option_groups.length > 0 || oi.toppings.length > 0 || oi.recipient || oi.comments || oi.selections">\r\n        <div class="actionsContainer expandOptionActionContainer">\r\n            <a href="#orderItemDetails" tabindex="0" prevent-redirect class="expandOptionsAction" aria-label="{{\'Collapse/Expand Details for \' + oi.title}}" aria-expanded="{{orderItemDetails || false}}" aria-controls="orderItemDetailsContainer_{{oi.id}}" ng-class="{expanded: orderItemDetails}" ng-click="orderItemDetails = !orderItemDetails">\r\n                <span>{{\'Options\' | translate}}</span>\r\n            </a>\r\n        </div>\r\n        <div class="orderItemDetailsContainer" role="region" id="orderItemDetailsContainer_{{oi.id}}" ng-show="orderItemDetails" ng-include="\'/web/app/cart/order_item.details.html\'"></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<div class="orderItem" ng-class="{noOptions: oi.option_groups.length == 0}" ng-if="displaySize.isMobile">\r\n    <div href="#orderItemDetails" class="orderItemMainInfoContainer" prevent-redirect ng-class="{open: orderItemDetails}" ng-click="orderItemDetails = !orderItemDetails">\r\n        <div class="oiMainInfo name">\r\n            <a href="#gotoMenuItem" tabindex="0" prevent-redirect ng-bind-html="oi.title" ng-click="gotoMenuItem(oi)"></a>\r\n            <span ng-if="oi.nickname" ng-bind-html="\'(\' + oi.nickname + \')\'"></span>\r\n        </div>\r\n\r\n        <div class="oiMainInfo quantity">\r\n            <span class="text">{{\'Qty\' | translate}}:</span>\r\n            <span class="number">{{oi.quantity}}</span>\r\n        </div>\r\n\r\n        <div class="oiMainInfo price" ng-class="{discounted: oi.discount > 0}">\r\n            <span class="priceOrig">{{oi.price * oi.quantity | money}}</span>\r\n            <span class="priceNew" ng-if="oi.discount">{{(oi.price * oi.quantity) - oi.discount | money}}</span>\r\n        </div>\r\n        <a href="#orderItemDetails" tabindex="0" class="expandOptionsActionArrow" prevent-redirect aria-label="{{\'Collapse/Expand Details for \' + oi.title}}" aria-expanded="{{orderItemDetails || false}}" aria-controls="orderItemDetailsMobileContainer_{{oi.id}}" ng-class="{open: orderItemDetails}" ng-click="orderItemDetails = !orderItemDetails">\r\n\r\n        </a>\r\n    </div>\r\n\r\n    <div class="oiOptions" ng-show="orderItemDetails" role="region" id="orderItemDetailsMobileContainer_{{oi.id}}">\r\n        <div class="orderItemDetailsContainer" ng-if="oi.option_groups.length > 0 || oi.toppings.length > 0 || oi.recipient || oi.comments || oi.selections" ng-include="\'/web/app/cart/order_item.details.html\'"></div>\r\n\r\n        <div class="actionsContainer listItemActionsContainer orderItemActionsContainer">\r\n            <button href="#gotoMenuItem" prevent-redirect class="editAction orderItemEditAction" ng-click="gotoMenuItem(oi)" aria-label="{{\'Edit item \'+ oi.title}}">\r\n                <span>{{\'Edit\' | translate}}</span>\r\n            </button>\r\n            <button class="deleteAction orderItemDeleteAction" ono-confirm="removeMenuItem(oi)" ono-confirm-title="{{\'RemoveMenuItem_ConfirmTitle\' | translate}}" ono-confirm-message="{{\'RemoveMenuItem_ConfirmMessage\' | translate}}" aria-label="{{\'Remove item \'+ oi.title + \' from Cart - Opens Dialog\'}}">\r\n                <span>{{\'Delete\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/order_item.options.html",'<span class="oioiText">{{(o.option_items.length === 1 && o.option_items[0].text && o.option_items[0].title !== "") ? o.option_items[0].title : o.title}}: </span>\r\n    <span class="oioi" ng-repeat="oi in o.option_items" ng-if="oi.quantity > 0">\r\n        <span class="titleContainer oiTitleContainer">\r\n            <span class="oiTitle">{{oi.text || oi.title}}<span ng-if="!$last">,</span></span>\r\n            <span ng-show="oi.quantity > 1">({{oi.quantity}}X)</span>\r\n        </span>\r\n        <span class="oiso oio" ng-if="o.option_items.length" ng-repeat="o in oi.options" ng-include="\'/web/app/cart/order_item.options.html\'"></span>\r\n    </span>'),$templateCache.put("/web/app/cart/order_totals.line_items.html",'<div class="orderTotalsLineItems">\r\n    <div class="subtotal lineItem">\r\n        <span class="text">{{\'Subtotal\' | translate}}</span><span class="price">{{model.cart.totals.subtotal | money}}</span>\r\n    </div>\r\n\r\n    <div class="tip lineItem" ng-if="model.cart.totals.tip">\r\n        <span class="text">{{\'Tip\' | translate}}</span><span class="price">{{model.cart.totals.tip | money}}</span>\r\n    </div>\r\n\r\n    <div class="deliveryFee lineItem" ng-if="model.cart.totals.delivery_fee">\r\n        <span class="text">{{\'DeliveryFee\' | translate}}</span><span class="price">{{model.cart.totals.delivery_fee | money}}</span>\r\n    </div>\r\n\r\n    <div class="discountsContainer" ng-if="model.cart.totals.discounts">\r\n        <div class="discount" ng-repeat="discount in model.cart.totals.discounts">\r\n            <div class="actionsContainer discountActionsContainer" ng-if="!discount.is_auto_apply" ng-hide="\'confirmation\' | includedByState">\r\n                <button class="removeAction removeDiscountAction" ng-click="removeDiscount(discount)" aria-label="{{\'Remove - \'+ discount.title}}"></button>\r\n            </div>\r\n            <div class="lineItem discountLineItem">\r\n                <span class="text">{{\'DiscountTitle\' | translate: discount.title}}</span><span class="price">(-{{discount.discount_amount | money}})</span>\r\n                <span class="discountFinePrint" ng-if="discount.fine_print">{{discount.fine_print}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="tax lineItem" ng-if="model.cart.totals.taxes" ng-repeat="(key, value) in model.cart.totals.taxes">\r\n        <span class="text">{{key | translate}}</span><span class="price">{{value | money}}</span>\r\n    </div>\r\n\r\n    <div class="grandTotal lineItem">\r\n        <span class="text" ng-bind-html="\'Total\' | translate"></span><span class="price">{{model.cart.totals.grand_total | money}}</span>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/cart/restaurantInfo.html",'<div class="restaurantInfo">\r\n\t<div class="titleContainer restaurantInfoTitleContainer">\r\n\t    <h2 class="title restaurantInfoTitle">{{ (isDelivery() ? \'RestaurantLocation\' : \'PickUpLocation\') | translate}}</h2>\r\n        <a prevent-redirect ng-click="changeLocation()" href="#" class="changeAction changeLocationAction fulfillmentLocationChangeLocationAction" ng-if="model.cart.restaurant && !displayCallPopup">\r\n            <span>{{\'ChangeLocation\' | translate}}</span>\r\n        </a>\r\n        <a prevent-redirect class="restaurant-number changeLocationAction fulfillmentLocationChangeLocationAction" ng-click="showDialog(\'restaurant.number\')" tabindex="0" ng-if="model.cart.restaurant && displayCallPopup">\r\n            <span>{{ \'Header_View_Number\' | translate}} </span>\r\n        </a>\r\n\t</div>\r\n\r\n\t<div class="contentContainer restaurantInfoContentContainer">\r\n\t\t<div class="addressContainer">\r\n\t\t\t<span class="address">\r\n\t\t\t\t<span class="name">{{model.cart.restaurant.name}}</span>\r\n\t\t\t\t<span class="address1">{{model.cart.restaurant.address.address1}}</span>\r\n\t\t\t\t<span class="address2" ng-show="model.cart.restaurant.address.address2">{{model.cart.restaurant.address.address2}}</span>\r\n\t\t\t\t<span class="city state zip">{{model.cart.restaurant.address.city}}, {{model.cart.restaurant.address.state}} {{model.cart.restaurant.address.zip_code}}</span>\r\n\t\t\t\t<span class="phoneContainer">\r\n\t\t\t\t\t<span class="phone" ng-if="!displaySize.isMobile">{{model.cart.restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t<a ng-href="tel:{{model.cart.restaurant.address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t\t\t\t<span>{{model.cart.restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\r\n        <div ng-if="model.cart.restaurant.isPickUpOnly || curbsideUnavailable">\r\n            <strong>\r\n                {{\'PickUp_Only\'|translate}}\r\n            </strong>\r\n        </div>\r\n\t\t<div class="actionsContainer restaurantInfoActionsContainer">\r\n\t\t\t<a class="editAction editOrderAction restaurantInfoEditOrderAction" ng-if="model.cart.order_setup.fulfillment_type === \'Curbside\'" ui-sref="orderSetup({id: model.cart.restaurant.id})" ng-click="$emit(\'done\')">\r\n\t\t\t\t<span>{{\'EditOrderDetails\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t\t<a class="continueAction goToMapAction" ng-href="https://maps.google.com/maps?daddr={{model.cart.restaurant.address.address1}}+{{model.cart.restaurant.address.city}}+{{model.cart.restaurant.address.state}}+{{model.cart.restaurant.address.zip_code}}" target="_blank">\r\n\t\t\t\t<span>{{\'Map\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/balance.html",'<div class="balance">\r\n\t<span class="text">{{\'Balance\' | translate}}:</span>\r\n\t<span class="money">{{model.balance | money}}</span>\r\n</div>'),$templateCache.put("/web/app/checkout/checkout.html",'<div class="form checkoutForm" ng-form="checkoutDetailsForm">\r\n    <div class="checkoutReviewContainer" ng-if="displaySize.isDesktop">\r\n        <div class="titleContainer checkoutTitleContainer checkoutReviewTitleContainer">\r\n            <h1 class="title checkoutTitle checkoutReviewTitle">{{\'OrderReview\' | translate}}</h1>\r\n        </div>\r\n\r\n        <div class="messageContainer checkoutReviewMessageContainer emptyCart" ng-if="!model.cart.order_items.length">\r\n            <p class="message checkoutReviewMessage emptyCartMessage">{{\'CartEmpty\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="checkoutReviewContent hasCart" ng-if="model.cart.order_items.length">\r\n            <div class="checkoutReviewSection orderDetailsContainer" ui-view="fulfillmentInfo"></div>\r\n\r\n            <div class="checkoutReviewSection locationDetailsContainer" ui-view="restaurantInfo"></div>\r\n\r\n            <div class="checkoutReviewSection orderCommentContainer" ui-view="orderComments"></div>\r\n\r\n            <div class="checkoutReviewSection orderTotalsContainer" ui-view="orderTotals"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="checkoutPaymentContainer">\r\n        <div class="titleContainer checkoutTitleContainer checkoutPaymentTitleContainer">\r\n            <h1 class="title checkoutTitle checkoutPaymentTitle">{{\'Payment\' | translate}}</h1>\r\n        </div>\r\n\r\n        <div class="checkoutPaymentContent">\r\n            <div class="checkoutPaymentSection checkoutPaymentInfo" autoscroll="false" ui-view></div>\r\n\r\n            <div class="checkoutPaymentSection checkoutContactInfo" ng-show="model.balance == 0" ui-view="contactInfo"></div>\r\n\r\n            <div class="actionsContainer checkoutActionsContainer" ng-show="model.balance == 0">\r\n                <button tabindex="3" type="submit" class="submitAction checkoutSubmitAction trk-placeorder" ng-disabled="model.balance != 0" ng-click="checkoutDetailsForm.$submit()">\r\n                    <span>{{\'PlaceOrder\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="checkoutGeneralActionsContainer" ui-view="orderGeneralActions"></div>\r\n</div>\r\n'),$templateCache.put("/web/app/checkout/checkout.sections.html",'<div class="form checkoutForm checkoutFormSections kaxsdc" ng-form="checkoutDetailsForm" data-event="load" kount-data-collector>\r\n    <div class="titleContainer checkoutTitleContainer">\r\n        <h1 class="title checkoutTitle">{{\'SetupConfirmPayment\' | translate}}</h1>\r\n    </div>\r\n    <br>\r\n    <div class="text-red">{{\'SetupConfirmPayment_SubTitle\' | translate | uppercase}}</div>\r\n\r\n    <div class="checkoutContent emptyCartContainer" ng-if="!model.cart.order_items.length">\r\n        <p class="emptyCartMessage">{{\'CartEmpty\' | translate}}</p>\r\n    </div>\r\n\r\n    <div class="checkoutContent hasCartContainer" ng-if="model.cart.order_items.length">\r\n        <div class="checkoutSection orderInfoSection">\r\n\r\n            <div class="orderDetailsContainer" ui-view="fulfillmentInfo"></div>\r\n        </div>\r\n\r\n        <div class="checkoutSection locationDetailsSection">\r\n            <div class="locationDetailsContainer" ui-view="restaurantInfo"></div>\r\n        </div>\r\n\r\n        <div class="checkoutSection deliveryDetailsSection" ng-if="model.cart.order_setup.fulfillment_type == \'Delivery\'">\r\n            <div class="deliveryDetailsContainer" ui-view="deliveryInfo"></div>\r\n        </div>\r\n\r\n        <div class="checkoutSection orderTotalsSection">\r\n            <div class="orderTotalsContainer" ui-view="orderTotals"></div>\r\n        </div>\r\n        \r\n        <div class="checkoutSection dineRewardsBucketSection dineRewardsReviewContainer" ng-if="$root.featureFlags.dineRewards.allowDineRewardsReviewAccountLink && model.dineRewardsAccount">\r\n            <div class="dineRewardsBucketContainer" ui-view="dineRewardsBucket"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="orderPayment">\r\n\r\n        <div class="titleContainer paymentTitleContainer">\r\n            <h2 class="h1 title paymentTitle">{{\'Payment\' | translate}}</h2>\r\n        </div>\r\n        <div class="checkoutPaymentContentContainer">\r\n            <div class="paymentInfoContainer">\r\n                <div class="payments" autoscroll="false" ui-view></div>\r\n            </div>\r\n\r\n            <div class="contactInfoContainer" ng-show="isPaymentInfoReady()" ui-view="contactInfo"></div>\r\n\r\n            <div class="actionsContainer checkoutActionsContainer" ng-show="isPaymentInfoReady()">\r\n                <button type="submit" class="placeOrderAction checkoutplaceOrderAction" ng-disabled="isPlaceOrderDisabled()" ng-click="checkoutDetailsForm.$submit()">\r\n                    <span>{{\'PlaceOrder\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="checkoutOrderGeneralActionsContainer" ui-view="orderGeneralActions"></div>\r\n</div>'),$templateCache.put("/web/app/checkout/contactInfo.html",'<form class="form contactInfoForm" name="contactInfoForm" id="contactInfo">\r\n    <div class="titleContainer formTitleContainer contactFormTitleContainer">\r\n        <h2 class="title formTitle contactFormTitle">{{\'ContactInfo\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer contactInfoContentContainer">\r\n        <div class="descriptionContainer formDescriptionContainer contactFormDescriptionContainer">\r\n            <p class="description formDescription contactFormDescription">{{\'ContactInfo_Message\' | translate}}</p>\r\n            <p class="description formDescription contactFormDescription2">{{\'ContactInfo_Message2\' | translate}}</p>\r\n        </div>\r\n        <div class="errorContainer formErrorContainer contactInfoFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="contactFormContent contactFormPersonalInfoContent">\r\n            <div class="titleContainer contactFormContentTitleContainer">\r\n                <h2>{{\'ContactInfo_PersonalInfoTitle\' | translate}}</h2>\r\n            </div>\r\n\r\n            <div class="formElements contactFormElements contactFormGeneralElements" ng-if="!loggedIn">\r\n                <div class="inputContainer textInputContainer firstNameInputContainer">\r\n                    <label for="contact_info_first_name" class="inputText">{{\'FirstName\' | translate}} (Required)</label>\r\n                    <span class="input textInput firstNameInput">\r\n                        <input type="text" floating-label maxlength="30" ng-model="model.checkoutDetails.first_name" validate-profanity form-reference="checkoutDetailsForm.contactInfoForm.first_name" profanity-value="model.checkoutDetails.first_name" allow-pattern="([0-9]|[A-Z]|\\s)" id="contact_info_first_name" name="first_name" autocomplete="given-name" focus-selected-content required>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer lastNameInputContainer">\r\n                    <label for="contact_info_last_name" class="inputText">{{\'LastName\' | translate}} (Required)</label>\r\n                    <span class="input textInput lastNameInput">\r\n                        <input type="text" floating-label allow-pattern="([0-9]|[A-Z]|\\s)" maxlength="30" ng-model="model.checkoutDetails.last_name" id="contact_info_last_name" name="last_name" autocomplete="family-name" required>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer emailInputContainer">\r\n                    <label for="contact_info_email" class="inputText">{{\'Email\' | translate}} (Required) </label>\r\n                    <span class="input textInput emailInput">\r\n                        <input type="email" floating-label ng-model="model.checkoutDetails.email" id="contact_info_email" name="email" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" autocomplete="email" maxlength="56" required sanitize="gdpr">\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer phoneInputContainer">\r\n                    <label for="contact_info_phone" class="inputText">{{\'Phone\' | translate}} (Required) </label>\r\n                    <span class="input textInput phoneInput">\r\n                        <input type="tel" floating-label id="contact_info_phone" name="phone" ng-model="model.checkoutDetails.phone" numbers-only telephone-number mask="{{model.phoneMask}}" autocomplete="tel" required>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="formElements contactFormElements" ng-if="loggedIn">\r\n\r\n                \x3c!--\r\n                    LR 01-10-18:\r\n                    Added First Name, Last Name, Email Fields\r\n                    TFS Work Item:\r\n                    https://bbi-corp.visualstudio.com/BBI_IT_TeamProject/_workitems/edit/81036\r\n                --\x3e\r\n\r\n                <div class="inputContainer textInputContainer firstNameInputContainer">\r\n                    <label for="contact_info_first_name" class="inputText">{{\'FirstName\' | translate}} (Required)</label>\r\n                    <span class="input textInput firstNameInput">\r\n                        <input type="text" floating-label maxlength="30" ng-model="model.checkoutDetails.first_name" validate-profanity form-reference="checkoutDetailsForm.contactInfoForm.first_name" profanity-value="model.checkoutDetails.first_name" allow-pattern="([0-9]|[A-Z]|\\s)" id="contact_info_first_name" name="first_name" autocomplete="given-name" focus-selected-content required>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer lastNameInputContainer">\r\n                    <label for="contact_info_last_name" class="inputText">{{\'LastName\' | translate}} (Required)</label>\r\n                    <span class="input textInput lastNameInput">\r\n                        <input type="text" floating-label allow-pattern="([0-9]|[A-Z]|\\s)" maxlength="30" ng-model="model.checkoutDetails.last_name" id="contact_info_last_name" name="last_name" autocomplete="family-name" required>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer emailInputContainer">\r\n                    <label for="contact_info_email" class="inputText">{{\'Email\' | translate}} (Required) </label>\r\n                    <span class="input textInput emailInput">\r\n                        <input type="email" floating-label ng-model="model.checkoutDetails.email" id="contact_info_email" name="email" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" autocomplete="email" maxlength="56" required sanitize="gdpr">\r\n                    </span>\r\n                </div>\r\n\r\n                \x3c!-- END | LR 01-10-18 --\x3e\r\n\r\n                <div class="inputContainer textInputContainer phoneInputContainer">\r\n                    <label for="contact_info_phone" class="inputText">{{\'Phone\' | translate}} (Required)</label>\r\n                    <span class="input textInput phoneInput">\r\n                        <input type="tel" floating-label ng-model="model.checkoutDetails.phone" numbers-only telephone-number mask="{{model.phoneMask}}" id="contact_info_phone" name="phone" autocomplete="tel" required>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="contactFormContent contactFormVehicleInfoContent" ng-if="isCurbsideNotAvailable">\r\n            <div class="titleContainer contactFormContentTitleContainer">\r\n                <h2>{{\'ContactInfo_VehicileDetailsTitle\' | translate}}</h2>\r\n            </div>\r\n\r\n            <div class="formElements contactFormElements contactFormCurbsideElements">\r\n                <div class="inputContainer selectContainer carTypeSelectContainer" ng-if="collectCarType">\r\n                    <label class="inputText" for="contact_info_car_type">{{\'CarType\' | translate}} (Required)</label>\r\n                    <span class="input select carTypeSelect">\r\n                        <select id="contact_info_car_type" name="car_type" ng-model="model.checkoutDetails.car_type" ng-options="option for option in model.values.carTypes" field-label="{{\'CarType\' | translate}}" required>\r\n                            <option value="" ng-if="!model.checkoutDetails.car_type">{{\'CarType\' | translate}}</option>\r\n                        </select>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer selectContainer carColorSelectContainer">\r\n                    <label class="inputText" for="contact_info_car_color">{{\'CarColor\' | translate}} (Required)</label>\r\n                    <span class="input select carColorSelect">\r\n                        <select id="contact_info_car_color" name="car_color" ng-model="model.checkoutDetails.car_color" ng-options="option for option in model.values.carColors" field-label="{{\'CarColor\' | translate}}" required>\r\n                            <option value="" ng-if="!model.checkoutDetails.car_color">{{\'CarColor\' | translate}}</option>\r\n                        </select>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer carDescriptionInputContainer">\r\n                    <label for="contact_info_car_description" class="inputText">{{\'CarDescription\' | translate}} (Required)</label>\r\n                    <span class="input select carDescriptionSelect">\r\n                        <input type="text" floating-label maxlength="13" ng-model="model.checkoutDetails.car_description" allow-pattern="([0-9]|[A-Z]|\\s)" id="contact_info_car_description" name="car_description" required>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("/web/app/checkout/orderCheckout.html",'<div class="orderCheckout" autoscroll="true" ui-view></div>'),$templateCache.put("/web/app/checkout/payment.check.html",'<div class="form paymentTypeForm paymentTypeCheckForm" ng-form="paymentCheck" ng-submit="setPayment()">\r\n\t<div class="titleContainer formTitleContainer paymentTypeCheckTitleContainer">\r\n\t\t<h2 class="title formTitle paymentTypeCheckTitle">{{\'Payment_Check\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer paymentTypeContentContainer">\r\n        <div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeCheckFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements paymentTypeFormElements paymentTypeCheckFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer paymentAmountInputContainer" ng-if="model.maxPayments > 1">\r\n\t\t\t\t<label for="payment_check_amount" class="inputText">{{\'Payment_AmountToPay\' | translate}} (Required)</label>\r\n\t\t\t\t<span class="input textInput paymentAmountInput">\r\n\t\t\t\t\t<input type="number" floating-label id="payment_check_amount" name="amount" required ono-max="model.balance.toString()" ono-min="0" maxlength="7" numeric-binding numbers-only decimals="2" ng-model="payment.amount">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer paymentTypeActionsContainer paymentTypeCheckActionsContainer">\r\n\t\t\t<button class="submitAction paymentTypeCheckSubmitAction" type="submit" tabindex="1" ng-click="paymentCheck.$submit()">\r\n\t\t\t\t<span>{{\'Continue\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction paymentTypeCheckCancelAction" tabindex="1" ng-click="$emit(\'cancelPayment\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.creditCard.billingAddress.edit.html",'<div class="form paymentTypeForm paymentTypeCCEditBAForm" ng-form="addressForm" ng-submit="saveBillingAddress()">\r\n\t<div class="titleContainer formTitleContainer paymentTypeCCEditBATitleContainer">\r\n\t\t<h2 class="title formTitle paymentTypeCCEditBATitle">{{\'CreditCardBillingAddress\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer paymentTypeCCEditBAContentContainer">\r\n\t\t<div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeCCEditBAFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements paymentTypeFormElements paymentTypeCCEditBAFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer address1InputContainer">\r\n\t\t\t\t<label class="inputText" for="pay_address_{{$id}}">{{\'Address\' | translate}}</label>\r\n\t\t\t\t<span class="input textInput address1Input">\r\n\t\t\t\t\t<input type="text" name="address1" maxlength="75" id="pay_address_{{$id}}" ng-model="payment.credit_card.billing_address.address1" required>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer textInputContainer address2InputContainer">\r\n\t\t\t\t<label class="inputText" for="pay_address2_{{$id}}">{{\'Address2\' | translate}}</label>\r\n\t\t\t\t<span class="input textInput address2Input">\r\n\t\t\t\t\t<input type="text" id="pay_address2_{{$id}}" name="address2" maxlength="75" ng-model="payment.credit_card.billing_address.address2">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer textInputContainer cityInputContainer">\r\n\t\t\t\t<label class="inputText" for="pay_city_{{$id}}">{{\'City\' | translate}}</label>\r\n\t\t\t\t<span class="input textInput cityInput">\r\n\t\t\t\t\t<input type="text" id="pay_city_{{$id}}" name="city" maxlength="75" ng-model="payment.credit_card.billing_address.city" required>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer selectContainer countySelectContainer" ng-if="model.values.countries.length > 1">\r\n\t\t\t\t<label class="inputText" for="pay_country_{{$id}}">{{\'Country\' | translate}}</label>\r\n\t\t\t\t<span class="input select countrySelect">\r\n\t\t\t\t\t<select name="country" id="pay_country_{{$id}}" ng-model="payment.credit_card.billing_address.country" ng-options="country.Key for country in model.values.countries" required field-label="{{\'Country\' | translate}}"></select>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer selectContainer stateSelectContainer">\r\n\t\t\t\t<label class="inputText" for="pay_state_{{$id}}">{{\'State\' | translate}}</label>\r\n\t\t\t\t<span class="input select stateSelect">\r\n\t\t\t\t\t<select name="state" id="pay_state_{{$id}}" ng-model="payment.credit_card.billing_address.state" ng-options="state for state in model.values.states" required field-label="{{\'State\' | translate}}"></select>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n            <div class="inputContainer textInputContainer zipCodeInputContainer">\r\n                <label for="pay_zip_{{$id}}" class="inputText">{{\'ZipCode\' | translate}}</label>\r\n                <span class="input textInput zipCodeInput">\r\n                    <input name="zip_code" id="pay_zip_{{$id}}" type="tel" ng-model="payment.credit_card.billing_address.zip_code" numbers-only ng-pattern="/^(\\d{5})$/" maxlength="5" autocomplete="postal-code" required>\r\n                </span>\r\n            </div>\r\n\t\t\t<input type="hidden" name="id" ng-model="address.id">\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer paymentTypeActionsContainer paymentTypeCCEditBAActionsContainer">\r\n\t\t\t<button class="submitAction paymentTypeCCEditBASubmitAction" type="submit" ng-click="addressForm.$submit()" ng-disabled="addressForm.$invalid">\r\n\t\t\t\t<span>{{\'Next\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction paymentTypeCCEditBACancelAction" ng-click="$emit(\'cancelPayment\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.creditCard.billingAddress.select.html",'<div class="paymentCCSelectBA">\r\n\t<div class="titleContainer paymentCCSelectBATitleContainer">\r\n\t\t<h2 class="title paymentCCSelectBATitle">{{\'SavedAddresses\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer paymentTypeCCSelectBAContentContainer">\r\n\t\t<div class="paymentCCSelectBAListContainer">\r\n\t\t\t<ul class="paymentCCSelectBAList">\r\n\t\t\t\t<li class="paymentCCSelectBAListItem" ng-repeat="address in addresses">\r\n\t\t\t\t\t<div class="inputContainer radioContainer paymentCCSelectBAItemInputContainer" ng-class="{active: payment.credit_card.billing_address == address}">\r\n\t\t\t\t\t\t<label class="inputText" ng-class="{selected: payment.credit_card.billing_address == address}" for="payment_credit_card_billing_address_{{$index}}">\r\n\t\t\t\t\t\t\t<span class="address1">{{address.address1}}</span>\r\n\t\t\t\t\t\t\t<span class="city state zip">{{address.city}}, {{address.state}} {{address.zip_code}}</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<span class="input radio paymentSelectBAItemInput">\r\n\t\t\t\t\t\t\t<input type="radio" id="payment_credit_card_billing_address_{{$index}}" name="billing_address" ng-model="payment.credit_card.billing_address" ng-value="address">\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="actionsContainer paymentCCSelectBAItemActionsContainer">\r\n\t\t\t\t\t\t<button class="editAction paymentCCSelectBAItemEditAction" ng-click="editBillingAddress(address)">\r\n\t\t\t\t\t\t\t<span>{{\'Edit\' | translate}}</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="deleteAction paymentCCSelectBAItemDeleteAction" ono-confirm="removeAddress(address)" ono-confirm-title="{{ \'RemoveCreditCardPayment_ConfirmTitle\' | translate }}" ono-confirm-message="{{ \'RemoveCreditCardPayment_ConfirmMessage\' | translate }}">\r\n\t\t\t\t\t\t\t<span>{{\'Delete\' | translate}}</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer paymentCCSelectBAActionsContainer">\r\n\t\t\t<button class="nextAction paymentCCSelectBANextAction" ng-click="goToTotals()" ng-disabled="!payment.credit_card.billing_address">\r\n\t\t\t\t<span>{{\'Next\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="editAction paymentCCSelectBAEditAction" ng-click="editBillingAddress({})">\r\n\t\t\t\t<span>{{\'NewAddress\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction paymentCCSelectBACancelAction" ng-click="$emit(\'cancelPayment\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.creditCard.edit.html",'<div class="form paymentTypeForm paymentTypeCCEditForm" ng-form="creditCardForm" ng-submit="setPayment()" autocomplete="on" ng-if="ShowOneTimePayment == false">\r\n    <div class="titleContainer formTitleContainer paymentTypeCCEditTitleContainer">\r\n        <h2 class="title formTitle paymentTypeCCEditTitle">{{\'CreditCard\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer paymentTypeCCEditContentContainer">\r\n        <div class="descriptionContainer paymentTypeCCEditDescriptionContainer">\r\n            <p class="description paymentTypeCCEditDescription">{{\'CreditCardDescription\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeCCEditFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <form class="formElements paymentTypeFormElements paymentTypeCCEditFormElements">\r\n            <div class="inputContainer textInputContainer cardNameInputContainer">\r\n                <label class="inputText" for="name_on_card">{{\'Card_Name\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardNameInput">\r\n                    <input type="text" floating-label name="name_on_card" id="name_on_card" ng-model="payment.credit_card.name_on_card" allow-pattern="([A-Z]|\\s)" autocomplete="cc-name" required maxlength="30">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer cardTypeInputContainer">\r\n                <label class="inputText" for="card_type">{{\'Card_Type\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input select cardTypeSelect" ng-if="!payment.credit_card.id">\r\n                    <select ng-options="select as (\'CreditCardType_\' + select | translate) for select in credit_card_types" ng-change="cardTypeChanged(payment.credit_card.card_type)" ng-model="payment.credit_card.card_type" required autocomplete="cc-type" name="card_type" id="card_type">\r\n                        <option value="" ng-if="!payment.credit_card.card_type">{{\'Card_Type\' | translate}}</option>\r\n                    </select>\r\n                </span>\r\n                <span class="input textInput cardTypeInput" ng-if="payment.credit_card.id">\r\n                    <input type="text" name="card_type" id="card_type" value="{{payment.credit_card.card_type}}" disabled="disabled" readonly="readonly">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer cardNumberInputContainer">\r\n                <label class="inputText" for="cardNumber">{{\'Card_Number\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardNumberInput">\r\n                    <input type="tel" floating-label name="card_number" required numbers-only mask="{{card_type_mask}}" ng-model="payment.credit_card.card_number" autocomplete="cc-number" id="cardNumber" ng-if="!payment.credit_card.id">\r\n                    <input type="tel" floating-label name="card_number" value="{{payment.credit_card.card_number}}" disabled="disabled" readonly="readonly" id="cardNumber" ng-if="payment.credit_card.id">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer cardMonthSelectContainer">\r\n                <label class="inputText" for="cardExpirationMonth">{{\'Card_Month\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input select cardMonthSelect">\r\n                    <select name="expiration_month" ng-model="payment.credit_card.expiration_month" required autocomplete="cc-exp-month" id="cardExpirationMonth" ng-options="month for month in months">\r\n                        <option value="">{{\'Card_Month\' | translate}}</option>\r\n                    </select>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer cardYearSelectContainer">\r\n                <label class="inputText" for="cardExpirationYear">{{\'Card_Year\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input select cardYearSelect">\r\n                    <select name="expiration_year" ng-model="payment.credit_card.expiration_year" required autocomplete="cc-exp-year" id="cardExpirationYear" ng-options="year for year in years">\r\n                        <option value="">{{\'Card_Year\' | translate}}</option>\r\n                    </select>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer countrySelectContainer" ng-if="values.countries.length > 1">\r\n                <label class="inputText" for="country">{{\'Country\' | translate}} </label>\r\n                <span class="input select countrySelect">\r\n                    <select required id="country" ng-options="country.Key for country in values.countries track by country.Key" ng-model="payment.credit_card.country" autocomplete="country" name="country"></select>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer cardZipCodeInputContainer">\r\n                <label class="inputText" for="zipcode">{{\'ZipCode\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardZipCodeInput">\r\n                    <input name="verification_zip_code" floating-label ng-model="payment.credit_card.verification_zip_code" type="tel" numbers-only ng-pattern="/^(\\d{5})$/" maxlength="5" autocomplete="postal-code" id="zipcode" required>\r\n                </span>\r\n            </div>\r\n\r\n            \x3c!-- CVV, Confirm Amount and Tip starts here --\x3e\r\n\r\n            <div class="inputContainer textInputContainer cardCCVInputContainer">\r\n                <label for="payment_credit_card_totals_cvv" class="inputText">{{\'Cvv\' | translate}} {{\'ADA_Required_Label\' | translate}} </label>\r\n                <span class="input textInput cardCCVInput">\r\n                    <input type="tel" floating-label name="cvv" id="payment_credit_card_totals_cvv" required numbers-only focus-selected-content mask="{{card_type_cvv_mask}}" ng-model="payment.credit_card.cvv">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer paymentAmountInputContainer" ng-if="model.maxPayments > 1" ng-class="{disabled: model.maxPayments - 1 == model.checkoutDetails.payments.length}">\r\n                <label for="payment_credit_card_totals_amount" class="inputText">{{\'Confirm_PaymentAmount\' | translate}} {{\'ADA_Required_Label\' | translate}} </label>\r\n                <span class="input textInput paymentAmountInput">\r\n                    <input type="number" floating-label step="0.01" id="payment_credit_card_totals_amount" name="amount" required ono-max="model.balance.toString()" ono-min="0" numeric-binding numbers-only allow-pattern="[^-+e]" maxlength="7" decimals="2" ng-disabled="isPartialPaymentDisabled()" ng-model="payment.amount">\r\n                </span>\r\n            </div>\r\n        </form>\r\n        <div class="tipContainer" ng-if="model.allowTips" ui-view="tip"></div>\r\n\r\n        \x3c!-- CVV, Confirm Amount and Tip ends here--\x3e\r\n\r\n        <div class="paymentSumbitForm actionsContainer">\r\n            <div class="paymentTypeActionsContainer paymentTypeCCEditActionsContainer">\r\n                <button class="cancelAction paymentTypeCCEditCancelAction trk-creditcardinfocancel" ng-click="$emit(\'cancelPayment\')">\r\n                    <span>{{\'Cancel\' | translate}}</span>\r\n                </button>\r\n                <button class="submitAction paymentTypeCCEditSubmitAction trk-creditcardinfosave" type="submit" ng-click="creditCardForm.$submit()" ng-disabled="creditCardForm.$invalid">\r\n                    <span>{{\'Next\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="form paymentTypeForm paymentTypeCCEditForm" ng-if="ShowOneTimePayment == true">\r\n    <div class="titleContainer ccEditTitleContainer">\r\n        <h2 class="title" ng-hide="!payment.credit_card.one_time_token">{{\'EditCreditCard\' | translate}}</h2>\r\n    </div>\r\n    <div class="titleContainer formTitleContainer paymentTypeCCEditTitleContainer">\r\n        <h2 class="title formTitle paymentTypeCCEditTitle">{{\'CreditCard\' | translate}}</h2>\r\n    </div>\r\n    <div class="contentContainer paymentTypeCCEditContentContainer">\r\n        <div class="descriptionContainer paymentTypeCCEditDescriptionContainer">\r\n            <p class="description paymentTypeCCEditDescription">{{\'CreditCardDescription\' | translate}}</p>\r\n        </div>\r\n\r\n        <div ng-hide="payment.credit_card.one_time_token">\r\n            <div class="iframeMain">\r\n                <iframe id="frame_carddetails" name="frame_carddetails" class="editFrame" ng-src="{{aurusSession.iframeUrl}}" aurus-container one-time-payment></iframe>\r\n            </div>\r\n\r\n            <div ng-hide="!(ShowOneTimeSaveCardOption && customerId)">\r\n                <label class="inputContainer checkboxContainer" ng-class="{active: checkboxModel.saveCard}">                \r\n                    <span class="inputText" ng-class="{selected: checkboxModel.saveCard}">\r\n                        {{\'Save_Card\' | translate}}\r\n                    </span>\r\n                    <span class="input checkbox">\r\n                        <input type="checkbox" name="saveCard" ng-model="checkboxModel.saveCard">\r\n                    </span>\r\n                </label>\r\n                <div class="saveCardMessageContainer">\r\n                    <span class="saveCardMessage">{{\'Save_Card_Message\' | translate}}</span>\r\n                </div>\r\n            </div>\r\n            <div id="payment-form" ng-form="paymentForm" ng-submit="submitAurusIframe()" name="paymentForm" ng-hide="payment.credit_card.one_time_token">\r\n                <div class="paymentSumbitForm">\r\n                    <div class="actionsContainer paymentTypeActionsContainer paymentTypeCCEditActionsContainer">\r\n                        <button class="cancelAction paymentTypeCCEditCancelAction" type="button" ng-click="$emit(\'cancelPayment\')">\r\n                            <span>{{\'Cancel\' | translate}}</span>\r\n                        </button>\r\n                        <button class="submitAction paymentTypeCCEditSubmitAction" ng-click="paymentForm.$submit()">\r\n                            <span>{{\'Next\' | translate}}</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div class="errorContainer formErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <form class="formElements paymentTypeFormElements paymentTypeCCEditFormElements" name="OnetimePaymentFormEdit" ng-hide="!payment.credit_card.one_time_token" ng-submit="saveCreditCard()" novalidate>\r\n            <div class="inputContainer textInputContainer cardNameInputContainer">\r\n                <label class="inputText" for="name_on_card">{{\'Card_Name\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardNameInput">\r\n                    <input type="text" floating-label name="name_on_card" id="name_on_card" ng-model="payment.credit_card.name_on_card" allow-pattern="([A-Z]|\\s)" autocomplete="cc-name" required maxlength="30">\r\n                </span>\r\n            </div>\r\n\r\n            <div class="inputContainer selectContainer cardTypeInputContainer">\r\n                <label class="inputText" for="card_type">{{\'Card_Type\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardTypeInput">\r\n                    <input type="text" floating-label name="card_type" id="card_type" ng-model="payment.credit_card.card_type" disabled="disabled" readonly="readonly">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer cardNumberInputContainer">\r\n                <label class="inputText" for="cardNumber">{{\'Card_Number\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardNumberInput">\r\n                    <input type="text" floating-label name="card_number" ng-model="payment.credit_card.card_number" autocomplete="cc-number" id="cardNumber" disabled="disabled" readonly="readonly">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer cardMonthSelectContainer">\r\n                <label class="inputText" for="cardExpirationMonth">{{\'Card_Month\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input select cardMonthSelect">\r\n                    <select name="expiration_month" ng-model="selectedMonth" required ng-change="setSelectedMonth(selectedMonth)" autocomplete="cc-exp-month" id="cardExpirationMonth" ng-options="month for month in months"></select>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer cardYearSelectContainer">\r\n                <label class="inputText" for="cardExpirationYear">{{\'Card_Year\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input select cardYearSelect">\r\n                    <select name="expiration_year" ng-model="selectedYear" ng-change="setSelectedYear(selectedYear)" required autocomplete="cc-exp-year" id="cardExpirationYear" ng-options="year as year.toString().slice(-2) for year in years"></select>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer cardZipCodeInputContainer">\r\n                <label class="inputText" for="zipcode">{{\'ZipCode\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                <span class="input textInput cardZipCodeInput">\r\n                    <input name="verification_zip_code" floating-label ng-model="payment.credit_card.verification_zip_code" type="text" numbers-only ng-pattern="/^(\\d{5})$/" maxlength="5" autocomplete="postal-code" id="zipcode" required>\r\n                </span>\r\n            </div>\r\n        </form>\r\n        <form id="payment-form-edit" name="paymentFormEdit" ng-hide="!payment.credit_card.one_time_token">\r\n            <div class="actionsContainer paymentTypeActionsContainer paymentTypeCCEditActionsContainer">\r\n                <button class="submitAction paymentTypeCCEditSubmitAction" type="submit" ng-click="OnetimePaymentFormEdit.$submit();" ng-disabled="$formErrors.length > 0">\r\n                    <span>{{\'Save\' | translate}}</span>\r\n                </button>\r\n                <button class="cancelAction paymentTypeCCEditCancelAction" type="button" ng-click="$emit(\'cancelPayment\')">\r\n                    <span>{{\'Cancel\' | translate}}</span>\r\n                </button>\r\n                <div class="errorContainer formErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n            </div>\r\n        </form>\r\n\r\n    </div>\r\n</div>\r\n\r\n'),$templateCache.put("/web/app/checkout/payment.creditCard.html",'<div class="paymentTypeSteps creditCardStepsContainer" ng-switch="step">\r\n\t<div ng-switch-when="selectCreditCard">\r\n\t\t<div class="paymentTypeStep creditCardStepContainer creditCardStepSelectCCContainer" ng-include="\'/web/app/checkout/payment.creditCard.select.html\'"></div>\r\n\t</div>\r\n\r\n\t<div ng-switch-when="editCreditCard">\r\n\t\t<div class="paymentTypeStep creditCardStepContainer creditCardStepEditCCContainer" ng-include="\'/web/app/checkout/payment.creditCard.edit.html\'"></div>\r\n\t</div>\r\n\r\n\t<div ng-switch-when="selectBillingAddress">\r\n\t\t<div class="paymentTypeStep creditCardStepContainer creditCardStepSelectBillingAddressContainer" ng-include="\'/web/app/checkout/payment.creditCard.billingAddress.select.html\'"></div>\r\n\t</div>\r\n\r\n\t<div ng-switch-when="editBillingAddress">\r\n\t\t<div class="paymentTypeStep creditCardStepContainer creditCardStepEditBillingAddressContainer" ng-include="\'/web/app/checkout/payment.creditCard.billingAddress.edit.html\'"></div>\r\n\t</div>\r\n\r\n\t<div ng-switch-when="totals">\r\n\t\t<div class="paymentTypeStep creditCardStepContainer creditCardStepCCTotalsContainer" ng-include="\'/web/app/checkout/payment.creditCard.totals.html\'"></div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.creditCard.select.html",'<div class="paymentSelect paymentCCSelect">\r\n\t<div class="titleContainer paymentSelectTitleContainer paymentCCSelectTitleContainer">\r\n\t\t<h2 class="title paymentSelectTitle paymentCCSelectTitle">Saved Credit Cards</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer paymentTypeCCSelectContentContainer">\r\n\t\t<div class="paymentCCSelectListContainer">\r\n\t\t\t<ul class="paymentCCSelectList" ng-if="creditCards.length > 0">\r\n\t\t\t\t<li class="paymentCCSelectListItem" ng-repeat="creditCard in creditCards">\r\n\t\t\t\t\t<div class="inputContainer radioContainer paymentCCSelectItemInputContainer" ng-class="{active: payment.credit_card == creditCard}">\r\n\t\t\t\t\t\t<label class="inputText" ng-class="{selected: payment.credit_card == creditCard}" for="payment_credit_card_select_{{$index}}" ng-include="\'/web/app/creditcard/credit_card.display.html\'"></label>\r\n\t\t\t\t\t\t<span class="input radio paymentSelectItemInput">\r\n\t\t\t\t\t\t\t<input type="radio" id="payment_credit_card_select_{{$index}}" name="credit_card" ng-model="payment.credit_card" ng-value="creditCard">\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="actionsContainer listItemActionsContainer paymentCCSelectItemActionsContainer">\r\n\t\t\t\t\t\t<button class="editAction paymentCCSelectItemEditAction" ng-click="editCreditCard(creditCard)">\r\n\t\t\t\t\t\t\t<span>Edit</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="deleteAction paymentCCSelectItemDeleteAction" ono-confirm="removeCreditCard(creditCard)" ono-confirm-title="{{ \'RemoveCreditCardPayment_ConfirmTitle\' | translate }}" ono-confirm-message="{{ \'RemoveCreditCardPayment_ConfirmMessage\' | translate }}">\r\n\t\t\t\t\t\t\t<span>Delete</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer paymentCCSelectActionsContainer">\r\n\t\t\t<button class="nextAction paymentCCSelectNextAction" tabindex="1" ng-click="goToTotals()">\r\n\t\t\t\t<span>{{\'Next\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="editAction paymentCCSelectEditAction" tabindex="1" ng-click="editCreditCard({})">\r\n\t\t\t\t<span>{{\'NewCreditCard\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction paymentCCSelectCancelAction" tabindex="1" ng-click="$emit(\'cancelPayment\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.creditCard.totals.html",'<div class="form paymentTypeForm paymentTypeCCTotalsForm" ng-form="totalsForm" ng-submit="setPayment()">\r\n\t<div class="titleContainer formTitleContainer paymentTypeCCTotalsTitleContainer">\r\n\t\t<h3 class="title formTitle paymentTypeCCTotalsTitle">{{\'Enter_SecurityCode_To_Verify\' | translate}}</h3>\r\n\t</div>\r\n    <div class="paymentAddedInfo" ng-switch="payment.payment_type">\r\n        <label class="paymentAddedType paymentAddedCreditCard">\r\n            {{payment.credit_card.card_type}} {{\'Card_Ending_In\' | translate}} * {{payment.credit_card.card_number | limitTo:-4}}\r\n        </label>\r\n    </div>\r\n    <div> </div>\r\n\r\n\t<div class="contentContainer paymentTypeCCTotalsContentContainer">\r\n\t\t<div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeCCTotalsFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements paymentTypeFormElements paymentTypeCCTotalsFormElements">\r\n            <div class="inputContainer textInputContainer cardCCVInputContainer">\r\n                <label for="payment_credit_card_totals_cvv" class="inputText">{{\'Cvv\' | translate}} (Required) </label>\r\n                <span class="input textInput cardCCVInput">\r\n                    <input type="tel" floating-label name="cvv" id="payment_credit_card_totals_cvv" required numbers-only focus-selected-content mask="{{card_type_cvv_mask}}" ng-model="payment.credit_card.cvv">\r\n                </span>\r\n            </div>\r\n\t\t\t<div class="inputContainer textInputContainer paymentAmountInputContainer" ng-if="model.maxPayments > 1" ng-class="{disabled: model.maxPayments - 1 == model.checkoutDetails.payments.length}">\r\n\t\t\t\t<label for="payment_credit_card_totals_amount" class="inputText">{{\'Confirm_PaymentAmount\' | translate}} (Required) </label>\r\n\t\t\t\t<span class="input textInput paymentAmountInput">\r\n\t\t\t\t\t<input type="number" floating-label step="0.01" id="payment_credit_card_totals_amount" name="amount" required ono-max="model.balance.toString()" ono-min="0" numeric-binding numbers-only allow-pattern="[^-+e]" maxlength="7" decimals="2" ng-disabled="isPartialPaymentDisabled()" ng-model="payment.amount">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="tipContainer" ng-if="model.allowTips" ui-view="tip"></div>\r\n\r\n\t\t<div class="actionsContainer paymentTypeActionsContainer paymentTypeCCTotalsActionsContainer">\r\n\t\t\t<button class="submitAction paymentTypeCCTotalsSubmitAction trk-creditcardpaymentsave" type="submit" ng-click="totalsForm.$submit()">\r\n\t\t\t\t<span>{{\'Next\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction paymentTypeCCTotalsCancelAction trk-creditcardpaymentcancel" ng-click="$emit(\'cancelPayment\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("/web/app/checkout/payment.giftCard.edit.html",'<div class="form paymentTypeForm paymentTypeGiftCardEditForm" ng-form="giftCardForm" ng-submit="saveGiftCard()">\r\n    <div class="titleContainer formTitleContainer paymentTypeGiftCardEditTitleContainer">\r\n        <h2 class="title formTitle paymentTypeGiftCardEditTitle">{{\'GiftCard\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer paymentTypeGiftCardEditContentContainer">\r\n        <div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeGiftCardFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="formElements paymentTypeFormElements paymentTypeGiftCardEditFormElements">\r\n            <div class="inputContainer textInputContainer paymentTypeGiftCardNumberInputContainer">\r\n                <label for="payment_gift_card_edit_number" class="inputText">{{\'Card_Number\' | translate}} {{\'ADA_Required_Label\' | translate}} </label>\r\n                <span class="input textInput paymentTypeGiftCardNumberInput">\r\n                    <input type="tel" floating-label id="payment_gift_card_edit_number" name="card_number" required numbers-only maxlength="21" minlength="19" ng-model="payment.gift_card.card_number" ng-if="!payment.gift_card.id" focus-selected-content>\r\n                </span>\r\n            </div>\r\n\r\n            \x3c!-- Pin and amount starts here --\x3e\r\n\r\n            <div class="inputContainer textInputContainer">\r\n                <label class="inputText" for="payment_gift_card_pin">{{\'Pin\' | translate}} {{\'ADA_Required_Label\' | translate}} </label>\r\n                <span class="input textInput">\r\n                    <input type="text" pattern="\\d*" floating-label name="cvc2" mask="####" id="payment_gift_card_pin" required numbers-only ng-model="payment.gift_card.cvc2">\r\n                </span>\r\n            </div>\r\n\r\n            <div class="inputContainer textInputContainer" ng-if="model.maxPayments > 1" ng-class="{disabled: model.maxPayments - 1 == model.checkoutDetails.payments.length}">\r\n                <label class="inputText" for="payment_gift_card_amount">{{\'Payment_AmountToPay\' | translate}} {{\'ADA_Required_Label\' | translate}} </label>\r\n                <span class="input textInput">\r\n                    <input type="number" floating-label step="0.01" name="amount" id="payment_gift_card_amount" required ono-max="model.balance.toString()" ono-min="0" numeric-binding numbers-only allow-pattern="[^-+e]" maxlength="7" decimals="2" ng-disabled="isPartialPaymentDisabled()" ng-model="payment.amount">\r\n                </span>\r\n            </div>\r\n\r\n            \x3c!-- Pin and amount ends here --\x3e\r\n\r\n        </div>\r\n\r\n        \x3c!-- Tip starts here --\x3e\r\n\r\n        <div class="tipContainer" ng-if="model.allowTips" ui-view="tip"></div>\r\n\r\n        \x3c!-- Tip ends here --\x3e\r\n\r\n        <div class="saveGiftCardContent" ng-if="loggedIn && payment.gift_card.id == null">\r\n            <div class="inputContainer checkboxContainer saveGiftCardInputContainer" ng-class="{active: payment.gift_card.save_card}">\r\n                <label class="inputText" for="payment_gift_card_edit_save_card" ng-class="{selected: payment.gift_card.save_card}" id="saveGiftCardLabel">{{\'Save_Card\' | translate}}</label>\r\n                <span class="input checkbox saveGiftCardInput">\r\n                    <input type="checkbox" name="save_card" id="payment_gift_card_edit_save_card" ng-model="payment.gift_card.save_card">\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer paymentTypeActionsContainer paymentTypeGiftCardEditActionsContainer">\r\n            <button class="cancelAction paymentTypeGiftCardCancelAction trk-giftcardcancel" ng-click="$emit(\'cancelPayment\')">\r\n                <span>{{\'Cancel\' | translate}}</span>\r\n            </button>\r\n            <button class="nextAction paymentTypeGiftCardNextAction trk-giftcardsave" ng-click="giftCardForm.$submit()" ng-disabled="giftCardForm.$invalid">\r\n                <span>{{\'Save\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.giftCard.html",'<div class="paymentTypeSteps giftCardStepsContainer" ng-switch="step">\r\n\r\n\t<div ng-switch-when="editGiftCard">\r\n\t\t<div class="paymentTypeStep giftCardStep giftCardStepEditGiftCardContainer" ng-include="\'/web/app/checkout/payment.giftCard.edit.html\'"></div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.houseAccount.html",'<div class="form paymentTypeForm paymentTypeHouseAccountForm" ng-form="paymentHouseAccount" ng-submit="setPayment()">\r\n\t<div class="titleContainer formTitleContainer paymentTypeHouseAccountTitleContainer">\r\n\t\t<h2 class="title formTitle paymentHouseAccountFormTitle">{{\'Payment_HouseAccount\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer paymentTypeHouseAccountContentContainer">\r\n        <div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeHouseAccountFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements paymentTypeFormElements paymentTypeHouseAccountFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer paymentAmountInputContainer" ng-if="model.maxPayments > 1">\r\n\t\t\t\t<label for="payment_house_account_amount" class="inputText">{{\'Payment_AmountToPay\' | translate}} (Required) </label>\r\n\t\t\t\t<span class="input textInput paymentAmountInput">\r\n\t\t\t\t\t<input type="text" floating-label id="payment_house_account_amount" name="amount" required ono-max="model.balance.toString()" maxlength="7" ono-min="0" numbers-only decimals="2" ng-model="payment.amount">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer textInputContainer tipInputContainer" ng-if="model.allowTips">\r\n\t\t\t\t<label for="payment_house_account_tip" class="inputText">{{\'Tip\' | translate}}</label>\r\n\t\t\t\t<span class="input textInput tipInput">\r\n\t\t\t\t\t<input type="text" floating-label id="payment_house_account_tip" name="tip" tabindex="1" maxlength="7" numbers-only decimals="2" ng-model="payment.tip">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer paymentTypeActionsContainer paymentTypeHouseAccountActionsContainer">\r\n\t\t\t<button class="submitAction paymentTypeHouseAccountSubmitAction" type="submit" tabindex="1" ng-click="paymentHouseAccount.$submit()">\r\n\t\t\t\t<span>{{\'Continue\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction paymentTypeHouseAccountCancelAction" tabindex="1" ng-click="$emit(\'cancelPayment\')">\r\n\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.html",'<div class="payment" ui-view autoscroll="false">\r\n    <div class="paymentsSelect paymentSelectDropdown" ng-if="model.balance > 0">\r\n        <div class="titleContainer paymentSelectTitleContainer">\r\n            <h3 class="title paymentsSelectTitle">{{\'SelectPayment\' | translate}}</h3>\r\n        </div>\r\n\r\n        <div>\r\n            <p class="description" ng-if="showGiftCardDisabledMessage">{{\'Gift_Card_Payments_Disabled\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="descriptionContainer paymentsSelectDescriptionContainer" ng-if="displayCreditCardDescription">\r\n            <p class="description paymentSelectDescription">{{\'PaymentDescription\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="paymentSelectOptionContainer" ng-include="\'/web/app/checkout/payment.select.dropdown.html\'"></div>\r\n\r\n        <div class="messageContainer paymentsSelectMessageContainer">\r\n            <p class="message paymentsSelectMessage">{{\'Checkout_ContactMessage\' | translate}}</p>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="paymentsAdded" ng-show="model.checkoutDetails.payments.length">\r\n        <div class="titleContainer paymentsAddedTitleContainer">\r\n            <h3 class="title paymentsAddedTitle">{{\'AddedPayments\' | translate}}</h3>\r\n        </div>\r\n\r\n\t\t<div class="contentContainer paymentsAddedContentContainer">\r\n\t\t\t<ul class="paymentsAddedList">\r\n\t\t\t\t<li class="paymentsAddedListItem" ng-repeat="payment in model.checkoutDetails.payments" ng-include="\'/web/app/checkout/paymentAdded.html\'"></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n    </div>\r\n\r\n    <div class="messageContainer paymentMessageContainer" ng-if="model.maxPayments == model.checkoutDetails.payments.length">\r\n        <p class="message paymentMessage">{{\'Payment_Max_Payments_Reached\' | translate}}</p>\r\n    </div>\r\n</div>\r\n\r\n<div class="balanceContainer" ng-include="\'/web/app/checkout/balance.html\'"></div>'),$templateCache.put("/web/app/checkout/payment.other.html",'<div class="form paymentTypeForm paymentTypeOtherForm" ng-form="paymentOther" ng-submit="setPayment()">\r\n    <div class="titleContainer formTitleContainer paymentTypeOtherTitleContainer">\r\n        <h2 class="title formTitle paymentOtherFormTitle">{{\'Payment_Other\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer paymentTypeOtherContentContainer">\r\n        <div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypeOtherFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="formElements paymentTypeFormElements paymentTypeOtherFormElements">\r\n            <div class="inputContainer textInputContainer paymentAmountInputContainer">\r\n                <label for="payment_other_amount" class="inputText">{{\'Payment_AmountToPay\' | translate}} (Required)</label>\r\n                <span class="input textInputContainer paymentAmountInput">\r\n                    <input type="number" floating-label id="payment_other_amount" max="{{model.balance.toString()}}" min="0" name="amount" required ono-max="model.balance.toString()" ono-min="0" maxlength="7" numbers-only numeric-binding decimals="2" ng-model="payment.amount">\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer paymentTypeActionsContainer paymentTypeOtherActionsContainer">\r\n            <button class="submitAction paymentTypeOtherSubmitAction" type="submit" tabindex="1" ng-click="paymentOther.$submit()">\r\n                <span>{{\'Continue\' | translate}}</span>\r\n            </button>\r\n            <button class="cancelAction paymentTypeOtherCancelAction" tabindex="1" ng-click="$emit(\'cancelPayment\')">\r\n                <span>{{\'Cancel\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.pod.html",'<div class="form paymentTypeForm paymentTypePODForm" ng-form="paymentPOD" ng-submit="setPayment()">\r\n\t<div class="titleContainer formTitleContainer paymentTypePODFormTitleContainer">\r\n\t\t<h2 class="title formTitle paymentTypePODFormTitle">\r\n        {{((isDelivery() && payment.payment_type == \'POD\') ? \'Payment_PayOnDelivery\' : \'PaymentType_\' + payment.payment_type) | translate}}\r\n        </h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer paymentTypePODContentContainer">\r\n        <div class="errorContainer formErrorContainer paymentTypeFormErrorContainer paymentTypePODFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t\t<div class="formElements paymentTypeFormElements paymentTypePODFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer paymentAmountInputContainer">\r\n                <label for="payment_pod_amount" class="inputText">{{\'Payment_AmountToPay\' | translate}} (Required) </label>\r\n\t\t\t\t<span class="input textInput paymentAmountInput">\r\n\t\t\t\t\t<input type="number" floating-label step="0.01" id="payment_pod_amount" focus-selected-content name="amount" required ono-max="model.balance.toString()" ono-min="0" numbers-only numeric-binding allow-pattern="[^-+e]" decimals="2" ng-model="payment.amount">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer paymentTypeActionsContainer paymentTypePODActionsContainer">\r\n            <button class="cancelAction paymentTypePODCancelAction trk-podcancel" ng-click="$emit(\'cancelPayment\')">\r\n                <span>{{\'Cancel\' | translate}}</span>\r\n            </button>\r\n            <button class="submitAction paymentTypePODSubmitAction trk-podsave" type="submit" ng-click="paymentPOD.$submit()">\r\n                <span>{{\'Continue\' | translate}}</span>\r\n            </button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.select.dropdown.html",'<div class="paymentSelectOption paymentSelectOptionSelect">\r\n\t<ono-select class="onoInput onoSelect onoPaymentsSelect" role="list" tabindex="0" title="{{\'AddPayment\' | translate}}" ono-options="model.paymentOptions">\r\n    </ono-select>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.select.list.html",'<div class="paymentSelectOption paymentSelectList">\r\n\t<ul class="paymentTypesList">\r\n\t\t<li class="paymentTypesListItem" ng-repeat="option in model.acceptedPaymentTypes">\r\n\t\t\t<div class="paymentType paymentType{{option}}">\r\n\t\t\t\t<div class="paymentTypeContent paymentType{{option}}Content">\r\n\t\t\t\t\t<span>{{\'PaymentType_\' + option | translate}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="actionsContainer paymentTypeActionsContainer paymentType{{option}}ActionsContainer">\r\n\t\t\t\t\t<button class="selectAction paymentTypeAction paymentType{{option}}Action" ui-sref="{{option}}" ui-sref-opts="{location: false}">\r\n\t\t\t\t\t\t<span>{{\'Select\' | translate}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t</ul>\r\n</div>\r\n'),$templateCache.put("/web/app/checkout/payment.tip.html",'<div class="paymentTip">\r\n\t<div class="inputContainer textInputContainer tipInputContainer">\r\n\t\t<label class="inputText" for="payment_tip_amount_{{$id}}">{{\'Tip\' | translate}}</label>\r\n\t\t<span class="input textInput tipInput">\r\n\t\t    <input type="number" step="0.01" maxlength="9999999" min="0" name="tip" id="payment_tip_amount_{{$id}}" numbers-only numeric-binding decimals="2" ng-model="payment.tip">\r\n\t\t</span>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/checkout/payment.tipCalc.html",'<div class="tip tipCalc">\r\n    <div class="titleContainer tipTitleContainer">\r\n        <h3 class="title tipTitle">{{\'LeaveTipNow\' | translate}}</h3>\r\n    </div>\r\n\r\n    <div class="contentContainer tipCalcContentContainer">\r\n        <div class="tipOptionsContainer">\r\n            <div class="tipOption">\r\n                <div class="inputContainer radioContainer leaveTipInputContainer" ng-class="{active: leaveTip}">\r\n                    <label for="leave_tip_now_yes_{{$index}}">\r\n                        <span class="inputText" ng-class="{selected: leaveTip}">{{\'Yes\' | translate}}</span>\r\n                    </label>\r\n                    <span class="input radio leaveTipInput">\r\n                        <input type="radio" ng-value="true" name="leave_tip" ng-model="leaveTip" id="leave_tip_now_yes_{{$index}}" highlight-parent-on-focus>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="tipOption">\r\n                <div class="inputContainer radioContainer doNotLeaveTipInputContainer" ng-class="{active: !leaveTip}">\r\n                    <label for="leave_tip_now_no_{{$index}}">\r\n                        <span class="inputText" ng-class="{selected: !leaveTip}">{{\'No\' | translate}}</span>\r\n                    </label>\r\n                    <span class="input radio doNotLeaveTipInput">\r\n                        <input type="radio" ng-value="false" name="leave_tip" ng-model="leaveTip" ng-change="clearTip()" id="leave_tip_now_no_{{$index}}" highlight-parent-on-focus>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="tipAtRestaurant" ng-show="!leaveTip">\r\n            <p>{{\'TipAtRestaurant\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="tipOnline" ng-show="leaveTip">\r\n            <div class="inputContainer textInputContainer tipAmountInputContainer">\r\n                <label for="enter_tip_amount_{{$id}}" class="inputText">{{\'EnterTipAmount\' | translate}}</label>\r\n                <span class="input textInput tipAmountInput">\r\n                    <input type="number" floating-label id="enter_tip_amount_{{$id}}" ng-model="payment.tip" name="tip" allow-pattern="[^-+e]" decimals="2" max="9999" min="0" ng-change="tipPercent = null">\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer selectContainer tipPercentageSelectContainer">\r\n                <label class="inputText" for="select_tip_percentage_{{$id}}">{{\'ChooseTipPercentage\' | translate}}</label>\r\n                <span class="input select tipPercentageSelect">\r\n                    <select ng-options="option for option in [\'10%\',\'12%\',\'15%\',\'18%\']" ng-change="updateTip(tipPercent)" name="tip_percent" ng-model="tipPercent" id="select_tip_percentage_{{$id}}">\r\n                        <option value="">{{\'ChooseTipPercentage\' | translate}}</option>\r\n                    </select>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="tipTotalContainer" ng-show="payment.tip">\r\n            <p>\r\n                <span class="text">{{"TotalWithTip" | translate}}</span>\r\n                <span class="money">{{(payment.amount * 1) + (payment.tip * 1) | money}}</span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/checkout/paymentAdded.html",'<div class="paymentAdded" ng-if="displaySize.isDesktop">\r\n    <div class="paymentAddedInfo" ng-switch="payment.payment_type">\r\n        <span class="paymentAddedType paymentAddedCreditCard" ng-switch-when="CreditCard">\r\n            <span ng-class="card_type">\r\n                {{payment.credit_card.card_type}} *{{payment.credit_card.card_number | limitTo:-4}}\r\n            </span>\r\n        </span>\r\n        <span class="paymentAddedType" ng-switch-default>{{((isDelivery() && payment.payment_type === \'POD\') ? \'Payment_PayOnDelivery\' : \'PaymentType_\' + payment.payment_type) | translate}}</span>\r\n    </div>\r\n    <div class="paymentAddedAmount">\r\n        <span ng-if="payment.tip == 0" ng-bind-html="\'Payment_Total\' | translate:(payment.amount | money)"></span>\r\n        <span ng-if="payment.tip > 0" ng-bind-html="\'Payment_TotalWithTip\' | translate:((payment.amount * 1) + (payment.tip * 1) | money)"></span>\r\n    </div>\r\n    <div class="actionsContainer listItemActionsContainer paymentAddedActionsContainer" ng-if="!restaurantOnly" ng-switch="payment.payment_type">\r\n        <button class="editAction paymentAddedEditAction" ng-if="isPaymentEditable(payment)" ng-click="editPayment(payment)" aria-label="Edit Payment">\r\n            <span>{{\'Edit\' | translate}}</span>\r\n        </button>\r\n        <button class="deleteAction paymentAddedDeleteAction" ono-confirm="removePayment(payment)" ono-confirm-title="{{\'Remove\' + (payment.payment_type === \'POD\' ? \'Payment\' : payment.payment_type) + \'_ConfirmTitle\'  | translate}}" ono-confirm-message="{{\'Remove\' + (payment.payment_type === \'POD\' ? \'Payment\' : payment.payment_type) + \'_ConfirmMessage\'  | translate}}" aria-label="Remove Payment - Opens Dialog">\r\n            <span>{{\'Delete\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<div class="paymentAdded" ng-if="displaySize.isMobile">\r\n    <div class="paymentAddedInfoContainer" ng-class="{open: paymentExpand}" ng-click="paymentExpand = !paymentExpand">\r\n        <div class="paymentAddedInfo" ng-switch="payment.payment_type">\r\n            <span class="paymentAddedType paymentAddedCreditCard" ng-switch-when="CreditCard">\r\n                <span ng-class="card_type">\r\n                    {{payment.credit_card.card_type}} *{{payment.credit_card.card_number | limitTo:-4}}\r\n                </span>\r\n            </span>\r\n            <span class="paymentAddedType" ng-switch-default>{{((isDelivery() && payment.payment_type === \'POD\') ? \'Payment_PayOnDelivery\' : \'PaymentType_\' + payment.payment_type) | translate}}</span>\r\n        </div>\r\n        <div class="paymentAddedAmount">\r\n            <span ng-if="payment.tip == 0" ng-bind-html="\'Payment_Total\' | translate:(payment.amount | money)"></span>\r\n            <span ng-if="payment.tip > 0" ng-bind-html="\'Payment_TotalWithTip\' | translate:((payment.amount * 1) + (payment.tip * 1) | money)"></span>\r\n        </div>\r\n    </div>\r\n    <div class="paymentAddedAddlInfo" ng-show="paymentExpand">\r\n        <div class="actionsContainer listItemActionsContainer paymentAddedActionsContainer" ng-if="!restaurantOnly" ng-switch="payment.payment_type">\r\n            <button class="editAction paymentAddedEditAction" ng-if="isPaymentEditable(payment)" ng-click="editPayment(payment)" aria-label="Edit Payment">\r\n                <span>{{\'Edit\' | translate}}</span>\r\n            </button>\r\n            <button class="deleteAction paymentAddedDeleteAction" ono-confirm="removePayment(payment)" ono-confirm-title="{{\'Remove\' + (payment.payment_type === \'POD\' ? \'Payment\' : payment.payment_type) + \'_ConfirmTitle\'  | translate}}" ono-confirm-message="{{\'Remove\' + (payment.payment_type === \'POD\' ? \'Payment\' : payment.payment_type) + \'_ConfirmMessage\'  | translate}}" aria-label="Remove Payment - Opens Dialog">\r\n                <span>{{\'Delete\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/confirmation/confirmation.html",'<div class="confirmation">\r\n    <div class="titleContainer confirmationTitleContainer">\r\n        <h1 class="title confirmationTitle">{{\'OrderConfirmation\' | translate}}</h1>\r\n    </div>\r\n\r\n    <div class="contentContainer confirmationContentContainer">\r\n        <div class="confirmationContent">\r\n            <div class="confirmationDetails confirmationOrderInfo">\r\n                <div class="titleContainer confirmationOrderInfoTitleContainer">\r\n                    <h2 class="title confirmationOrderInfoTitle">{{\'OrderDetails\' | translate}}</h2>\r\n                </div>\r\n\r\n                <div class="confirmationOrderInfoContentContainer">\r\n                    <p class="message confirmationMessage" ng-bind-html="\'Confirmation_PickupTimeMessage\' | translate:(model.confirmation.order_details.fulfillment_date | moment: \'h:mm a\'):(model.confirmation.order_details.fulfillment_date | moment: \'l\')" ng-if="model.confirmation.order_details.fulfillment_type != \'Delivery\'"></p>\r\n                    <p class="message confirmationEmailMessage" ng-bind-html="\'Confirmation_DeliveryTimeMessage\' | translate:(model.confirmation.order_details.fulfillment_date | moment: \'h:mm a\'):(model.confirmation.order_details.fulfillment_date | moment: \'l\')" ng-if="model.confirmation.order_details.fulfillment_type == \'Delivery\'"></p>\r\n                    <p class="message confirmationEmailMessage" ng-bind-html="\'ConfirmationEmailMessage\' | translate:model.confirmation.confirmation_email"></p>\r\n\r\n                    <p class="orderDetailsInfo ordertypeinfo">\r\n                        <span class="label">{{\'Invoice_OrderType\' | translate}}</span>\r\n                        <span class="details">{{model.confirmation.fulfillment_type | translate}}</span>\r\n                    </p>\r\n                    <p class="orderDetailsInfo orderPlacedInfo">\r\n                        <span class="label">{{\'Invoice_OrderPlaced\' | translate}}</span>\r\n                        <span class="details">{{model.confirmation.order_details.date_placed | moment: \'l h:mm a\'}}</span>\r\n                    </p>\r\n                    <p class="orderDetailsInfo orderDateInfo">\r\n                        <span class="label">{{\'Invoice_ExpectedDate\' | translate}}</span>\r\n                        <span class="details">{{model.confirmation.order_details.fulfillment_date | moment: \'l h:mm a\'}}</span>\r\n                    </p>\r\n                    <p class="orderDetailsInfo orderNumberInfo">\r\n                        <span class="label">{{\'Invoice_OrderNumber\' | translate}}</span>\r\n                        <span class="details">{{model.confirmation.order_details.order_number}}</span>\r\n                    </p>\r\n                    <p class="orderDetailsInfo orderPaymentTypeInfo">\r\n                        <span class="label">{{\'Invoice_PaymentType\' | translate}}</span>\r\n                        <span class="details" ng-repeat="(paymenttype, value) in model.confirmation.order_details.totals.payments">\r\n                            <span>{{\'PaymentType_\' + paymenttype | translate}}</span><span ng-if="!$last">, </span>\r\n                        </span>\r\n                    </p>\r\n                    <p class="orderDetailsInfo orderCustomerInfo">\r\n                        <span class="label">{{\'Invoice_Customer\' | translate}}</span>\r\n                        <span class="details">\r\n                            {{model.confirmation.order_details.fulfillment_details.first_name}} {{model.confirmation.order_details.fulfillment_details.last_name}}<br>\r\n                            {{model.confirmation.order_details.fulfillment_details.email}}<br>\r\n                            <span class="phone" ng-if="!displaySize.isMobile">{{model.confirmation.order_details.fulfillment_details.phone | phone}}</span>\r\n                            <a ng-href="tel:{{model.confirmation.order_details.fulfillment_details.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n                                <span>{{model.confirmation.order_details.fulfillment_details.phone | phone}}</span>\r\n                            </a>\r\n                        </span>\r\n                    </p>\r\n\r\n                    <p class="message confirmationInvoiceMessage" ng-if="loggedIn" ng-bind-html="\'ConfirmationInvoiceMessage\' | translate"></p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="confirmationDetails confirmationRestaurantInfo">\r\n\t\t\t\t<div class="confirmationDetailsContent confirmationDetailsChangeOrder">\r\n\t\t\t\t\t<div class="titleContainer confirmationRestraurantInfoTitleContainer">\r\n\t\t\t\t\t\t<h2 class="title confirmationRestaurantInfoTitle">{{\'RestaurantInfo\' | translate}}</h2>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class="descriptionContainer confirmationRestaurantDescriptionContainer">\r\n\t\t\t\t\t\t<p class="description confirmationRestaurantDescription">{{\'RestaurantInfo_Message\' | translate}} <span class="phone" ng-if="!displaySize.isMobile">{{model.confirmation.restaurant_address.phone | phone}}</span><a ng-href="tel:{{model.confirmation.restaurant_address.phone}}" class="phone" ng-if="displaySize.isMobile"><span>{{model.confirmation.restaurant_address.phone | phone}}</span></a>.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class="confirmationDetailsContent confirmationDetailsRestaurantInfo">\r\n\t\t\t\t\t<div class="titleContainer confirmationRestaurantInfoTitleContainer">\r\n\t\t\t\t\t\t<h3 class="title">{{\'YourRestaurant\' | translate}}</h3>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class="contentContainer confirmationDetailsContentContainer">\r\n\t\t\t\t\t\t<div class="addressContainer" ng-include="\'/web/app/address/address.display.html\'"></div>\r\n\r\n\t\t\t\t\t\t<div class="restaurantHoursContainer confirmationRestaurantHoursContainer" ng-include="\'/web/app/restaurant/restaurant.hours.html\'"></div>\r\n\t\t\t\t\t</div>\r\n                    <div ng-if="model.restaurant.isPickUpOnly">\r\n                        <strong>\r\n                            {{\'PickUp_Only\'|translate}}\r\n                        </strong>\r\n                    </div>\r\n\t\t\t\t</div>\r\n            </div>\r\n\r\n            <div class="confirmationDetails confirmationCart">\r\n                <div class="titleContainer confirmationCartTitleContainer">\r\n                    <h2 class="title confirmationCartTitle">{{\'OrderItems\' | translate}}</h2>\r\n                </div>\r\n\r\n                <div class="contentContainer cartItemContentContainer">\r\n                    <ul class="cartItemList confirmationCartItemList">\r\n                        <li class="orderItemContainer confirmationOrderItemContainer" ng-repeat="oi in model.confirmation.order_details.order_items" ng-include="\'/web/app/cart/order_item.html\'"></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="confirmationDetails confirmationOrderTotals">\r\n                <div class="orderTotalsContainer confirmationOrderTotalsContainer" ng-include="\'/web/app/cart/orderTotals.html\'"></div>\r\n            </div>\r\n\r\n            <div class="confirmationSection dineRewardsSignup" ng-if="isDineRewardsModuleAvailable && (model.confirmation.dineRewardsStatus == \'Unlinked\')">\r\n                <div class="dineRewardsSignupContainer">\r\n                   \r\n                    <span ng-bind-html="\'DineRewards_Confirmation_Text\' | translate"></span>\r\n                    <a href="{{ dineRewardsUrl }}" target="_bloomin" aria-label="{{\'Sign_Up_Label\' | translate}}">{{\'Sign_Up_Now\' | translate}}</a>.\r\n                </div>\r\n                <div class="dineRewardsSignupFinePrint">\r\n                   {{\'Disclaimer_Message\' | translate}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer confirmationActionsContainer" ng-if="!loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n            <button class="createAction confirmationCreateAccountAction trk-confirmationregister" ng-click="confirmationRegister()">\r\n                <span>{{\'CreateAccount\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="js-confirmationAnalytics" style="display: none;"></div>'),$templateCache.put("/web/app/confirmation/confirmation.sections.html",'<div class="confirmation confirmationSections">\r\n    \r\n    <div class="titleContainer confirmationTitleContainer">\r\n        <h1 class="title confirmationTitle">{{\'OrderConfirmation\' | translate}}</h1>\r\n    </div>\r\n\r\n    <div class="contentContainer confirmationContentContainer">\r\n        <div class="confirmationContent emptyCartContainer" ng-if="!model.cart.order_items.length">\r\n            <p class="emptyCartMessage">{{\'CartEmpty\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="confirmationContent">\r\n            <div class="confirmationSection confirmationIntro">\r\n                <p ng-bind-html="(model.confirmation.order_details.fulfillment_type == \'Delivery\' ? \'OrderConfirmDeliveryMessage\' : \'OrderConfirmMessage\') | translate:model.confirmation.confirmation_email"></p>\r\n            </div>\r\n            \r\n            <div class="confirmationSection orderInfoSection">\r\n                <div class="orderInfoContent">\r\n                    <div class="locationDetailsContainer" ui-view="restaurantInfo"></div>\r\n                    <div class="orderDetailsContainer" ui-view="fulfillmentInfo"></div>\r\n                    <div class="orderComplimentaryItemsContainer" ng-if="model.confirmation.order_details.complimentary_items.length">\r\n                        <div class="titleContainer orderComplimentaryItemsTitleContainer">\r\n                            <h2 class="title orderComplimentaryItemsTitle">{{\'Comments\' | translate}}</h2>\r\n                        </div>\r\n                        <div class="orderComplimentaryItemsContent">\r\n                            <div class="orderComplimentaryItem" ng-class="{notIncluded: item.quantity == 0}" ng-repeat="item in model.confirmation.order_details.complimentary_items">\r\n                                {{item.title}} {{\'Will\' | translate}} <span ng-if="item.quantity == 0">{{\'Not\' | translate}}</span> {{\'ComplimentaryItem_IncludedInOrder\' | translate}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="orderChangesContainer">\r\n                    <p class="orderChangesText">{{\'OrderChangesMessage\' | translate: (model.confirmation.restaurant_address.phone | phone)}}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="confirmationSection cartItemsSection">\r\n                <div class="cartItemsContainer" ui-view="cartItems"></div>\r\n            </div>\r\n\r\n            <div class="confirmationSection orderTotalsSection">\r\n                <div class="orderTotalsContainer" ui-view="orderTotals"></div>\r\n            </div>\r\n\r\n            <div class="confirmationSection confirmationActions">\r\n                <div ng-if="ctaViewOrder" class="printInvoiceContainer">\r\n                    <p class="printInvoiceMessage" ng-bind-html="\'PrintInvoiceMessage\' | translate:model.confirmation.order_id"></p>\r\n                </div>\r\n                <div class="actionsContainer confirmationActionsContainer">\r\n                    <button class="createAccountAction confirmationCreateAccountAction" ng-click="confirmationRegister()" ng-if="!loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                        <span>{{\'CreateAccount\' | translate}}</span>\r\n                    </button>\r\n                    <button class="saveOrderAction confirmationSaveOrderAction" ng-click="pastOrder = {id: model.confirmation.order_id}; showDialog(\'order.save\')" ng-if="loggedIn && !featureFlags.UserAccount.hideAccounts" ng-show="!featureFlags.hideSaveOrder">\r\n                        <span>{{\'Cart_SaveOrder\' | translate}}</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="confirmationSection dineRewardsSignup" ng-if="isDineRewardsModuleAvailable && (model.confirmation.dineRewardsStatus == \'Unlinked\')">\r\n                <div class="dineRewardsSignupContainer">\r\n                    <span ng-bind-html="\'DineRewards_Confirmation_Text\' | translate"></span>\r\n                    <a href="{{ dineRewardsUrl }}" tabindex="0" target="_bloomin" aria-label="{{\'Sign_Up_Label\' | translate}}">{{\'Sign_Up_Now\' | translate}}</a>.\r\n                </div>\r\n                <div class="dineRewardsSignupFinePrint">\r\n                    {{\'Disclaimer_Message\' | translate}}\r\n                </div>\r\n            </div>\r\n            <div class="confirmationSection opinionLabCallToAction" ng-if="opinionLabSurveyOnConfirmationPage">\r\n                <h2 ng-if="displaySize.isDesktop">{{\'OpinionLab_Help_us\' | translate}}</h2>\r\n                <button class="opinionLabAction confirmationOpinionLabAction" onclick="OOo.oo_launch(event, \'oo_static_invite\')">\r\n                    <span>{{\'OpinionLab_Tell_Us\' | translate}}</span>\r\n                </button>\r\n\r\n            </div>\r\n            </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/confirmation/fulfillmentInfo.html",'<div class="fulfillmentInfo">\r\n    <div class="titleContainer fullfilmentInfoTitleContainer">\r\n        <h2 class="title fullfilmentInfoTitle">{{\'OrderDetails\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer fulfillmentInfoContentContainer">\r\n        <div class="fulfillmentContent fulfillmentInfoDateTime">\r\n\r\n            <div fulfillment-time-2 fulfillment-type="model.confirmation.order_details.fulfillment_type" fulfillment-date-type="model.confirmation.isAsap ? \'ASAP\' : \'Specific\'" show-actual-time="true" service-time="{ serviceTimeRangeLower : model.confirmation.order_details.serviceTimeRangeLower, serviceTimeRangeUpper : model.confirmation.order_details.serviceTimeRangeUpper, leadTime : model.confirmation.order_details.lead_time } " date-placed="model.confirmation.order_details.date_placed" date-expected="model.confirmation.order_details.fulfillment_date"></div>\r\n\r\n            <div class="deliveryAddress addressContainer info" ng-if="model.confirmation.order_details.fulfillment_type == \'Delivery\'">\r\n                <span class="address">\r\n                    <span>To:</span>\r\n                    <span class="address1">{{ model.confirmation.order_details.fulfillment_details.delivery_address.address1}}</span>\r\n                    <span class="address2" ng-show="model.confirmation.order_details.fulfillment_details.delivery_address.address2">{{ model.confirmation.order_details.fulfillment_details.delivery_address.address2}}</span>\r\n                    <span class="city state zip">{{model.confirmation.order_details.fulfillment_details.delivery_address.city}}, {{model.confirmation.order_details.fulfillment_details.delivery_address.state}} {{model.confirmation.order_details.fulfillment_details.delivery_address.zip_code}}</span>\r\n                </span>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="actionsContainer fulfillmentInfoActionsContainer">\r\n            <a class="editAction fulfillmentInfoEditAction" ui-sref="orderSetup({id: model.cart.restaurant.id})" ng-click="$emit(\'done\')">\r\n                <span>{{\'EditOrderDetails\' | translate}}</span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/creditcard/credit_card.display.html",'<span class="ccDisplay">\r\n\t<span class="ccName">{{creditCard.name_on_card}}</span>\r\n\t<span class="cNumberExpiration">\r\n\t\t<span class="ccInfo" ng-class="card_type">{{creditCard.card_type}} *{{creditCard.card_number | limitTo:-4}}</span>\r\n\t\t<span class="ccExpiration">{{creditCard.expiration_month | monthName}}/{{creditCard.expiration_year}}</span>\r\n\t</span>\r\n</span>'),$templateCache.put("/web/app/creditcard/credit_card.edit.html",'<div class="ccEditCCContainer">\r\n    <div class="titleContainer ccEditTitleContainer">\r\n        <h2 class="title" ng-hide="creditCard.id">{{\'AddCreditCard\' | translate}}</h2>\r\n        <h2 class="title" ng-hide="!creditCard.id">{{\'EditCreditCard\' | translate}}</h2>\r\n    </div>\r\n    <div>\r\n        <div ng-hide="creditCard.id">\r\n            <div class="iframeMain">\r\n                <iframe id="frame_carddetails" name="frame_carddetails" class="editFrame" ng-src="{{aurusSession.iframeUrl}}" aurus-container></iframe>\r\n            </div>\r\n            <form id="payment-form" name="paymentForm">\r\n                <div class="paymentSumbitForm">\r\n                    <div class="saveCardMessageContainer">\r\n                        <span class="saveCardMessage">{{\'Save_Card_Message\' | translate}}</span>\r\n                    </div>\r\n                    <div class="actionsContainer paymentTypeActionsContainer paymentTypeCCEditActionsContainer">\r\n                        <button class="submitAction ccEditSubmitAction" type="submit" ng-click="submitAurusIframe()">\r\n                            <span>{{\'Save\' | translate}}</span>\r\n                        </button>\r\n                        <button class="cancelAction ccEditCancelAction" type="button" ng-click="$state.go(\'creditCards\', {}, { reload: true })">\r\n                            <span>{{\'Cancel\' | translate}}</span>\r\n                        </button>\r\n                    </div>\r\n                <div class="errorContainer formErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n                    </div>\r\n            </form>\r\n        </div>\r\n        <form class="formElements paymentTypeFormElements" id="payment-form-edit" name="paymentFormEdit" ng-hide="!creditCard.id" ng-submit="saveCreditCard(creditCard)" novalidate>\r\n            <div class="iframeMain paymentTypeCCEditFormElements">\r\n                <div class="inputContainer textInputContainer cardNameInputContainer">\r\n                    <label class="inputText" for="name_on_card">{{\'Card_Name\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                        <span class="input textInput cardNameInput">\r\n                            <input type="text" floating-label name="name_on_card" id="name_on_card" ng-model="creditCard.name_on_card" allow-pattern="([A-Z]|\\s)" autocomplete="cc-name" required maxlength="30">\r\n                        </span>\r\n                </div>\r\n                <div class="inputContainer selectContainer cardTypeInputContainer">\r\n                    <label class="inputText" for="card_type">{{\'Card_Type\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                    <span class="input textInput cardTypeInput">\r\n                        <input type="text" floating-label name="card_type" id="card_type" value="{{creditCard.formattedCardType}}" ng-model="creditCard.formattedCardType" disabled="disabled" readonly="readonly">\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer cardNumberInputContainer">\r\n                    <label class="inputText" for="cardNumber">{{\'Card_Number\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                    <span class="input textInput cardNumberInput">\r\n                        <input type="text" floating-label name="card_number" required mask="{{card_type_mask}}" ng-model="creditCard.card_number" id="cardNumber" disabled="disabled" readonly="readonly">\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer selectContainer cardMonthSelectContainer">\r\n                    <label class="inputText" for="cardExpirationMonth">{{\'Card_Month\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                    <span class="input select cardMonthSelect">\r\n                        <select name="expiration_month" ng-model="selectedMonth" required autocomplete="cc-exp-month" id="cardExpirationMonth" ng-options="month for month in months"></select>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer selectContainer cardYearSelectContainer">\r\n                    <label class="inputText" for="cardExpirationYear">{{\'Card_Year\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                    <span class="input select cardYearSelect">\r\n                        <select name="expiration_year" ng-model="selectedYear" required autocomplete="cc-exp-year" id="cardExpirationYear" ng-options="year as year.toString().slice(-2) for year in years"></select>\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer textInputContainer cardZipCodeInputContainer">\r\n                    <label class="inputText" for="zipcode">{{\'ZipCode\' | translate}} {{\'ADA_Required_Label\' | translate}}</label>\r\n                    <span class="input textInput cardZipCodeInput">\r\n                        <input name="verification_zip_code" floating-label ng-model="creditCard.verification_zip_code" type="text" numbers-only ng-pattern="/^(\\d{5})$/" maxlength="5" autocomplete="postal-code" id="zipcode" required>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="paymentSumbitForm">        \r\n                <div class="actionsContainer paymentTypeActionsContainer paymentTypeCCEditActionsContainer">   \r\n                    <button class="submitAction ccEditSubmitAction" type="button" ng-click="paymentFormEdit.$submit();" ng-disabled="paymentFormEdit.$invalid">\r\n                        <span>{{\'Save\' | translate}}</span>\r\n                    </button>\r\n                    <button class="cancelAction ccEditCancelAction" type="button" ng-click="$state.go(\'creditCards\', {}, { reload: true })">\r\n                        <span>{{\'Cancel\' | translate}}</span>\r\n                    </button>\r\n                </div>\r\n            <div class="errorContainer formErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n                </div>\r\n        </form>    \r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/creditcard/credit_card.list.html",'<div class="accountList ccList" ui-view>\r\n\t<div class="titleContainer ccListTitleContainer">\r\n\t\t<h2 class="title ccListTitle">{{\'SavedCreditCards\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer ccListContentContainer">\r\n\t\t<div class="messageContainer ccListMessageContainer" ng-if="creditCards.length < 1">\r\n\t\t\t<p class="message ccListMessage">{{\'SavedCreditCardsEmpty\' | translate}}</p>\r\n\t\t</div>\r\n\r\n\t\t<div class="ccListListContainer" ng-if="creditCards.length > 0">\r\n\t\t\t<ul class="ccListList">\r\n\t\t\t\t<li class="ccListListItem" ng-repeat="creditCard in creditCards">\r\n\t\t\t\t\t<div class="ccListItemContent">\r\n\t\t\t\t\t\t<div class="ccListCard">\r\n\t\t\t\t\t\t\t<span class="name">{{creditCard.name_on_card}}</span>\r\n\t\t\t\t\t\t\t<span class="cardNumberExpiration">\r\n\t\t\t\t\t\t\t\t<span class="cardInfo" ng-class="card_type">{{creditCard.card_type}} *{{creditCard.card_number | limitTo:-4}}</span>\r\n\t\t\t\t\t\t\t\t<span class="expiration">{{creditCard.expiration_month}}/{{creditCard.expiration_year}}</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="address ccListAddress">\r\n\t\t\t\t\t\t\t<span class="address1" ng-if="creditCard.billing_address.address1">{{creditCard.billing_address.address1}}</span>\r\n\t\t\t\t\t\t\t<span class="city state zip" ng-if="creditCard.billing_address">{{creditCard.billing_address.city}}, {{creditCard.billing_address.state}} {{creditCard.billing_address.zip_code}}</span>\r\n\t\t\t\t\t\t\t<span class="city state zip" ng-if="!creditCard.billing_address">{{creditCard.verification_zip_code}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="actionsContainer listItemActionsContainer ccListListItemActionsContainer">\r\n\t\t\t\t\t\t<button class="editAction ccListListItemEditAction" title="Edit Credit Card" aria-label="{{\'Edit\' | translate}} - {{creditCard.card_type}} *{{creditCard.card_number | limitTo:-4}}" ui-sref="editCreditCards({id:creditCard.id})">\r\n\t\t\t\t\t\t\t<span>{{\'Edit\' | translate}}</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="deleteAction ccListListItemDeleteAction" title="Remove Credit Card" ono-confirm="removeCreditCard(creditCard)" aria-label="{{\'Delete\' | translate}} - {{creditCard.card_type}} *{{creditCard.card_number | limitTo:-4}}" ono-confirm-title="{{ \'RemoveCreditCardPayment_ConfirmTitle\' | translate }}" ono-confirm-message="{{ \'RemoveCreditCardPayment_ConfirmMessage\' | translate }}">\r\n\t\t\t\t\t\t\t<span>{{\'Delete\' | translate}}</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer ccListActionsContainer">\r\n\t\t\t<button class="editAction ccListEditAction" ui-sref="editCreditCards">\r\n\t\t\t\t<span>{{\'NewCreditCard\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="backAction ccListBackAction" ui-sref="home" ng-if="displaySize.isMobile">\r\n\t\t\t\t<span>{{\'Back\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/creditcard/credit_card.select.html",'<div class="cardSelect creditCardSelect">\r\n\t<div class="cardSelectContent creditCardSelectContent">\r\n\t\t<div class="inputContainer radioContainer ccInfoInputContainer">\r\n\t\t\t<label class="inputText" for="credit_card_select_{{$id}}">\r\n\t\t\t\t<span class="cardName">{{credit_card.name_on_card}}</span>\r\n\t\t\t\t<span class="cardType">{{credit_card.card_type}}</span>\r\n\t\t\t\t<span class="cardNumber">{{credit_card.card_number}}</span>\r\n\t\t\t\t<span class="cardBA">{{credit_Card.billing_address.address1}}</span>\r\n\t\t\t\t<span class="cardCityStateZip">\r\n\t\t\t\t\t{{credit_card.billing_address.city}} {{credit_card.billing_address.state}}, {{credit_card.billing_address.zip_code}}\r\n\t\t\t\t</span>\r\n\t\t\t</label>\r\n\t\t\t<span class="input radio ccInfoInput">\r\n\t\t\t\t<input type="radio" name="credit_card" id="credit_card_select_{{$id}}" ng-model="$parent.credit_card" ng-value="credit_card">\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="actionsContainer cardSelectActionsContainer ccSelectActionsContainer">\r\n\t\t<button class="editAction ccSelectEditAction" title="Edit Credit Card" ui-sref="editCreditCard({id: credit_card.id})">\r\n\t\t\t<span>{{\'Edit\' | translate}}</span>\r\n\t\t</button>\r\n\t\t<button class="deleteAction ccSelectDeleteAction" title="Delete Credit Card" ono-confirm="removeCreditCard(credit_card)" ono-confirm-title="{{ \'RemoveCreditCardPayment_ConfirmTitle\' | translate }}" ono-confirm-message="{{ \'RemoveCreditCardPayment_ConfirmMessage\' | translate }}">\r\n\t\t\t<span>{{\'Delete\' | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/customer/customer.edit.html",'<form class="form customerEditForm" name="customerForm" novalidate="novalidate">\r\n\r\n    <div class="titleContainer formTitleContainer customerEditFormTitleContainer">\r\n        <h2 class="title formTitle customerEditFormTitle">Account Info</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer customerContentContainer">\r\n        <div class="formElements customerEditFormElements">\r\n            <div class="inputContainer textInputContainer firstNameInputContainer">\r\n                <label for="customer_edit_first_name" class="inputText">First name (Required)</label>\r\n                <span class="input checkbox firstNameInput">\r\n                    <input type="text" floating-label maxlength="30" name="first_name" id="customer_edit_first_name" ng-model="customer.first_name" validate-profanity form-reference="customerForm.first_name" profanity-value="customer.first_name" value="{{customer.first_name}}" allow-pattern="([0-9]|[A-Z]|\\s)" autocomplete="given-name" required>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer lastNameInputContainer">\r\n                <label for="customer_edit_last_name" class="inputText">Last name (Required)</label>\r\n                <span class="input checkbox lastNameInput">\r\n                    <input type="text" floating-label id="customer_edit_last_name" name="last_name" maxlength="30" ng-model="customer.last_name" value="{{customer.last_name}}" allow-pattern="([0-9]|[A-Z]|\\s)" autocomplete="family-name" required>\r\n                </span>\r\n            </div>\r\n            <div class="inputContainer textInputContainer emailInputContainer">\r\n                <label for="customer_edit_email" class="inputText">Email (Required)</label>\r\n                <span class="input checkbox emailInput">\r\n                    <input type="email" floating-label name="email" id="customer_edit_email" ng-model="customer.email" value="{{customer.email}}" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" autocomplete="email" maxlength="56" required sanitize="gdpr">\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n            <div class="inputContainer selectContainer countrySelectContainer" ng-if="values.countries.length > 1">\r\n                <label class="inputText" for="customer_edit_country">{{\'Country\' | translate}} (Required)</label>\r\n                <span class="input select countrySelect">\r\n                    <select required ng-options="country.Key for country in values.countries track by country.Key" ng-model="customer.country" autocomplete="country" id="customer_edit_country" name="country" field-label="{{\'Country\' | translate}}"></select>\r\n                </span>\r\n            </div>\r\n\r\n            <div class="inputContainer textInputContainer phoneInputContainer">\r\n                <label for="customer_edit_phone" class="inputText">{{\'Phone\' | translate}} (Required)</label>\r\n                <span class="input checkbox phoneInput">\r\n                    <input type="tel" floating-label name="phone" id="customer_edit_phone" ng-model="customer.phone" value="{{customer.phone}}" numbers-only telephone-number autocomplete="tel" maxlength="10" mask="{{phoneMask}}" required>\r\n                </span>\r\n            </div>\r\n\r\n            <div class="inputContainer textInputContainer cellPhoneInputContainer">\r\n                <label for="customer_edit_sms_number" class="inputText">Cell phone</label>\r\n                <span class="input checkbox cellPhoneInput">\r\n                    <input type="tel" floating-label name="sms_number" id="customer_edit_sms_number" ng-model="customer.sms_number" value="{{customer.sms_number}}" numbers-only telephone-number autocomplete="mobile tel" mask="{{phoneMask}}">\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="customerContent">\r\n            <div class="titleContainer formTitleContainer customerEditFormMarketingTitleContainer">\r\n                <h3 class="title formTitle customerEditFormMarketingTitle">Marketing</h3>\r\n            </div>\r\n            <div class="formElements customerEditFormMarketingElements">\r\n                <div class="inputContainer checkboxContainer newsletterInputContainer" ng-class="{active: customer.obs_get_news_letters}">\r\n                    <label for="customer_edit_get_news_letter">\r\n                        <span class="inputText" ng-class="{selected: customer.obs_get_news_letters}" id="getNewsLettersLabel">\r\n                            {{"Receive_Newsletter_Text" | translate}}\r\n                        </span>\r\n                    </label>\r\n                    <span class="input checkbox newsletterInput">\r\n                        <input type="checkbox" highlight-parent-on-focus id="customer_edit_get_news_letter" name="get_news_letter" ng-checked="{{customer.obs_get_news_letters}}" ng-model="customer.obs_get_news_letters">\r\n                    </span>\r\n                </div>\r\n                <div class="inputContainer checkboxContainer textMessageInputContainer">\r\n                    <label ng-class="{active: customer.allow_sms}" for="customer_edit_allow_sms">\r\n                        <span class="inputText" ng-class="{selected: customer.allow_sms}" id="allowSMSLabel">\r\n                            {{"Receive_Text_Messages" | translate}}\r\n                        </span>\r\n                    </label>\r\n                    <span class="input checkbox textMessageInput">\r\n                        <input type="checkbox" highlight-parent-on-focus id="customer_edit_allow_sms" name="allow_sms" ng-checked="{{customer.allow_sms}}" ng-model="customer.allow_sms">\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer formActionsContainer customerEditFormActionsContainer">\r\n            <button class="submitAction customerEditFormSubmitAction" type="submit" ng-click="customerForm.$submit()">\r\n                <span>{{\'Save\' | translate}}</span>\r\n            </button>\r\n            <button class="backAction customerEditBackAction" ui-sref="home" ng-if="displaySize.isMobile">\r\n                <span>{{\'Back\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("/web/app/dialog/dialog.html",'<div class="overlay" ng-click="handleDialogUserAction()" ng-controller="onoDialogCtrl">\r\n\t<div class="dialog" ng-class="classes" ng-click="$event.stopPropagation()" role="region" aria-labelledby="dialogTitle_{{$id}}">\r\n\t\t<header class="titleContainer dialogTitleContainer">\r\n            <h1 id="dialogTitle_{{$id}}" class="title dialogTitle" ng-bind-html="title | translate"></h1>\r\n\t\t\t<button class="closeAction dialogCloseAction" title="Close" ng-click="handleDialogUserAction()">\r\n\t\t\t\t<span class="visuallyHidden">{{\'Close\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</header>\r\n\r\n\t\t<div class="dialogBody">\r\n\t\t\t<content class="dialogContent">\r\n\t\t\t\t===\r\n\t\t\t</content>\r\n\r\n\t\t\t<footer class="actionsContainer dialogActionsContainer" ng-if="type == \'confirm\'">\r\n\t\t\t\t<button class="continueAction dialogAction dialogContinueAction" ng-click="handleDialogUserAction()">\r\n\t\t\t\t\t<span>{{\'Continue\' | translate}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="cancelAction dialogAction dialogCancelAction" ng-click="handleDialogUserAction()">\r\n\t\t\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</footer>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("/web/app/dialog/dialogAlert.changeLocation.html",'<div class="overlay">\r\n    <div class="dialog dialogAlert" ng-class="classes" ng-controller="onoAlertCtrl" role="region" aria-labelledby="dialogAlertTitle">\r\n\t\t<div class="titleContainer dialogTitleContainer dialogAlertTitleContainer">\r\n\t\t\t<h2 class="title dialogTitle dialogAlertTitle" ng-bind-html="title | translate"></h2>\r\n\t\t</div>\r\n\r\n\t\t<div class="dialogBody dialogAlertBody">\r\n\t\t\t<div class="dialogContent dialogAlertContent">\r\n                <div class="messageContainer dialogAlertMessageContainer" ng-if="expressToNonExpress">\r\n                    <p class="message dialogAlertMessage">{{\'ExpressToNonExpress_UserAlert_ChangeLocation\' | translate}}</p>\r\n                </div>\r\n\r\n                <div class="dialogInvalidCartItemListContainer" ng-if="!expressToNonExpress&&invalidItems">\r\n                    <ul class="dialogList dialogInvalidCartItemList">\r\n                        <li class="dialogListItem dialogInvalidCartItemListItem" ng-repeat="item in invalidItems">\r\n                            <span>{{ item.message | translate}}</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div class="messageContainer dialogAlertMessageContainer">\r\n                    <p class="message dialogAlertMessage">{{\'UserAlert_ChangeLocation\' | translate}}</p>\r\n                </div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="actionsContainer dialogActionsContainer dialogAlertActionsContainer" ng-if="actions">\r\n\t\t\t\t<button class="continueAction dialogAction dialogAlertAction" ng-repeat="action in actions" ng-click="handleAlertAction(action)">\r\n\t\t\t\t\t<span>{{action.name | translate}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/dialog/dialogAlert.html",'<div class="overlay">\r\n    <div class="dialog dialogAlert" ng-class="classes" ng-controller="onoAlertCtrl" role="region" aria-labelledby="dialogAlertTitle">\r\n\t\t<div class="titleContainer dialogTitleContainer dialogAlertTitleContainer">\r\n\t\t\t<span id="dialogAlertTitle" class="title dialogTitle dialogAlertTitle" ng-bind-html="title | translate"></span>\r\n\t\t</div>\r\n\r\n\t\t<div class="dialogBody dialogAlertBody">\r\n\t\t\t<div class="dialogContent dialogAlertContent">\r\n\t\t\t\t<p class="message dialogAlertMessage" ng-bind-html="message | translate"></p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="actionsContainer dialogActionsContainer dialogAlertActionsContainer" ng-if="actions">\r\n\t\t\t\t<button class="continueAction dialogAction dialogAlertAction" ng-repeat="action in actions" ng-click="handleAlertAction(action)">\r\n\t\t\t\t\t<span>{{action.name | translate}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/dialog/userAlert.html",'<div class="userAlert">\r\n\t<div class="messageContainer userAlertMessageContainer">\r\n\t\t<p class="message userAlertMessage">{{userAlert.message | translate}}</p>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer userAlertActionsContainer">\r\n\t\t<button class="userAlertAction" ng-repeat="action in userAlert.actions" ng-click="action.action(userAlert);">\r\n\t\t\t<span>{{action.name | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/houseAccount/house_accounts.html",'<div class="houseAccounts">\r\n    <h2 class="title houseAccountsTitle">House Accounts</h2>\r\n</div>'),$templateCache.put("/web/app/layout/content.html",'<div class="content" ng-class="{ contentPaddingOverride: displaySize.isMobile && dineRewardMobilePodDisplay }">\r\n    <div class="contentInnerContainer" autoscroll="true" ui-view></div>\r\n    <aside class="sidebarContainer" ng-if="displaySize.isDesktop">\r\n        <div class="layout sidebar">\r\n            <div class="sidebarContentContainer">\r\n\r\n                <div class="sidebarContent orderPathsContainerTop" ui-view="checkoutButtonOnly" ng-if="model.cart.order_items.length > 0"></div>\r\n\r\n                <div class="sidebarContent orderDetailsContainer" ui-view="orderDetails" ng-if="model.cart.order_items.length > 0"></div>\r\n\r\n                <div class="sidebarContent orderTotalsContainer" ui-view="orderTotals" ng-if="model.cart.order_items.length > 0"></div>\r\n\r\n                <div class="sidebarContent dineRewardsContainer" ng-if="featureFlags.dineRewards.displayDineRewardsSideBar"><div ui-view="dineRewardsReviewInput"></div></div>\r\n\r\n                <div class="sidebarContent fulfillmentAddressContainer" ui-view="fulfillmentAddress" ng-if="model.cart.order_items.length > 0 && isDelivery()"></div>\r\n\r\n                <div class="sidebarContent fulfillmentLocationContainer" ui-view="fulfillmentLocation" ng-if="displayRestaurantLocationSidebar"></div>\r\n\r\n                <div class="sidebarContent fulfillmentTimeContainer" ui-view="fulfillmentTime" ng-if="displayRestaurantLocationSidebar"></div>\r\n\r\n                <div class="sidebarContent orderPathsContainer" ui-view="orderPathActions" ng-if="model.cart.order_items.length > 0"></div>\r\n\r\n            </div>\r\n        </div>\r\n    </aside>\r\n    <div class="dineRewardsMobilePod" ui-view="dineRewardsMobilePod" autoscroll="false" ng-if="(displaySize.isMobile && dineRewardMobilePodDisplay)"></div>\r\n</div>'),$templateCache.put("/web/app/layout/content.noSideBar.html",'<div class="content contentNoSidebar">\r\n    <div class="contentInnerContainer" autoscroll="true" ui-view></div>\r\n</div>'),$templateCache.put("/web/app/layout/drawer.html",'<div class="drawer" ng-if="inDrawerNav">\r\n    <div class="titleContainer drawerTitleContainer" tabindex="-1">\r\n        <h2 class="title drawerTitle">{{\'Drawer_Title\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="drawerContent">\r\n        <div class="drawerSection drawerOrderContainer">\r\n            <div class="titleContainer drawerOrderTitleContainer">\r\n                <h3 class="title drawerSectionTitle drawerOrderTitle">Order</h3>\r\n            </div>\r\n\r\n            <div class="actionsContainer drawerActionsContainer drawerOrderActionsContainer">\r\n                <a class="drawerAction drawerCheckoutAction" ui-sref="review" ng-click="toggleDrawer()" tabindex="0" ng-if="model.cart.order_items.length">\r\n                    <span>Checkout</span>\r\n                </a>\r\n\r\n                <a class="drawerAction drawerFindLocationAction" ui-sref="restaurantSearch" ng-click="toggleDrawer()" tabindex="0" ng-if="!model.cart.restaurant.id">\r\n                    <span>Find a Location</span>\r\n                </a>\r\n                <a class="drawerAction drawerChangeLocationAction" ui-sref="restaurantSearch" ng-click="toggleDrawer()" tabindex="0" ng-if="model.cart.restaurant.id" aria-label="Change Location">\r\n                    <span>Change Location</span>\r\n                </a>\r\n\r\n                <a class="drawerAction drawerAddItemsAction" href="#gotoMenu" prevent-redirect tabindex="0" ng-click="toggleDrawer(); gotoMenu();" ng-if="model.cart.setup_complete" aria-label="View Menu">\r\n                    <span>Add Items</span>\r\n                </a>\r\n                <a class="drawerAction drawerStartOrderAction" href="#toggleDrawer" prevent-redirect ng-click="toggleDrawer(); cancelOrder();" tabindex="0" ng-if="model.cart.setup_complete" aria-label="Start a New Order">\r\n                    <span>Start a New Order</span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="drawerSection drawerAccountContainer">\r\n            <div class="titleContainer drawerAccountTitleContainer" ng-if="!featureFlags.UserAccount.hideAccounts">\r\n                <h3 class="title drawerSectionTitle drawerAccountTitle">Account</h3>\r\n            </div>\r\n\r\n            <div class="actionsContainer drawerActionsContainer drawerLoggedOutActionsContainer" ng-if="!loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                <a class="drawerAction drawerSignInAction" ui-sref="home" ng-click="toggleDrawer()" tabindex="0">\r\n                    <span>Sign In</span>\r\n                </a>\r\n                <a class="drawerAction drawerRegisterAction" ui-sref="register" ng-click="toggleDrawer()">\r\n                    <span>Register as New User</span>\r\n                </a>\r\n            </div>\r\n\r\n            <div class="actionsContainer drawerActionsContainer drawerLoggedInActionsContainer" ng-if="loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                <a class="drawerAction {{page.name + \'Action\'}}" ng-repeat="page in sections | shouldDisplay:this" ng-click="toggleDrawer()" ui-sref="{{page.name}}" tabindex="0" ui-sref-active="active">\r\n                    <span>{{page.title | translate}}</span>\r\n                </a>\r\n\r\n                <a href="#logout" tabindex="0" class="drawerAction drawerLogoutAction" prevent-redirect ng-click="toggleDrawer(); logout();">    \r\n                    <span>{{\'LogOut\' | translate}}</span>\r\n                </a>\r\n            </div>\r\n            <div class="actionsContainer drawerActionsContainer" ng-if="opinionLabSurveyOnMobileSidebar">\r\n\r\n                <button type="button" class="addAction orderAddItemAction" onclick="OOo.oo_launch(event, \'oo_feedback\')">\r\n                    <span>Feedback</span>\r\n                </button>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/layout/footer.html",'<div class="footer">\r\n\t<div class="copyright">\r\n\t\t<span ng-bind-html="\'Copyright\' | translate"></span>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/layout/header.html",'<div class="header" ng-controller="headerCtrl">\r\n\t<div class="logoContainer" ng-if="displaySize.isDesktop">\r\n\t\t<span ui-sref="home" class="logo">\r\n\t\t\t<span>{{\'ClientName\' | translate}}</span>\r\n\t\t</span>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer navActionsContainer" ng-if="displaySize.isMobile">\r\n\t\t<a class="navLinkMenu" ng-click="toggleDrawer(\'menu\')" tabindex="0" href="#toggleDrawer()" prevent-redirect>\r\n\t\t\t<span>{{\'Nav_Menu\' | translate}}</span>\r\n\t\t</a>\r\n        <a ui-sref="home" class="logo">\r\n            <span>{{\'ClientName\' | translate}}</span>\r\n        </a>\r\n\t\t<a class="navLinkLocation" ui-sref="restaurantSearch">\r\n\t\t\t<span>{{\'Nav_Locations\' | translate}}</span>\r\n\t\t</a>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer navActionsContainer" ng-if="displaySize.isDesktop">\r\n\t\t<a href="#gotoMenu" tabindex="0" prevent-redirect class="goToMenuAction" ng-click="gotoMenu()">\r\n\t\t\t<span>{{\'Nav_Menu\' | translate}}</span>\r\n\t\t</a>\r\n        <a class="homeAction trk-headerchangelocation" ui-sref="home">\r\n            <span>{{\'Nav_Locations\' | translate}}</span>\r\n        </a>\r\n\t\t<a href="#gotoOrder" tabindex="0" prevent-redirect class="goToOrderAction" ng-click="gotoOrder()">\r\n\t\t\t<span>{{\'Nav_Order\' | translate}}</span>\r\n\t\t</a>\r\n\t\t<a class="editAccountAction" ui-sref="editAccount" ng-show="loggedIn">\r\n\t\t\t<span>{{\'Nav_Account\' | translate}}</span>\r\n\t\t</a>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer subNavActionsContainer" ng-if="displaySize.isDesktop">\r\n\t\t<a href="#login" tabindex="0" prevent-redirect ng-click="showDialog(\'account.dualLogin\')" ng-if="!loggedIn" aria-label="Log In - Opens Dialog">\r\n\t\t\t<span>{{\'Nav_LogIn\' | translate}}</span>\r\n\t\t</a>\r\n\t\t<a ui-sref="register" ng-if="!loggedIn">\r\n\t\t\t<span>{{\'Nav_Register\' | translate}}</span>\r\n\t\t</a>\r\n\t\t<a href="#logout" tabindex="0" prevent-redirect ng-click="logout()" ng-if="loggedIn">\r\n\t\t\t<span>{{\'Nav_Logout\' | translate}}</span>\r\n\t\t</a>\r\n\t\t\r\n\t\t<a ng-click="setLang(\'fr-CA\');$event.preventDefault();" ng-if="language | test:\'en-\'" tabindex="0" href="#setLanguage(\'fr-CA\')" prevent-redirect>\r\n\t\t\t<span>{{\'Nav_French\' | translate}}</span>\r\n\t\t</a>\r\n\t\t<a ng-click="setLang(\'en-US\');$event.preventDefault();" ng-if="language | test:\'fr-\'" tabindex="0" href="#setLanguage(\'en-US\')" prevent-redirect>\r\n\t\t\t<span>{{\'Nav_English\' | translate}}</span>\r\n\t\t</a>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/layout/home.html",'<div class="homeLayout">\r\n    <div class="titleContainer homeTitleContainer">\r\n        <h1 class="title homeTitle">{{title | translate}}</h1>\r\n    </div>\r\n\r\n    <div class="homeContentContainer">\r\n        <div class="homeOptions">\r\n            <div class="accountLinksContainer" ng-if="featureFlags.UserAccount.loginSidebar && loggedIn && !featureFlags.UserAccount.hideAccounts" ui-view="accountLinks"></div>\r\n            <div class="loginContainer" ng-if="featureFlags.UserAccount.loginSidebar && !loggedIn && !featureFlags.UserAccount.hideAccounts" ui-view="login"></div>\r\n        </div>\r\n        <div class="homeContent" autoscroll="false" ui-view>\r\n            <div autoscroll="false" ui-view="desktopContent"></div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/layout/home.split.html",'<div class="homeLayout" ng-if="displaySize.isDesktop">\r\n    <div class="homeContentContainer">\r\n        <div class="homeOptions">\r\n            <div class="accountLinksContainer" ng-if="featureFlags.UserAccount.loginSidebar && loggedIn && !featureFlags.UserAccount.hideAccounts" ui-view="accountLinks"></div>\r\n            <div class="loginContainer" ng-if="featureFlags.UserAccount.loginSidebar && !loggedIn && !featureFlags.UserAccount.hideAccounts" ui-view="login"></div>\r\n        </div>\r\n        <div class="homeContent" autoscroll="false" ui-view>\r\n            <div autoscroll="false" ui-view="desktopContent"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="homeLayout" ui-view autoscroll="false" ng-if="displaySize.isMobile">\r\n    <div class="actionsContainer orderActionsContainer">\r\n        <button type="button" class="startAction orderStartAction" ui-sref="restaurantSearch" ng-if="!model.cart.setup_complete">\r\n            <span>{{\'StartOrder\' | translate}}</span>\r\n        </button>\r\n        <button type="button" class="addAction orderAddItemAction" ng-click="gotoMenu()" ng-if="model.cart.setup_complete">\r\n            <span>{{\'AddItems\' | translate}}</span>\r\n        </button>\r\n        <button type="button" class="changeAction orderChangeAction" ng-click="gotoOrder()" ng-if="model.cart.setup_complete">\r\n            <span>{{\'ChangeOrderDetails\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n\r\n    <div class="homeContentContainer">\r\n        <div class="homeOptions">\r\n            <div class="accountLinksContainer" ng-hide="!loggedIn || featureFlags.UserAccount.hideAccounts" ui-view="accountLinks"></div>\r\n            <div class="loginContainer" ng-hide="loggedIn || featureFlags.UserAccount.hideAccounts" ui-view="login"></div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/layout/main.html",'<header class="outerContainer headerOuterContainer" ng-class="{\'overrideHeaderHeight\': featureFlags.header}">\r\n    <a class="skipLink" focus-main href="#main" tabindex="0" for="homeContent" prevent-redirect>Skip to Main</a>\r\n    <div class="pageContainer headerContainer" ui-view="header"></div>\r\n</header>\r\n\r\n<nav class="outerContainer orderPathOuterContainer" aria-label="OrderPath" ng-hide="featureFlags.header && displaySize.isDesktop">\r\n    <div class="pageContainer orderPathContainer" ui-view="orderPath"></div>\r\n</nav>\r\n\r\n<main class="outerContainer contentOuterContainer">\r\n    <div class="pageContainer contentContainer mainContainer" ui-view role="main" autoscroll="false" id="main" tabindex="-1"></div>\r\n</main>\r\n\r\n<footer class="outerContainer footerOuterContainer">\r\n    <div class="pageContainer footerContainer" ui-view="footer"></div>\r\n</footer>\r\n\r\n<div id="dialogContainer" class="dialogContainer" ono-dialog-box></div>\r\n<div class="dialogContainer dialogAlertContainer" ono-alert-box></div>\r\n\r\n<div class="userAlertContainer" ng-controller="userAlertCtrl">\r\n    <div ng-repeat="userAlert in userAlerts">\r\n        <span ng-include="\'/web/app/dialog/userAlert.html\'"></span>\r\n    </div>\r\n</div>\r\n\r\n<toaster-container toaster-options="{\'position-class\' : \'toast-top-center\', \'close-button\' : false, \'time-out\' : toasterTimeout }"></toaster-container>\r\n\r\n<aside class="drawerContainer" ng-if="displaySize.isMobile" ui-view="drawer" role="region" id="drawerContainer"></aside>\r\n<aside class="overlay drawerOverlay" ng-if="displaySize.isMobile" ng-click="toggleDrawer()"></aside>\r\n\r\n<div id="loadingOverlay" class="overlay loadingOverlay"></div>'),$templateCache.put("/web/app/layout/main.noOrderPath.html",'<div class="outerContainer headerOuterContainer">\r\n\t<div class="pageContainer headerContainer" ui-view="header"></div>\r\n</div>\r\n\r\n<div class="outerContainer contentOuterContainer">\r\n\t<div class="pageContainer contentContainer" ui-view role="main" autoscroll="false"></div>\r\n</div>\r\n\r\n<div class="outerContainer footerOuterContainer">\r\n\t<div class="pageContainer footerContainer" ui-view="footer"></div>\r\n</div>\r\n\r\n<div class="dialogContainer" ono-dialog-box></div>\r\n<div class="dialogContainer dialogAlertContainer" ono-alert-box></div>\r\n<div class="userAlertContainer" ng-controller="userAlertCtrl">\r\n\t<div ng-repeat="userAlert in userAlerts">\r\n\t\t<span ng-include="\'/web/app/dialog/userAlert.html\'"></span>\r\n\t</div>\r\n</div>\r\n\r\n<div class="drawerContainer" ng-if="displaySize.isMobile" ui-view="drawer"></div>\r\n<div class="overlay drawerOverlay" ng-if="displaySize.isMobile" ng-click="toggleDrawer()"></div>\r\n\r\n<div id="loadingOverlay" class="overlay loadingOverlay"></div>'),$templateCache.put("/web/app/layout/maintenance.html",'<div class="maintenanceContainer">\r\n\t<div class="maintenance">\r\n\t\t<div class="titleContainer maintenanceTitleContainer">\r\n\t\t\t<h1 class="title maintenanceTitle">Ordering temporarily unavailable.</h1>\r\n\t\t</div>\r\n\t\t<div class="contentContainer maintenanceContentContainer">\r\n\t\t\t<div class="maintenanceContent">\r\n\t\t\t\t<p>We are currently having some technical difficulties preventing us from accepting orders.</p>\r\n\t\t\t\t<p>You can try again by clicking refresh below, or come back later.</p>\r\n\t\t\t</div>\r\n\t\t\t<div class="actionsContainer maintenanceActionsContainer">\r\n\t\t\t\t<button class="refreshAction maintenanceRefreshAction" onclick="location.reload();">\r\n\t\t\t\t\t<span>Refresh</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/layout/orderPath.all.html",'<div class="orderPath orderPathAll">\r\n\t<div class="orderProgressBarContainer" ng-include="\'/web/app/orderProgress/orderProgress.html\'" ng-if="displaySize.isDesktop"></div>\r\n\r\n\t<div class="microcartContainer" ng-if="showCart() && !(\'order\' | includedByState) && displayMicroCart" ng-include="\'/web/app/cart/microCart.html\'"></div>\r\n</div>'),$templateCache.put("/web/app/layout/orderPath.html",'<div class="orderPath">\r\n\t<div class="orderProgressBarContainer" ng-include="\'/web/app/orderProgress/orderProgress.html\'" ng-if="displaySize.isDesktop"></div>\r\n\r\n\t<div class="microcartContainer" ng-if="displaySize.isMobile && showCart() && !(\'order\' | includedByState) && displayMicroCart" ng-include="\'/web/app/cart/microCart.html\'"></div>\r\n</div>'),$templateCache.put("/web/app/loyalty/loyalty.edit.html",'<form name="loyaltyCardForm" class="form loyaltyEditForm" ng-submit="upsertLoyaltyCard(creditCard);" ng-controller="loyaltyEditCtrl">\r\n\t<div class="titleContainer formTitleContainer loyaltyEditFormTitleContainer">\r\n\t\t<h2 class="title formTitle loyaltyEditFormTitle">Add Loyalty Card</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer loyaltyEditContentContainer">\r\n\t\t<div class="formElements loyaltyEditFormElements">\r\n\t\t\t<div class="inputContainer textInputContainer nameInputContainer">\r\n\t\t\t\t<lable for="loyalty_card_name_id" class="inputText">Name</lable>\r\n\t\t\t\t<span class="input textInput nameTextInput">\r\n\t\t\t\t\t<input type="text" id="loyalty_card_name_id" ng-model="" required floating-label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="inputContainer textInputContainer cardNumberInputContainer">\r\n\t\t\t\t<label for="loyalty_card_number_id" class="inputText">Card number</label>\r\n\t\t\t\t<span class="input textInput cardNumberInput">\r\n\t\t\t\t\t<input type="text" id="loyalty_card_number_id" ng-model="" required floating-label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer loyaltyEditFormActionsContainer">\r\n\t\t\t<button class="saveAction loyaltyEditFormSaveAction" ng-submit="upsertLoyaltyCard(loyaltyCard);">\r\n\t\t\t\t<span>Save</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="cancelAction loyaltyEditFormCancelAction" ng-click="switch(\'view\')">\r\n\t\t\t\t<span>Cancel</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</form>'),$templateCache.put("/web/app/loyalty/loyalty.list.html",'<div class="loyalty" ng-controller="loyaltyCtrl" ui-view>\r\n\t<div class="titleContainer loyaltyTitleContainer">\r\n\t\t<h2 class="title loyaltyTitle">Loyalty</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer loyaltyContentContainer">\r\n\t\t<div class="loyaltyContent">\r\n\t\t\t<ul class="loyaltyList">\r\n\t\t\t\t<li class="loyaltyListItem">\r\n\t\t\t\t\t<div class="loyaltyListItemContent">\r\n\t\t\t\t\t\t<span class="name">James Locke</span>\r\n\t\t\t\t\t\t<span class="cardNumberExpiration">4111225533669876</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="actionsContainer listItemActionsContainer loyaltyListItemActionsContainer">\r\n\t\t\t\t\t\t<button class="editAction loyaltyListItemEditAction">\r\n\t\t\t\t\t\t\t<span>Edit</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="deleteAction loyaltyListItemDeleteAction" ono-confirm="removeLoyaltyCard(loyaltyCard)" ono-confirm-title="{{ \'RemoveLoyaltyCard_ConfirmTitle\' | translate }}" ono-confirm-message="{{ \'RemoveLoyaltyCard_ConfirmMessage\' | translate }}">\r\n\t\t\t\t\t\t\t<span>Delete</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer loyaltyActionsContainer">\r\n\t\t\t<button class="addAction loyaltyAddAction" ui-sref="editLoyalty">\r\n\t\t\t\t<span>New Loyalty Card</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/menu/category.html",'<div class="category" ng-class="items.tags" autoscroll="true" ui-view>\r\n\r\n    <div class="categoryInfo">\r\n        <div class="titleContainer categoryTitleContainer">\r\n            <h2 class="title categoryTitle" ng-bind-html="category.title"></h2>\r\n        </div>\r\n        <div class="descriptionContainer categoryDescriptionContainer" ng-if="category.description">\r\n            <p class="description categoryDescription" ng-bind-html="category.description"></p>\r\n        </div>\r\n        <div class="imageContainer categoryImageContainer" ng-if="category.image">\r\n            <img class="categoryImage" ng-src="{{category.image}}" alt="">\r\n        </div>\r\n    </div>\r\n\r\n    <div class="categoryContent">\r\n        <ul class="categoryItemList">\r\n            <li class="categoryItemListItem" ono-class="menuItem.tags" ng-class="menuItem.priceGroup ? \'price-\' + menuItem.priceGroup : \'\'" ng-repeat="menuItem in category.menu_items" ng-include="\'/web/app/menu/categoryItem.html\'"></li>\r\n        </ul>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/categoryItem.basic.html",'<div class="categoryItem categoryItemBasic" ng-class="{noImage: !menuItem.image}" ng-click="categoryItemClick(menuItem)">\r\n    <div class="imageContainer categoryItemImageContainer" ng-if="menuItem.image" ng-attr-style="background-image: url(\'{{menuItem.image | stringClean}}\')">\r\n\r\n        <img class="categoryItemImage" ng-src="{{menuItem.image}}" alt="{{menuItem.title}}">\r\n    </div>\r\n    <div class="imageContainer categoryItemImageContainer" ng-if="!menuItem.image" ng-class="{\'defaultMenuItemImage\': !menuItem.image}"></div>\r\n    <div>\r\n        <div class="titleContainer categoryItemTitleContainer">\r\n            <h3 class="title categoryItemTitle">\r\n                <span ng-bind-html="menuItem.title"></span>\r\n                <span class="categoryItemTags" ng-if="menuItem.tags">\r\n                    <span class="tag categoryItemTag" ng-class="tag" ng-show="tag" ng-repeat="tag in menuItem.tags"></span>\r\n                </span>\r\n            </h3>\r\n        </div>\r\n\r\n        <div class="categoryItemContent">\r\n            <p class="categoryItemPrice">\r\n                <span class="price" ng-repeat="(key, value) in menuItem.default_pricing">\r\n                    <span class="label" ng-show="key != \'NoLabel\'">{{key | translate}}</span> <span class="value">{{value | money}}</span>\r\n                </span>\r\n            </p>\r\n\r\n            <div ng-if="menuItem.display_customize">\r\n                <form name="quickCustomizeForm">\r\n                    <div class="subOption" ng-repeat="oi in menuItem.option_groups">\r\n                        <div class="option" ng-class="[option.display_template, option.tags]" ng-repeat="option in oi.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/categoryItem.html",'<div class="categoryItem" ng-class="{noImage: !menuItem.image}" ng-click="categoryItemClick(menuItem)">\r\n\r\n    <div class="contentContainer categoryItemContentContainer">\r\n        <div class="categoryItemContentContainerWrapper">\r\n\r\n            \x3c!-- Image Container --\x3e\r\n            <div class="imageContainer categoryItemImageContainer" ng-if="menuItem.image" tabindex="0" ng-attr-style="background-image: url(\'{{menuItem.image | stringClean}}\')">\r\n                <img class="categoryItemImage" ng-src="{{menuItem.image}}" alt="{{menuItem.title}}">\r\n            </div>\r\n            <div class="imageContainer categoryItemImageContainer" ng-if="!menuItem.image" ng-class="{\'defaultMenuItemImage\': !menuItem.image}" tabindex="0"></div>\r\n            \x3c!-- Image Container END --\x3e\r\n\r\n            <div class="categoryItemContentContainerMeta">\r\n\r\n                <div class="titleContainer categoryItemTitleContainer">\r\n                    <h3 class="title categoryItemTitle" tabindex="0">\r\n                        <span ng-bind-html="menuItem.title"></span>\r\n                        <span class="categoryItemTags" ng-if="menuItem.tags">\r\n                            <span class="categoryItemTag tag" ng-class="tag" ng-show="tag" ng-repeat="tag in menuItem.tags"></span>\r\n                        </span>\r\n                    </h3>\r\n                </div>\r\n                <div class="descriptionContainer categoryItemImageDescription">\r\n                    <p class="description categoryItemDescription" ng-show="menuItem.description" ng-bind-html="menuItem.description"></p>\r\n                </div>\r\n                <div class="priceContainer categoryItemPriceContainer">\r\n                    <p class="categoryItemPrice">\r\n                        <span class="price" ng-repeat="(key, value) in menuItem.default_pricing">\r\n                            <span class="label" ng-hide="key === \'NoLabel\' || menuItem.isStartingFromHidden">{{key | translate}}</span>\r\n                            <span class="value" ng-hide="menuItem.isStartingFromHidden">{{value | money}}</span>\r\n                        </span>\r\n                    </p>\r\n                </div>\r\n                <div class="customizeContainer" ng-if="menuItem.display_customize">\r\n                    <form name="quickCustomizeForm">\r\n                        <div class="subOption" ng-repeat="oi in menuItem.option_groups">\r\n                            <div class="option" ng-class="[option.display_template, option.tags]" ng-repeat="option in oi.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                \x3c!-- Action Container --\x3e\r\n                <div class="actionsContainer categoryItemActionsContainer">\r\n                    <button class="viewAction categoryItemViewAction trk-menuitemview" ui-sref="menuItem({menuItemId: menuItem.id})" aria-label="{{\'ViewAdd\' | translate}} - {{menuItem.title}}" ng-if="menuItem.show_customize && !menuItem.display_customize">\r\n                        <span>{{\'ViewAdd\' | translate}}</span>\r\n                    </button>\r\n                    <button class="quickAddAction categoryItemQuickAddAction" ng-click="quickCustomize(menuItem)" ng-if="menuItem.show_quick_add && !menuItem.display_customize">\r\n                        <span>{{\'QuickAdd\' | translate}}</span>\r\n                    </button>\r\n                    <button class="backAction menuItemBackAction" type="button" name="back" ng-click="menuItem.display_customize = false" ng-if="menuItem.show_quick_add && menuItem.display_customize">\r\n                        <span>{{\'Cancel\' | translate}}</span>\r\n                    </button>\r\n                    <button class="addToCartAction categoryItemAddToCartAction trk-menuitemadd" ng-click="addToCart(menuItem)" ng-if="menuItem.show_quick_add && menuItem.display_customize">\r\n                        <span>{{\'AddToCart\' | translate}}</span>\r\n                    </button>\r\n                    <button class="viewAction categoryItemViewAction trk-menuitemview" ui-sref="menuItem({menuItemId: menuItem.id})" aria-label="{{\'View\' | translate}} - {{menuItem.title}}" ng-if="!menuItem.show_customize && !menuItem.show_quick_add">\r\n                        <span>{{\'View\' | translate}}</span>\r\n                    </button>\r\n                </div>\r\n                \x3c!-- Action Container END --\x3e\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/categoryItem.stacked.html",'<div class="categoryItem categoryItemStacked" ng-class="{noImage: !menuItem.image}" ng-click="categoryItemClick(menuItem)">\r\n    <div class="imageContainer categoryItemImageContainer" tabindex="0" ng-if="menuItem.image" ng-attr-style="background-image: url(\'{{menuItem.image | stringClean}}\')">\r\n        <img class="categoryItemImage" ng-src="{{menuItem.image}}" alt="{{menuItem.title}}">\r\n    </div>\r\n    <div class="imageContainer categoryItemImageContainer" ng-if="!menuItem.image" ng-class="{\'defaultMenuItemImage\': !menuItem.image}">\r\n\r\n    </div>\r\n    <div class="titleContainer categoryItemTitleContainer">\r\n        <div class="title categoryItemTitle" ui-sref="menuItem({menuItemId: menuItem.id})">\r\n\r\n            <span class="categoryItemTags" ng-if="menuItem.tags.length && (menuItem.tags[0] != \'STACKED\')">\r\n                <span class="tag categoryItemTag" ng-class="tag" ng-show="tag" ng-repeat="tag in menuItem.tags"></span>\r\n            </span>\r\n            <h3 class="titleText" ng-bind-html="menuItem.title"></h3>\r\n\r\n            <div class="descriptionContainer categoryItemDescriptionContainer" ng-show="menuItem.description">\r\n                <p class="description categoryItemDescription" ng-bind-html="menuItem.description"></p>\r\n            </div>\r\n\r\n            <span class="categoryItemPrice">\r\n                <span class="price" ng-repeat="(key, value) in menuItem.default_pricing">\r\n                    <span class="label" ng-hide="key === \'NoLabel\' || menuItem.isStartingFromHidden">{{key | translate}}</span>\r\n                    <span class="value" ng-hide="menuItem.isStartingFromHidden">{{value | money}}</span>\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="quickCustomizeFormContainer categoryItemQuickCustomizeFormContainer" ng-if="menuItem.display_customize">\r\n        <form class="quickCustomizeForm categoryItemQuickCustomizeForm" name="quickCustomizeForm">\r\n            <div class="subOption" ng-repeat="oi in menuItem.option_groups">\r\n                <div class="option" ng-class="[option.display_template, option.tags]" ng-repeat="option in oi.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n\r\n    <div class="actionsContainer categoryItemActionsContainer">\r\n        <button class="addAction categoryItemAddAction" ng-click="addToCart(menuItem)" ng-if="menuItem.display_customize">\r\n            <span>{{\'AddToCart\' | translate}}</span>\r\n        </button>\r\n        <button class="quickAddAction categoryItemQuickAddAction" ng-click="quickCustomize(menuItem)" ng-if="menuItem.show_quick_add">\r\n            <span>{{\'QuickAdd\' | translate}}</span>\r\n        </button>\r\n        <button class="viewAction categoryItemViewAction" ui-sref="menuItem({menuItemId: menuItem.id})" aria-label="{{\'View\' | translate}} - {{menuItem.title}}" ng-if="menuItem.show_customize">\r\n            <span>{{\'View\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/menu/categoryNav.html",'<div class="categoryNav">\r\n    <div class="categoryNavTitleContainer" ng-if="displaySize.isDesktop">\r\n        <h2 class="title categoryNavTitle">{{\'CategoryNav_Title\' | translate}}</h2>\r\n    </div>\r\n    <div class="categoryNavTitleContainer" ng-click="toggleCategoryNav()" tabindex="0" ng-if="displaySize.isMobile" ng-hide="\'menuItem\' | includedByState" aria-label="Menu Categories" role="button" aria-expanded="{{showCategoryNav || false}}" aria-controls="categoryNavContentContainer">\r\n        <h2 class="categoryNavTitle title" ng-class="{open: showCategoryNav}">\r\n            {{\'SelectACategory\' | translate}}\r\n        </h2>\r\n    </div>\r\n\r\n    <div class="contentContainer categoryNavContentContainer" ng-class="(showCategoryNav || (\'menu\' | isState)) ? \'open\' : \'\'" id="categoryNavContentContainer">\r\n        <div class="categoryNavContent">\r\n            <ul class="categoryNavList">\r\n                <li class="categoryNavListItem" ng-class="item.tags" ng-repeat="item in categoryList" ng-include="\'/web/app/_2.0/_components/categoryNavItem/categoryNavItem2.html\'" ng-if="displayImageCategoryList"></li>\r\n                <li class="categoryNavListItem" ng-class="item.tags" ng-repeat="item in categoryList" ng-include="\'/web/app/menu/categoryNavItem.html\'" ng-if="!displayImageCategoryList"></li>\r\n            </ul>\r\n        </div>\r\n        <div class="footnotesContainer" ui-view="footnotes" ng-if="displaySize.isDesktop"></div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/categoryNavItem.hover.html",'<div class="categoryNavItem categoryNavItemHover" ng-if="item.subcategories.length > 0">\r\n    <a ng-click="toggleCategoryNav()" ng-class="{hover: hoveredCategory == item.id}" ui-sref="categoryGroup({categoryGroupId: item.id})" ui-sref-active="active" ng-mouseenter="hoveredCategoryUpdate(item.id)" ng-mouseleave="hoveredCategoryUpdate(null)" ng-bind-html="item.title" tabindex="0"></a>\r\n</div>'),$templateCache.put("/web/app/menu/categoryNavItem.html",'<div class="categoryNavItem">\r\n\t<div class="categoryNavItemTitleContainer" ng-if="item.subcategories.length == 0">\r\n\t\t<a class="title categoryNavItemTitle" ng-class="{active: currentCategory == item.id}" ui-sref="category({categoryId: item.id})" ng-click="toggleCategoryNav(true)" ng-bind-html="item.title"></a>\r\n\t</div>\r\n\t<div class="categoryNavItemGroupContainer" ng-if="item.subcategories.length > 0">\r\n\t    <div class="categoryNavItemGroupTitleContainer" ng-if="!featureFlags.layout.header">\r\n\t\t\t<h2 class="title categoryNavGroupTitle" ng-class="{active: currentCategoryGroup == item.id}" ng-bind-html="item.title"></h2>\r\n\t\t</div>\r\n\t\t<div class="categoryNavItemGroupContent">\r\n\t\t\t<ul class="categoryNavItemGroupList">\r\n\t\t\t    <li class="categoryNavItemGroupListItem" ng-class="category.tags" ng-repeat="category in item.subcategories" tabindex="-1">\r\n\t\t\t        <a ng-class="{active: currentCategory == category.id}" ui-sref-active="active" ui-sref="category({categoryId: category.id})" ng-click="toggleCategoryNav(true)" ng-attr-tabindex="{{showCategoryNav || (\'menu\' | isState) ? \'0\' : \'-1\'}}"><span>{{category.title}}</span><span class="visuallyHidden" ng-if="currentCategory.id == category.id">Selected</span></a>\r\n\t\t\t    </li>\r\n\r\n\t\t\t    <li class="categoryNavItemGroupListItem" ng-class="category.tags">\r\n\t\t\t        <a ui-sref-active="active" ui-sref="categoryAllMenuItems({categoryId: category.id})" ng-click="toggleCategoryNav(true)" ng-attr-tabindex="{{showCategoryNav || (\'menu\' | isState) ? \'0\' : \'-1\'}}">View All</a>\r\n\t\t\t    </li>\r\n\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/menu/categorySearchFilter.html",'<h2 class="title categoryTitle">Search {{ctrl.searchText}}</h2>\r\n\r\n<section ng-repeat="cat in category | orderBy: \'index\'" class="categorySearchFilterContainer">\r\n    \r\n    \x3c!--<div ng-repeat="menuItem in cat.menu_items | filter:ctrl.searchText">\r\n        {{menuItem.title}}\r\n    </div>--\x3e\r\n\r\n    <div class="categoryContent">\r\n        <ul class="categoryItemList">\r\n            <li class="categoryItemListItem" ono-class="menuItem.tags" ng-class="menuItem.priceGroup ? \'price-\' + menuItem.priceGroup : \'\'" ng-repeat="menuItem in cat.menu_items | filter:ctrl.searchText" ng-include="\'/web/app/menu/categoryItem.html\'"></li>\r\n        </ul>\r\n    </div>\r\n    \x3c!--{{cat.menu_items.length}}\r\n    <div ng-hide="filteredBars.length">Can\'t Find Anything Mate!</div>--\x3e\r\n\r\n\r\n\r\n</section>'),$templateCache.put("/web/app/menu/categoryViewAll.html",'<section ng-repeat="cat in category | orderBy: \'index\'" class="categoryViewAllContainer">\r\n    <div class="category" ng-class="items.tags" autoscroll="true" ui-view style="padding: 1rem 0; border-bottom: 3px dotted #E54125;">\r\n\r\n        <div class="categoryInfo ui sticky">\r\n            <div class="titleContainer categoryTitleContainer">\r\n                <h2 class="title categoryTitle" ng-bind-html="cat.title"></h2>\r\n            </div>\r\n            <div class="descriptionContainer categoryDescriptionContainer" ng-if="cat.description">\r\n                <p class="description categoryDescription" ng-bind-html="cat.description"></p>\r\n            </div>\r\n            <div class="imageContainer categoryImageContainer" ng-if="cat.image">\r\n                <img class="categoryImage" ng-src="{{cat.image}}" alt="">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="categoryContent">\r\n            <ul class="categoryItemList">\r\n                <li class="categoryItemListItem" ono-class="menuItem.tags" ng-class="menuItem.priceGroup ? \'price-\' + menuItem.priceGroup : \'\'" ng-repeat="menuItem in cat.menu_items" ng-include="\'/web/app/menu/categoryItem.html\'"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</section>'),$templateCache.put("/web/app/menu/changeQuantity.html",'<div class="changeQuantity">\r\n\t<button type="button" class="decrementAction" ng-click="oi.decrement()"></button>\r\n\t<input type="tel" name="quantity" pattern="[0-9]*" value="{{oi.quantity}}" maxlength="3">\r\n\t<button type="button" class="incrementAction" ng-click="oi.increment()"></button>\r\n</div>'),$templateCache.put("/web/app/menu/footnotes.html",'<div class="footnotes">\r\n    <div class="titleContainer footnotesTitleContainer">\r\n        <h2 class="title footnotesTitle">{{\'Guide\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="footnotesContent">\r\n        <p class="favorite" title="Outback\'s Favorites\'">Outback\'s Favorites</p>\r\n\r\n        <p class="cookedToOrder">\r\n            {{\'Footnote_CookedToOrder\' | translate}}\r\n        </p>\r\n        <p class="mayContainNuts">\r\n            {{\'Footnote_MayContainNuts\' | translate}}\r\n        </p>\r\n        <p class="mayContainNuts">\r\n            <span ng-bind-html="(\'Footnote_NutritionInformation\' | translate)"> </span>\r\n        </p>\r\n        <p class="highSodium" ng-if="model.cart.restaurant.tags.indexOf(\'highsodium\') > -1" ng-bind-html="\'Footnote_HighSodium\' | translate"></p>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/menu.html",'<div class="menu">\r\n\t<div class="titleContainer menuTitleContainer">\r\n\t\t<h1 class="title menuTitle">{{\'Menu\' | translate}}</h1>\r\n\t</div>\r\n    <menu-search></menu-search>\r\n\t<div class="menuContent" ng-class="{\'menuContentCategory\': displayImageCategoryList}">\r\n        <div class="categoryNavContainer" ui-view="categoryNav"></div>\r\n\r\n        <div class="categoryContainer" autoscroll="false" ui-view></div>\r\n        <sticky-checkout-button></sticky-checkout-button>\r\n\t\t<div class="footnotesContainer" ui-view="footnotes" ng-if="displaySize.isMobile"></div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/menu/menuItem.combo.selection.html",'<div class="menuItem menuItemSelection" ng-class="{noImage: !selection.selectedMenuItem.image}" ono-class="[selection.selectedMenuItem.tags, {notOrderable: !menuItem.orderable}]">\r\n    <div class="titleContainer menuItemTitleContainer">\r\n        <h2 class="title menuItemTitle" ng-bind-html="selection.selectedMenuItem.title"></h2>\r\n    </div>\r\n\r\n    <div class="contentContainer menuItemContentContainer">\r\n        <div class="imageContainer menuItemImageComtainer" ng-if="selection.selectedMenuItem.image">\r\n            <img class="menuItemImage" alt="" ng-src="{{selection.selectedMenuItem.image}}">\r\n        </div>\r\n\r\n        <div class="descriptionContainer menuItemDescriptionContainer" ng-if="selection.selectedMenuItem.description">\r\n            <p class="description menuItemDescription" ng-bind-html="selection.selectedMenuItem.description"></p>\r\n        </div>\r\n        <div class="optionGroup" ng-class="group.tags" ng-repeat="group in selection.selectedMenuItem.option_groups" ng-if="selection.selectedMenuItem.option_groups.length">\r\n\t\t\t<div class="titleContainer optionGroupTitleContainer" ng-if="group.title">\r\n            <h3 class="optionGroupTitle menuElementTitle title" ng-bind-html="group.title"></h3>\r\n\t\t\t</div>\r\n            <div class="option {{option.display_template}}" ono-field-set="\'options[\' + $index + \']\'" ng-class="option.tags" ng-repeat="option in group.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n        </div>\r\n\r\n        <div class="toppingSetContainer" ng-if="selection.selectedMenuItem.topping_set.topping_groups.length > 0">\r\n            <topping-set ts="selection.selectedMenuItem.topping_set"></topping-set>\r\n        </div>\r\n\r\n        <div class="menuItemAdditional" ng-if="selection.selectedMenuItem.allow_comments">\r\n            <div class="menuItemCommentsContainer">\r\n                <div class="inputContainer textInputContainer commentsTextareaContainer">\r\n                    <label class="inputText" for="menu_item_comment">{{\'Comments\' | translate}}</label>\r\n                    <span class="input textarea commentsTextarea">\r\n                        <textarea name="comments" id="menu_item_comment" ng-model="selection.selectedMenuItem.comments"></textarea>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/menuItem.html",'<div class="menuItem" ng-class="{noImage: !menuItem.image}" ono-class="[menuItem.tags, {notOrderable: !menuItem.orderable}]">\r\n\r\n\r\n    \x3c!--<pre>{{menuItem | json}}</pre>--\x3e\r\n\r\n\r\n    <div class="titleContainer menuItemTitleContainer" ng-class="{\'shorten\': (!menuItem.image && !menuItem.description)}">\r\n        <h3 class="title menuItemTitle">\r\n            <span ng-bind-html="menuItem.title"></span>\r\n            <span class="dash" ng-if="menuItem.pricing.base_price">-</span>\r\n            <span class="menuItemPrice" ng-if="menuItem.pricing.base_price">{{menuItem.pricing.base_price | money}}</span>\r\n        </h3>\r\n    </div>\r\n\r\n    <div class="contentContainer menuItemContentContainer">\r\n        <div class="imageContainer menuItemImageContainer" ng-if="menuItem.image" ng-attr-style="background-image: url(\'{{menuItem.image | stringClean}}\')">\r\n            <img class="menuItemImage" alt="{{menuItem.title}}" ng-src="{{menuItem.image}}">\r\n        </div>\r\n        <div class="imageContainer menuItemImageContainer" ng-if="!menuItem.image" ng-class="{\'defaultMenuItemImage\': !menuItem.image}"></div>\r\n\r\n        <div class="descriptionContainer menuItemDescriptionContainer" ng-if="menuItem.description.length">\r\n            <p class="description menuItemDescription calorieCount">{{menuItem.description}}</p>\r\n            <p ng-if="!stackedItem && menuItem.calorie_count">{{menuItem.pricing.current_price * menuItem.quantity | money}} ({{menuItem.calorie_count}} {{\'Calorie_Count\' | translate}})</p>\r\n            <p ng-if="!stackedItem && !menuItem.calorie_count">{{menuItem.pricing.current_price * menuItem.quantity | money}}</p>\r\n        </div>\r\n\r\n\r\n        <div class="menuItemDetailsContainer menuItemAdditionalContainer" ng-if="menuItem.orderable && (menuItem.showConfiguration || !menuItem.isSideDish) && (menuItem.allow_quantity_input || menuItem.allow_recipient_name || menuItem.allow_comments)">\r\n\r\n            <div class="modifierContainer quantityItemContainer menuItemQuantityContainer" ng-show="menuItem.allow_quantity_input">\r\n                <label class="titleContainer quantityTitleContainer" for="menu_item_quantity_{{$id}}">\r\n                    <span class="title quantityTitle">{{\'Quantity\' | translate}}</span>\r\n                </label>\r\n                <div class="actionsContainer customizableOptionsContainer changeQuantityInputContainer menuItemChangeQuantityContainer">\r\n                    <button type="button" class="decrementAction" aria-label="Decrement" ng-click="menuItem.decrement()" ng-disabled="menuItem.quantity <= 1"><span class="visuallyHidden">Decrement</span></button>\r\n                    <input type="tel" name="quantity" id="menu_item_quantity_{{$id}}" numbers-only maxlength="2" ng-model="menuItem.quantity">\r\n                    <button type="button" class="incrementAction" aria-label="Increment" ng-click="menuItem.increment()" ng-disabled="menuItem.quantity >= 99"><span class="visuallyHidden">Increment</span></button>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="menuItemAdditionalContent menuItemAdditionalRecipient" ng-show="menuItem.allow_recipient_name">\r\n                <div class="inputContainer textInputContainer recipientInputContainer">\r\n                    <label for="menu_item_recipient" class="inputText">{{\'Recipient\' | translate}}</label>\r\n                    <span class="input textInput recipientInput">\r\n                        <input type="text" id="menu_item_recipient" name="recipient" ng-model="menuItem.recipient" floating-label>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="menuItemAdditionalContent menuItemAdditionalComments" ng-show="menuItem.allow_comments">\r\n                <div class="inputContainer textInputContainer commentsTextareaContainer">\r\n                    <label for="menu_item_comments" class="inputText">{{\'Comments\' | translate}}</label>\r\n                    <span class="input textarea commentsTextarea">\r\n                        <textarea id="menu_item_comments" name="comments" ng-model="menuItem.comments"></textarea>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form menuItemDetailsForm" ng-form="menuItemForm" ng-submit="menuItemSubmit(menuItem)">\r\n            <div class="errorContainer formErrorContainer menuItemFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n            <div class="menuItemDetailsContainer optionGroupContainer" ng-class="group.tags" ng-repeat="group in menuItem.option_groups" ng-if="menuItem.option_groups.length && menuItem.showConfiguration">\r\n                <div class="titleContainer optionGroupTitleContainer" ng-if="group.title">\r\n                    <h3 class="title optionGroupTitle" ng-bind-html="group.title"></h3>\r\n                </div>\r\n                <div class="option {{option.display_template}}" ono-field-set="\'options[\' + $index + \']\'" ng-class="option.tags" ng-repeat="option in group.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n            </div>\r\n\r\n            <div class="toppingSetContainer" ng-if="menuItem.topping_set.topping_groups.length > 0" ono-template="\'/web/app/menu/topping_set.html\'"></div>\r\n\r\n            <div class="menuItemDetailsContainer combosContainer" ng-if="menuItem.selections.length && menuItem.showConfiguration">\r\n                <div class="combo" ng-repeat="selection in menuItem.selections">\r\n                    <div class="titleContainer comboTitleContainer">\r\n                        <h4 class="title comboTitle">{{selection.title}}</h4>\r\n                    </div>\r\n                    <div class="formElements comboFormElements">\r\n                        <label class="inputContainer selectContainer comboSelectContainer">\r\n                            <span class="input select comboSelect">\r\n                                <select ng-model="selection.selectedMenuItem" ng-options="mi.title + (mi.pricing.base_price > 0 ? \' +\' + (mi.pricing.base_price | money) : \'\')  for mi in selection.menu_items" ng-change="selection.selectionChanged()" required>\r\n                                    <option value="">{{\'MakeASelection\' | translate}}</option>\r\n                                </select>\r\n                            </span>\r\n                        </label>\r\n                    </div>\r\n                    <div class="comboSelectionContainer" ng-if="selection.selectedMenuItem" ng-show="selection.selectedMenuItem.option_groups.length || selection.selectedMenuItem.topping_set.length || selection.selectedMenuItem.allow_comments" ng-include="\'/web/app/menu/menuItem.combo.selection.html\'"></div>\r\n                </div>\r\n            </div>\r\n            <div class="menuItemDetailsContainer menuItemPriceContainer" ng-if="menuItem.showConfiguration">\r\n                <div class="price">\r\n                    <span class="text">{{\'CurrentPrice\' | translate}}</span>\r\n                    <span class="value">{{menuItem.pricing.current_price * menuItem.quantity | money}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="actionsContainer menuItemActionsContainer">\r\n                <button class="addToCartAction menuItemAddToCartAction" ng-if="menuItem.orderable && !menuItem.showConfiguration && menuItem.isSideDish" type="button" ng-click="menuItem.showConfiguration = true">\r\n                    <span>{{\'View\' | translate}}</span>\r\n                </button>\r\n                <button class="backAction menuItemBackAction trk-menuitemback" type="button" name="back" ng-if="menuItem.showConfiguration || !menuItem.isSideDish" ng-click="menuItem.isSideDish ? (menuItem.showConfiguration = false) : goBack()">\r\n                    <span>{{\'Back\' | translate}}</span>\r\n                </button>\r\n                <button class="addToCartAction menuItemAddToCartAction" ng-class="{\'trk-menuitemadd\': menuItem.isSideDish !== true, \'trk-sidedishadd\': (menuItem.isSideDish === true) && (\'menu\' | includedByState), \'trk-checkoutsidedishadd\': (menuItem.isSideDish === true) && (\'order\' | includedByState)}" type="submit" name="addMenuItem" ng-if="menuItem.orderable && (menuItem.showConfiguration || !menuItem.isSideDish)" ng-click="menuItemForm.$submit()">\r\n                    <span>{{\'AddToCart\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="addOn sdContainer" ng-if="menuItem.side_dishes.length > 0">\r\n        <div class="titleContainer addOnTitleContainer sdTitleContainer">\r\n            <h2 class="title addOnTitle sdTitle">{{\'SideDishes_Title\' | translate}}</h2>\r\n        </div>\r\n        <div class="addOnItemContentContainer sdContentContainer">\r\n            <ul class="addOnItemList sdList">\r\n                <li class="addOnItemListItem sdListItem" ng-class="{active: menuItem.showConfiguration}" ng-repeat="menuItem in menuItem.side_dishes" ng-include="\'/web/app/menu/menuItem.html\'"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/menuItem.selection.html",'<div class="menuItem menuItemSelection" ng-class="{noImage: !selection.selectedMenuItem.image}" ono-class="[selection.selectedMenuItem.tags, {notOrderable: !menuItem.orderable}]">\r\n    <div class="titleContainer menuItemTitleContainer">\r\n        <h2 class="title menuItemTitle" ng-bind-html="selection.selectedMenuItem.title"></h2>\r\n    </div>\r\n\r\n    <div class="contentContainer menuItemContentContainer">\r\n        <div class="imagesContainer menuItemImageComtainer" ng-if="selection.selectedMenuItem.image">\r\n            <img class="menuItemImage" alt="" ng-src="{{selection.selectedMenuItem.image}}">\r\n        </div>\r\n\r\n        <div class="descriptionContainer menuItemDescriptionContainer" ng-if="selection.selectedMenuItem.description">\r\n            <p class="description menuItemDescription" ng-bind-html="selection.selectedMenuItem.description"></p>\r\n        </div>\r\n        <div class="optionGroup" ng-class="group.tags" ng-repeat="group in selection.selectedMenuItem.option_groups" ng-if="selection.selectedMenuItem.option_groups.length">\r\n            <div class="titleContainer optionGroupTitleContainer" ng-if="group.title">\r\n                <h3 class="optionGroupTitle menuElementTitle title" ng-bind-html="group.title"></h3>\r\n            </div>\r\n            <div class="option {{option.display_template}}" ono-field-set="\'options[\' + $index + \']\'" ng-class="option.tags" ng-repeat="option in group.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n        </div>\r\n\r\n        <div class="toppingSet" ng-class="selection.selectedMenuItem.topping_set.tags" ng-if="selection.selectedMenuItem.topping_set.topping_groups.length">\r\n            <div class="toppingGroup" ng-repeat="tg in selection.selectedMenuItem.topping_set.topping_groups" ono-template="\'/web/app/menu/topping_group.html\'"></div>\r\n        </div>\r\n\r\n        <div class="menuItemAdditional" ng-if="selection.selectedMenuItem.allow_comments">\r\n            <div class="menuItemCommentsContainer">\r\n                <div class="inputContainer textInputContainer commentsTextareaContainer">\r\n                    <label for="commentstext">\r\n                        <span class="inputText">{{\'Comments\' | translate}}</span>\r\n                    </label>\r\n                    <span class="input textarea commentsTextarea">\r\n                        <textarea name="comments" ng-model="selection.selectedMenuItem.comments" id="commentstext"></textarea>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/menuItem.stacked.html",'<div class="menuItem menuItemStacked" ng-class="{noImage: !menuItem.image}" ono-class="[menuItem.tags, {notOrderable: !menuItem.orderable}]">\r\n    <div>\r\n        <div class="imageContainer menuItemImageContainer" ng-if="menuItem.image" ng-attr-style="background-image: url(\'{{menuItem.image | stringClean}}\')">\r\n            <img class="menuItemImage" alt="{{menuItem.title}}" ng-src="{{menuItem.image}}">\r\n        </div>\r\n        <div class="imageContainer menuItemImageContainer" ng-if="!menuItem.image" ng-class="{\'defaultMenuItemImage\': !menuItem.image}"></div>\r\n\r\n        <div>\r\n            <div class="titleContainer menuItemTitleContainer">\r\n                <h3 class="title menuItemTitle">\r\n                    <span ng-bind-html="menuItem.title"></span>\r\n                    <span class="dash">-</span>\r\n                    <span class="menuItemPrice">{{menuItem.pricing.base_price | money}}</span>\r\n                </h3>\r\n            </div>\r\n\r\n            <div class="descriptionContainer menuItemDescriptionContainer" ng-if="menuItem.description.length">\r\n                <p class="description menuItemDescription" ng-bind-html="menuItem.description"></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form menuItemDetailsForm" ng-form="menuItemForm" ng-submit="menuItemSubmit(menuItem)">\r\n        <div class="errorContainer formErrorContainer menuItemFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="modifierContainer quantityItemContainer menuItemQuantityContainer" ng-show="menuItem.allow_quantity_input">\r\n            <label class="titleContainer quantityTitleContainer" for="menu_item_quantity_{{$id}}">\r\n                <span class="title quantityTitle">{{\'Quantity\' | translate}}</span>\r\n            </label>\r\n            <div class="actionsContainer customizableOptionsContainer changeQuantityInputContainer menuItemChangeQuantityContainer">\r\n                <button type="button" class="decrementAction" ng-click="menuItem.decrement()" ng-disabled="menuItem.quantity <= 1"><span class="visuallyHidden">Decrement</span></button>\r\n                <input type="tel" name="quantity" id="menu_item_quantity_{{$id}}" numbers-only maxlength="2" ng-model="menuItem.quantity">\r\n                <button type="button" class="incrementAction" ng-click="menuItem.increment()" ng-disabled="menuItem.quantity >= 99"><span class="visuallyHidden">Increment</span></button>\r\n            </div>\r\n        </div>\r\n        <div class="menuItemDetailsContainer optionGroupContainer" ng-class="group.tags" ng-repeat="group in menuItem.option_groups" ng-if="menuItem.option_groups.length && menuItem.showConfiguration">\r\n            <div class="titleContainer optionGroupTitleContainer" ng-if="group.title">\r\n                <h3 class="title optionGroupTitle" ng-bind-html="group.title"></h3>\r\n            </div>\r\n            <div class="option {{option.display_template}}" ono-field-set="\'options[\' + $index + \']\'" ng-class="option.tags" ng-repeat="option in group.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>\r\n        </div>\r\n\r\n        <div class="menuItemDetailsContainer toppingSetContainer" ng-class="menuItem.topping_set.tags" ng-if="menuItem.topping_set.topping_groups.length && menuItem.showConfiguration">\r\n            <div class="toppingGroupContainer" ng-repeat="tg in menuItem.topping_set.topping_groups" ono-template="\'/web/app/menu/topping_group.html\'"></div>\r\n        </div>\r\n\r\n        <div class="menuItemDetailsContainer combosContainer" ng-if="menuItem.selections.length && menuItem.showConfiguration">\r\n            <div class="combo" ng-repeat="selection in menuItem.selections">\r\n                <div class="titleContainer comboTitleContainer">\r\n                    <h4 class="title comboTitle">{{selection.title}}</h4>\r\n                </div>\r\n                <div class="formElements comboFormElements">\r\n                    <label class="inputContainer selectContainer comboSelectContainer">\r\n                        <span class="input select comboSelect">\r\n                            <select ng-model="selection.selectedMenuItem" ng-options="mi.title + (mi.pricing.base_price > 0 ? \' +\' + (mi.pricing.base_price | money) : \'\')  for mi in selection.menu_items" ng-change="setSelection(selection)" required>\r\n                                <option value="">{{\'MakeASelection\' | translate}}</option>\r\n                            </select>\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n                <div class="comboSelectionContainer" ng-if="selection.selectedMenuItem" ng-show="selection.selectedMenuItem.option_groups.length || selection.selectedMenuItem.topping_set.length || selection.selectedMenuItem.allow_comments" ng-include="\'/web/app/menu/menuItem.combo.selection.html\'"></div>\r\n            </div>\r\n        </div>\r\n        <div class="menuItemDetailsContainer menuItemAdditionalContainer" ng-if="menuItem.orderable && (menuItem.showConfiguration || !menuItem.isSideDish) && (menuItem.allow_quantity_input || menuItem.allow_recipient_name || menuItem.allow_comments)">\r\n\r\n\r\n            <div class="menuItemAdditionalContent menuItemAdditionalRecipient" ng-show="menuItem.allow_recipient_name">\r\n                <div class="inputContainer textInputContainer recipientInputContainer">\r\n                    <label for="menu_item_recipient" class="inputText">{{\'Recipient\' | translate}}</label>\r\n                    <span class="input textInput recipientInput">\r\n                        <input type="text" id="menu_item_recipient" name="recipient" ng-model="menuItem.recipient" floating-label>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="menuItemAdditionalContent menuItemAdditionalComments" ng-show="menuItem.allow_comments">\r\n                <div class="inputContainer textInputContainer commentsTextareaContainer">\r\n                    <label for="menu_item_comments" class="inputText">{{\'Comments\' | translate}}</label>\r\n                    <span class="input textarea commentsTextarea">\r\n                        <textarea id="menu_item_comments" name="comments" ng-model="menuItem.comments"></textarea>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="menuItemDetailsContainer menuItemPriceContainer" ng-if="menuItem.showConfiguration">\r\n            <div class="price">\r\n                <span class="text">{{\'CurrentPrice\' | translate}}</span>\r\n                <span class="value">{{menuItem.pricing.current_price * menuItem.quantity | money}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="actionsContainer menuItemActionsContainer">\r\n            <button class="addToCartAction menuItemAddToCartAction" ng-if="menuItem.orderable && !menuItem.showConfiguration && menuItem.isSideDish" type="button" ng-click="menuItem.showConfiguration = true">\r\n                <span>{{\'AddToCart\' | translate}}</span>\r\n            </button>\r\n            <button class="backAction menuItemBackAction trk-menuitemback" type="button" name="back" ng-if="menuItem.showConfiguration || !menuItem.isSideDish" ng-click="menuItem.isSideDish ? (menuItem.showConfiguration = false) : goBack()">\r\n                <span>{{\'Back\' | translate}}</span>\r\n            </button>\r\n            <button class="addToCartAction menuItemAddToCartAction" ng-class="{\'trk-menuitemadd\': menuItem.isSideDish !== true, \'trk-sidedishadd\': (menuItem.isSideDish === true) && (\'menu\' | includedByState), \'trk-checkoutsidedishadd\': (menuItem.isSideDish === true) && (\'order\' | includedByState)}" type="submit" name="addMenuItem" ng-if="menuItem.orderable && (menuItem.showConfiguration || !menuItem.isSideDish)" ng-click="menuItemForm.$submit()">\r\n                <span>{{\'AddToCart\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="sdContainer" ng-if="menuItem.side_dishes.length > 0">\r\n        <div class="titleContainer sdTitleContainer">\r\n            <h2 class="title sdTitle">{{\'SideDishes_Title\' | translate}}</h2>\r\n        </div>\r\n        <div class="addOnItemContentContainer sdContentContainer">\r\n            <ul class="addOnItemList sdList">\r\n                <li class="addOnItemListItem sdListItem" ng-class="{active: menuItem.showConfiguration}" ng-repeat="menuItem in menuItem.side_dishes" ng-include="\'/web/app/menu/menuItem.html\'"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/menu/option.checkbox.html",'<div class="form optionForm optionCheckboxForm" ng-form="checkboxForm" role="group" aria-labelledby="optionCheckboxFormTitle_{{option.option_id}}_{{$index}}">\r\n    <div class="titleContainer formTitleContainer optionTitleContainer optionCheckboxFormTitleContainer" ng-if="option.title">\r\n        <h4 class="title formTitle optionTitle optionCheckboxFormTitle" ng-bind-html="option.title"></h4>\r\n    </div>\r\n\r\n    <div class="contentContainer optionCheckboxContentContainer">\r\n        <div class="descriptionContainer optionDescriptionContainer optionCheckboxDecriptionContainer" ng-if="option.description" id="optionCheckboxFormTitle_{{option.option_id}}_{{$index}}">\r\n            <p class="description optionDescription optionCheckboxDescription" ng-bind-html="option.description + (option.min_qty > 0 ? \' \' + \'(Required)\' : \'\')"></p>\r\n        </div>\r\n        <div class="optionContent optionCheckboxContent">\r\n            <div class="optionList optionCheckboxList">\r\n                <div class="optionListItem optionCheckboxListItem" ng-class="oi.tags" ng-repeat="oi in option.option_items">\r\n                    <div class="modifierContainer quantityItemContainer">\r\n                        <div class="formElements optionListFormElements optionCheckboxListFormElements">\r\n                            <div class="inputContainer checkboxContainer optionItemInputContainer" ng-class="{quantityModifier: option.quantity_editor_style != \'none\' && oi.max_qty != 1  && oi.min_qty != 1, active: oi.quantity > 0}">\r\n                                <label for="option_checkbox_option_{{option.option_id}}_{{$id}}">\r\n                                    <span class="inputText optionItemTitleContainer" ng-class="{selected: oi.quantity > 0}">\r\n                                        <span class="optionitemtitle" id="optionItemLabel_{{option.option_id}}_{{$index}}">{{oi.title}}</span>\r\n                                        <span class="optionItemPrice" ng-show="oi.price">({{oi.price | money}})</span>\r\n                                        <span class="optionItemCaloryCount" ng-if="oi.calorie_count">({{oi.calorie_count}} {{\'Calorie_Count\' | translate}})</span>\r\n                                    </span>\r\n                                </label>\r\n                                <span class="input checkboxInput optionItemInput">\r\n                                    <input type="checkbox" id="option_checkbox_option_{{option.option_id}}_{{$id}}" name="o_{{option.option_id}}" ono-rename-input="o_{{option.option_id}}" ng-model="oi.selected" ono-min-qty="option.option_items" ng-change="oi.toggleQuantity()" highlight-parent-on-focus data-group-id="{{option.option_id}}" data-group-title="{{option.title}}">\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="actionsContainer customizableOptionsContainer changeQuantityInputContainer" ng-if="option.quantity_editor_style != \'none\' && oi.max_qty != 1 && oi.quantity > 0  && oi.min_qty != 1">\r\n                            <button type="button" class="decrementAction" ng-click="oi.decrement()"></button>\r\n                            <input type="tel" name="quantity" pattern="[0-9]*" ng-model="oi.quantity" maxlength="2" ng-change="oi.updateprice()">\r\n                            <button type="button" class="incrementAction" ng-click="oi.increment()" ng-disabled="oi.quantity >= 99"></button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="errorContainer optionErrorContainer optionCheckboxErrorContainer" ng-if="$invalid && $submitted" ono-errors="checkboxForm.$error" id="error_option_group_{{option.option_id}}"></div>\r\n    </div>\r\n</div>\r\n\r\n<div class="subOption" ng-if="oi.options.length && oi.quantity > 0" ng-repeat="oi in option.option_items" ng-include="\'/web/app/menu/option.html\'"></div>'),$templateCache.put("/web/app/menu/option.dropdown.html",'<div class="form optionForm optionSelectForm" ng-form="checkboxForm">\r\n\t<div class="titleContainer formTitleContainer optionTitleContainer optionSelectFormTitleContainer" ng-if="option.title">\r\n\t\t<h4 class="title formTitle optionTitle optionSelectFormTitle" ng-bind-html="option.title"></h4>\r\n\t</div>\r\n\r\n\t<div class="contentContainer optionSelectContentContainer">\r\n\t\t<label class="descriptionContainer optionDescriptionContainer optionSelectDecriptionContainer" ng-if="option.description" for="option_dropdown_{{$parent.$id}}">\r\n\t\t\t<span class="description optionDescription optionSelectDescription" ng-bind-html="option.description + (option.min_qty > 0 ? \' \' + \'(Required)\' : \'\')"></span>\r\n\t\t</label>\r\n\t\r\n\t\t<div class="optionContent optionSelectContent">\r\n\t\t\t<ul class="optionList optionSelectList">\r\n\t\t\t\t<li class="optionListItem optionSelectListItem">\r\n\t\t\t\t\t<div class="formElements optionListFormElements optionSelectListFormElements">\r\n\t\t\t\t\t\t<span class="inputContainer selectContainer optionItemSelectContainer">\r\n\t\t\t\t\t\t\t<span class="input select optionItemSelect">\r\n                               \r\n\t\t\t\t\t\t\t    <select ng-options="select | calorieCount  for select in option.option_items" ng-change="option.select(select)" ng-model="option.selected" id="option_dropdown_{{$id}}" name="option_dropdown" ono-required-input="option.min_qty" aria-label="{{option.title}}" field-label="{{option.title}}" class="select input">\r\n\t\t\t\t\t\t\t\t\t<option value="">{{\'MakeASelection\' | translate}}</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class="subOption" ng-if="oi.options.length && oi.quantity > 0" ng-repeat="oi in option.option_items" ng-include="\'/web/app/menu/option.html\'"></div>'),$templateCache.put("/web/app/menu/option.freetext.html",'<div class="form optionForm optionFreeTextForm">\r\n\r\n    <div class="titleContainer contentContainer optionFreeTextContentContainer">\r\n        <div class="descriptionContainer optionDescriptionContainer optionFreeTextDecriptionContainer" ng-if="option.description">\r\n            <p class="description optionDescription optionFreeTextDescription" ng-bind-html="option.description"></p>\r\n        </div>\r\n\r\n        <div class="optionContent optionFreeTextContent">\r\n            <ul class="optionList optionFreeTextList">\r\n                <li class="optionListItem optionFreeTextListItem" ng-repeat="oi in option.option_items">\r\n                    <div class="formElements optionListFormElements optionFreeTextListFormElements">\r\n                        <div class="inputContainer textareaContainer optionFreeTextTextareaContainer">\r\n                            <div class="specialInstruction">\r\n                                <label for="option_freetext_{{$id}}" class="specialInstructionLabel">{{\'special_instructions\' | translate}}</label>\r\n                                <span class="characterCounter" id="option_freetext_label_{{$id}}" aria-live="polite" ng-class="{warning : (oi.text.length > SpecialInstructionMaxLength - 25 && (oi.text.length <= SpecialInstructionMaxLength - 5)), error : oi.text.length > SpecialInstructionMaxLength - 5}">{{oi.text.length || 0}} of {{SpecialInstructionMaxLength}}</span>\r\n                            </div>\r\n                            \r\n                            <span class="input textarea optionFreeTextTextarea">\r\n                                \x3c!--The regex below is to prevent malformed xml from omnivore--\x3e\r\n                                <textarea name="freetext" id="option_freetext_{{$id}}" allow-pattern="[a-zA-Z0-9\\. \\-,?]" ng-model="oi.text" debounce-input ada-aria-describedby="option_freetext_label_{{$id}}" maxlength="{{SpecialInstructionMaxLength}}" ng-keypress="FilterSpecialCharacters($event)">\r\n                                </textarea>\r\n                               </span>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="subOption" ng-if="oi.options.length && oi.quantity > 0" ng-repeat="oi in option.option_items" ng-include="\'/web/app/menu/option.html\'"></div>'),$templateCache.put("/web/app/menu/option.html",'<div class="option {{option.display_template}}" ng-class="option.tags" ono-field-set="\'options[\' + $index + \']\'" ng-repeat="option in oi.options" ono-template="\'/web/app/menu/option.{{option.display_template}}.html\'"></div>'),$templateCache.put("/web/app/menu/option.none.html",'<div class="form optionForm optionNoneForm">\r\n\t<div class="titleContainer formTitleContainer optionTitleContainer optionNoneFormTitleContainer" ng-if="option.title">\r\n\t\t<h4 class="title formTitle optionTitle optionNoneFormTitle" ng-bind-html="option.title"></h4>\r\n\t</div>\r\n\r\n\t<div class="contentContainer optionNoneContentContainer">\r\n\t\t<div class="descriptionContainer optionDescriptionContainer optionNoneDecriptionContainer" ng-if="option.description || option.min_qty">\r\n\t\t\t<p class="description optionDescription optionNoneDescription" ng-if="option.description" ng-bind-html="option.description"></p>\r\n\t\t\t<p class="req" ng-if="option.min_qty">Your selection must add up to {{option.min_qty}}.</p>\r\n\t\t</div>\r\n\r\n\t\t<div class="optionContent optionNoneContent">\r\n\t\t\t<ul class="optionList optionNoneList" ng-model="option" ono-min-qty="option.min_qty" ono-max-qty="option.max_qty">\r\n\t\t\t\t<li class="optionListItem optionNoneListItem" ng-class="oi.tags" ng-repeat="oi in option.option_items">\r\n\t\t\t\t\t<div class="modifierContainer quantityItemContainer">\r\n\t\t\t\t\t\t<div class="formElements optionListFormElements optionSelectListFormElements">\r\n\t\t\t\t\t\t\t<label class="inputContainer optionItemInputContainer" ng-class="{active: oi.quantity > 0, quantityModifier: option.quantity_editor_style != \'none\' && oi.max_qty != 1  && oi.min_qty != 1}">\r\n\t\t\t\t\t\t\t\t<span class="inputText optionItemTitleContainer">\r\n\t\t\t\t\t\t\t\t\t<span class="optionItemTitle">{{oi.title}}</span>\r\n\t\t\t\t\t\t\t\t\t<span class="optionItemPrice" ng-show="oi.price">({{oi.price | money}})</span>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="actionsContainer customizableOptionsContainer changeQuantityInputContainer">\r\n\t\t\t\t\t\t\t<button type="button" class="decrementAction" ng-click="oi.decrement()"></button>\r\n\t\t\t\t\t\t\t<input type="tel" name="quantity" pattern="[0-9]*" value="{{oi.quantity}}" maxlength="2">\r\n\t\t\t\t\t\t\t<button type="button" class="incrementAction" ng-click="oi.increment()" ng-disabled="oi.quantity >= 99"></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class="subOption" ng-if="oi.options.length && oi.quantity > 0" ng-repeat="oi in option.option_items" ng-include="\'/web/app/menu/option.html\'"></div>'),$templateCache.put("/web/app/menu/option.radio.html",'<div class="form optionForm optionRadioForm" ng-form="radioForm">\r\n    <div class="titleContainer optionTitleContainer optionRadioTitleContainer" ng-if="option.title">\r\n        <h4 class="title optionTitle optionRadioTitle" ng-bind-html="option.title"></h4>\r\n    </div>\r\n\r\n    <div class="contentContainer optionRadioContentContainer">\r\n        <div class="descriptionContainer optionDescriptionContainer optionRadioDecriptionContainer" ng-if="option.description">\r\n            <p class="description optionDescription optionRadioDescription" ng-bind-html="option.description + (option.min_qty > 0 ? \' \' + \'(Required)\' : \'\')"></p>\r\n        </div>\r\n\r\n        <div class="optionContent optionRadioContent">\r\n            <div class="optionList optionRadioList">\r\n                <div class="optionListItem optionRadioListItem" ng-class="oi.tags" ng-repeat="oi in option.option_items">\r\n                    <div class="modifierContainer quantityItemContainer">\r\n                        <div class="formElements optionListFormElements optionSelectListFormElements">\r\n                            <div class="inputContainer radioContainer optionItemInputContainer" ng-class="{quantityModifier: option.quantity_editor_style != \'none\' && oi.max_qty != 1 && oi.multiple_of > 0, active: oi.quantity > 0}">\r\n                                <label for="option_radio_radio_{{option.id}}_{{$index}}">\r\n                                    <span class="inputText optionItemTitleContainer" ng-class="{selected: oi.quantity > 0}">\r\n                                        <span class="optionItemTitle">{{oi.title}}</span>\r\n                                        <span class="optionItemPrice price" ng-show="oi.price">({{oi.price | money}})</span>\r\n                                    </span>\r\n                                </label>\r\n                                <span class="input radio optionItemInput">\r\n                                    <input type="radio" name="radio" id="option_radio_radio_{{option.id}}_{{$index}}" ono-min-qty="option.option_items" ng-change="option.select(oi);validate();" highlight-parent-on-focus ng-model="oi.quantity" data-group-id="{{option.option_id}}" data-group-title="{{option.title}}">\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="actionsContainer customizableOptionsContainer changeQuantityInputContainer" ng-if="option.quantity_editor_style != \'none\' && oi.max_qty != 1 && oi.quantity > 0 && oi.multiple_of > 0">\r\n                            <button type="button" class="decrementAction" ng-click="oi.decrement()"></button>\r\n                            <input type="tel" name="quantity" pattern="[0-9]*" value="{{oi.quantity}}" maxlength="2">\r\n                            <button type="button" class="incrementAction" ng-click="oi.increment()" ng-disabled="oi.quantity >= 99"></button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="errorContainer optionErrorContainer optionRadioErrorContainer" ng-if="$invalid && $submitted" ono-errors="radioForm.$error" id="error_option_group_{{option.option_id}}"></div>\r\n    </div>\r\n</div>\r\n\r\n<div class="subOption" ng-if="oi.options.length && oi.quantity > 0" ng-repeat="oi in option.option_items" ng-include="\'/web/app/menu/option.html\'"></div>'),$templateCache.put("/web/app/menu/previewMenu.html",'<div class="downloadMenuPreview">\r\n    <iframe class="previewMenu" name="menuPreview" preview-menu ng-src="{{src}}"></iframe>\r\n</div>\r\n'),$templateCache.put("/web/app/menu/topping_group.html",'<div class="toppingGroup">\r\n    <div class="titleContainer toppingGroupTitleContainer">\r\n        <h3 class="title toppingGroupTitle" ng-bind-html="tg.title" ng-show="tg.title"></h3>\r\n    </div>\r\n\r\n    <div class="contentContainer toppingGroupContentContainer">\r\n        <div class="messageContainer toppingGroupMessageContainer">\r\n            <p class="message toppingGroupMessage">{{\'ToppingTier_Message\' | translate}}</p>\r\n        </div>\r\n\r\n        <div class="toppingGroupPricing" ng-if="menuItem.$toppingPricing.tier_pricing">\r\n            <ul class="toppingGroupTierList">\r\n                <li class="toppingGroupTierListItem" ng-class="tier" ng-if="p.full_topping_price > 0 || (p.half_topping_price > 0 && ts.allow_half_toppings)" ng-repeat="(tier, p) in menuItem.$toppingPricing.tier_pricing">\r\n\r\n                    <span class="tierLabel">{{\'ToppingTier_\' + tier | translate}}</span>\r\n\r\n                    <span class="tierPrice tierPriceFull" ng-if="p.full_topping_price > 0">\r\n                        <span class="text">{{\'Topping_Full\' | translate}}:</span>\r\n                        <span class="price">{{p.full_topping_price | money}}</span>\r\n                    </span>\r\n                    <span class="tierPrice tierPriceHalf" ng-if="p.half_topping_price > 0 && ts.allow_half_toppings">\r\n                        <span class="text">{{\'Topping_Half\' | translate}}:</span>\r\n                        <span class="price">{{p.half_topping_price | money}}</span>\r\n                    </span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class="toppingGroupContent">\r\n            <ul class="toppingGroupList">\r\n                <li class="toppingGroupListItem toppingTypeListItem" ng-repeat="type in [\'Sauce\', \'Cheese\', \'NonMeat\', \'Meat\']" ng-class="[\'toppingType-\' + type]" ng-if="tg.toppings | has:{topping_type:type}:true">\r\n\r\n                    <div class="titleContainer toppingTypeTitleContainer">\r\n                        <h4 class="title toppingTypeTitle">{{\'ToppingType_\' + type | translate}}</h4>\r\n                    </div>\r\n\r\n                    <div class="toppingTypeContent">\r\n                        <ul class="optionList toppingOptionList">\r\n                            <li class="optionListItem customizableOptionListItem toppingOptionListItem" ng-repeat="topping in tg.toppings | filter:{topping_type:type}:true">\r\n\r\n                                <div class="modifierContainer toppingItemContainer" ng-class="topping.tier">\r\n                                    <div class="formElements toppingItemFormElements">\r\n                                        <label class="inputContainer checkboxContainer toppingInputContainer" ng-class="{active: topping.selected}">\r\n                                            <span class="input checkbox toppingInput" ng-class="{selected: topping.selected}">\r\n                                                <input type="checkbox" ng-checked="topping.preselected" ng-model="topping.selected" ng-change="topping.toggleFull()">\r\n                                            </span>\r\n                                            <span class="inputText toppingTitle" ng-class="{selected: topping.selected}" ng-bind-html="topping.title"></span>\r\n                                        </label>\r\n                                    </div>\r\n\r\n                                    <div class="actionsContainer customizableOptionsContainer toppingOptionsActionsContainer" ng-show="topping.selected" ng-if="ts.allow_half_toppings || ts.allow_double_toppings">\r\n\r\n                                        <button type="button" class="toppingLeftAction" title="{{\'Topping_Left\' | translate}}" ng-class="{active: topping.first_half && !topping.second_half}" ng-click="topping.selectLeft()" ng-if="ts.allow_half_toppings">\r\n                                            <span>{{\'Topping_Left\' | translate}}</span>\r\n                                        </button>\r\n                                        <button type="button" class="toppingFullAction" title="{{\'Topping_Full\' | translate}}" ng-class="{active: topping.first_half && topping.second_half}" ng-click="topping.selectFull()" ng-if="ts.allow_half_toppings">\r\n                                            <span>{{\'Topping_Full\' | translate}}</span>\r\n                                        </button>\r\n                                        <button type="button" class="toppingRightAction" title="{{\'Topping_Right\' | translate}}" ng-class="{active: !topping.first_half && topping.second_half}" ng-click="topping.selectRight()" ng-if="ts.allow_half_toppings">\r\n                                            <span>{{\'Topping_Right\' | translate}}</span>\r\n                                        </button>\r\n                                        <button type="button" class="toppingDoubleAction" title="{{\'Topping_Double\' | translate}}" ng-class="{active: topping.doubled}" ng-click="topping.toggleDouble()" ng-if="ts.allow_double_toppings">\r\n                                            <span>{{\'Topping_Double\' | translate}}</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/menu/topping_set.html",'<div class="toppingSet" ng-class="ts.tags" ng-if="ts.topping_groups.length">\r\n    <div class="toppingGroupContainer" ng-repeat="tg in ts.topping_groups" ono-template="\'/web/app/menu/topping_group.html\'"></div>\r\n</div>'),$templateCache.put("/web/app/orderHistory/invoice.html",'<div class="invoice" ng-controller="invoiceCtrl">\r\n\t<div class="titleContainer invoiceTitleContainer">\r\n\t\t<h2 class="title invoiceTitle">{{\'OrderInvoice\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="invoiceContent" ng-show="model.cart">\r\n\t\t<div class="orderInfo invoiceOrderInfo invoiceOrderDetails" ng-if="model.cart.order_type!=\'Saved\'">\r\n\t\t\t<div class="titleContainer invoiceContentTitleContainer invoiceOrderDetailsTitleContainer">\r\n\t\t\t\t<h3 class="title invoiceContentTitle invoiceOrderDetailsTitle">Order Details</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="invoiceOrderContent invoiceOrderDetailsContent">\r\n\t\t\t\t<p ng-bind-html="\'Invoice_FullfillmentDateTime\' | translate:model.cart.fulfillment_type:(model.cart.date_placed | moment: \'LL\'):(model.cart.date_placed | moment: \'LT\')"></p>\r\n\t\t\t\t<p>{{fullfilledOn}}</p>\r\n\r\n\t\t\t\t<div ng-if="model.showDeliveryAddress">\r\n\t\t\t\t\t<p>{{\'DeliveredTo\' | translate}}</p>\r\n\r\n\t\t\t\t\t<div class="deliveryAddress addressContainer info">\r\n\t\t\t\t\t\t<span class="address">\r\n\t\t\t\t\t\t\t<span class="address1">{{model.cart.fulfillment_details.delivery_address.address1}}</span>\r\n\t\t\t\t\t\t\t<span class="address2" ng-show="model.cart.fulfillment_details.delivery_address.address2">{{model.cart.fulfillment_details.delivery_address.address2}}</span>\r\n\t\t\t\t\t\t\t<span class="city state zip">{{model.cart.fulfillment_details.delivery_address.city}}, {{model.cart.fulfillment_details.delivery_address.state}} {{model.cart.fulfillment_details.delivery_address.zip_code}}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="orderInfo invoiceOrderInfo invoiceOrderLocationDetails">\r\n\t\t\t<div class="titleContainer invoiceTitleContainer invoiceLocationDetailsTitleContainer">\r\n\t\t\t\t<h3 class="title invoiceTitle invoiceLocationDetailsTitle">Selected Location</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="invoiceOrderContent invoiceOrderLocationDetailsContent">\r\n\t\t\t\t<div class="addressContainer invoiceAddressContainer">\r\n\t\t\t\t\t<span class="address">\r\n\t\t\t\t\t\t<span class="name">{{model.cart.restaurant_title}}</span>\r\n\t\t\t\t\t\t<span class="address1">{{model.cart.restaurant_address.address1}}</span>\r\n\t\t\t\t\t\t<span class="address2" ng-show="model.cart.restaurant_address.address2">{{model.cart.restaurant_address.address2}}</span>\r\n\t\t\t\t\t\t<span class="city state zip">{{model.cart.restaurant_address.city}}, {{model.cart.restaurant_address.state}} {{model.cart.restaurant_address.zip_code}}</span>\r\n\t\t\t\t\t\t<span class="phoneContainer">\r\n\t\t\t\t\t\t\t<span class="phone" ng-if="!displaySize.isMobile">{{model.cart.restaurant_address.phone | phone}}</span>\r\n\t\t\t\t\t\t\t<a ng-href="tel:{{model.cart.restaurant_address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t\t\t\t\t\t<span>{{model.cart.restaurant_address.phone | phone}}</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="directionsContainer">\r\n\t\t\t\t<a href="http://maps.google.com/maps?q={{restaurant.address.address1}},{{restaurant.address.state}} {{restaurant.address.zip_code}}" target="_blank">\r\n                    <span>{{\'Directions\' | translate}}</span>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n        <div class="orderInfo invoiceOrderInfo invoiceOrderComments" ng-if="model.cart.order_comments"> \x3c!--  || model.cart.complimentary_items.length --\x3e\r\n\t\t\t<div class="titleContainer invoiceTitleContainer invoiceCommentsTitleContainer">\r\n\t\t\t\t<h3 class="title invoiceTitle invoiceCommentsTitle">{{\'OrderInstructions\' | translate}}</h3>\r\n\t\t\t</div>\r\n            <div class="invoiceOrderContent invoiceOrderCommentsContent" ng-if="model.cart.order_comments">\r\n                <p>{{model.cart.order_comments}}</p>\r\n            </div>\r\n\r\n            \x3c!--<div class="invoiceOrderContent invoiceComplimentaryItemsContent" ng-if="model.cart.complimentary_items.length">\r\n                <div class="orderComplimentaryItem"\r\n                     ng-class="{notIncluded: item.quantity == 0}"\r\n                     ng-repeat="item in model.cart.complimentary_items">\r\n                    <p>{{item.title}} {{\'Will\' | translate}} <span ng-if="item.quantity == 0">{{\'Not\' | translate}}</span> {{\'ComplimentaryItem_IncludedInOrder\' | translate}}</p>\r\n                </div>\r\n\t\t\t</div>--\x3e\r\n\t\t</div>\r\n\r\n\t\t<div class="orderInfo invoiceOrderInfo invoiceOrderCart">\r\n\t\t\t<div class="titleContainer invoiceTitleContainer invoiceCartTitleContainer">\r\n\t\t\t\t<h3 class="titleinvoiceTitle invoiceCartTitle">{{\'OrderItems\' | translate}}</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="invoiceOrderContent invoiceOrderCartContent">\r\n\t\t\t\t<ul class="cart invoiceCart">\r\n\t\t\t\t\t<li class="orderItemContainer invoiceOrderItemContainer" ng-repeat="oi in model.cart.order_items" ng-include="\'/web/app/cart/order_item.html\'"></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="orderInfo invoiceOrderInfo invoiceOrderTotals">\r\n\t\t\t<div class="orderTotalsContainer" ng-include="\'/web/app/cart/orderTotals.html\'"></div>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer invoiceActionsContainer">\r\n\t\t\t<button class="repeatAction invoiceRepeatAction trk-repeatorder" ng-click="repeatOrder(model.cart)">\r\n\t\t\t\t<span>{{\'RepeatThisOrder\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="backAction invoiceBackAction" ui-sref="orderHistory">\r\n\t\t\t\t<span>{{\'Back\' | translate}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderHistory/orderHistory.html",'<div class="orderHistory" ui-view>\r\n    <div class="savedOrdersContainer" ng-include="\'/web/app/orderHistory/orderHistory.savedOrders.html\'"></div>\r\n    <div class="recentOrdersContainer" ng-include="\'/web/app/orderHistory/orderHistory.recentOrders.html\'"></div>\r\n    <div class="actionsContainer orderHistoryActionsContainer" ng-if="displaySize.isMobile">\r\n        <button class="backAction orderHistoryBackAction" ui-sref="home">\r\n            <span>{{\'Back\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderHistory/orderHistory.recentOrders.html",'<div class="accountList orderHistoryOrders orderHistoryRecentOrders">\r\n\t<div class="titleContainer recentOrdersTitleContainer">\r\n\t\t<h2 class="title">Order History</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer orderHistoryContentContainer">\r\n\t\t<div class="messageContainer recentOrdersMessageContainer" ng-if="!orderHistory.length">\r\n\t\t\t<p class="message recentOrdersMessage">No past orders.</p>\r\n\t\t</div>\r\n\r\n\t\t<div class="ordersContent recentOrdersContent" ng-if="orderHistory.length">\r\n\t\t\t<ul class="ordersList recentOrdersList">\r\n\t\t\t\t<li class="ordersListItem recentOrdersListItem" ng-repeat="pastOrder in orderHistory">\r\n\t\t\t\t\t<div class="ordersInfo recentOrdersInfo">\r\n\t\t\t\t\t\t<span class="date">{{pastOrder.date_placed | moment: \'LL\'}}</span>\r\n\t\t\t\t\t\t<span class="qty">{{pastOrder.items_quantity}} items</span>\r\n\t\t\t\t\t\t<span class="total">{{pastOrder.grand_total | money}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="actionsContainer listItemActionsContainer recentOrdersActionsContainer">\r\n                        <button name="savedOrderRepeat" class="repeatAction recentOrdersRepeatAction trk-repeatorder" title="Repeat Order" ng-click="repeatOrder(pastOrder)">\r\n                            <span>Repeat</span>\r\n                        </button>\r\n\t\t\t\t\t\t<button name="recentOrderInfo" class="viewAction viewInvoiceAction recentOrdersViewInvoiceAction" title="View Invoice" ui-sref="invoice({ user_id:userId, order_id: pastOrder.id })">\r\n\t\t\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button name="recentOrderSave" class="saveAction recentOrdersSaveAction" title="Add to Saved Orders" ng-click="showDialog(\'order.save\')" ng-if="!featureFlags.hideSaveOrder">\r\n\t\t\t\t\t\t\t<span>Save</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderHistory/orderHistory.savedOrders.html",'<div class="accountList orderHistoryOrders orderHistorySavedOrders" ng-if="!featureFlags.hideSaveOrder">\r\n\t<div class="titleContainer savedOrdersTitleContainer">\r\n\t\t<h2 class="title savedOrdersTitle">Saved Orders</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer orderHistoryContentContainer">\r\n\t\t<div class="messageContainer savedOrdersMessageContainer" ng-if="!savedOrders.length">\r\n\t\t\t<p class="message savedOrdersMessage">No saved orders.</p>\r\n\t\t</div>\r\n\r\n\t\t<div class="ordersContent savedOrdersContent" ng-if="savedOrders.length">\r\n\t\t\t<ul class="ordersList savedOrdersList">\r\n\t\t\t\t<li class="ordersListItem savedOrdersListItem" ng-repeat="savedOrder in savedOrders">\r\n\t\t\t\t\t<div class="ordersInfo savedOrdersInfo">\r\n\t\t\t\t\t\t<span class="name">{{savedOrder.nick_name}}</span>\r\n\t\t\t\t\t\t<span class="qty">{{savedOrder.items_quantity}} items</span>\r\n\t\t\t\t\t\t<span class="total">{{savedOrder.subtotal | money}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="actionsContainer listItemActionsContainer savedOrdersActionsContainer">\r\n                        <button name="savedOrderRepeat" class="repeatAction savedOrdersRepeatAction trk-repeatorder" title="Repeat Order" ng-click="repeatOrder(savedOrder)">\r\n                            <span>Repeat</span>\r\n                        </button>\r\n\t\t\t\t\t\t<button name="savedOrderInfo" class="viewAction viewInvoiceAction savedOrdersViewInvoiceAction" title="View Invoice" ui-sref="invoice({ order_id: savedOrder.id })">\r\n\t\t\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button name="savedOrderDelete" class="deleteAction savedOrdersDeleteAction" title="Delete" ng-click="removeSavedOrder(savedOrder.savedOrderId)">\r\n\t\t\t\t\t\t\t<span>Delete</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderHistory/saveOrder.html",'<div class="form saveOrderForm" ng-controller="saveOrderCtrl" ng-form="saveOrderForm" ng-submit="saveOrderFormSubmit()">\r\n    <div class="errorContainer formErrorContainer saveOrderFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t<div class="formElements saveOrderFormElements">\r\n\t\t<div class="inputContainer textInputContainer nicknameInputContainer">\r\n\t\t\t<label for="save_order_nickname" class="inputText">{{\'Nickname\' | translate}} (Required)</label>\r\n\t\t\t<span class="input textInput nicknameInput">\r\n\t\t\t\t<input type="text" name="nickname" ng-model="saveOrder.nickname" maxlength="50" required id="save_order_nickname" floating-label>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer saveOrderFormActionsContainer">\r\n\t\t<button class="saveAction saveOrderFormSaveAction" type="submit" ng-click="saveOrderForm.$submit()">\r\n\t\t\t<span>{{\'Save\' | translate}}</span>\r\n\t\t</button>\r\n\t\t<button class="cancelAction saveOrderFormCancelAction" ng-click="handleDialogAction()">\r\n\t\t\t<span>{{\'Cancel\' | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderProgress/orderProgress.html",'<div class="orderProgress" ng-class="{stepSetup: (\'orderSetup\' | includedByState), stepMenu: (\'menu\' | includedByState), stepReview: ((\'review\' | includedByState) || (\'checkout\' | includedByState)), stepConfirm: (\'confirmation\' | includedByState)}">\r\n    \r\n    <ul class="orderProgressSteps">\r\n        <li class="step stepSetup" ng-class="{active: (\'orderSetup\' | includedByState)}">\r\n            <a href="#gotoOrder" tabindex="0" prevent-redirect ng-click="gotoOrder()" class="trk-orderprogressordersetup">\r\n                <span ng-if="isDelivery()">{{\'ProgressBar_OrderDetails_Delivery\' | translate}}</span>\r\n                <span ng-if="!isDelivery()">{{\'ProgressBar_OrderDetails\' | translate}}</span>\r\n            </a>\r\n        </li>\r\n        <li class="step stepMenu" ng-class="{active: (\'menu\' | includedByState)}">\r\n            <a href="#gotoMenu" tabindex="0" prevent-redirect ng-click="gotoMenu()" class="trk-orderprogressviewmenu">\r\n                <span ng-if="isDelivery()">{{\'ProgressBar_AddFood_Delivery\' | translate}}</span>\r\n                <span ng-if="!isDelivery()">{{\'ProgressBar_AddFood\' | translate}}</span>\r\n            </a>\r\n        </li>\r\n        <li class="step stepReview" ng-class="{active: (\'review\' | includedByState) || (\'checkout\' | includedByState)}">\r\n            <a href="#setupcomplete" tabindex="{{model.cart.setup_complete ? \'0\' : \'-1\'}}" prevent-redirect class="trk-orderprogresscheckout" ng-disabled="!model.cart.setup_complete" ng-click="model.cart.setup_complete ? $state.go(\'review\') : \'\'">\r\n                <span ng-if="isDelivery()">{{\'ProgressBar_Review_Delivery\' | translate}}</span>\r\n                <span ng-if="!isDelivery()">{{\'ProgressBar_Review\' | translate}}</span>\r\n            </a>\r\n        </li>\r\n        <li class="step stepConfirm" ng-class="{active: (\'confirmation\' | includedByState)}">\r\n            <a ng-disabled="!(\'confirmation\' | includedByState)" tabindex="{{(\'confirmation\' | includedByState) ? \'0\' : \'-1\'}}">\r\n                <span ng-if="isDelivery()">{{\'ProgressBar_Confirmation_Delivery\' | translate}}</span>\r\n                <span ng-if="!isDelivery()">{{\'ProgressBar_Confirmation\' | translate}}</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>'),$templateCache.put("/web/app/restaurant/restaurant.display.alt.html",'<div class="restaurantDisplay restaurantDisplayAlt" ng-class="{notTakingOrders: !restaurant.taking_orders}">\r\n\t<div class="restaurantHeaderContainer">\r\n\t\t<div class="titleContainer restaurantTitleContainer" ng-class="recent || !loggedIn ? \'\' : \'favorite\'">\r\n            <h2 class="title restaurantTitle">\r\n                <a href="#selectlocation" tabindex="0" ng-click="selectLocation(restaurant)" prevent-redirect>{{restaurant.name}}</a>\r\n            </h2>\r\n\t\t</div>\r\n\r\n\t</div>\r\n\t<div class="contentContainer restaurantDisplayContentContainer">\r\n\t\t<div class="restaurantLocationContainer">\r\n\t\t\t<div class="restaurantAddress">\r\n\t\t\t\t<span class="phoneContainer">\r\n\t\t\t\t\t<span class="phone" ng-if="!displaySize.isMobile">{{restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t<a ng-href="tel:{{restaurant.address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t\t\t\t<span>{{restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class="address1">{{restaurant.address.address1}}</span>\r\n\t\t\t\t<span class="city state zip">{{restaurant.address.city}}, {{restaurant.address.state}} {{restaurant.address.zip_code}}</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="restaurantAddlInfo">\r\n\t\t\t\t<p class="title">\r\n\t\t\t\t\tAdditional Info:\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class="action">\r\n\t\t\t\t\t<a href="#storeHours" ng-click="showDialog(\'restaurant.hours\')" aria-label="Store Hours - Opens Dialog" prevent-redirect tabindex="0">\r\n\t\t\t\t\t\t<span>{{\'StoreHours\' | translate}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class="action">\r\n\t\t\t\t\t<a ng-href="http://maps.google.com/maps?q={{restaurant.address.address1}},{{restaurant.address.state}} {{restaurant.address.zip_code}}" target="_blank">\r\n\t\t\t\t\t\t<span>{{\'Directions\' | translate}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="actionsContainer restaurantActionsContainer">\r\n            <button class="startOrderAction restaurantStartOrderAction trk-restaurantsearchstartorder" aria-label="{{\'StartOrder\' | translate}} - {{restaurant.name}}" ng-click="selectLocation(restaurant)">\r\n                <span>{{\'StartOrder\' | translate}}</span>\r\n            </button>\r\n\t\t    <button class="showMenuAction restaurantShowMenuAction" ng-show="restaurant.show_menu" aria-label="{{menu.menu_type + \'Menu\' | translate}} - {{restaurant.name}}" ng-click="viewMenu(restaurant, menu)" ng-repeat="menu in restaurant.fulfillment_infos">\r\n\t\t        <span>{{menu.menu_type + \'Menu\' | translate}}</span>\r\n\t\t    </button>\r\n            <download-menu store="restaurant.store_number" buttonstyle="button"></download-menu>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("/web/app/restaurant/restaurant.display.html",'<div class="restaurantDisplay" ng-class="{notTakingOrders: !restaurant.taking_orders}">\r\n    <div class="messageContainer restaurantDisplayMessageContainer" ng-if="!restaurant.taking_orders">\r\n        <p class="message restaurantDisplayMessage">Please call the restaurant to place an order.</p>\r\n    </div>\r\n\r\n    <div class="restaurantDisplayContent">\r\n        <div class="addressContainer">\r\n            <span class="address">\r\n                <span class="name">{{restaurant.name}}</span>\r\n                <span class="address1">{{restaurant.address.address1}}</span>\r\n                <span class="city state zip">{{restaurant.address.city}}, {{restaurant.address.state}} {{restaurant.address.zip_code}}</span>\r\n            </span>\r\n        </div>\r\n        <div ng-if="restaurant.isExpress">\r\n            <strong>\r\n                {{\'DoorsideLocationLanguage\'|translate}}\r\n            </strong>\r\n        </div>\r\n        <div ng-if="restaurant.isPickUpOnly">\r\n            <strong>\r\n                {{\'PickUp_Only\'|translate}}\r\n            </strong>\r\n        </div>\r\n        <div class="locationActionsContainer">\r\n\t\t\t<ul class="locationSecondaryActions">\r\n\t\t\t\t<li class="storeHours">\r\n\t\t\t\t\t<a href="#storeHours" ng-click="showDialog(\'restaurant.hours\')" aria-label="Store Hours - Opens Dialog" prevent-redirect tabindex="0">\r\n\t\t\t\t\t\t<span>{{\'StoreHours\' | translate}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class="storeMap">\r\n\t\t\t\t\t<a ng-href="http://maps.google.com/maps?q={{restaurant.address.address1}},{{restaurant.address.state}} {{restaurant.address.zip_code}}" target="_blank">\r\n\t\t\t\t\t\t<span>{{\'Map\' | translate}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class="storePhone">\r\n\t\t\t\t\t<span class="phone" ng-if="!displaySize.isMobile">{{restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t<a ng-href="tel:{{restaurant.address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t\t\t\t<span>{{restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t   \r\n                <li class="menuDownload">\r\n                    <download-menu store="restaurant.store_number" buttonstyle="link"></download-menu>\r\n                </li>\r\n\t\t\t</ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="actionsContainer restaurantDisplayActionsContainer" ng-if="restaurant.taking_orders || restaurant.show_menu">\r\n        <button class="startOrderAction restaurantDisplayStartOrderAction trk-restaurantsearchstartorder" ng-click="selectLocation(restaurant)" ng-if="restaurant.taking_orders" aria-label="{{\'StartOrder\' | translate}} - {{restaurant.name}}">\r\n            <span>{{\'StartOrder\' | translate}}</span>\r\n            \r\n        </button>\r\n        <button class="viewAction viewMenuAction restaurantDisplayViewMenuAction" ng-if="restaurant.show_menu" ng-click="viewMenu(restaurant, menu)" ng-repeat="menu in restaurant.fulfillment_infos">\r\n            <span>{{menu.menu_type + \'Menu\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/restaurant/restaurant.hours.html",'<div class="restaurantHours">\r\n\t<div class="open24HoursContainer" ng-if="!restaurant.business_hours.length">\r\n\t\t<p class="open24Hours">{{\'Open24Hours\' | translate}}</p>\r\n\t</div>\r\n\r\n\t<div ng-if="restaurant.business_hours.length">\r\n\t\t<div class="dayHours" ng-repeat="d in restaurant.business_hours">\r\n\t\t\t<span class="short" ng-if="d.start_day == d.end_day">\r\n\t\t\t\t<span class="day">{{d.start_day}}</span>\r\n\t\t\t\t<span class="time">\r\n\t\t\t\t\t<span class="startTime">{{d.start_time | date: \'h:mma\' | lowercase}}</span>\r\n\t\t\t\t\t<span class="dash"> &horbar; </span>\r\n\t\t\t\t\t<span class="endTime">{{d.end_time | date: \'h:mma\' | lowercase}}</span>\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t\t<span class="long" ng-if="d.start_day != d.end_day">\r\n                <p>limit 3</p>\r\n\t\t\t\t<span class="day">{{d.start_day | limitTo:3}}</span>\r\n\t\t\t\t<span class="time">{{d.start_time | date: \'h:mma\' | lowercase}}</span>\r\n\t\t\t\t<span class="dash"> &horbar; </span>\r\n\t\t\t\t<span class="day">{{d.end_day | limitTo:3}}</span>\r\n\t\t\t\t<span class="time">{{d.end_time | date: \'h:mma\' | lowercase}}</span>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/restaurant/restaurantSearch.findBy.multipleFields.html",'<div class="restaurantSearchFindByMultipleFields">\r\n    <div class="actionsContainer restaurantSearchActionsContainer nearbyLocationsActionsContainer" ng-if="displaySize.isMobile">\r\n        <button class="searchAction restaurantSearchAction nearbyLocationsSearchAction" aria-label="{{\'SearchNearby\' | translate}}" ng-click="getByLocation()">\r\n            <span class="visuallyHidden">{{\'SearchNearby\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n\r\n    <div class="restaurantSearchFindByZipCodeContainer" ng-include="\'/web/app/restaurant/restaurantSearch.findByZipCode.html\'"></div>\r\n\r\n    <div class="restaurantSearchFindByCityContainer" ng-include="\'/web/app/restaurant/restaurantSearch.findByCity.html\'"></div>\r\n</div>'),$templateCache.put("/web/app/restaurant/restaurantSearch.findBy.singleField.html",'<div class="form restaurantSearchForm restaurantSearchFindBySingleSearchField" ng-form="searchForm" ng-if="!googleLocationSearch">\r\n    <div class="errorContainer formErrorContainer restaurantSearchFormErrorContainer findBySingleSearchFieldFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n    <div class="formElements restaurantSearchFormElements findBySingleSearchFieldFormElements">\r\n        <div class="inputContainer textInputContainer singleSearchFieldInputContainer" ng-class="{autoComplete: uiAutocomplete}">\r\n            <label for="restaurant_search_single_field_search_text" class="inputText bringToFront">{{\'ZipOrCityState\' | translate}} (Required)</label>\r\n            <span class="input textInput singleSearchFieldInput">\r\n                <input name="searchText" floating-label id="restaurant_search_single_field_search_text" type="search" ng-model="search.text" ui-autocomplete="uiAutocomplete" allow-pattern="([0-9]|[A-Z]|[-,. ])" maxlength="255" tabindex="0" required>\r\n            </span>\r\n        </div>\r\n        <span class="actionsContainer singleSearchFieldGeolocateActionsContainer">\r\n\r\n            <button type="button" class="nearbyLocationsSearchAction singleSearchFieldNearbyAction" aria-label="{{\'SearchNearby\' | translate}}" ng-click="getByLocation()">\r\n                <span class="visuallyHidden">{{\'SearchNearby\' | translate}}</span>\r\n            </button>\r\n        </span>\r\n    </div>\r\n\r\n    <div class="actionsContainer formActionsContainer restaurantSearchFormActionsContainer findBySingleSearchFieldFormActionsContainer">\r\n        <button class="searchAction singleSearchFieldSearchAction trk-restaurantsearchsinglesearchfield" type="button" ng-click="searchForm.$submit()">\r\n            <span>{{\'Search\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<div location-search-2 ng-if="googleLocationSearch"></div>'),$templateCache.put("/web/app/restaurant/restaurantSearch.findByAddress.html",'<div class="form restaurantSearchForm restaurantSearchFindByZipCode" ng-form="addressSearchForm">\r\n    <div class="errorContainer formErrorContainer restaurantSearchFormErrorContainer findByZipCodeFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n\t<div class="formElements restaurantSearchFormElements findByZipCodeFormElements">\r\n\t\t<label class="inputContainer selectContainer countryInputContainer" ng-if="countries.length > 1">\r\n\t\t\t<span class="input select countryInput">\r\n\t\t\t\t<select name="country" tabindex="0" ng-options="country.Key for country in countries" ng-model="zipSearch.country" required>\r\n\t\t\t\t\t<option value="country.name">{{country.Key}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</span>\r\n\t\t</label>\r\n\r\n\t\t<span ng-if="countries.length == 1" ng-hide="true">\r\n\t\t\t<input type="hidden" name="country" ng-model="zipSearch.country" required>\r\n\t\t</span>\r\n\t\t<div class="inputContainer textInputContainer addressInputContainer">\r\n\t\t\t<label for="addressSearchBy" class="inputText">{{\'Address\' | translate}}</label>\r\n\t\t\t<span class="input textInput addressInput">\r\n                <input name="address" floating-label ng-attr-type="{{(countries.length == 1 && countries[0].Key == \'US\') ? \'tel\' : \'text\'}}" ng-model="zipSearch.address" tabindex="0" id="addressSearchBy" required>\r\n                <img src="/web/app/_assets/images/arrow.png" alt="Use My Location" ng-click="getByLocation()" class="arrow" tabindex="0">\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="actionsContainer formActionsContainer restaurantSearchFormActionsContainer findByZipCodeFormActionsContainer">\r\n        <button class="searchAction findByZipCodeSearchAction trk-restaurantsearchbyzip" type="submit" ng-click="getByAddress();">\r\n            <span>{{\'Search\' | translate}}</span>\r\n        </button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/restaurant/restaurantSearch.findByCity.html",'<div class="form restaurantSearchForm restaurantSearchFindByCity" ng-form="citySearchForm">\r\n    <div class="errorContainer formErrorContainer restaurantSearchFormErrorContainer findByCityFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n    <div class="formElements restaurantSearchFormElements findByCityFormElements">\r\n        <div class="inputContainer selectContainer countrySelectContainer" ng-if="countries.length > 1" role="combobox" aria-labelledby="find_by_city_option_country_{{$index}}">\r\n            <label for="option_country" id="find_by_city_option_country_{{$index}}">\r\n                <span class="inputText">{{\'Country\' | translate}}</span>\r\n            </label>\r\n            <span class="input select countrySelect">\r\n                <select name="country" id="option_country" tabindex="0" ng-options="country.Key for country in countries" ng-model="citySearch.country" required>\r\n                    <option value="country.name">{{country.Key}}</option>\r\n                </select>\r\n            </span>\r\n            <span ng-if="countries.length == 1" ng-hide="true">\r\n                <input type="hidden" name="country" ng-model="citySearch.country" required>\r\n            </span>\r\n        </div>\r\n\r\n        <div class="inputContainer selectContainer stateSelectContainer" ng-class="{disabled: !citySearch.country}" role="combobox" aria-labelledby="find_by_city_input_state_{{$index}}">\r\n            <label for="input_state" id="find_by_city_input_state_{{$index}}">\r\n                <span class="inputText">{{\'State\' | translate}}</span>\r\n            </label>\r\n            <span class="input select stateInputSelect">\r\n                <select name="state" tabindex="0" id="input_state" ng-disabled="!citySearch.country" ng-options="state.name for state in states" ng-model="citySearch.state" required>\r\n                    <option value="state.name">{{state.name}}</option>\r\n                </select>\r\n            </span>\r\n        </div>\r\n\r\n        <div class="inputContainer selectContainer citySelectContainer" ng-class="{disabled: !citySearch.state}" role="combobox" aria-labelledby="find_by_city_option_city_{{$index}}">\r\n            <label for="option_city" id="find_by_city_option_city_{{$index}}">\r\n                <span class="inputText">{{\'City\' | translate}}</span>\r\n            </label>\r\n            <span class="input select citySelect">\r\n                <select name="city" tabindex="0" id="option_city" ng-disabled="!citySearch.state" ng-options="city.name for city in cities" ng-model="citySearch.city" required>\r\n                    <option value="city.name">{{city.name}}</option>\r\n                </select>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="actionsContainer formActionsContainer restaurantSearchFormActionsContainer findByCityFormActionsContainer">\r\n        <button class="searchAction findByCitySearchAction trk-restaurantsearchbycity" type="button" ng-click="citySearchForm.$submit()">\r\n            <span>{{\'Search\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/restaurant/restaurantSearch.findByZipCode.html",'<div class="form restaurantSearchForm restaurantSearchFindByZipCode" ng-form="zipSearchForm">\r\n    <div class="errorContainer formErrorContainer restaurantSearchFormErrorContainer findByZipCodeFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n    <div class="formElements restaurantSearchFormElements findByZipCodeFormElements">\r\n        <label class="inputContainer selectContainer countrySelectContainer" ng-if="countries.length > 1">\r\n            <span class="input select countrySelect">\r\n                <select name="country" tabindex="0" ng-options="country.Key for country in countries" ng-model="zipSearch.country" required>\r\n                    <option value="country.name">{{country.Key}}</option>\r\n                </select>\r\n            </span>\r\n        </label>\r\n\r\n        <span ng-if="countries.length == 1" ng-hide="true">\r\n            <input type="hidden" name="country" ng-model="zipSearch.country" required>\r\n        </span>\r\n        <div class="inputContainer textInputContainer zipCodeInputContainer">\r\n            <label for="input_zip_code_{{$id}}">\r\n                <span class="inputText">{{\'ZipCode\' | translate}}</span>\r\n            </label>\r\n            <span class="input textInput zipCodeInput">\r\n                <input name="zip_code" id="input_zip_code_{{$id}}" ng-attr-type="{{(countries.length == 1 && countries[0].Key == \'US\') ? \'tel\' : \'text\'}}" ng-model="zipSearch.zip_code" tabindex="0" validate-pattern="{{zipCodeValidation}}" maxlength="{{zipCodeLength}}" required>\r\n            </span>\r\n        </div>\r\n        <div class="inputContainer selectContainer zipCodeRangeSelectContainer" role="combobox" aria-labelledby="option_search_distance_label_{{$id}}">\r\n            <label for="option_search_distance_{{$id}}" id="option_search_distance_label_{{$id}}">\r\n                <span class="inputText">{{\'Range\' | translate}} <small>(mi)</small></span>\r\n            </label>\r\n            <span class="input select zipCodeRangeSelect">\r\n                <select name="search_distance" id="option_search_distance_{{$id}}" ng-model="zipSearch.search_distance" ng-options="distance.value for distance in distances" required></select>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="actionsContainer formActionsContainer restaurantSearchFormActionsContainer findByZipCodeFormActionsContainer">\r\n        <button class="searchAction findByZipCodeSearchAction trk-restaurantsearchbyzip" type="button" ng-click="zipSearchForm.$submit()">\r\n            <span>{{\'Search\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/restaurant/restaurantSearch.html",'<div class="restaurantSearch" ui-view>\r\n    <div class="restaurantSearchContent locationSearchContainer">\r\n        <div class="titleContainer restaurantSearchTitleContainer locationSearchTitleContainer">\r\n            <h2 class="title restaurantSearchTitle locationSearchTitle">{{\'FindLocation\' | translate}}</h2>\r\n        </div>\r\n        <div class="locationContent locationSearchContent" ng-include="\'/web/app/restaurant/restaurantSearch.findBy.multipleFields.html\'"></div>\r\n    </div>\r\n\r\n    <div class="restaurantSearchContent favoriteLocationsContainer" ng-show="loggedIn && (favorites.length > 0) && (!restaurants.length > 0)">\r\n        <div class="titleContainer restaurantSearchTitleContainer favoriteLocationsTitleContainer">\r\n            <h2 class="title restaurantSearchTitle favoriteLocationsTitle">{{\'FavoriteLocations\' | translate}}</h2>\r\n        </div>\r\n\r\n        <div class="locationContent favoriteLocationsContent">\r\n            <ul class="locationList favoriteLocationsList">\r\n                <li class="locationListItem favoriteLocationsListItem" ng-repeat="restaurant in favorites">\r\n                    <div class="locationContainer favoriteLocationsLocationContainer" ng-include="\'/web/app/restaurant/restaurant.display.html\'"></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="restaurantSearchContent recentLocationsContainer" ng-show="loggedIn && (recent.length > 0) && (!restaurants.length > 0)">\r\n        <div class="titleContainer restaurantSearchTitleContainer recentLocationsTitleContainer">\r\n            <h2 class="title restaurantSearchTitle recentLocationsTitle">{{\'RecentLocations\' | translate}}</h2>\r\n        </div>\r\n\r\n        <div class="locationContent recentLocationsContent">\r\n            <ul class="locationList recentLocationsList">\r\n                <li class="locationListItem recentLocationsListItem" ng-repeat="restaurant in recent">\r\n                    <div class="locationContainer recentLocationsLocationContainer" ng-include="\'/web/app/restaurant/restaurant.display.html\'"></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/restaurant/restaurantSearchResults.html",'<div class="restaurantSearchResults">\r\n        <div class="titleContainer restaurantSearchResultsTitleContainer">\r\n            <div class="homeTitle">\r\n                <h1 class="title homeTitle">{{title | translate}}</h1>\r\n            </div>\r\n        </div>\r\n    <div class="restaurant-search-results-container" ng-if="featureFlags.layout.header" ng-include="\'/web/app/restaurant/restaurantSearch.findBy.singleField.html\'"></div>\r\n    <div class="restaurantSearchResultsText" ng-if="!featureFlags.layout.header">\r\n        <div class="actionsContainer restaurantSearchResultsActionsContainer">\r\n            <button class="searchAction restaurantSearchResultsSearchAction trk-restaurantsearchagain" ui-sref="restaurantSearch">\r\n                <span>{{\'SearchAgain\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="contentContainer restaurantSearchResultsContentContainer">\r\n        <div class="locationSearchResultsContent locationSearchNoResultsContainer" ng-if="restaurants.length == 0">\r\n            <p class="message locationSearchNoResultsMessage">{{\'NoRestaurantSearchResults\' | translate}}</p>\r\n        </div>\r\n        <div class="locationSearchResultsContent" ng-if="restaurants.length > 0">\r\n            <ul class="locationList restaurantSearchLocationList">\r\n                <li class="locationListItem restaurantSearchLocationListItem" ng-repeat="restaurant in restaurants">\r\n                    <div class="locationContainer restaurantSearchResultsLocationContainer" ng-include="\'/web/app/restaurant/restaurant.display.html\'"></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/orderSetup.html",'<div class="orderSetup" ng-form="orderSetupForm" ng-submit="createOrder()">\r\n    <div class="titleContainer orderSetupTitleContainer">\r\n        <h1 class="title orderSetupTitle">{{orderSetup.fulfillmentType == \'Delivery\' ? \'OrderSetup_Title_Delivery\' : \'OrderSetup_Title\' | translate}}</h1>\r\n    </div>\r\n\r\n    <div class="orderSetupContentContainer">\r\n        <div class="descriptionContainer orderSetupDescriptionContainer">\r\n            <p class="description orderSetupDescription" ng-bind-html="orderSetup.fulfillmentType == \'Delivery\' ? \'OrderSetup_Description_Delivery\' : \'OrderSetup_Description\' | translate"></p>\r\n        </div>\r\n\r\n        <div class="errorContainer formErrorContainer orderSetupFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="osStep osMenuTypeContainer" ng-if="show(\'menuTypes\')" ui-view="osMenuType"></div>\r\n\r\n        <div class="osStep osFulfillmentTypeContainer" ng-if="show(\'fulfillmentTypes\') && featureFlags.displayFulfillmentType" ui-view="osFulfillmentType"></div>\r\n\r\n        <div class="osStep osDeliveryAddressContainer" ng-if="show(\'address\') && !displaySavedDeliveryAddress" ui-view="osDeliveryAddress"></div>\r\n\r\n        <div class="osStep osFulfillmentDateTypeContainer" ng-if="show(\'fulfillmentDateType\')" ui-view="osFulfillmentDateType"></div>\r\n\r\n        <div class="osStep osFulfillmentDateContainer" ng-if="show(\'fulfillmentDate\')" ui-view="osFulfillmentDate"></div>\r\n\r\n        <div class="osStep" ng-if="show(\'fulfillmentDateType\') || show(\'fulfillmentDate\')">\r\n            <div class="messageContainer osFulfillmentDateMessageContainer" ng-include="\'/web/app/orderSetup/os.fulfillmentDateMessage.html\'" ng-if="show(\'fulfillmentDateType\')"></div>\r\n\r\n            <div class="osFulfillmentLocationContainer" ng-include="\'/web/app/orderSetup/os.fulfillmentLocation.html\'" ng-if="show(\'fulfillmentLocation\')"></div>\r\n\r\n            <div class="osActionsContainer" ng-include="\'/web/app/orderSetup/os.actions.html\'"></div>\r\n        </div>\r\n\r\n        <div class="osStep osLocationDisplayContainer" ui-view="osLocationDisplay"></div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.actions.html",'<div class="actionsContainer orderSetupActionsContainer">\r\n    <button type="submit" class="continueAction orderSetupContinueAction" name="orderSetupSubmit" class="trk-startorder" ng-disabled="orderSetupForm.$invalid || !show(\'submit\')" ng-click="orderSetupForm.$submit()">\r\n        <span>{{\'Continue\' | translate}}</span>\r\n    </button>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.deliveryAddress.html",'<div class="form osDeliveryAddress" ng-form="addressForm" ng-submit="saveDeliveryAddress()">\r\n    <div class="titleContainer formTitleContainer osDeliveryAddressTitleContainer">\r\n        <h3 class="title formTitle osDeliveryAddressTitle">{{\'WhereToDelivery\' | translate}}</h3>\r\n    </div>\r\n\r\n    <div class="errorContainer formErrorContainer osDeliveryAddressFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n    <div class="errorContainer formErrorContainer osDeliveryAddressFormErrorContainer" ng-if="!deliveryHoursAvailableForThisLocation">{{\'Store_Hours_Unavailable_Delivery\' | translate}}</div>\r\n\r\n    <div class="contentContainer osDeliveryAddressContentContainer">\r\n        <div class="osContent osDeliveryAddressContent" ng-show="show(\'addressList\')">\r\n            <div class="osContentInner">\r\n                <ul class="addressList osDeliveryAddressList" ng-class="{invalid: orderSetupForm.addressForm.$invalid}">\r\n                    <li class="osDeliveryAddressListItem" ng-repeat="address in values.addresses track by address.id">\r\n                        <div class="formElements osDeliveryAddresFormElements">\r\n                            <div class="inputContainer radioContainer addressInputContainer" ng-class="{active: orderSetup.address.id == address.id}">\r\n                                <label for="order_addresses_{{$id}}">\r\n                                    <span class="inputText addressContainer" ng-class="{selected: orderSetup.address.id == address.id}" ng-include="\'/web/app/address/address.display.html\'"></span>\r\n                                </label>\r\n                                <span class="input radio addressInput">\r\n                                    <input type="radio" id="order_addresses_{{$id}}" name="address" ng-model="$parent.orderSetup.address" ng-value="address" aria-label="{{orderSetup.address}}" highlight-parent-on-focus>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="actionsContainer listItemActionsContainer osDeliveryAddressListItemActionsContainer">\r\n                            <button class="editAction osDeliveryAddressListItemEditAction" ng-click="editAddress(address.id)" type="button" aria-label="{{\'Edit\' | translate}} - {{orderSetup.address.address1}}">\r\n                                <span>{{\'Edit\' | translate}}</span>\r\n                            </button>\r\n                            <button class="deleteAction osDeliveryAddressListItemDeleteAction" ono-confirm="removeAddress(address)" ono-confirm-title="{{\'RemoveAddress_ConfirmTitle\' | translate}}" ono-confirm-message="{{\'RemoveAddress_ConfirmMessage\' | translate}}" type="button" ng-show="loggedIn" aria-label="{{\'Delete\' | translate}} - {{orderSetup.address.address1}}">\r\n                                <span>{{\'Delete\' | translate}}</span>\r\n                            </button>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="actionsContainer osDeliveryAddressActionsContainer" ng-show="loggedIn && values.addresses.length">\r\n                <button class="newAction osDeliveryAddressNewAction" ng-click="editAddress(\'new\')" type="button">\r\n                    <span>{{\'NewAddress\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class="osContent osDeliveryAddressEditContent" ng-if="show(\'addressEdit\')">\r\n            <div address-auto-complete-2 disable-save="addressForm.$invalid" values="values" address="address" show-cancel="show(\'addressCancel\')" on-cancel="cancelEdit()" on-save="saveDeliveryAddress()">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentDate.html",'<div class="osFulfillmentDate" ng-class="{futureOrderWarning: futureOrderWarning}">\r\n    <div class="titleContainer osFulfillmentDateTypeTitleContainer">\r\n        <h2 class="title osFulfillmentDateTypeTitle">{{\'PickDate\' | translate}}</h2>\r\n    </div>\r\n   \r\n    <div class="formElements osFulfillmentDateFormElements" ng-class="{active: orderSetup.fulfillmentDate }">     \r\n        <div ng-if="orderSetup.fulfillmentType != \'Delivery\'" class="inputContainer textInputContainer fulfillmentDateInputContainer">\r\n            \r\n            <label for="fulfillment_date" class="inputText">{{\'Fulfillment_Date\' | translate}} (Required) </label>\r\n            <span class="input textInput fulfillmentTimeInput">\r\n                <input type="text" floating-label id="fulfillment_date" name="fulfillmentDate" class="needsclick" readonly="readonly" ui-date="dateOptions" ui-date-display-format="{{dateDisplayFormat}}" ui-date-parse-format="{{dateParseFormat}}" ui-date-language="{{localeLang}}" ng-model="orderSetup.fulfillmentDate">                \r\n                \r\n            </span>\r\n            <div class="datepickerIcon">\r\n                <span class="actionsContainer addToCalender">\r\n                    <button type="button" class="addToCalenderSearchField" id="datepicker_button" aria-label="{{\'PickDate\' | translate}}">\r\n                    </button>\r\n                </span>\r\n            </div>\r\n            \r\n                <span class="datepickerContainer"></span>\r\n            \r\n        </div>\r\n        <div class="inputContainer selectContainer fulfillmentTimeSelectContainer">\r\n            <label for="fulfillment_time" class="inputText">{{\'Fulfillment_Time\' | translate}} (Required)</label>\r\n            <span class="input select fulfillmentTimeSelect">\r\n                <select ng-model="orderSetup.fulfillmentTime" ng-change="fulfillmentTimeChanged()" id="fulfillment_time" name="fulfillment_time" ng-options="time as time.format(\'LT\') for time in values.fulfillmentTimes">\r\n                </select>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="messageContainer osFutureOrderWarningMessageContainer" ng-if="futureOrderWarning">\r\n        <p class="message osFutureOrderWarningMessage">{{\'FutureOrderMessage\' | translate}}</p>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentDateMessage.html",'<div fulfillment-time-2 ng-if="orderSetup.fulfillmentDateType == \'ASAP\'" class="message fulfillmentDateMessage" fulfillment-type="orderSetup.fulfillmentType" fulfillment-date-type="orderSetup.fulfillmentDateType" show-actual-time="false" service-time="{ serviceTimeRangeLower : orderSetup.serviceTimeRangeLower, serviceTimeRangeUpper : orderSetup.serviceTimeRangeUpper, leadTime : orderSetup.leadTime } " date-placed="" date-expected="model.cart.order_setup.fulfillment_date"></div>\r\n'),$templateCache.put("/web/app/orderSetup/os.fulfillmentDateType.display.html",'<div class="inputContainer radioContainer osFulfillmentDateTypeInputContainer" name="fulfillmentDateType" ng-click="changefulfillmentDateType(fulfillmentDateType)" ng-class="{active: orderSetup.fulfillmentDateType == fulfillmentDateType}">\r\n    <label for="fullfillment_date_type_{{$id}}" class="fulfillmentDateTypeLabel">\r\n        <span class="inputText" ng-class="{selected: orderSetup.fulfillmentDateType == fulfillmentDateType}">\r\n            {{fulfillmentDateType | translate}}\r\n        </span>\r\n    </label>\r\n    <span class="input radio osFulfillmentDateTypeInput">\r\n        <input type="radio" name="fulfillmentDateType" ng-value="fulfillmentDateType" id="fullfillment_date_type_{{$id}}" ng-model="orderSetup.fulfillmentDateType" highlight-parent-on-focus>\r\n    </span>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentDateType.display.message.html",'<div class="inputContainer radioContainer osFulfillmentDateTypeInputContainer" ng-class="{active: orderSetup.fulfillmentDateType == fulfillmentDateType}">\r\n    <label for="fulfillment_date_type_message_{{$id}}">\r\n        <span class="inputText" ng-class="{selected: orderSetup.fulfillmentDateType == fulfillmentDateType}">{{fulfillmentDateType | translate}}</span>\r\n    </label>\r\n    <span class="input radio osFulfillmentDateTypeInput">\r\n        <input type="radio" name="fulfillmentDateType" ng-value="fulfillmentDateType" id="fulfillment_date_type_message_{{$id}}" ng-model="orderSetup.fulfillmentDateType" highlight-parent-on-focus>\r\n    </span>\r\n</div>\r\n\r\n<div class="osFulfillmentDateTypeMessageContainer" ng-class="{active: orderSetup.fulfillmentDateType == fulfillmentDateType}">\r\n\r\n    <div class="fulfillmentTypeASAP" ng-if="fulfillmentDateType == \'ASAP\'">\r\n        <span ng-bind-html="\'OrderSetup_ASAP_Message\' | translate:orderSetup.leadTime"></span>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentDateType.html",'<div class="osFulfillmentDateType" role="radiogroup" aria-labelledby="osFulfillmentDateTypeTitle">\r\n\t<div class="titleContainer osFulfillmentDateTypeTitleContainer" id="osFulfillmentDateTypeTitle">\r\n\t\t<h2 class="title osFulfillmentDateTypeTitle">{{\'PickTime\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="osFulfillmentDateTypeContent">\r\n\t\t<ul class="osFulfillmentDateTypeList">\r\n\t\t\t<li class="osFulfillmentDateTypeListItem" ng-repeat="fulfillmentDateType in values.fulfillmentDateTypes" ng-include="\'/web/app/orderSetup/os.fulfillmentDateType.display.html\'"></li>\r\n\t\t</ul>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentLocation.html",'<div class="osFulfillmentLocation">\r\n\t<div class="titleContainer osFulfillmentDateTypeTitleContainer">\r\n\t\t<h2 class="title osFulfillmentDateTypeTitle">{{\'PickLocation\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer osFulfillmentLocationContentContainer">\r\n\t\t<div class="addressContainer osFulfillmentLocationAddressContainer">\r\n\t\t\t<span class="address">\r\n\t\t\t\t<span class="address1">{{model.cart.restaurant.address.address1}}</span>\r\n\t\t\t\t<span class="city state zip">{{model.cart.restaurant.address.city}}, {{model.cart.restaurant.address.state}} {{model.cart.restaurant.address.zip}}</span>\r\n\t\t\t\t<span class="phoneContainer">\r\n\t\t\t\t\t<span class="phone" ng-if="!displaySize.isMobile">{{model.cart.restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t<a ng-href="tel:{{model.cart.restaurant.address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n\t\t\t\t\t\t<span>{{model.cart.restaurant.address.phone | phone}}</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\r\n\t\t<div class="actionsContainer osFulfillmentLocationActionsContainer">\r\n\t\t\t<a class="changeAction changeLocationAction osFulfillmentLocationChangeLocationAction" ui-sref="restaurantSearch" ng-if="model.cart.restaurant">\r\n\t\t\t\t<span>{{\'ChangeLocation\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t\t<a class="selectAction selectLocationAction osFulfillmentLocationSelectLocationAction" ui-sref="restaurantSearch" ng-if="!model.cart.restaurant">\r\n\t\t\t\t<span>{{\'SelectLocation\' | translate}}</span>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentType.display.html",'<div class="inputContainer radioContainer osFulfillmentTypeInputContainer" ng-class="{active: orderSetup.fulfillmentType == fulfillmentType}">\r\n\r\n    <label for="fulfilment_type_display_radio_{{$id}}">\r\n        <span class="inputText" ng-class="{selected: orderSetup.fulfillmentType == fulfillmentType}">\r\n            {{fulfillmentType | translate}}\r\n        </span>\r\n    </label>\r\n\r\n    <span class="input radio osFulfillmentTypeInput">\r\n        <input type="radio" name="fulfillmentType" id="fulfilment_type_display_radio_{{$id}}" ng-value="fulfillmentType" ng-model="orderSetup.fulfillmentType" highlight-parent-on-focus>\r\n    </span>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.fulfillmentType.html",'<div class="osFulfillmentType" role="radiogroup" aria-labelledby="osFulfillmentTypeTitle">\r\n\t<div class="titleContainer osFulfillmentTypeTitleContainer" id="osFulfillmentTypeTitle">\r\n\t\t<h2 class="title osFulfillmentTypeTitle">{{\'ChooseFulfillmentType\' | translate}}</h2>\r\n\t</div>\r\n\r\n\t<div class="contentContainer osFulfillmentTypeContentContainer">\r\n\t\t<div class="errorContainer osFulfillmentTypeErrorContainer" ng-if="restaurant != null && restaurant != \'undefined\' && !restaurant.taking_orders">\r\n\t\t\t<p class="errorMessage error">\r\n\t\t\t\t{{\'restaurant_NotTakingOrders\' | translate}}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\r\n\t\t<div class="osFulfillmentTypeContent">\r\n\t\t\t<ul class="osFulfillmentTypeList">\r\n                <li class="osFulfillmentTypeListItem fulfillmentType{{fulfillmentType}}" ng-repeat="fulfillmentType in values.fulfillmentTypes" ng-include="\'/web/app/orderSetup/os.fulfillmentType.display.html\'">\r\n                </li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.locationDisplay.html",'<div class="osLocationDisplay">\r\n    <div class="titleContainer osLocationDisplayTitleContainer">\r\n        <h2 class="title osLocationDisplayTitle">{{restaurant.name}}</h2>       \r\n    </div>\r\n\r\n    <div class="contentContainer osLocationDisplayContentContainer">\r\n        <div class="osLocationInfoContainer">\r\n            <div class="titleContainer osLocationAddressTitleContainer">\r\n                <h3 class="title osLocationAddressTitle">Address</h3>\r\n            </div>\r\n            <div class="osLocationInfo">\r\n                <span class="address">\r\n                    <span class="name" ng-if="restaurant.address.first_name || restaurant.address.last_name">{{restaurant.address.first_name}} {{restaurant.address.last_name}}</span>\r\n                    <span class="name" ng-if="restaurant.address.name">{{restaurant.address.name}}</span>\r\n                    <span class="company" ng-if="restaurant.address.company">{{restaurant.address.company}}</span>\r\n                    <span class="address1">{{restaurant.address.address1}}</span>\r\n                    <span class="address2" ng-if="restaurant.address.address2">{{restaurant.address.address2}}</span>\r\n                    <span class="city state zip">{{restaurant.address.city}}, {{restaurant.address.state}} {{restaurant.address.zip_code}}</span>\r\n                    <span class="phoneContainer">\r\n                        <span class="phone" ng-if="!displaySize.isMobile">{{restaurant.address.phone | phone}}</span>\r\n                        <a ng-href="tel:{{restaurant.address.phone}}" class="phone" ng-if="displaySize.isMobile">\r\n                            <span>{{restaurant.address.phone | phone}}</span>\r\n                        </a>\r\n                    </span>\r\n                    <span class="fax" ng-if="restaurant.address.fax">{{\'Fax\' | translate}} {{restaurant.address.fax | phone}}</span>\r\n                </span>\r\n            </div>\r\n            <div ng-if="model.cart.restaurant.isPickUpOnly">\r\n                <strong>\r\n                    {{\'PickUp_Only\'|translate}}\r\n                </strong>\r\n            </div>\r\n            <div class="actionsContainer osLocationDisplayActionContainer">\r\n                <button class="restaurantSearchAction osLocationDisplayRestaurantSearchAction trk-ordersetuprestaurantsearch" ng-click="changeLocation()">\r\n                    <span>{{\'SearchForLocation\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.menuType.html",'<div class="osMenuType">\r\n    <div class="titleContainer osMenuTypeTitleContainer">\r\n        <h2 class="title osMenuTypeTitle">{{\'ChooseMenu\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="osMenuTypeContent">\r\n        <ul class="osMenuTypeList">\r\n            <li class="osMenuTypeListItem" ng-repeat="menuType in values.menuTypes">\r\n                <div class="inputContainer radioContainer osMenuTypeInputContainer" ng-class="{active: orderSetup.menuType == menuType}">\r\n                    <label for="fulfillment_{{$index}}">\r\n                        <span class="inputText" ng-class="{selected: orderSetup.menuType == menuType}">\r\n                            {{menuType | translate}}\r\n                        </span>\r\n                    </label>\r\n                    <span class="input radio osMenuTypeInput">\r\n                        <input type="radio" name="fulfillment" ng-value="menuType" ng-model="orderSetup.menuType" id="fulfillment_{{$index}}">\r\n                    </span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.previousSavedOrders.html",'<div class="osPreviousSavedOrders">\r\n\t<div class="titleContainer osPreviousSavedOrdersTitleContainer">\r\n\t\t<h2 class="title osPreviousSavedOrdersTitle">{{\'PreviousSavedOrdersTitle\' | translate}}</h2>\r\n\t</div>\r\n\t<div class="actionsConatiner osPreviousSavedOrdersActionsContainer">\r\n\t\t<button class="goAction osPreviousSavedOrdersGoAction" ui-sref="orderHistory">\r\n\t\t\t<span>{{\'Nav_PreviousSavedOrders\' | translate}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/orderSetup/os.vehicleInfo.html",'<div class="osStep osVehicleInfo">\r\n    <div class="titleContainer osVehicleInfoTitleContainer">\r\n        <h2 class="title osVehicleInfoTitle">{{\'VehicleDetails\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer osVehicleInfoContentContainer">\r\n        <div class="inputContainer selectContainer carTypeSelectContainer">\r\n            <label for="option_carTypes">\r\n                <span class="inputText">{{\'CarTypeText\' | translate}}</span>\r\n            </label>\r\n            <span class="input select carTypeSelect">\r\n                <select ng-model="carType" ng-options="option for option in values.carTypes" id="option_carTypes"></select>\r\n            </span>\r\n        </div>\r\n\r\n        <div class="inputContainer selectContainer carColorSelectContainer" role="combobox">\r\n            <label for="option_carColors">\r\n                <span class="inputText">{{\'CarColorText\' | translate}}</span>\r\n            </label>\r\n            <span class="input select carColorSelect">\r\n                <select ng-model="carColor" ng-options="option for option in values.carColors" id="option_carColors"></select>\r\n            </span>\r\n        </div>\r\n\r\n        <div class="inputContainer textInputContainer vehicleInfoPhoneInputContainer">\r\n            <label for="vehicleInfoPhone">\r\n                <span class="inputText">{{\'VehicleInfoPhoneText\' | translate}}</span>\r\n            </label>\r\n            <span class="input textInput vehicleInfoPhoneInput">\r\n                <input type="tel" name="phone" ng-model="orderSetup.phone" numbers-only telephone-number mask="{{phoneMask}}" id="vehicleInfoPhone">{{\'PhoneNumber\' | translate}}\r\n            </span>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/template/backdrop.html",'<div class="overlay modal-backdrop fade {{ backdropClass }}" ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"></div>'),$templateCache.put("/web/app/template/window.html",'<div tabindex="-1" role="region" class="modalContainer modal fade" ng-style="{\'z-index\': 1050 + index*10, display \'block\'}" ng-click="close($event)">\r\n\t<div class="dialog modal-dialog">\r\n\t\t<div class="modal-content" modal-transclude></div>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/_directives/downloadMenu.dialog.html",'<div class="menuDownloadContainer">\r\n\r\n    <div class="selectContainer">\r\n        <ul class="list-unstyled">\r\n            <li ng-repeat="menu in menus track by $index">\r\n                <a href="javascript:void(0)" ng-click="openPreview(menu)" title="Click to download the {{menu.Name}}">{{menu.Name}}</a>\r\n            </li>\r\n        </ul> \r\n    </div>\r\n\r\n</div>'),$templateCache.put("/web/app/_directives/downloadMenu.html",'\r\n<button class="showMenuPdfOptions" role="link" aria-label="Download Menu" ng-if="buttonstyle === \'button\'" ng-click="openDownloadMenuModal()">\r\n    Download Menu\r\n</button>\r\n\r\n<a href="#openDownloadMenu" tabindex="0" prevent-redirect class="showMenuPdfOptions" ng-if="buttonstyle === \'link\'" ng-click="openDownloadMenuModal()">\r\n    Download Menu\r\n</a>'),$templateCache.put("/web/app/_directives/onoSelect.payment.html",'<label class="actionListBtn onoSelectActionListBtn" for="ono_select_payment_{{$id}}" ng-click="open($event)" ng-class="{active: show}">{{title}}</label>\r\n<div class="actionListContainer onoSelectActionListContainer" ng-if="show || displaySize.isMobile">\r\n    <ul id="ono_select_payment_{{$id}}" class="actionList" ng-repeat="list in options" ng-if="list.length" role="list">\r\n        <li class="actionListItem" ng-repeat="item in list">\r\n            <a ui-sref="CreditCard({id: item.id})" tabindex="0" role="listitem" ui-sref-opts="{location: false}" ng-if="item.card_number && item.type == \'CreditCard\'">\r\n                <span>{{item.card_type}} ending in {{item.card_number | limitTo:-4}}</span>\r\n            </a>\r\n            <a ui-sref="GiftCard({id: item.id})" tabindex="0" role="listitem" ui-sref-opts="{location: false}" ng-if="item.card_number && item.type == \'GiftCard\'">\r\n                <span>Gift card ending in {{item.card_number | limitTo:-4}}</span>\r\n            </a>\r\n            <a ui-sref="{{item}}" tabindex="0" role="listitem" ui-sref-opts="{location: false}" ng-if="!item.card_number && !(item == \'POD\' && model.cart.order_setup.fulfillment_type == \'Delivery\')">\r\n                <span>{{\'PaymentType_\' + item | translate}}</span>\r\n\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>'),$templateCache.put("/web/desktop/cart/endOfOrderItems.complimentary.html",'<div class="form eooiComplimentaryForm" ng-form="complimentaryForm">\r\n    <div class="titleContainer formTitleContainer eooiComplimentaryFormTitleContainer">\r\n        <h2 class="title formTitle complimentaryFormTitle">{{\'ComplimentaryItemsLabel\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="contentContainer eooiComplimentaryContentContainer">\r\n        <div class="errorContainer formErrorContainer eooiComplimentaryFormErrorContainer" ng-if="complimentaryForm.$error.required && $submitted">\r\n            <span class="error">{{\'SelectionRequired\' | translate}}</span>\r\n        </div>\r\n\r\n        <div class="eooiComplimentaryContent">\r\n            <div class="complimentaryItem" ng-repeat="item in complimentaryItems">\r\n                <div class="titleContainer complimentaryItemTitleContainer">\r\n                    <h4 class="title complimentaryItemTitle">{{item.title | translate}}</h4>\r\n                </div>\r\n                <div class="menuItemDetailsContainer optionGroupContainer" ng-class="group.tags" ng-repeat="group in item.option_groups" ng-if="item.option_groups.length">\r\n                    <div class="option {{option.display_template}}" ono-field-set="\'options[\' + $index + \']\'" ng-class="option.tags" ng-repeat="option in group.options">\r\n\r\n                        <div class="form optionForm optionRadioForm" ng-form="radioForm">\r\n                            <div class="contentContainer optionRadioContentContainer">\r\n                                <div class="optionContent optionRadioContent">\r\n                                    <ul class="optionList optionRadioList">\r\n                                        <li class="optionListItem optionRadioListItem" ng-class="oi.tags" ng-repeat="oi in option.option_items">\r\n                                            <div class="formElements optionListFormElements optionSelectListFormElements">\r\n                                                <div class="inputContainer radioContainer optionItemInputContainer" ng-class="{quantityModifier: option.quantity_editor_style != \'none\' && oi.max_qty != 1 && oi.multiple_of > 0, active: oi.quantity > 0}">\r\n                                                    <label for="complimentary_radio_{{$index}}">\r\n                                                        <span class="inputText optionItemTitleContainer" ng-class="{selected: oi.quantity > 0}">\r\n                                                            <span class="optionItemTitle" id="complimentary_radio_label_{{$index}}">{{oi.title}}</span>\r\n                                                            <span class="optionItemPrice price" ng-show="oi.price">({{oi.price | money}})</span>\r\n                                                        </span>\r\n                                                    </label>\r\n                                                    <span class="input radio optionItemInput">\r\n                                                        <input type="radio" name="radio" id="complimentary_radio_{{$index}}" ono-min-qty="option.option_items" ng-change="option.select(oi);validate();updateEndOfOrder(item);" ng-model="oi.quantity">\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n                                <div class="errorContainer optionErrorContainer optionRadioErrorContainer" ng-if="$invalid && $submitted" ono-errors="radioForm.$error">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/desktop/layout/footer.html",'<div class="footer">\r\n\t<div class="footerIcons">\r\n        <ul class="footerLinksContent">\r\n            <li ng-if="featureFlags.layout.opinionLabSurveyOnFooter">\r\n                <a onclick="OOo.oo_launch(event, \'oo_feedback\')">Feedback</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="Steak. Opens a new tab." href="https://www.outback.com/steak" target="_blank">Steak</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="Offers. Opens a new tab." href="https://www.outback.com/offers" target="_blank">Offers</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="Gift Cards. Opens a new tab." href="https://www.outback.com/gift-cards" target="_blank">Gift Cards</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="Contact. Opens a new tab." href="https://www.outback.com/contact" target="_blank">Contact</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="About Us. Opens a new tab." href="http://www.outback.com/about-us" target="_blank">About</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="Terms and Conditions. Opens a new tab." href="http://www.outback.com/quick-links/terms-and-conditions" target="_blank">Terms and Conditions</a>\r\n            </li>\r\n            <li>\r\n                <a aria-label="Privacy Policy. Opens a new tab." href="http://www.outback.com/quick-links/privacy-policy" target="_blank">Privacy Policy</a>\r\n            </li>\r\n\r\n\r\n            <li class="footerSocialIcon"> \r\n                <a href="https://instagram.com/outback/" class="socialInstagram" target="_blank" aria-label="Visit Outback on Instagram. Opens a new tab.">\r\n                </a>\r\n            </li>\r\n\r\n            <li class="footerSocialIcon">\r\n                <a href="https://www.facebook.com/outback" class="socialFacebook" target="_blank" aria-label="Visit Outback on Facebook. Opens a new tab.">\r\n                </a>\r\n            </li>\r\n\r\n            <li class="footerSocialIcon">\r\n                <a href="https://twitter.com/outback" class="socialTwitter" target="_blank" aria-label="Visit Outback on Twitter. Opens a new tab.">\r\n                </a>\r\n            </li>\r\n        </ul>\r\n\r\n\t\t\r\n\t</div>\r\n\t\r\n</div>\r\n\r\n'),$templateCache.put("/web/desktop/layout/header.html",'<div class="header" ng-controller="headerCtrl">\t\r\n\t<div class="nav" ng-if="displaySize.isDesktop">\r\n        <ul>\r\n            <li class="navImageWrapper">\r\n                <a ui-sref="home" class="navImage" href="#home" aria-label="Outback Steakhouse - Home">\r\n                    <img src="/web/app/_assets/images/logo.png" class="logoImg" alt="Home">\r\n                </a>\r\n            </li>\r\n            <li class="navSlogan">\r\n                <span class="h1">online ordering</span>\r\n            </li>\r\n            <li class="navlogin" ng-if="!loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                <a href="#login" tabindex="0" prevent-redirect aria-label="Log In - Opens Dialog" ng-click="showDialog(\'account.dualLogin\')">{{\'Nav_LogIn\' | translate}}</a>\r\n            </li>\r\n            <li class="navregister" ng-if="!loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                <a ng-click="showDialog(\'account.register\')" tabindex="0" aria-label="Create Account - Opens Dialog" href="#register" prevent-redirect>{{\'Dialog_Register\' | translate}}</a>\r\n            </li>\r\n\r\n            <li class="navlogout" ng-if="loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                <a href="#logout" tabindex="0" prevent-redirect ng-click="logout()">{{\'Nav_LogOut\' | translate}}</a>\r\n            </li>\r\n            <li class="navOrderHistory" ng-if="loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n                <a ui-sref="orderHistory">{{\'ViewOrderHistory\' | translate}}</a>\r\n            </li>\r\n            <li class="navLocations">\r\n                <a ui-sref="restaurantSearch" class="trk-headerchangelocation">{{\'Nav_Locations\' | translate}}</a>\r\n            </li>\r\n            <li class="navMenu">\r\n                <a href="#gotoMenu" tabindex="0" prevent-redirect ng-click="gotoMenu()">{{\'Nav_Menu\' | translate}}</a>\r\n            </li>\r\n        </ul>\r\n\t</div>\r\n</div>'),$templateCache.put("/web/mobile/layout/header.html",'<div class="header" ng-controller="headerCtrl">\r\n\t<div class="nav">\r\n\t\t<div class="logoContainer actionsContainer navActionsContainer">\r\n            <button id="drawerMenuBtn" class="toggleDrawerAction toggleDrawerMenuAction" ng-click="toggleDrawer(\'menu\')" aria-label="{{\'Nav_Menu\' | translate}}" aria-expanded="{{inDrawerNav}}" aria-controls="drawerContainer">\r\n                <span>{{\'Nav_Menu\' | translate}}</span>\r\n            </button>\r\n            <a ui-sref="home" class="logo" aria-label="Outback Steakhouse - Home">\r\n                <img src="/web/app/_assets/images/logo.png" class="logoImg" alt="Home">\r\n            </a>\r\n            <button class="locationsAction trk-headerchangelocation" ui-sref="restaurantSearch" href="#/restaurantSearch" aria-label="{{\'Nav_Locations\' | translate}}">\r\n                <span>{{\'Nav_Locations\' | translate}}</span>\r\n            </button>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n</div>'),$templateCache.put("/web/app/dineRewards/bucket/dineRewardsBucket.html",'\r\n<div class="bucket_title">\r\n    <h2 class="visuallyHidden"><span>Dine Rewards Logo</span></h2>\r\n    <span class="glf glf-logo_dineRewards_compact"></span>\r\n    <span class="glf glf-logo_dineRewards"></span>\r\n    <a href="#dineRewardsUnlink" tabindex="0" prevent-redirect ng-click="dineRewardsUnlinkClick()" class="unlinkAction" ng-if="model.canUnlinkDineRewards">{{\'DR_ACCT_LINK_BUTTON_UNLINK\' | translate }}</a>\r\n</div>\r\n<div class="text-message" ng-if="(model.dineRewardsAccount && !model.dineRewardsAccount.accountRewards.rewardsWallets.length)">\r\n   <strong>{{\'DR_ACCT_LINK_BUCKET_NO_REWARDS\' | translate}}</strong>\r\n</div>\r\n\r\n<div class="text-message" ng-if="model.dineRewardsAccount && ((model.dineRewardsAccount.accountRewards.rewardsWallets.length > 0)  && !model.dineRewardApplied.applied)">\r\n   <strong>{{\'DR_ACCT_LINK_BUCKET_REWARDS\' | translate}}</strong>\r\n</div>\r\n\r\n<div class="text-message" ng-if="model.dineRewardsAccount && model.dineRewardApplied.applied">\r\n    <strong>{{model.dineRewardApplied.title}} {{\'DR_ACCT_LINK_BUCKET_APPLIED\' | translate}}</strong>\r\n</div>\r\n\r\n<div class="text-message">Member {{model.dineRewardsAccount.phone}}</div>\r\n<p ng-if="model.dineRewardsAccount.accountRewards.visitsUntilReward != 1" class="text message">{{\'DR_ACCT_LINK_MODULE_VISITS_AWAY\' | translate:model.dineRewardsAccount.accountRewards.visitsUntilReward}}</p>\r\n<p ng-if="model.dineRewardsAccount.accountRewards.visitsUntilReward == 1" class="text message">{{\'DR_ACCT_LINK_MODULE_VISIT_AWAY\' | translate:model.dineRewardsAccount.accountRewards.visitsUntilReward}}</p>\r\n\r\n<br>\r\n\r\n<div class="circle" ng-class="{filled:model.dineRewardsAccount.accountRewards.visitsUntilReward <3}">\r\n    <span class="circleVisit">1</span>\r\n</div>\r\n\r\n<div class="circle" ng-class="{filled:model.dineRewardsAccount.accountRewards.visitsUntilReward <2}">\r\n    <span class="circleVisit">2</span>\r\n</div>\r\n\r\n<div class="circle" ng-class="{filled:model.dineRewardsAccount.accountRewards.visitsUntilReward <1}">\r\n    <span class="circleVisit">3</span>\r\n</div>\r\n    \r\n\r\n    '),$templateCache.put("/web/app/dineRewards/review/dineRewardsReview.html",'<div class="dineRewardsContent dineRewardsPhone">\r\n    \r\n    <div ng-if="!model.dineRewardsAccount && !model.cart.available_rewards.length">\r\n        <h2 class="dineRewardsReviewTitle no-margin">{{\'DR_ACCT_LINK_MODULE_TITLE\' | translate}}</h2>\r\n        \r\n        <div class="applyCouponContainer" ng-include="\'/web/app/dineRewards/review/dineRewardsReviewInput.html\'"></div>\r\n        <div class="dineRewardsCTAContainer">\r\n            <div>\r\n                {{\'DR_ACCT_LINK_MODULE_SIGNUP_CTA_TITLE\' | translate}} \r\n                <a href="#dineRewardsSignup" aria-label="Click here to Sign Up - Opens Dialog" tabindex="0" prevent-redirect class="dineRewardsCTA" ng-click="dineRewardsShowModal(\'signup\');$parent.sendGADataForSignup(\'review\');">{{\'DR_ACCT_LINK_MODULE_SIGNUP_CTA\' | translate}}</a>\r\n            </div>\r\n            <dine-rewards-modal>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n    <div ng-if="model.dineRewardsAccount && !model.cart.available_rewards.length">\r\n        <div>\r\n            <h2 class="dineRewardsReviewTitle">{{\'DR_ACCT_LINK_MODULE_SUCCESS_TITLE\' | translate}}</h2>\r\n            <a href="#dineRewardsUnlink" tabindex="0" prevent-redirect ng-click="dineRewardsUnlinkClick()" class="unlinkAction">{{\'DR_ACCT_LINK_BUTTON_UNLINK\' | translate }}</a>\r\n        </div>\r\n        <span ng-if="model.dineRewardsAccount.accountRewards.visitsUntilReward != 1" class="text message">{{\'DR_ACCT_LINK_MODULE_VISITS_AWAY\' | translate:model.dineRewardsAccount.accountRewards.visitsUntilReward}}</span>\r\n        <span ng-if="model.dineRewardsAccount.accountRewards.visitsUntilReward == 1" class="text message">{{\'DR_ACCT_LINK_MODULE_VISIT_AWAY\' | translate:model.dineRewardsAccount.accountRewards.visitsUntilReward}}</span>\r\n        <br>\r\n        <div class="circle" ng-class="{filled:model.dineRewardsAccount.accountRewards.visitsUntilReward <3}">\r\n            <span class="circleVisit">1</span>\r\n        </div>\r\n        <div class="circle" ng-class="{filled:model.dineRewardsAccount.accountRewards.visitsUntilReward <2}">\r\n            <span class="circleVisit">2</span>\r\n        </div>\r\n        <div class="circle" ng-class="{filled:model.dineRewardsAccount.accountRewards.visitsUntilReward <1}">\r\n            <span class="circleVisit">3</span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="loyaltyContainer" ng-if="model.cart.available_rewards.length > 0">\r\n        <div>\r\n            <h2 class="dineRewardsReviewTitle no-margin">{{\'DR_ACCT_LINK_MODULE_REWARDS_TITLE\' | translate}}</h2>\r\n            <a href="#dineRewardsUnlink" tabindex="0" prevent-redirect ng-click="dineRewardsUnlinkClick()" class="unlinkAction">{{\'DR_ACCT_LINK_BUTTON_UNLINK\' | translate }}</a>\r\n        </div>\r\n        <strong class="dineRewardsReviewSubtitle"></strong>\r\n        <ul class="loyaltyList">\r\n            <li ng-repeat="reward in model.cart.available_rewards | orderBy: \'-expiration_date\':true">\r\n                <div class="inputContainer radioContainer rewardInputContainer" ng-class="{active: reward.applied, disabled: !reward.applicable || (model.dineRewardApplied.applied && !reward.applied)}">\r\n                    <label for="rewards_apply_{{$index}}">\r\n                        <span class="inputText reward-title" ng-class="{selected: reward.applied}">{{reward.title}}</span><span> | </span>\r\n                        <span class="reward-expiration-date" ng-class="{first:$first}">{{\'DR_ACCT_LINK_EXPIRES\' | translate}} {{reward.expiration_date | date: \'MM/dd/yyyy\'}}</span>\r\n                    </label>\r\n                    <span class="input radio rewardInput">\r\n                        <input type="radio" id="rewards_apply_{{$index}}" ng-model="reward.applied" ng-disabled="!reward.applicable || reward.applied" ng-change="updateReward(reward)" highlight-parent-on-focus>\r\n                    </span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/dineRewards/review/dineRewardsReviewInput.html",'<label class="dineRewardsReviewSubtitle">\r\n    <p>{{\'DR_ACCT_LINK_MODULE_DESCRIPTION\' | translate}}</p>\r\n</label>\r\n\r\n<form name="dineRewardReviewForm" class="applyCoupon dineRewardsInput" ng-submit="dineRewardsReviewLinkClick(e)">\r\n    <div class="dineRewardsInputLogo" ng-if="dineRewardsSidebar">\r\n        <span class="glf glf-logo_dineRewards_compact"></span>\r\n    </div>\r\n\r\n    <div class="formElements dineRewardsReviewFormElements">\r\n        <div class="inputContainer textInputContainer applyCouponInputContainer">\r\n            <label alt-content="{{(dineRewardsSidebar === false || dineRewardsSidebar === undefined) ? (\'DR_ACCT_LINK_MODULE_MAIN_INPUT_SHORT\' | translate) : (\'DR_ACCT_LINK_MODULE_MAIN_INPUT\' | translate)}}" main-content="{{\'ADA_Label_Phone\' | translate}} (Required)" for="dine_rewards_review_phone_{{$id}}">\r\n            </label>\r\n            <span class="input textInput applyCouponInput">\r\n                <input required type="tel" floating-label numbers-only telephone-number ng-model="model.dineRewardsReviewPhone" autocomplete="tel" mask="(###) ###-####" id="dine_rewards_review_phone_{{$id}}" name="dineRewardsReviewPhone">\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="actionsContainer dineRewardsButton">\r\n        <button type="button" class="submitAction applyCouponSubmitAction" ng-click="dineRewardReviewForm.$submit()">\r\n            <span>{{\'DR_ACCT_LINK_BUTTON_LINK\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</form>'),$templateCache.put("/web/app/dineRewards/pod/dineRewardsMobilePod.html",'<div class="mobileDineRewards">\r\n\r\n    <div class="logo_title" ng-click="mobileDRPodToggle = !mobileDRPodToggle" ng-class="{arrowDown: !mobileDRPodToggle, arrowUp: mobileDRPodToggle}" tabindex="0" aria-expanded="{{mobileDRPodToggle}}" role="button">\r\n        <h2 class="visuallyHidden"><span>Dine Rewards Logo</span></h2>\r\n        <span class="glf glf-logo_dineRewards_compact"></span>\r\n        <span class="glf glf-logo_dineRewards"></span>\r\n        <a href="#dineRewardsUnlink" tabindex="0" ng-click="dineRewardsUnlinkClick()" prevent-redirect class="unlinkAction" ng-if="model.canUnlinkDineRewards && ($root.featureFlags.dineRewards.allowDineRewardsReviewAccountLink && model.dineRewardsAccount)">{{\'DR_ACCT_LINK_BUTTON_UNLINK\' | translate }}</a>\r\n    </div>\r\n\r\n    <div ng-if="!model.dineRewardsAccount && mobileDRPodToggle" role="region" id="dineRewardsMobileContainer">\r\n\r\n        <h2 class="dineRewardsReviewTitle no-margin">ARE YOU A MEMBER?</h2>\r\n        <div class="dineRewardsReviewSubtitle">{{\'DR_ACCT_LINK_MODULE_DESCRIPTION\' | translate}}</div>\r\n\r\n        <form class="form" name="dineRewardReviewForm" ng-submit="dineRewardsReviewLinkClick(e)">\r\n            <div class="formElements">\r\n                <div class="inputContainer textInputContainer">\r\n                    <label for="dine_rewards_review_phone_{{$id}}" alt-content="{{(dineRewardsSidebar === false || dineRewardsSidebar === undefined) ? (\'DR_ACCT_LINK_MODULE_MAIN_INPUT_SHORT\' | translate) : (\'DR_ACCT_LINK_MODULE_MAIN_INPUT\' | translate)}}" main-content="{{\'ADA_Label_Phone\' | translate}} (Required)">\r\n                    </label>\r\n                    <span class="input textInput applyCouponInput">\r\n                        <input required type="tel" floating-label numbers-only telephone-number ng-model="model.dineRewardsReviewPhone" autocomplete="tel" mask="(###) ###-####" id="dine_rewards_review_phone_{{$id}}" name="dineRewardsReviewPhone">\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="actionsContainer formActionsContainer dineRewardMobileFormActions dineRewardsButton">\r\n                <button type="button" class="submitAction applyCouponSubmitAction" ng-click="dineRewardReviewForm.$submit()">\r\n                    <span>{{\'DR_ACCT_LINK_BUTTON_LINK\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </form>\r\n\r\n        <div class="dineRewardsCTAContainer">\r\n            <div>\r\n                {{\'DR_ACCT_LINK_MODULE_SIGNUP_CTA_TITLE\' | translate}} <a href="#dineRewardsSignup" tabindex="0" prevent-redirect class="dineRewardsCTA" ng-click="dineRewardsShowModal(\'signup\');$parent.sendGADataForSignup(\'review\');">Click here to Sign Up!<span class="visuallyHidden">Click here to sign up - Opens a dialog</span></a>\r\n            </div>\r\n            <dine-rewards-modal>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="dineRewardsBucketSection dineRewardsReviewContainer" ng-if="$root.featureFlags.dineRewards.allowDineRewardsReviewAccountLink && model.dineRewardsAccount" ng-class="{\'show-pod\': mobileDRPodToggle, \'hide-pod\': !mobileDRPodToggle}">\r\n        <div class="dineRewardsBucketContainer" ng-include="\'/web/app/dineRewards/bucket/dineRewardsBucket.html\'"></div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/dineRewards/pod/dineRewardsPod.html",'<div class="dineRewardsContent sideBarDineRewards" ng-if="!model.dineRewardsAccount">\r\n    <div class="logo_title">\r\n        <h2 class="visuallyHidden"><span>Dine Rewards Logo</span></h2>\r\n        <span class="glf glf-logo_dineRewards_compact"></span>\r\n        <span class="glf glf-logo_dineRewards"></span>\r\n    </div>\r\n    <h2 class="dineRewardsReviewTitle no-margin">ARE YOU A MEMBER?</h2>\r\n    <div class="dineRewardsReviewContainer" ng-include="\'/web/app/dineRewards/review/dineRewardsReviewInput.html\'"></div>\r\n    <div class="dineRewardsCTAContainer">\r\n        <div>\r\n            {{\'DR_ACCT_LINK_MODULE_SIGNUP_CTA_TITLE\' | translate}}\r\n            <a href="#dineRewardsSignup" aria-label="Click here to Sign Up - Opens Dialog" tabindex="0" prevent-redirect class="dineRewardsCTA" ng-click="dineRewardsShowModal(\'signup\');$parent.sendGADataForSignup(\'review\');">\r\n                <span class="ng-binding"> Click here to Sign Up </span>\r\n            </a>\r\n        </div>\r\n        <dine-rewards-modal>\r\n    </div>\r\n</div>\r\n\r\n<div class="dineRewardsBucketSection dineRewardsReviewContainer" ng-if="$root.featureFlags.dineRewards.allowDineRewardsReviewAccountLink && model.dineRewardsAccount">\r\n    <div class="dineRewardsBucketContainer" ng-include="\'/web/app/dineRewards/bucket/dineRewardsBucket.html\'"></div>\r\n</div>\r\n'),$templateCache.put("/web/app/_components/menuSearch/menuSearch.html",'<section ng-if="ctrl.searchMenuEnabled">\r\n    <input name="searchText" type="search" placeholder="Search the Menu" ng-model="ctrl.searchText" ui-autocomplete="uiAutocomplete" tabindex="0" ng-change="ctrl.onChange()" class="ui-autocomplete-input" autocomplete="off" errorsattached="true">\r\n\r\n</section>\r\n\r\n\r\n'),$templateCache.put("/web/app/_directives/dineRewardsModal/dineRewardsModal.html",'<div id="dineRewardsModalContainer" class="dineRewardsModalContainer" role="region" aria-labelledby="dineRewardsTitle" ada-aria-describedby="dineRewardsDescription" ng-if="dineRewardsModalType" ng-class="{\'visible\': dineRewardsModalType}">\r\n    <div class="dineRewardsContentWrapper">\r\n        <div class="dineRewardsModalContentContainer">\r\n            <div class="dineRewardsModalContent dineRewardsInputTextColor">\r\n\r\n                <section class="modal-header">\r\n\r\n                    <div class="modal-logo">\r\n                        <h2 class="visuallyHidden"><span>Dine Rewards Logo</span></h2>\r\n                        <span class="glf glf-logo_dineRewards_compact"></span>\r\n                        <span class="glf glf-logo_dineRewards"></span>\r\n                    </div>\r\n\r\n                    <div class="modal-close">\r\n                        <span role="button" aria-label="Close" tabindex="0" id="closeDineRewardsModal" class="glf glf-icon_close" ng-click="dineRewardsCloseModal()" ng-keyup="dineRewardsCloseOnKeyPress($event)"></span>\r\n                    </div>\r\n                </section>\r\n\r\n                <section class="modal-content" ng-if="dineRewardsModalType" ng-include="\'/web/app/_directives/dineRewardsModal/dineRewardsModal.\'+dineRewardsModalType+\'.html\'"></section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/_directives/dineRewardsModal/dineRewardsModal.partial-match.html",'<header>\r\n    <span id="dineRewardsTitle">{{\'DR_ACCT_LINK_MODAL_PARTIAL_TITLE\' | translate}}<span class="glf glf-icon_info"></span></span>\r\n    <span id="dineRewardsDescription"> {{\'DR_ACCT_LINK_MODAL_PARTIAL_DESCRIPTION\' | translate}}\r\n    </span>\r\n</header>\r\n<div ng-if="model.dineRewardsError" class="dineRewardsModalErrorContainer">\r\n    <div ng-if="model.dineRewardsError === \'CANT_VERIFY\'">\r\n        {{\'DR_ACCT_LINK_MODAL_VERIFY_ERROR_NO_MATCH\' | translate}}\r\n    </div>\r\n</div>\r\n\r\n<form autocomplete="on" name="dineRewardsPartialForm" novalidate>\r\n    <div class="modal-form" ng-form="dineRewardsPartialForm" ng-submit="$parent.verifyClick()">\r\n        <content>\r\n            <div class="flex-row">\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-item flex-direction-column inputContainer">\r\n                        <label class="flex-row" for="dine_rewards_verify_phone" main-content="{{\'DR_ACCT_LINK_INPUT_PHONE_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_PHONE\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="tel" name="verifyPhone" floating-label class="dineRewardsInput flex-item" numbers-only telephone-number id="dine_rewards_verify_phone" ng-model="model.dineRewardsReviewPhone" autocomplete="tel" required mask="(###) ###-####">\r\n                        </span>\r\n                     </div>\r\n                 </div>\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-item flex-direction-column inputContainer">\r\n                        <label class="flex-row" for="dine_rewards_verify_email" main-content="{{\'DR_ACCT_LINK_INPUT_EMAIL_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_EMAIL\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="email" name="verifyEmail" floating-label class="dineRewardsInput flex-item" id="dine_rewards_verify_email" autocomplete="email" ng-model-options="{ debounce: 800 }" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" maxlength="56" required sanitize="gdpr" ng-model="model.dineRewardsReviewEmail">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n            </content>\r\n        <footer class="flex-row">\r\n                <button class="orange flex-item" ng-click="$parent.dineRewardsShowModal(\'signup\'); $parent.sendGADataForSignup(\'verify\');">\r\n                    {{\'DR_ACCT_LINK_BUTTON_SIGNUP\' | translate}}\r\n                </button>\r\n                <button class="blue flex-item" type="submit" ng-click="dineRewardsPartialForm.$submit()">\r\n\r\n                    {{\'DR_ACCT_LINK_BUTTON_LINK\' | translate}}\r\n                </button>\r\n            </footer>\r\n        <div class="flex-row">\r\n            <div class="modal-notice">{{\'DR_ACCT_LINK_MODAL_VERIFY_FINEPRINT\' | translate}}</div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'),$templateCache.put("/web/app/_directives/dineRewardsModal/dineRewardsModal.signup.html",'<header>\r\n    <span id="dineRewardsTitle">{{\'DR_ACCT_LINK_MODAL_SIGNUP_TITLE\' | translate}}</span>\r\n    <span id="dineRewardsDescription">{{\'DR_ACCT_LINK_MODAL_SIGNUP_DESCRIPTION\' | translate}}</span>\r\n</header>\r\n<form autocomplete="on" name="dineRewardsSignupForm" novalidate>\r\n    <div class="modal-form" ng-form="dineRewardsSignupForm" ng-submit="$parent.$parent.signupClick(model.dineRewardsReviewPhone,model.dineRewardsReviewEmail)">\r\n        <content>\r\n            <div class="flex-row">\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-direction-column inputContainer">\r\n                        <label for="dine_rewards_signup_first_name" class="flex-row" main-content="{{\'DR_ACCT_LINK_INPUT_FIRSTNAME_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_FIRSTNAME\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="text" floating-label allow-pattern="([A-Z]|\\s)" id="dine_rewards_signup_first_name" name="signupFirstName" maxlength="30" class="dineRewardsInput flex-row" ng-model="model.dineRewardsReviewFirstName" validate-profanity form-reference="dineRewardsSignupForm.signupFirstName" profanity-value="model.dineRewardsReviewFirstName" required>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-direction-column inputContainer">\r\n                        <label for="dine_rewards_signup_last_name" class="flex-row" main-content="{{\'DR_ACCT_LINK_INPUT_LASTNAME_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_LASTNAME\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="text" floating-label allow-pattern="([A-Z]|\\s)" id="dine_rewards_signup_last_name" name="signupLastName" maxlength="30" class="dineRewardsInput flex-row" ng-model="model.dineRewardsReviewLastName" required>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="flex-row">\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-direction-column inputContainer">\r\n                        <label for="dine_rewards_signup_phone" class="flex-row" main-content="{{\'DR_ACCT_LINK_INPUT_PHONE_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_PHONE\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="tel" floating-label id="dine_rewards_signup_phone" name="signupPhone" class="dineRewardsInput flex-row" numbers-only telephone-number ng-model="model.dineRewardsReviewPhone" autocomplete="tel" required mask="(###) ###-####">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-direction-column inputContainer">\r\n                        <label for="dine_rewards_signup_email" class="flex-row" main-content="{{\'DR_ACCT_LINK_INPUT_EMAIL_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_EMAIL\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="email" id="dine_rewards_signup_email" name="signupEmail" floating-label class="dineRewardsInput flex-row" maxlength="56" ng-model-options="{ debounce: 800 }" autocomplete="email" required sanitize="gdpr" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" ng-model="model.dineRewardsReviewEmail">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </content>\r\n        <footer>\r\n            <div class="flex-row">\r\n                <div class="modal-notice flex-item">\r\n                    <a href="https://www.dine-rewards.com/terms-and-conditions" target="_dinerewards" class="white-link">{{\'DR_ACCT_LINK_MODAL_SIGNUP_FINEPRINT\' | translate}}</a>\r\n                </div>\r\n                <button class="orange flex-item" type="submit" ng-click="dineRewardsSignupForm.$submit()">\r\n                    {{\'DR_ACCT_LINK_BUTTON_SIGNUP\' | translate}}\r\n                </button>\r\n            </div>\r\n        </footer>\r\n    </div>\r\n</form>'),$templateCache.put("/web/app/_directives/dineRewardsModal/dineRewardsModal.verify.html",'<header>\r\n    <span id="dineRewardsTitle">{{\'DR_ACCT_LINK_MODAL_VERIFY_TITLE\' | translate}}<span class="glf glf-icon_info"></span></span>\r\n    <span id="dineRewardsDescription">{{\'DR_ACCT_LINK_MODAL_VERIFY_DESCRIPTION\' | translate}}</span>\r\n</header>\r\n<div ng-if="model.dineRewardsError" class="dineRewardsModalErrorContainer">\r\n    <div ng-if="model.dineRewardsError === \'CANT_VERIFY\'">\r\n        {{\'DR_ACCT_LINK_MODAL_VERIFY_ERROR_NO_MATCH\' | translate}}\r\n    </div>\r\n</div>\r\n\r\n<form autocomplete="on" name="dineRewardsVerifyForm" novalidate>\r\n    <div class="modal-form" ng-form="dineRewardsVerifyForm" ng-submit="$parent.verifyClick()">\r\n        <content>\r\n            <div class="flex-row">\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-item flex-direction-column inputContainer">\r\n                        <label class="flex-row" for="dine_rewards_verify_phone" main-content="{{\'DR_ACCT_LINK_INPUT_PHONE_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_PHONE\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="tel" name="verifyPhone" floating-label class="dineRewardsInput flex-item" numbers-only telephone-number disabled="disabled" id="dine_rewards_verify_phone" ng-model="model.dineRewardsReviewPhone" autocomplete="tel" required mask="(###) ###-####">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="flex-item">\r\n                    <div class="dineRewardsInput flex-item flex-direction-column inputContainer">\r\n                        <label class="flex-row" for="dine_rewards_verify_email" main-content="{{\'DR_ACCT_LINK_INPUT_EMAIL_LABEL\' | translate}} {{\'ADA_Required_Label\' | translate}}" alt-content="{{\'DR_ACCT_LINK_INPUT_EMAIL\' | translate}} {{\'ADA_Required_Label\' | translate}}"></label>\r\n                        <span class="flex-row">\r\n                            <input type="email" name="verifyEmail" floating-label class="dineRewardsInput flex-item" id="dine_rewards_verify_email" autocomplete="email" ng-model-options="{ debounce: 800 }" bypass-html-validation ng-pattern="/^([0-9a-zA-Z]+[-._+&])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,10}$/" maxlength="56" required sanitize="gdpr" ng-model="model.dineRewardsReviewEmail">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </content>\r\n        <footer class="flex-row"> \r\n            <button tabindex="0" class="orange flex-item" ng-click="$parent.dineRewardsShowModal(\'signup\', true);$parent.sendGADataForSignup(\'verify\');">\r\n                {{\'DR_ACCT_LINK_BUTTON_SIGNUP\' | translate}}\r\n            </button>\r\n            <button class="blue flex-item" type="submit" ng-click="dineRewardsVerifyForm.$submit()">\r\n                {{\'DR_ACCT_LINK_BUTTON_LINK\' | translate}}\r\n            </button>\r\n        </footer>\r\n\r\n        <div class="flex-row">\r\n            <div class="modal-notice">{{\'DR_ACCT_LINK_MODAL_VERIFY_FINEPRINT\' | translate}}</div>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("/web/app/_directives/validate/elementError.html",'<span class="error inlineError">\r\n    Address is invalid.\r\n</span>\r\n'),$templateCache.put("/web/app/_directives/validate/errors.html",'<span class="error inlineError" ng-if="errors && $submitted" ng-repeat="(key, valid) in errors.error !== undefined ? errors.error : errors">\r\n    <span ng-if="valid !== false && errors.error !== undefined">{{ $messages.find(key) | translate : errors.errorField }}</span>\r\n    <span ng-if="valid !== false && errors.error === undefined">{{ $messages.find(key) | translate }}</span>\r\n</span>\r\n\r\n'),$templateCache.put("/web/app/_directives/validate/formErrors.html",'<div>\r\n    <span class="error" ng-repeat="error in $formErrors track by $index">{{error | translate}}</span>\r\n</div>'),$templateCache.put("/web/app/_2.0/_components/categoryNavItem/categoryNavItem2.html",'<div class="categoryNavItem2">\r\n    <div class="categoryNavItemTitleContainer" ng-if="item.subcategories.length === 0">\r\n        <a class="title categoryNavItemTitle" ng-class="{active: currentCategory === item.id}" ui-sref="category({categoryId: item.id})" ng-click="toggleCategoryNav(true)" ng-bind-html="item.title"></a>\r\n    </div>\r\n    <div class="categoryNavItemGroupContainer" ng-if="item.subcategories.length > 0">\r\n        <div class="categoryNavItemGroupTitleContainer" ng-if="!featureFlags.layout.header">\r\n            <h2 class="title categoryNavGroupTitle" ng-class="{active: currentCategoryGroup === item.id}" ng-bind-html="item.title"></h2>\r\n        </div>\r\n        <div class="categoryNavItemGroupContent">\r\n            <ul class="categoryNavItemGroupList2">\r\n                <li class="categoryNavItemGroupListItem" ng-class="category.tags" ng-repeat="category in item.subcategories" tabindex="-1">\r\n                    <div class="categoryNavItemGroupListImg categoryImage">\r\n                        <a ng-class="{active: currentCategory === category.id}" ui-sref-active="active" ui-sref="category({categoryId: category.id})" ng-click="toggleCategoryNav(true)" ng-attr-tabindex="{{showCategoryNav || (\'menu\' | isState) ? \'0\' : \'-1\'}}">\r\n                            <img class="imageContainer menuItemImageContainer" ng-if="!category.image &&  displayDefaultImageOnCategoryList" ng-class="{\'defaultMenuItemImage\': !category.image}">\r\n                            <img class="imageContainer menuItemImageContainer" ng-if="category.image" ng-class="{\'defaultMenuItemImage\': !category.image}" ng-src="{{ category.image }}">\r\n                            <div class="categoryNavItemGroupListContent">\r\n                                {{category.title}}<span class="visuallyHidden" ng-if="currentCategory.id === category.id">Selected</span>\r\n                            </div>\r\n                        </a>\r\n                    </div>\r\n                </li>\r\n                <li class="categoryNavItemGroupListItem" ng-class="category.tags">\r\n                    <div class="categoryNavItemGroupListImg" ui-sref="category({categoryId: category.id})">\r\n                        <a ui-sref-active="active" ui-sref="categoryAllMenuItems({categoryId: category.id})" ng-click="toggleCategoryNav(true)" ng-attr-tabindex="{{showCategoryNav || (\'menu\' | isState) ? \'0\' : \'-1\'}}">\r\n                            <img class="imageContainer menuItemImageContainer" ng-class="{\'defaultMenuItemImage\': true}">\r\n                            <div class="categoryNavItemGroupListContent">\r\n                                View All\r\n                            </div>\r\n                        </a>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/_2.0/_components/delivery/delivery2View.html",'<div ng-form="addressForm">\r\n\r\n    <div class="titleContainer">\r\n        <h1 class="title">{{\'chooseDeliveryLocation\' | translate}}</h1>\r\n    </div>\r\n    \r\n    <div delivery-address-list ng-if="loggedIn && displaySavedDeliveryAddress"></div>\r\n\r\n    <div class="form delivery_2_form" ng-submit="saveDeliveryAddress()">\r\n        \r\n        <div class="errorContainer formErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="errorContainer formErrorContainer" ng-if="!deliveryHoursAvailableForThisLocation">{{\'Store_Hours_Unavailable_Delivery\' | translate}}</div>\r\n\r\n        <div address-auto-complete-2 disable-save="addressForm.$invalid" values="values" address="address" show-cancel="show(\'addressCancel\')" on-cancel="cancelEdit()" on-save="saveDeliveryAddress()">\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div register-teaser></div>\r\n</div>\r\n\r\n\r\n'),$templateCache.put("/web/app/_2.0/_components/delivery/upsell.dialog.html",'<div>\r\n    <div ng-bind-html="\'Delivery_Upsell_Message\' | translate"></div>\r\n    <div class="contentContainer upsellPickupContainer">\r\n        <div class="upsellRestaurantTitleContainer">{{upsellRestaurant.name}}</div>\r\n        <div class="address">{{upsellRestaurant.address.address1}}, {{upsellRestaurant.address.city}}, {{upsellRestaurant.address.state}} {{upsellRestaurant.address.zip_code}}</div>\r\n        <div> Hours: Open now until {{ getPickupClosingTime() }} PM </div>\r\n    </div>\r\n    <div class="actionsContainer formActionsContainer upsellPickupActionsContainer">\r\n        <button class="submitAction upsellPickupSubmitAction" ng-click="upsell()">\r\n            <span>{{\'Start_Pickup_Order\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/_2.0/_components/fulfillmentTime/fulfillmentTime2View.html",'<p ng-bind-html="fulfillmentTimeMessage"></p>'),$templateCache.put("/web/app/_2.0/_components/header/accountInformation.html",'<div class="menuDropdownRight accountInformation">\r\n    <ul class="sub-menu">\r\n        <li class="accountLinksListItem accountLinksActions" ng-repeat="page in sections | shouldDisplay:this" ui-sref-active="active">\r\n            <a ui-sref="{{page.name}}" ng-click="toggleAccountDropDown()" tabindex="0">\r\n                <span>{{page.title | translate}}</span>\r\n            </a>\r\n        </li>\r\n        <li class="accountLinksListItem accountLinksLogout">\r\n            <a href="#logout" tabindex="0" ng-click="toggleAccountDropDown(\'logout\')" prevent-redirect>\r\n                <span>{{\'LogOut\' | translate}}</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>'),$templateCache.put("/web/app/_2.0/_components/header/header2View.html",'\x3c!-- Header 2.0 --\x3e\r\n<div class="header2">\r\n    <div class="inner-header">\r\n\r\n        <div class="obs-logo">\r\n            <a ng-click="goToHome()" prevent-redirect class="logo-container" tabindex="0" aria-label="Outback Steakhouse - Home">\r\n                <span class="glf glf-logo_outback"></span>\r\n            </a>\r\n        </div>\r\n        \r\n        <div ng-if="displaySize.isDesktop && updateFulfillmentVisibility()" class="fulfillment-address">\r\n            <span class="fulfillment-type">{{ fulfillmentType === \'Curbside\' ? \'Fulfillment_Header_Pickup\' : \'Fulfillment_Header_Delivery\' | translate }}</span>\r\n            <span class="restaurant-display-name">{{fulfillmentType === \'Curbside\' ? restaurantDisplayName : \'\' }} </span>\r\n            <span class="header-fulfillment-type">\r\n                {{ fulfillmentType === \'Curbside\' ? \' - \' + restarantDeliveryLocation : customerDeliveryLocation }}\r\n            </span>\r\n            <div class="header-store-selection">\r\n                (<a class="change-location" prevent-redirect ng-click="changeLocation()" tabindex="0">{{ \'Header_Change_Location\' | translate}}</a>\r\n                <span class="text-lower">or</span>\r\n                <a class="restaurant-number" prevent-redirect ng-click="showDialog(\'restaurant.number\')" tabindex="0"> {{ \'Header_View_Number\' | translate}}</a> )\r\n            </div>\r\n        </div>\r\n\r\n        <nav class="top-right-nav-outer" ng-if="displaySize.isMobile">\r\n            <ul class="top-right-nav">\r\n                <li class="float-right">\r\n                    <a tabindex="0" prevent-redirect ng-click="showDialog(\'account.login\')" ng-if="!loggedIn" aria-label="{{\'Nav_LogIn\' | translate}}">\r\n                        <span>{{\'Nav_LogIn\' | translate}}</span>\r\n                    </a>\r\n                    <div class="userLogin" ng-if="loggedIn">\r\n                        <a href="#logout" prevent-redirect tabindex="0" ng-click="toggleAccountDropDown(\'account\')" ng-class="{arrowUp: inAccountDropDown ||  menuOpened, arrowDown: !inAccountDropDown || !menuOpened}" aria-expanded="{{inAccountDropDown ||  menuOpened}}" role="button">\r\n                            <span>{{\'Hi_Text\' | translate}} {{user.first_name}}</span>\r\n                        </a>\r\n                    </div>\r\n                    <div ng-if="menuOpened || inAccountDropDown" class="Loginchevron" ng-include="\'/web/app/_2.0/_components/header/accountInformation.html\'"></div>\r\n                </li>\r\n                <li class="float-right margin-right-0" ng-if="displayBagIcon">\r\n                    <div tabindex="0" class="shopping-bag" ng-click="goToCheckout()">\r\n                        <span class="order-total-circle" ng-class="{hidden: !displayOrderTotal}" aria-label="{{\'ADA_Shopping_Order_Total_Label\' | translate: orderItemsTotal}}">{{ orderItemsTotal }}</span>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n\r\n        <div ng-if="displaySize.isMobile && updateFulfillmentVisibility()" class="fulfillment-address">\r\n            <span>{{ fulfillmentType === \'Curbside\' ? \'Fulfillment_Header_Pickup\' : \'Fulfillment_Header_Delivery\' | translate }}</span>\r\n            <span class="restaurant-display-name">{{fulfillmentType === \'Curbside\' ? restaurantDisplayName : \'\' }} </span>\r\n            <span class="header-fulfillment-type">\r\n                {{ fulfillmentType === \'Curbside\' ? \'\' : customerDeliveryLocation }}\r\n            </span>\r\n            <div class="header-store-selection">\r\n                (<a class="change-location" prevent-redirect ng-click="changeLocation()" tabindex="0">{{ \'Header_Change_Location\' | translate}}</a>\r\n                <span class="text-lower">or</span>\r\n                <a class="restaurant-number" prevent-redirect ng-click="showDialog(\'restaurant.number\')" tabindex="0"> {{ \'Header_View_Number\' | translate}}</a> )\r\n            </div>\r\n        </div>\r\n\r\n        <nav class="main-nav-outer">\r\n            <div class="main-nav" id="MainNav">\r\n                <ul class="navigation-left">\r\n                    \r\n                    <li ng-if="displayMenuOnlyLinks">\r\n                        <a tabindex="0" prevent-redirect ng-click="goToPickup()" ng-class="{active : currentState === \'pickup\' || currentState === \'restaurantSearch\'}">\r\n                            <span>{{\'Nav_Pickup\' | translate}}</span>\r\n                        </a>\r\n                    </li>\r\n\r\n                    <li ng-if="displayMenuOnlyLinks" ng-class="{hidden : hideDelivery}">\r\n                        <a tabindex="0" prevent-redirect ng-click="goToDelivery()" ng-class="{active : currentState === \'delivery\' }">\r\n                            <span>{{\'Nav_Delivery\' | translate}}</span>\r\n                        </a>\r\n                    </li>\r\n\r\n                    \x3c!-- Menu --\x3e\r\n                    <li ng-if="!displayDiningMenuOnlyLinks && displayLunchMenuItem">\r\n                        <a tabindex="0" prevent-redirect ng-click="goToCategory()" ng-class="{active : displayLunchMenuItem && !inPastOrders}">\r\n                            <span>{{\'Lunch_Label\' | translate}}</span>\r\n                        </a>\r\n                    </li>\r\n                    <li ng-if="!displayDiningMenuOnlyLinks && displayDinnerMenuItem">\r\n                        <a tabindex="0" prevent-redirect ng-click="goToCategory()" ng-class="{active : displayDinnerMenuItem && !inPastOrders}">\r\n                            <span>{{\'Dinner_Label\' | translate}}</span>\r\n                        </a>\r\n                    </li>\r\n                    <li ng-if="!displayDiningMenuOnlyLinks">\r\n                        <a tabindex="0" prevent-redirect ng-click="goToPastOrders()" ng-class="{ active: inPastOrders }">\r\n                            <span>{{\'Past_Orders\' | translate}}</span>\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n\r\n                <ul class="navigation-right">\r\n                    <li class="float-right" ng-if="displaySize.isDesktop">\r\n                        <a href="#login" tabindex="0" prevent-redirect ng-click="showDialog(\'account.dualLogin\')" ng-if="!loggedIn" aria-label="{{\'Nav_LogIn\' | translate}}">\r\n                            <span>{{\'Nav_LogIn\' | translate}}</span>\r\n                        </a>\r\n                        <div class="userLogin" ng-if="loggedIn">\r\n                            <a href="#logout" tabindex="0" prevent-redirect ng-click="toggleMenu($event);" ng-class="{arrowUp: inAccountDropDown ||  menuOpened, arrowDown: !inAccountDropDown || !menuOpened}" aria-expanded="{{inAccountDropDown ||  menuOpened}}" role="button">\r\n                                <span>{{\'Hi_Text\' | translate}} {{user.first_name}}</span>\r\n                            </a>\r\n                        </div>\r\n                        <div ng-if="menuOpened || inAccountDropDown" class="Loginchevron" ng-include="\'/web/app/_2.0/_components/header/accountInformation.html\'"></div>\r\n                    </li>\r\n                    <li class="float-right" ng-if="displaySize.isDesktop && displayBagIcon">\r\n                        <div ng-click="goToCheckout()" tabindex="0" class="shopping-bag">\r\n                            <span class="order-total-circle" ng-class="{hidden: !displayOrderTotal}" aria-label="{{\'ADA_Shopping_Order_Total_Label\' | translate: orderItemsTotal}}">{{ orderItemsTotal }}</span>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n\r\n    </div>\r\n</div>\r\n<div class="overlay accountOverlay" tabindex="0" ng-if="displaySize.isMobile && inAccountDropDown" ng-click="toggleAccountDropDown()"></div>\r\n\r\n\r\n'),$templateCache.put("/web/app/_2.0/_components/header/resturantContactNumber.dialog.html",'<div class="resturanctContactNumberContainer">\r\n\r\n    <div class="selectContainer">\r\n        <ul class="list-unstyled">\r\n            <li>\r\n                <a href="tel:{{ contactNumber }}">{{ contactNumber | phone }}</a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n</div>'),$templateCache.put("/web/app/_2.0/_components/pastOrders/pastOrders2View.html",'<div class="past-orders2" ui-view>\r\n    <div class="saved-recent-orders" ng-if="loggedIn">\r\n        <div class="savedOrdersContainer" ng-include="\'/web/app/orderHistory/orderHistory.savedOrders.html\'"></div>\r\n        <div class="recentOrdersContainer" ng-include="\'/web/app/orderHistory/orderHistory.recentOrders.html\'"></div>\r\n        <div class="actionsContainer orderHistoryActionsContainer" ng-if="displaySize.isMobile">\r\n            <button class="backAction orderHistoryBackAction" ui-sref="home">\r\n                <span>{{\'Back\' | translate}}</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="login-register" ng-if="!loggedIn">\r\n        <div class="description-container">\r\n            <p class="description"> {{\'PastOrders_Register_Description\' | translate}}</p>\r\n        </div>\r\n        <div class="login-account">\r\n            <div class="actions-container formActionsContainer loginFormActionsContainer">\r\n                <button type="button" class="submitAction loginFormSubmitAction trk-login" ng-click="showDialog(\'account.dualLogin\')">\r\n                    <span>{{\'LogIn\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n            <p> OR </p>\r\n            <div class="actions-container osLocationDisplayActionContainer">\r\n                <button class="createAccountButton" ng-click="showDialog(\'account.register\')">\r\n                    <span>{{\'Dialog_Register\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/_2.0/_components/pickup/pickup2View.html",'<div class="restaurantSearch" ui-view>\r\n    <div class="restaurantSearchContent locationSearchContainer">\r\n        <div class="titleContainer restaurantSearchTitleContainer locationSearchTitleContainer">\r\n            <h1 class="title restaurantSearchTitle locationSearchTitle">{{\'FindLocation\' | translate}}</h1>\r\n        </div>\r\n        <div class="locationContent locationSearchContent" ng-include="\'/web/app/restaurant/restaurantSearch.findBy.multipleFields.html\'"></div>\r\n    </div>\r\n\r\n    <div class="restaurantSearchContent favoriteLocationsContainer" ng-show="loggedIn && (favorites.length > 0) && (!restaurants.length > 0)">\r\n        <div class="titleContainer restaurantSearchTitleContainer favoriteLocationsTitleContainer">\r\n            <h2 class="title restaurantSearchTitle favoriteLocationsTitle">{{\'FavoriteLocations\' | translate}}</h2>\r\n        </div>\r\n\r\n        <div class="locationContent favoriteLocationsContent">\r\n            <ul class="locationList favoriteLocationsList">\r\n                <li class="locationListItem favoriteLocationsListItem" ng-repeat="restaurant in favorites">\r\n                    <div class="locationContainer favoriteLocationsLocationContainer" ng-include="\'/web/app/restaurant/restaurant.display.html\'"></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="restaurantSearchContent recentLocationsContainer" ng-show="loggedIn && (recent.length > 0) && (!restaurants.length > 0)">\r\n        <div class="titleContainer restaurantSearchTitleContainer recentLocationsTitleContainer">\r\n            <h2 class="title restaurantSearchTitle recentLocationsTitle">{{\'RecentLocations\' | translate}}</h2>\r\n        </div>\r\n\r\n        <div class="locationContent recentLocationsContent">\r\n            <ul class="locationList recentLocationsList">\r\n                <li class="locationListItem recentLocationsListItem" ng-repeat="restaurant in recent">\r\n                    <div class="locationContainer recentLocationsLocationContainer" ng-include="\'/web/app/restaurant/restaurant.display.html\'"></div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div register-teaser></div>\r\n</div>\r\n'),$templateCache.put("/web/app/_2.0/_directives/addressAutoComplete/addressAutoComplete2View.html",'    <div class="addressAutoComplete2">\r\n\r\n        <div class="errorContainer formErrorContainer addressAutoCommpleteFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n        <div class="inputContainer textInputContainer">\r\n            <label for="address_auto_complete" class="inputText" alt-content="{{\'Delivery_Address_Label\' | translate}} {{\'ADA_Required_Label\' | translate}}" main-content="{{\'DeliveryLocation\' | translate}} {{\'ADA_Required_Label\' | translate}}">\r\n            </label>\r\n            <span class="input textInput">\r\n                <input type="text" floating-label name="address_auto_complete" id="address_auto_complete" allow-pattern="([0-9]|[A-Z]|\\s)" maxlength="100" placeholder="" ng-model="address.full_address" ng-change="address.placeChanged = false" required>\r\n            </span>\r\n        </div>\r\n        <div class="delivery-disclaimer-text">{{\'delivery-disclaimer\' | translate }}</div>\r\n        <div class="additional-address">\r\n            <div class="inputContainer textInputContainer override-margin-bottom">\r\n                <label for="additional_instructions" class="inputText" alt-content="{{\'Additional_Instructions_Label\' | translate}} {{\'ADA_Optional_Label\' | translate}}" main-content="{{\'Additional_Instructions\' | translate}} {{\'ADA_Optional_Label\' | translate}}">\r\n                </label>\r\n                <span class="input textInput">\r\n                    <input type="text" floating-label name="additional_instructions" id="additional_instructions" maxlength="75" allow-pattern="([0-9]|[A-Z]|\\s)" placeholder="" ng-model="address.address2">\r\n                </span>\r\n            </div>\r\n            <div class="actionsContainer osDeliveryAddressActionsContainer">\r\n                <button class="saveAction osDeliveryAddressEditSaveAction" type="submit" ng-click="handleClick()">\r\n                    <span>{{\'Use_This_Address\' | translate}}</span>\r\n                </button>\r\n                <button class="cancelAction osDeliveryAddressEditCancelAction" ng-click="cancel()" ng-if="showCancel">\r\n                    <span>{{\'Cancel\' | translate}}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n'),$templateCache.put("/web/app/_2.0/_directives/addressAutoComplete/multiLineAddressView.html",'<div>\r\n    <div class="addressEditContainer osDeliveryAddressEditContainer" ng-include="\'/web/app/address/address.edit.fields.html\'"></div>\r\n    <div class="actionsContainer osDeliveryAddressActionsContainer">\r\n        <button class="saveAction osDeliveryAddressEditSaveAction" type="submit" ng-disabled="disableSave" ng-click="save()">\r\n            <span>{{\'Save\' | translate}}</span>\r\n        </button>\r\n        <button class="cancelAction osDeliveryAddressEditCancelAction" ng-click="cancel()" ng-if="showCancel">\r\n            <span>{{\'Cancel\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("/web/app/_2.0/_directives/deliveryAddressList/deliveryAddressListView.html",'<div ng-form="savedAddressListForm">\r\n    <div class="titleContainer" ng-if="displaySavedAddresses">\r\n        <h2 class="title">{{\'Choose_Saved_Address_Title\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="errorContainer formErrorContainer deliveryAddressError" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n    <div class="saved-address-list">\r\n        <div class="savedAddress" ng-repeat="address in deliveryAddresses">\r\n            <div class="formElements saveAddressFormElements">\r\n                <label class="savedAddressLabel">{{address.displayValue}}</label>\r\n            </div>\r\n            <div class="actionsContainer osDeliveryAddressListItemremoveAction">\r\n                <button class="removeAction removeAddressAction" title="{{\'DeleteAddress\' | translate}}" ono-confirm="removeAddress(address)" ono-confirm-title="{{\'RemoveAddress_ConfirmTitle\' | translate}}" ono-confirm-message="{{\'RemoveAddress_ConfirmMessage\' | translate}}" type="button" aria-label="{{\'Delete_Address\' | translate}} {{address.displayValue}}">\r\n                    <span>{{\'Delete_Address\' | translate}}</span>\r\n                </button>\r\n                 <button class="osDeliveryAddressListItemaddAction" ng-click="useDeliveryAddress(address.id)" type="button" aria-label="{{\'Use_This_Address\' | translate}}">\r\n                    <span>{{\'Use_This_Address\' | translate}}</span>\r\n                </button>\r\n               \r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/_2.0/_directives/locationSearch/locationSearch2View.html",'<div class="form restaurantSearchForm restaurantSearchFindBySingleSearchField" ng-form="searchForm">\r\n    <div class="errorContainer formErrorContainer restaurantSearchFormErrorContainer findBySingleSearchFieldFormErrorContainer" ono-form-errors ng-if="$formErrors.length > 0"></div>\r\n\r\n    <div class="formElements restaurantSearchFormElements findBySingleSearchFieldFormElements">\r\n        <div class="inputContainer textInputContainer singleSearchFieldInputContainer" ng-class="{autoComplete: uiAutocomplete}">\r\n            <label for="restaurant_search_single_field_search_text" class="inputText bringToFront">{{\'ZipOrCityState\' | translate}} (Required)</label>\r\n            <span class="input textInput singleSearchFieldInput">\r\n                <input name="searchText" floating-label id="restaurant_search_single_field_search_text" type="search" ng-model="search.text" allow-pattern="([0-9]|[A-Z]|[-,. ])" maxlength="255" tabindex="0" placeholder="" required>\r\n            </span>\r\n        </div>\r\n        <span class="actionsContainer singleSearchFieldGeolocateActionsContainer">\r\n            <button type="button" class="nearbyLocationsSearchAction singleSearchFieldNearbyAction" aria-label="{{\'SearchNearby\' | translate}}" ng-click="getByLocation()">\r\n                <span class="visuallyHidden">{{\'SearchNearby\' | translate}}</span>\r\n            </button>\r\n        </span>\r\n    </div>\r\n\r\n    <div class="actionsContainer formActionsContainer restaurantSearchFormActionsContainer findBySingleSearchFieldFormActionsContainer">\r\n        <button class="searchAction singleSearchFieldSearchAction trk-restaurantsearchsinglesearchfield" type="button" ng-click="searchForm.$submit()">\r\n            <span>{{\'Search\' | translate}}</span>\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/_2.0/_directives/registerTeaser/registerTeaser.html",'<div class="register-cta" ng-if="!loggedIn && !featureFlags.UserAccount.hideAccounts">\r\n    <div class="obs-logo">\r\n        <span class="logo-container" aria-label="Outback Steakhouse - Home">\r\n            <span class="glf glf-logo_outback"></span>\r\n        </span>\r\n    </div>\r\n    <h3>{{\'Teaser_text\' | translate}} <a class="experience-info" tabindex="0" ng-click="showDialog(\'account.tooltipInformation\')"></a></h3>\r\n    <p>{{\'Teaser_Information_text\' | translate}}</p>\r\n    <div class="nav-register">\r\n      <h3><a ng-click="showDialog(\'account.register\')" tabindex="0" aria-label="Create Account - Opens Dialog" href="#register" prevent-redirect>{{\'Dialog_Register\' | translate}}</a></h3>\r\n    </div>\r\n</div>'),$templateCache.put("/web/app/_2.0/_directives/registerTeaser/tooltipInformation.html","\r\n<div class=\"tooltip-information\">\r\n    <p>{{'outback_steackhouse_account_text' | translate}}</p>\r\n    <ul ng-bind-html=\"'register_tooltip_information_message' | translate\">\r\n    </ul>\r\n    <h3>{{'Make_Your_Checkout_Text' | translate}}</h3>\r\n</div>"),$templateCache.put("/web/app/_2.0/_directives/stickyCheckoutButton/stickyCheckoutButton.html",'<div ng-if="showCheckout()">\r\n    <button ng-click="proceedToCheckout();" class="stickyCheckoutButton">\r\n        <span>{{\'Proceed_Checkout\' | translate}}</span>\r\n    </button>\r\n</div>'),$templateCache.put("/web/app/_lib/angular-local-storage/demo/demo.html",'<!doctype html>\r\n<html lang="en">\r\n<meta charset="utf-8">\r\n<title>Demo of Angular Local Storage Module</title>\r\n<meta name="description" content="Demo of Angular Local Storage Module">\r\n<meta name="author" content="Gregory Pike">\r\n\x3c!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame --\x3e\r\n<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\r\n\x3c!-- Place favicon.ico and apple-touch-icon.png in the root of your domain and delete these references --\x3e\r\n\x3c!--[if IE]><![endif]--\x3e\x3c!-- Used to speed CSS loading --\x3e\r\n<link rel="stylesheet" href="http://necolas.github.com/normalize.css/2.0.1/normalize.css">\r\n<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css" rel="stylesheet">\r\n<link href="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css" rel="stylesheet">\r\n<link href="demo-style.css" rel="stylesheet">\r\n    \r\n\x3c!--[if lt IE 9]>\r\n<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"><\/script>\r\n<![endif]--\x3e\r\n\r\n<body onload="prettyPrint()">\r\n\r\n\x3c!-- BEGIN DEMO --\x3e\r\n\r\n<div class="container" ng-app="demoModule">\r\n\r\n  <div class="navbar navbar-inverse">\r\n    <div class="navbar-inner">\r\n      <a class="brand" href="#">Angular Local Storage</a>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="hero-unit">\r\n    \r\n    <h1>Give it a try</h1>\r\n\r\n    <div ng-controller="DemoCtrl">\r\n      <p><input type="text" ng-model="localStorageDemo" placeholder="Start typing..."></p>\r\n\r\n      <blockquote class="well" ng-show="localStorageDemoValue">\r\n        <p>{{localStorageDemoValue}}</p>\r\n        <small>{{storageType}} value</small>\r\n      </blockquote>\r\n    </div>\r\n\r\n    <p>The Angular Local Storage Module is meant to be a plug-and-play Angular module for accessing the browsers Local Storage API.</p>\r\n\r\n  </div>\r\n\r\n  <p>Angular Local Storage offers you access to the browser local storage API through Angular but also allows has the following features:</p>\r\n\r\n  <ul>\r\n    <li>Control local storage access through key prefices (e.g. "myApp.keyName")</li>\r\n    <li>Checks browser support and falls back to cookies for antiquated browsers</li>\r\n    <li>Allows programmatic access to remove all keys for a given app</li>\r\n  </ul>\r\n\r\n  <h3>Usage</h3>\r\n\r\n  <h6>Dependencies:</h6>\r\n  <ul>\r\n    <li><code>AngularJS</code> <small><a href="http://angularjs.org/">http://angularjs.org/</a></small></li>\r\n    <li><code>Angular Local Storage Module</code> <small><a href="../angular-local-storage.js">angular-local-storage.js</a></small></li>\r\n  </ul>\r\n\r\n  <h6>JS Example</h6>\r\n  <pre class="prettyprint lang-js">\r\nvar YourCtrl = function($scope, localStorageService, ...) {\r\n  // To add to local storage\r\n  localStorageService.add(\'localStorageKey\',\'Add this!\');\r\n  // Read that value back\r\n  var value = localStorageService.get(\'localStorageKey\');\r\n  // You can also play with cookies the same way\r\n  localStorageService.cookie.add(\'localStorageKey\',\'I am a cookie value now\');\r\n}</pre>\r\n\r\n  <h3>API Access</h3>\r\n\r\n  <table class="table table-striped table-bordered">\r\n    <thead>\r\n      <tr>\r\n        <th>Call</th>\r\n        <th>Arguments</th>\r\n        <th>Action</th>\r\n        <th>Returns</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td><code>isSupported</code></td>\r\n        <td class="muted"><small>n/a</small></td>\r\n        <td>Checks the browsers support for local storage</td>\r\n        <td>Boolean for success</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>add</code></td>\r\n        <td><small>key, value</small></td>\r\n        <td>Adds a key-value pair to the browser local storage</td>\r\n        <td>Boolean for success</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>get</code></td>\r\n        <td><small>key</small></td>\r\n        <td>Gets a value from local storage</td>\r\n        <td>Stored value</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>remove</code></td>\r\n        <td><small>key</small></td>\r\n        <td>Removes a key-value pair from the browser local storage</td>\r\n        <td>Boolean for success</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>clearAll</code></td>\r\n        <td class="muted">n/a</td>\r\n        <td><span class="label label-warning">Warning</span> Removes all local storage key-value pairs for this app. It will optionally take a string, which is converted to a regular expression, and then clears keys based on that regular expression.</td>\r\n        <td>Boolean for success</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>cookie</code></td>\r\n        <td><small>add | get | remove | clearAll</small></td>\r\n        <td>Each function within cookie uses the same arguments as the coresponding local storage functions</td>\r\n        <td>n/a</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n</div>\r\n\r\n\x3c!-- END DEMO --\x3e\r\n    \r\n\x3c!-- JAVASCRIPT --\x3e\r\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"><\/script>\r\n<script src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"><\/script>\r\n<script src="../angular-local-storage.min.js"><\/script>\r\n<script src="demo-app.js"><\/script>\r\n</body>\r\n</html>\r\n'),$templateCache.put("/web/app/_lib/big/doc/bigAPI.html",'<!DOCTYPE HTML>\r\n<html>\r\n<head>\r\n  <meta charset="utf-8">\r\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\r\n  <meta name="Author" content="M Mclaughlin">\r\n  <title>big.js API</title>\r\n  <style>\r\nhtml{font-family:sans-serif;font-size:100%}\r\nbody{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;\r\n  line-height:1.65em;background:#fefff5;color:#000;min-height:100%;margin:0}\r\n.nav{background:#fff;position:fixed;top:0;bottom:0;left:0;width:130px;\r\n  overflow-y:auto;padding:15px 0 30px 20px; border-right: 1px solid #69d2e7}\r\ndiv.container{width:700px;margin:30px 0 50px 190px}\r\np{margin:0 0 1em;width:700px}\r\npre,ul{margin:1em 0}\r\nh1,h2,h3,h4,h5{margin:0;padding:1.5em 0 0}\r\nh1,h2{padding:.75em 0 1em}\r\nh1{font-size:2.75em;color:#fa6900}\r\nh2{font-size:2.25em;color:#fa6900}\r\nh3{font-size:1.75em;color:#69d2e7}\r\nh4{font-size:1.75em;color:#fa6900;padding-bottom:.75em}\r\nh5{font-size:1.2em;padding-bottom:.3em}\r\nh6{font-size:1.1em;margin:0;padding:0.5em 0}\r\ndd dt{font-size:1.2em}\r\ndt{padding-top:.5em}\r\ndd{padding-top:.35em}\r\nb{font-weight:700}\r\na,a:visited{color:#444;text-decoration:none}\r\na:active,a:hover{outline:0;color:#000}\r\na:hover{text-decoration:underline}\r\n.nav a,.nav b,.nav a:visited{display:block;color:#fa6900;font-weight:700;\r\n  margin-top:15px}\r\n.nav b{color:#69d2e7;margin-top:20px;cursor:default;width:auto}\r\nul{list-style-type:none;padding:0 0 0 20px}\r\n.nav ul{line-height:14px;padding-left:0;margin:5px 0 0}\r\n.nav ul a,.nav ul a:visited{display:inline;color:#000;font-family:Verdana,\r\n  Geneva,sans-serif;font-size:11px;font-weight:400;margin:0}\r\n.inset,ul.inset{margin-left:20px}\r\ncode.inset{font-size:.9em}\r\n.nav li{cursor:pointer;width:auto;margin:0 0 3px}\r\nspan.alias{font-style:italic;margin-left:20px}\r\ntable{border-collapse:collapse;border-spacing:0;border:2px solid #a7dbd8;\r\n  margin:1.75em 0;padding:0}\r\ntd,th{text-align:left;margin:0;padding:2px 10px;border:1px dotted #a7dbd8}\r\nth{border-top:2px solid #a7dbd8;border-bottom:2px solid #a7dbd8;color:#f38630}\r\npre{background:#fff;white-space:pre-wrap;word-wrap:break-word;\r\n  border-left:5px solid #a7dbd8;padding:1px 0 1px 15px;margin:1.2em 0}\r\ncode,pre{font-family:Monaco,Consolas,"Lucida Console",monospace;\r\n  font-weight:400}\r\n.end{margin-bottom:25px}\r\n.nav-title{color:#fa6900}\r\n.centre{text-align:center}\r\n.error{color:#f00}\r\n  </style>\r\n</head>\r\n<body>\r\n\r\n  <div class="nav">\r\n\r\n    <a class="nav-title" href="#">big.js</a>\r\n\r\n    <b> CONSTRUCTOR </b>\r\n    <ul>\r\n      <li><a href="#big">Big</a></li>\r\n    </ul>\r\n\r\n    <a href="#constructor-properties">Properties</a>\r\n    <ul>\r\n      <li><a href="#dp">DP</a></li>\r\n      <li><a href="#rm">RM</a></li>\r\n    </ul>\r\n\r\n    <b> INSTANCE </b>\r\n\r\n    <a href="#prototype-methods">Methods</a>\r\n    <ul>\r\n      <li><a href="#abs">abs</a></li>\r\n      <li><a href="#cmp">cmp</a></li>\r\n      <li><a href="#div">div</a></li>\r\n      <li><a href="#eq">eq</a></li>\r\n      <li><a href="#gt">gt</a></li>\r\n      <li><a href="#gte">gte</a></li>\r\n      <li><a href="#lt">lt</a></li>\r\n      <li><a href="#lte">lte</a></li>\r\n      <li><a href="#minus">minus</a></li>\r\n      <li><a href="#mod">mod</a></li>\r\n      <li><a href="#plus">plus</a></li>\r\n      <li><a href="#pow">pow</a></li>\r\n      <li><a href="#round">round</a></li>\r\n      <li><a href="#sqrt">sqrt</a></li>\r\n      <li><a href="#times">times</a></li>\r\n      <li><a href="#toE">toExponential</a></li>\r\n      <li><a href="#toF">toFixed</a></li>\r\n      <li><a href="#toP">toPrecision</a></li>\r\n      <li><a href="#toS">toString</a></li>\r\n      <li><a href="#valueOf">valueOf</a></li>\r\n      <li><a href="#toJSON">toJSON</a></li>\r\n    </ul>\r\n\r\n    <a href="#instance-properties">Properties</a>\r\n    <ul>\r\n      <li><a href="#coefficient">c : coefficient</a></li>\r\n      <li><a href="#exponent">e : exponent</a></li>\r\n      <li><a href="#sign">s : sign</a></li>\r\n    </ul>\r\n\r\n    <a href="#Errors">Errors</a>\r\n\r\n    <a class="end" href="#faq">FAQ</a>\r\n\r\n  </div>\r\n\r\n  <div class="container">\r\n\r\n    <h1>big.js</h1>\r\n\r\n    <p>\r\n      A small, fast, easy-to-use library for arbitrary-precision decimal\r\n      arithmetic.\r\n    </p>\r\n\r\n    <p>\r\n      <a href="https://github.com/MikeMcl/big.js/">Hosted on GitHub</a>.\r\n    </p>\r\n\r\n\r\n    <h2>API</h2>\r\n\r\n    <p>\r\n      In all examples below, <code>var</code> and semicolons are not shown, and\r\n      if a commented-out value is in quotes it means <code>toString</code> has\r\n      been called on the preceding expression.\r\n    </p>\r\n\r\n\r\n\r\n    <h3>CONSTRUCTOR</h3>\r\n\r\n    <h5 id="big">\r\n      Big<code class="inset">Big( value ) &rArr; <i>Big</i></code>\r\n    </h5>\r\n    <dl>\r\n      <dt><code>value</code></dt>\r\n      <dd>\r\n        <i>number|string|Big</i>\r\n      </dd>\r\n      <dd>\r\n        A decimal value.\r\n      </dd>\r\n      <dd>\r\n        String values may be in exponential, as well as normal (non-exponential)\r\n        notation.\r\n      </dd>\r\n      <dd>\r\n        There is no limit to the number of digits of a <em>string</em> value\r\n        (other than that of Javascript\'s maximum array size), but the largest\r\n        recommended exponent magnitude is 1e+6.\r\n      </dd>\r\n      <dd>\r\n        <code>Infinity</code>, <code>NaN</code> and hexadecimal literal\r\n        strings, e.g. \'0xff\', are <u>not</u> valid.<br>\r\n        String values in octal literal form will be interpreted as decimals,\r\n        e.g. \'011\' is 11, not 9.\r\n      </dd>\r\n    </dl>\r\n    <p>Returns a new instance of a Big number object.</p>\r\n    <p>\r\n      Throws <code class="error">NaN</code> on an invalid <code>value</code>.\r\n    </p>\r\n    <pre>\r\nx = new Big(9)                       // \'9\'\r\ny = new Big(x)                       // \'9\'\r\nBig(435.345)                         // \'new\' is optional\r\nnew Big(\'5032485723458348569331745.33434346346912144534543\')\r\nnew Big(\'4.321e+4\')                  // \'43210\'\r\nnew Big(\'-735.0918e-430\')            // \'-7.350918e-428\'</pre>\r\n\r\n\r\n\r\n    <h4 id="constructor-properties">Properties</h4>\r\n\r\n    <h5 id="dp">DP</h5>\r\n    <p>\r\n      <i>number</i> : integer, 0 to 1e+6 inclusive<br>\r\n      Default value: <code>20</code>\r\n    </p>\r\n    <p>\r\n      The <u>maximum</u> number of decimal places of the results of operations\r\n      involving division.<br>\r\n      It is relevant only to the <code>div</code> and <code>sqrt</code> methods,\r\n      and the <code>pow</code> method when the exponent is negative.\r\n    </p>\r\n    <p>\r\n      The value will be checked for validity when one of the above methods is\r\n      called.<br>\r\n      <code class="error">!Big.DP!</code> will be thrown if the value is found to be invalid.\r\n    </p>\r\n    <pre>Big.DP = 40</pre>\r\n\r\n\r\n\r\n    <h5 id="rm">RM</h5>\r\n    <p>\r\n      <i>number</i> : 0, 1, 2 or 3<br>\r\n      Default value: <code>1</code>\r\n    </p>\r\n    <p>\r\n      The rounding mode used in the above operations and by\r\n      <a href="#round"><code>round</code></a>,\r\n      <a href="#toE"><code>toExponential</code></a>,\r\n      <a href="#toF"><code>toFixed</code></a> and\r\n      <a href="#toP"><code>toPrecision</code></a>.\r\n    </p>\r\n    <table>\r\n      <tr>\r\n        <th>Value</th>\r\n        <th>Description</th>\r\n        <th>BigDecimal equivalent</th>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">0</td>\r\n        <td>\r\n          Rounds towards zero.<br>\r\n          I.e. truncate, no rounding.\r\n        </td>\r\n        <td id="round-down">ROUND_DOWN</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">1</td>\r\n        <td>\r\n          Rounds towards nearest neighbour.<br>\r\n          If equidistant, rounds away from zero.\r\n        </td>\r\n        <td id="round-half-up">ROUND_HALF_UP</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">2</td>\r\n        <td>\r\n          Rounds towards nearest neighbour.<br>\r\n          If equidistant, rounds towards even neighbour.\r\n        </td>\r\n        <td id="round-half-even">ROUND_HALF_EVEN</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">3</td>\r\n        <td>Rounds away from zero.</td>\r\n        <td id="round-up">ROUND_UP</td>\r\n      </tr>\r\n    </table>\r\n    <p>\r\n      The value will be checked for validity when one of the above methods is\r\n      called.<br>\r\n      <code class="error">!Big.RM!</code> will be thrown if the value is found to be invalid.\r\n    </p>\r\n    <pre>Big.RM = 0</pre>\r\n\r\n\r\n\r\n    <h3>INSTANCE</h3>\r\n\r\n    <h4 id="prototype-methods">Methods</h4>\r\n    <p>\r\n      The methods inherited by a Big number instance from its constructor\'s\r\n      prototype object.\r\n    </p>\r\n    <p>\r\n      A Big number is immutable in the sense that it is not changed by its\r\n      methods.\r\n    </p>\r\n\r\n\r\n\r\n    <h5 id="abs">abs<code class="inset">.abs() &rArr; <i>Big</i></code></h5>\r\n    <p>\r\n      Returns a Big number whose value is the absolute value, i.e. the\r\n      magnitude, of this Big number.\r\n    </p>\r\n    <pre>\r\nx = new Big(-0.8)\r\nx.abs()                     // \'0.8\'</pre>\r\n\r\n\r\n\r\n    <h5 id="cmp">\r\n      cmp<code class="inset">.cmp( n ) &rArr; <i>number</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i><br></p>\r\n    <table>\r\n      <tr>\r\n        <th>Returns</th>\r\n        <th colspan="2">&nbsp;</th>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">1</td>\r\n        <td>\r\n          If the value of this Big number is greater than the value of <code>n</code>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">-1</td>\r\n        <td>\r\n          If the value of this Big number is less than the value of <code>n</code>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre">0</td>\r\n        <td>If this Big number and <code>n</code> have the same value</td>\r\n      </tr>\r\n    </table>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\nx = new Big(6)\r\ny = new Big(5)\r\nx.cmp(y)                   // 1\r\ny.cmp(x.minus(1))          // 0</pre>\r\n\r\n\r\n\r\n    <h5 id="div">div<code class="inset">.div(n) &rArr; <i>Big</i></code></h5>\r\n    <p><code>n</code> : <i>number|string|Big</i><br></p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number divided\r\n      by <code>n</code>.\r\n    </p>\r\n    <p>\r\n      If the result has more fraction digits than is specified by\r\n      <a href="#dp"><code>Big.DP</code></a>, it will be rounded to\r\n      <a href="#dp"><code>Big.DP</code></a> decimal places using rounding mode\r\n      <a href="#rm"><code>Big.RM</code></a>.\r\n    </p>\r\n    <p>\r\n      Throws <code class="error">NaN</code> if <code>n</code> is invalid.<br>\r\n      Throws <code class="error">&plusmn;Infinity</code> on division by zero.<br>\r\n      Throws <code class="error">NaN</code> on division of zero by zero.\r\n    </p>\r\n    <pre>\r\nx = new Big(355)\r\ny = new Big(113)\r\nx.div(y)                   // \'3.14159292035398230088\'\r\nBig.DP = 2\r\nx.div(y)                   // \'3.14\'\r\nx.div(5)                   // \'71\'</pre>\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <h5 id="eq">eq<code class="inset">.eq(n) &rArr; <i>boolean</i></code></h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns <code>true</code> if the value of this Big equals the value\r\n      of <code>n</code>, otherwise returns <code>false</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0 === 1e-324               // true\r\nx = new Big(0)\r\nx.eq(\'1e-324\')             // false\r\nBig(-0).eq(x)              // true  ( -0 === 0 )</pre>\r\n\r\n\r\n\r\n    <h5 id="gt">\r\n      gt<code class="inset">.gt(n) &rArr; <i>boolean</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns <code>true</code> if the value of this Big is greater than\r\n      the value of <code>n</code>, otherwise returns <code>false</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.1 &gt; 0.3 - 0.2              // true\r\nx = new Big(0.1)\r\nx.gt(Big(0.3).minus(0.2))    // false\r\nBig(0).gt(x)                 // false</pre>\r\n\r\n\r\n\r\n    <h5 id="gte">\r\n      gte<code class="inset">.gte(n) &rArr; <i>boolean</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns <code>true</code> if the value of this Big is greater than\r\n      or equal to the value of <code>n</code>, otherwise returns\r\n      <code>false</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.3 - 0.2 &gt;= 0.1               // false\r\nx = new Big(0.3).minus(0.2)\r\nx.gte(0.1)                     // true\r\nBig(1).gte(x)                  // true</pre>\r\n\r\n\r\n\r\n    <h5 id="lt">\r\n      lt<code class="inset">.lt(n) &rArr; <i>boolean</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns <code>true</code> if the value of this Big is less than the\r\n      value of <code>n</code>, otherwise returns <code>false</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.3 - 0.2 &lt; 0.1                // true\r\nx = new Big(0.3).minus(0.2)\r\nx.lt(0.1)                      // false\r\nBig(0).lt(x)                   // true</pre>\r\n\r\n\r\n\r\n    <h5 id="lte">\r\n      lte<code class="inset">.lte(n) &rArr; <i>boolean</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns <code>true</code> if the value of this Big is less than or\r\n      equal to the value of <code>n</code>, otherwise returns\r\n      <code>false</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.1 &lt;= 0.3 - 0.2               // false\r\nx = new Big(0.1)\r\nx.lte(Big(0.3).minus(0.2))     // true\r\nBig(-1).lte(x)                 // true</pre>\r\n\r\n\r\n\r\n    <h5 id="minus">\r\n      minus<code class="inset">.minus(n) &rArr; <i>Big</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number minus\r\n      <code>n</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.3 - 0.1                  // 0.19999999999999998\r\nx = new Big(0.3)\r\nx.minus(0.1)               // \'0.2\'</pre>\r\n\r\n\r\n\r\n    <h5 id="mod">mod<code class="inset">.mod(n) &rArr; <i>Big</i></code></h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number modulo\r\n      <code>n</code>, i.e. the integer remainder of dividing this Big number by\r\n      <code>n</code>.\r\n    </p>\r\n    <p>\r\n      The result will have the same sign as this Big number, and it will match\r\n      that of Javascript\'s % operator (within the limits of its precision) and\r\n      BigDecimal\'s remainder method.\r\n    </p>\r\n     <p>Throws <code class="error">NaN</code> if <code>n</code> is negative or otherwise invalid.</p>\r\n    <pre>\r\n1 % 0.9                    // 0.09999999999999998\r\nx = new Big(1)\r\nx.mod(0.9)                 // \'0.1\'</pre>\r\n\r\n\r\n\r\n    <h5 id="plus">\r\n      plus<code class="inset">.plus(n) &rArr; <i>Big</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i></p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number plus\r\n      <code>n</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.1 + 0.2                  // 0.30000000000000004\r\nx = new Big(0.1)\r\ny = x.plus(0.2)            // \'0.3\'\r\nBig(0.7).plus(x).plus(y)   // \'1\'</pre>\r\n\r\n\r\n\r\n     <h5 id="pow">pow<code class="inset">.pow( exp ) &rArr; <i>Big</i></code>\r\n    </h5>\r\n    <p>\r\n      <code>exp</code> : <i>number</i> : integer, -1e+6 to 1e+6 inclusive\r\n    </p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number raised to\r\n      the power <code>exp</code>.\r\n    </p>\r\n    <p>\r\n      If <code>exp</code> is negative and the result has more fraction digits\r\n      than is specified by <a href="#dp"><code>Big.DP</code></a>, it will be\r\n      rounded to <a href="#dp"><code>Big.DP</code></a> decimal places using\r\n      rounding mode <a href="#rm"><code>Big.RM</code></a>.\r\n    </p>\r\n    <p>Throws <code class="error">!pow!</code> if <code>exp</code> is invalid.</p>\r\n    <p>\r\n      Note: High value exponents may cause this method to be slow to return.\r\n    </p>\r\n    <pre>\r\nMath.pow(0.7, 2)           // 0.48999999999999994\r\nx = new Big(0.7)\r\nx.pow(2)                   // \'0.49\'\r\nBig.DP = 20\r\nBig(3).pow(-2)             // \'0.11111111111111111111\'\r\n\r\nnew Big(123.456).pow(1000).toString().length     // 5099\r\nnew Big(2).pow(1e+6)       // Time taken (Node.js): 9 minutes 34 secs.</pre>\r\n\r\n\r\n\r\n    <h5 id="round">\r\n      round<code class="inset">.round( [dp [, rm]] )\r\n      &rArr; <i>Big</i></code>\r\n    </h5>\r\n    <p>\r\n      <code>dp</code> : <i>number</i> : integer, 0 to 1e+6 inclusive\r\n      <br>\r\n      <code>rm</code> : <i>number</i> : 0, 1 or 2\r\n    </p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number rounded\r\n      using rounding mode <code>rm</code> to a maximum of <code>dp</code>\r\n      decimal places.\r\n    </p>\r\n    <p>\r\n      if <code>dp</code> is omitted or is <code>null</code> or undefined, the\r\n      return value is <code>n</code> rounded to a whole number.<br>\r\n      if <code>rm</code> is omitted or is <code>null</code> or\r\n      undefined, the current <a href="#rm"><code>Big.RM</code></a> setting is\r\n      used.\r\n    </p>\r\n    <p>\r\n      Throws <code class="error">!round!</code> if <code>dp</code> is invalid.<br>\r\n      Throws <code class="error">!Big.RM!</code> if <code>rm</code> is invalid.\r\n    </p>\r\n    <pre>\r\nx = 123.45\r\nMath.round(x)              // 123\r\ny = new Big(x)\r\ny.round()                  // \'123\'\r\ny.round(2)                 // \'123.45\'\r\ny.round(10)                // \'123.45\'\r\ny.round(1, 0)              // \'123.4\'\r\ny.round(1, 1)              // \'123.5\'\r\ny.round(1, 2)              // \'123.4\'\r\ny.round(1, 3)              // \'123.5\'\r\ny                          // \'123.45\'</pre>\r\n\r\n\r\n\r\n    <h5 id="sqrt">sqrt<code class="inset">.sqrt() &rArr; <i>Big</i></code></h5>\r\n    <p>\r\n      Returns a Big number whose value is the square root of this Big number.\r\n    </p>\r\n    <p>\r\n      If the result has more fraction digits than is specified by\r\n      <a href="#dp"><code>Big.DP</code></a>, it will be rounded to\r\n      <a href="#dp"><code>Big.DP</code></a> decimal places using rounding mode\r\n      <a href="#rm"><code>Big.RM</code></a>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if this Big number is negative.</p>\r\n    <pre>\r\nx = new Big(16)\r\nx.sqrt()                   // \'4\'\r\ny = new Big(3)\r\ny.sqrt()                   // \'1.73205080756887729353\'</pre>\r\n\r\n\r\n\r\n    <h5 id="times">\r\n      times<code class="inset">.times(n) &rArr; <i>Big</i></code>\r\n    </h5>\r\n    <p><code>n</code> : <i>number|string|Big</i><br></p>\r\n    <p>\r\n      Returns a Big number whose value is the value of this Big number times\r\n      <code>n</code>.\r\n    </p>\r\n    <p>Throws <code class="error">NaN</code> if <code>n</code> is invalid.</p>\r\n    <pre>\r\n0.6 * 3                    // 1.7999999999999998\r\nx = new Big(0.6)\r\ny = x.times(3)             // \'1.8\'\r\nBig(\'7e+500\').times(y)     // \'1.26e+501\'</pre>\r\n\r\n\r\n\r\n    <h5 id="toE">\r\n      toExponential<code class="inset">.toExponential( [dp] ) &rArr;\r\n      <i>string</i></code>\r\n    </h5>\r\n    <p><code>dp</code> : <i>number</i> : integer, 0 to 1e+6 inclusive</p>\r\n    <p>\r\n      Returns a string representing the value of this Big number in exponential\r\n      notation to a fixed number of decimal places <code>dp</code>.\r\n    </p>\r\n    <p>\r\n      If the value of this Big number in exponential notation has more digits to\r\n      the right of the decimal point than is specified by <code>dp</code>, the\r\n      return value will be rounded to <code>dp</code> decimal places using\r\n      rounding mode <a href="#rm"><code>Big.RM</code></a>.\r\n    </p>\r\n    <p>\r\n      If the value of this Big number in exponential notation has fewer digits\r\n      to the right of the decimal point than is specified by <code>dp</code>,\r\n      the return value will be appended with zeros accordingly.\r\n    </p>\r\n    <p>\r\n      If <code>dp</code> is omitted, or is <code>null</code> or undefined, the\r\n      number of digits after the decimal point defaults to the minimum number of\r\n      digits necessary to represent the value exactly.\r\n    </p>\r\n    <p>Throws <code class="error">!toExp!</code> if <code>dp</code> is invalid.</p>\r\n    <pre>\r\nx = 45.6\r\ny = new Big(x)\r\nx.toExponential()          // \'4.56e+1\'\r\ny.toExponential()          // \'4.56e+1\'\r\nx.toExponential(0)         // \'5e+1\'\r\ny.toExponential(0)         // \'5e+1\'\r\nx.toExponential(1)         // \'4.6e+1\'\r\ny.toExponential(1)         // \'4.6e+1\'\r\nx.toExponential(3)         // \'4.560e+1\'\r\ny.toExponential(3)         // \'4.560e+1\'</pre>\r\n\r\n\r\n\r\n    <h5 id="toF">\r\n      toFixed<code class="inset">.toFixed( [dp] ) &rArr;\r\n      <i>string</i></code>\r\n    </h5>\r\n    <p>\r\n      <code>dp</code> : <i>number</i> : integer, 0 to 1e+6 inclusive\r\n    </p>\r\n    <p>\r\n      Returns a string representing the value of this Big number in normal\r\n      notation to a fixed number of decimal places <code>dp</code>.\r\n    </p>\r\n    <p>\r\n      If the value of this Big number in normal notation has more digits to the\r\n      right of the decimal point than is specified by <code>dp</code>, the\r\n      return value will be rounded to <code>dp</code> decimal places using\r\n      rounding mode <a href="#rm"><code>Big.RM</code></a>.\r\n    </p>\r\n    <p>\r\n      If the value of this Big number in normal notation has fewer fraction\r\n      digits then is specified by <code>dp</code>, the return value will be\r\n      appended with zeros accordingly.\r\n    </p>\r\n    <p>\r\n      Unlike <code>Number.prototype.toFixed</code>, which returns\r\n      exponential notation if a number is greater or equal to 10<sup>21</sup>,\r\n      this method will always return normal notation.\r\n    </p>\r\n    <p>\r\n      If <code>dp</code> is omitted, or is <code>null</code> or\r\n      undefined, then the return value is simply the value in normal notation.\r\n      This is  also unlike <code>Number.prototype.toFixed</code>, which returns\r\n      the value to zero decimal places.\r\n    </p>\r\n    <p>Throws <code class="error">!toFix!</code> if <code>dp</code> is invalid.</p>\r\n    <pre>\r\nx = 45.6\r\ny = new Big(x)\r\nx.toFixed()                // \'46\'\r\ny.toFixed()                // \'45.6\'\r\ny.toFixed(0)               // \'46\'\r\nx.toFixed(3)               // \'45.600\'\r\ny.toFixed(3)               // \'45.600\'</pre>\r\n\r\n\r\n\r\n    <h5 id="toP">\r\n      toPrecision<code class="inset">.toPrecision( [sd] ) &rArr;\r\n      <i>string</i></code>\r\n    </h5>\r\n    <p><code>sd</code> : <i>number</i> : integer, 1 to 1e+6 inclusive</p>\r\n    <p>\r\n      Returns a string representing the value of this Big number to the\r\n      specified number of significant digits <code>sd</code>.\r\n    </p>\r\n    <p>\r\n      If the value of this Big number has more digits than is specified by\r\n      <code>sd</code>, the return value will be rounded to <code>sd</code>\r\n      significant digits using rounding mode\r\n      <a href="#rm"><code>Big.RM</code></a>.\r\n    </p>\r\n    <p>\r\n      If the value of this Big number has fewer digits than is specified by\r\n      <code>sd</code>, the return value will be appended with zeros accordingly.\r\n    </p>\r\n    <p>\r\n      If <code>sd</code> is less than the number of digits necessary to\r\n      represent the integer part of the value in normal notation, then\r\n      exponential notation is used.\r\n    </p>\r\n    <p>\r\n      If <code>sd</code> is omitted, or is <code>null</code> or undefined, then\r\n      the return value is the same as <code>.toString()</code>.\r\n    </p>\r\n    <p>Throws <code class="error">!toPre!</code> if <code>sd</code> is invalid.</p>\r\n    <pre>\r\nx = 45.6\r\ny = new Big(x)\r\nx.toPrecision()            // \'45.6\'\r\ny.toPrecision()            // \'45.6\'\r\nx.toPrecision(1)           // \'5e+1\'\r\ny.toPrecision(1)           // \'5e+1\'\r\nx.toPrecision(5)           // \'45.600\'\r\ny.toPrecision(5)           // \'45.600\'</pre>\r\n\r\n\r\n\r\n    <h5 id="toS">\r\n      toString<code class="inset">.toString() &rArr; <i>string</i></code>\r\n    </h5>\r\n    <p>\r\n      Returns a string representing the value of this Big number.\r\n    </p>\r\n     <p>\r\n      If this Big number has a positive exponent that is equal to or greater\r\n      than 21, or a negative exponent equal to or less than -7, then exponential\r\n      notation is returned.\r\n    </p>\r\n    <p>\r\n      The point at which <code>toString</code> returns exponential rather than\r\n      normal notation can be adjusted by changing the value of\r\n      <code>TO_EXP_POS</code> and <code>TO_EXP_NEG</code> in the\r\n      EDITABLE DEFAULTS section at the top of the source code file. By default,\r\n      Big numbers correspond to Javascript\'s number type in this regard.\r\n    </p>\r\n    <pre>\r\nx = new Big(\'9.99e+20\')\r\nx.toString()               // \'999000000000000000000\'\r\ny = new Big(\'1E21\')\r\nx.toString()               // \'1e+21\'</pre>\r\n\r\n\r\n\r\n    <h5 id="valueOf">\r\n      valueOf<code class="inset">.valueOf() &rArr; <i>string</i></code>\r\n    </h5>\r\n    <p>\r\n      As <code>toString</code>.\r\n    </p>\r\n    <pre>\r\nx = new Big(\'177.7e+457\')\r\nx.valueOf()                // \'1.777e+459\'</pre>\r\n\r\n\r\n\r\n    <h5 id="toJSON">\r\n      toJSON<code class="inset">.toJSON() &rArr; <i>string</i></code>\r\n    </h5>\r\n    <p>\r\n      As <code>toString</code>.\r\n    </p>\r\n    <pre>\r\nx = new Big(\'177.7e+457\')\r\ny = new Big(235.4325)\r\nz = new Big(\'0.0098074\')\r\nstr = JSON.stringify( [x, y, z] )\r\n\r\nJSON.parse( str, function ( k, v ) { return k === \'\' ? v : new Big(v) } )\r\n// Returns an array of three Big numbers.</pre>\r\n\r\n\r\n\r\n    <h4 id="instance-properties">Properties</h4>\r\n    <p>\r\n      A Big number is an object with three properties:\r\n    </p>\r\n    <table>\r\n      <tr>\r\n        <th>Property</th>\r\n        <th>Description</th>\r\n        <th>Type</th>\r\n        <th>Value</th>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre" id="coefficient"><b>c</b></td>\r\n        <td>coefficient<sup>*</sup></td>\r\n        <td><i>number</i><code>[]</code></td>\r\n        <td> Array of single digits</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre" id="exponent"><b>e</b></td>\r\n        <td>exponent</td>\r\n        <td><i>number</i></td>\r\n        <td>Integer, -1e+6 to 1e+6 inclusive</td>\r\n      </tr>\r\n      <tr>\r\n        <td class="centre" id="sign"><b>s</b></td>\r\n        <td>sign</td>\r\n        <td><i>number</i></td>\r\n        <td>-1 or 1</td>\r\n      </tr>\r\n    </table>\r\n    <p><sup>*</sup>significand</p>\r\n    <p>\r\n      The value of a Big number is stored in a normalised decimal floating point\r\n      format which corresponds to the value\'s <code>toExponential</code> form,\r\n      with the decimal point to be positioned after the most significant\r\n      (left-most) digit of the coefficient.\r\n    </p>\r\n    <p>\r\n      Note that, as with Javascript numbers, the original exponent and\r\n      fractional trailing zeros are not preserved.\r\n    </p>\r\n    <pre>x = new Big(0.123)                 // \'0.123\'\r\nx.toExponential()                  // \'1.23e-1\'\r\nx.c                                // \'1,2,3\'\r\nx.e                                // -1\r\nx.s                                // 1\r\n\r\ny = new Number(-123.4567000e+2)    // \'-12345.67\'\r\ny.toExponential()                  // \'-1.234567e+4\'\r\nz = new Big(\'-123.4567000e+2\')     // \'-12345.67\'\r\nz.toExponential()                  // \'-1.234567e+4\'\r\nz.c                                // \'1,2,3,4,5,6,7\'\r\nz.e                                // 4\r\nz.s                                // -1</pre>\r\n\r\n\r\n    <p>\r\n      A Big number is mutable in the sense that the value of its properties can\r\n      be changed.<br>\r\n      For example, to rapidly shift a value by a power of 10:\r\n    </p>\r\n    <pre>\r\nx = new Big(\'1234.000\')    // \'1234\'\r\nx.toExponential()          // \'1.234e+3\'\r\nx.c                        // \'1,2,3,4\'\r\nx.e                        // 3\r\n\r\nx.e = -5\r\nx                          // \'0.00001234\'</pre>\r\n    <p>\r\n      If changing the coefficient array directly, which is not recommended, be\r\n      careful to avoid leading or trailing zeros (unless zero itself is being\r\n      represented).\r\n    </p>\r\n    <p>\r\n      Minus zero is a valid Big number value, but like Javascript numbers the\r\n      minus sign is not shown.\r\n    </p>\r\n    <pre>\r\nx = new Number(-0)         // 0\r\n1 / x == -Infinity         // true\r\n\r\ny = new Big(-0)            // \'0\'\r\ny.c                        // \'0\'    [0].toString()\r\ny.e                        // 0\r\ny.s                        // -1</pre>\r\n\r\n\r\n\r\n    <h4 id="Errors">Errors</h4>\r\n    <p>\r\n      The errors that are thrown are instances of <code>Error</code> with\r\n      <code>name</code> <code class="error">BigError</code> and message as\r\n      shown in the table below.\r\n    </p>\r\n    <table>\r\n      <tr>\r\n        <th>Method(s)</th>\r\n        <th>Error message</th>\r\n        <th>Thrown on</th>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <code>\r\n            Big<br>cmp<br>div<br>eq gt gte lt lte<br>minus<br>mod<br>plus\r\n            <br>times\r\n          </code>\r\n        </td>\r\n        <td><code>NaN</code></td>\r\n        <td>Invalid number</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="4"><code>div</code></td>\r\n        <td><code>&plusmn;Infinity</code></td>\r\n        <td>Division by zero</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>NaN</code></td>\r\n        <td>Division of zero by zero</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.DP!</td>\r\n        <td>Invalid Big.DP</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid Big.RM</td>\r\n      </tr>\r\n      <tr>\r\n        <td><code>mod</code></td>\r\n        <td><code>NaN</code></td>\r\n        <td>Modulo zero</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="3"><code>pow</code></td>\r\n        <td>!pow!</td>\r\n        <td>Invalid exponent</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.DP!</td>\r\n        <td>Invalid Big.DP</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid Big.RM</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="2"><code>round</code></td>\r\n        <td>!round!</td>\r\n        <td>Invalid dp</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid rm/Big.RM</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="3"><code>sqrt</code></td>\r\n        <td><code>NaN</code></td>\r\n        <td>Negative number</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.DP!</td>\r\n        <td>Invalid Big.DP</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid Big.RM</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="2"><code>toExponential</code></td>\r\n        <td>!toExp!</td>\r\n        <td>Invalid dp</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid Big.RM</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="2"><code>toFixed</code></td>\r\n        <td>!toFix!</td>\r\n        <td>Invalid dp</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid Big.RM</td>\r\n      </tr>\r\n      <tr>\r\n        <td rowspan="2"><code>toPrecision</code></td>\r\n        <td>!toPre!</td>\r\n        <td>Invalid sd</td>\r\n      </tr>\r\n      <tr>\r\n        <td>!Big.RM!</td>\r\n        <td>Invalid Big.RM</td>\r\n      </tr>\r\n    </table>\r\n\r\n\r\n\r\n    <h4 id="faq">FAQ</h4>\r\n    <h6>Why are trailing fractional zeros removed from Big numbers?</h6>\r\n    <p>\r\n      Many arbitrary-precision libraries retain trailing fractional zeros as\r\n      they can indicate the precision of a value. This can be useful but the\r\n      results of arithmetic operations can be misleading.\r\n    </p>\r\n    <pre>\r\nx = new BigDecimal("1.0")\r\ny = new BigDecimal("1.1000")\r\nz = x.add(y)                      // 2.1000\r\n\r\nx = new BigDecimal("1.20")\r\ny = new BigDecimal("3.45000")\r\nz = x.multiply(y)                 // 4.1400000\r\n</pre>\r\n    <p>\r\n      To specify the precision of a value is to imply that the value lies\r\n      within a certain range.\r\n    </p>\r\n    <p>\r\n      In the first example, <code>x</code> has a value of 1.0. The trailing zero\r\n      shows the precision of the value, implying that the value is in the range\r\n      0.95 to 1.05. Similarly, the precision indicated by the trailing zeros of\r\n      <code>y</code> indicates that the value is in the range 1.09995 to\r\n      1.10005. If we add the two lowest values in the ranges we get 0.95 +\r\n      1.09995 = 2.04995 and if we add the two highest values we get 1.05 +\r\n      1.10005 = 2.15005, so the range of the result of the addition implied by\r\n      the precision of its operands is 2.04995 to 2.15005. The result given by\r\n      BigDecimal of 2.1000 however, indicates that the value is in the range\r\n      2.09995 to 2.10005 and therefore the precision implied by its trailing\r\n      zeros is misleading.\r\n    </p>\r\n    <p>\r\n      In the second example, the true range is 4.122744 to 4.157256 yet the\r\n      BigDecimal answer of 4.1400000 indicates a range of 4.13999995 to\r\n      4.14000005. Again, the precision implied by the trailing zeros is\r\n      misleading.\r\n    </p>\r\n    <p>\r\n      This library, like binary floating-point and most calculators, does not\r\n      retain trailing fractional zeros.<br>\r\n      Instead, the <code>toExponential</code>, <code>toFixed</code> and\r\n      <code>toPrecision</code> methods enable trailing zeros to be added if and\r\n      when required.\r\n    </p>\r\n    <br>\r\n\r\n  </div>\r\n\r\n</body>\r\n</html>\r\n')}]);